
var SecureAjaxCall = (function (config) {

    //$.extend(_config, config);
    let Ajax = function (c) {
        $.ajax(c);
    };
    let extendConfig = function (c) {
        c = $.extend(
            {
                async: false,
                cache: false,
                type: 'POST',
                traditional: true,
                data: {},
                dataType: 'json',
                method: '',
                contentType: "application/x-www-form-urlencoded",
                url: '',
                beforeSend: function (xhr) { },
                success: function (data, textStatus, jqXHR) {
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    console.log(errorThrown);
                }
            }, c);
        return c;
    };
    return {
        PassObject: function (config) {
            //data needed to be stringify
            config = extendConfig(config);
            config.traditional = false;
            config.contentType = "application/json; charset=utf-8";
            config.beforeSend = function (xhr) {
                xhr.setRequestHeader("XSRF-TOKEN", $('input:hidden[name="__RequestVerificationToken"]').val());
            };
            Ajax(config);
        },
        Call: function (config) {
            config = extendConfig(config);
            config.data = $.extend({ __RequestVerificationToken: $('input[name="__RequestVerificationToken"]').val() }, config.data);
            Ajax(config);
        }
    };
})();

setTimeout(function () {
    $('#divActionMessage').hide(100);
}, 5000);
var MessageType = {
    Error: 'Error',
    Success: 'Success',
    Warning: 'Warning',
    Info: 'Info'
};
function ActionMessage(message, type) {
    let msg = `<div id="divActionMessage" class="act-message ${type}">
        <span>${message}
    </div>`;
    $('#divClientActionMessage').html(msg);
    setTimeout(function () {
        $('#divActionMessage').slideUp(300);
    }, 5000);
}

function CheckPermission(area, controller, action) {
    area = area.toLowerCase();
    controller = controller.toLowerCase();
    action = action.toLowerCase();
    var len = AllowPermission.length;
    for (var i = 0; i < len; i++) {
        var el = AllowPermission[i];
        if ((el.AreaName === area || el.AreaName === "all") && (el.Controller === controller || el.Controller === "all") && (el.ActionName === action || el.ActionName === "all")) {
            return true;
        }
    };
    return false;
}
function PushIntoURL(obj, title, holdPrev) {
    if (holdPrev) {
        var prevObj = GetSearchQuery();
        obj = $.extend(prevObj, obj);
    }
    var param = decodeURIComponent($.param(obj));
    var winLoc = window.location;
    var newURL = winLoc.origin + winLoc.pathname
    if (param !== '')
        newURL = newURL + '?' + param;
    window.history.pushState(obj, title, newURL);
}
function GetSearchQuery(caseSensitive = false) {
    var srch = window.location.search.substr(1).split('&');
    var sParam = {};
    srch.forEach(function (v, i) {
        var item = v.split('=');
        if (item.length > 1) {
            if (caseSensitive)
                sParam[item[0]] = decodeURIComponent(item[1]);
            else
                sParam[item[0].toLowerCase()] = decodeURIComponent(item[1]);
        }
    });
    return sParam;
} var fontawesomeClasses = ['fa-glass', 'fa-music', 'fa-search', 'fa-envelope-o', 'fa-heart', 'fa-star', 'fa-star-o', 'fa-user', 'fa-film', 'fa-th-large', 'fa-th', 'fa-th-list', 'fa-check', 'fa-remove', 'fa-close', 'fa-times', 'fa-search-plus', 'fa-search-minus', 'fa-power-off', 'fa-signal', 'fa-gear', 'fa-cog', 'fa-trash-o', 'fa-home', 'fa-file-o', 'fa-clock-o', 'fa-road', 'fa-download', 'fa-inbox', 'fa-play-circle-o', 'fa-rotate-right', 'fa-repeat', 'fa-refresh', 'fa-list-alt', 'fa-lock', 'fa-flag', 'fa-headphones', 'fa-volume-off', 'fa-volume-down', 'fa-volume-up', 'fa-qrcode', 'fa-barcode', 'fa-tag', 'fa-tags', 'fa-book', 'fa-bookmark', 'fa-print', 'fa-camera', 'fa-font', 'fa-bold', 'fa-italic', 'fa-text-height', 'fa-text-width', 'fa-align-left', 'fa-align-center', 'fa-align-right', 'fa-align-justify', 'fa-list', 'fa-dedent', 'fa-outdent', 'fa-indent', 'fa-video-camera', 'fa-photo', 'fa-image', 'fa-picture-o', 'fa-pencil', 'fa-map-marker', 'fa-adjust', 'fa-tint', 'fa-edit', 'fa-pencil-square-o', 'fa-share-square-o', 'fa-check-square-o', 'fa-arrows', 'fa-step-backward', 'fa-fast-backward', 'fa-backward', 'fa-play', 'fa-pause', 'fa-stop', 'fa-forward', 'fa-fast-forward', 'fa-step-forward', 'fa-eject', 'fa-chevron-left', 'fa-chevron-right', 'fa-plus-circle', 'fa-minus-circle', 'fa-times-circle', 'fa-check-circle', 'fa-question-circle', 'fa-info-circle', 'fa-crosshairs', 'fa-times-circle-o', 'fa-check-circle-o', 'fa-ban', 'fa-arrow-left', 'fa-arrow-right', 'fa-arrow-up', 'fa-arrow-down', 'fa-mail-forward', 'fa-share', 'fa-expand', 'fa-compress', 'fa-plus', 'fa-minus', 'fa-asterisk', 'fa-exclamation-circle', 'fa-gift', 'fa-leaf', 'fa-fire', 'fa-eye', 'fa-eye-slash', 'fa-warning', 'fa-exclamation-triangle', 'fa-plane', 'fa-calendar', 'fa-random', 'fa-comment', 'fa-magnet', 'fa-chevron-up', 'fa-chevron-down', 'fa-retweet', 'fa-shopping-cart', 'fa-folder', 'fa-folder-open', 'fa-arrows-v', 'fa-arrows-h', 'fa-bar-chart-o', 'fa-bar-chart', 'fa-twitter-square', 'fa-facebook-square', 'fa-camera-retro', 'fa-key', 'fa-gears', 'fa-cogs', 'fa-comments', 'fa-thumbs-o-up', 'fa-thumbs-o-down', 'fa-star-half', 'fa-heart-o', 'fa-sign-out', 'fa-linkedin-square', 'fa-thumb-tack', 'fa-external-link', 'fa-sign-in', 'fa-trophy', 'fa-github-square', 'fa-upload', 'fa-lemon-o', 'fa-phone', 'fa-square-o', 'fa-bookmark-o', 'fa-phone-square', 'fa-twitter', 'fa-facebook-f', 'fa-facebook', 'fa-github', 'fa-unlock', 'fa-credit-card', 'fa-feed', 'fa-rss', 'fa-hdd-o', 'fa-bullhorn', 'fa-bell', 'fa-certificate', 'fa-hand-o-right', 'fa-hand-o-left', 'fa-hand-o-up', 'fa-hand-o-down', 'fa-arrow-circle-left', 'fa-arrow-circle-right', 'fa-arrow-circle-up', 'fa-arrow-circle-down', 'fa-globe', 'fa-wrench', 'fa-tasks', 'fa-filter', 'fa-briefcase', 'fa-arrows-alt', 'fa-group', 'fa-users', 'fa-chain', 'fa-link', 'fa-cloud', 'fa-flask', 'fa-cut', 'fa-scissors', 'fa-copy', 'fa-files-o', 'fa-paperclip', 'fa-save', 'fa-floppy-o', 'fa-square', 'fa-navicon', 'fa-reorder', 'fa-bars', 'fa-list-ul', 'fa-list-ol', 'fa-strikethrough', 'fa-underline', 'fa-table', 'fa-magic', 'fa-truck', 'fa-pinterest', 'fa-pinterest-square', 'fa-google-plus-square', 'fa-google-plus', 'fa-money', 'fa-caret-down', 'fa-caret-up', 'fa-caret-left', 'fa-caret-right', 'fa-columns', 'fa-unsorted', 'fa-sort', 'fa-sort-down', 'fa-sort-desc', 'fa-sort-up', 'fa-sort-asc', 'fa-envelope', 'fa-linkedin', 'fa-rotate-left', 'fa-undo', 'fa-legal', 'fa-gavel', 'fa-dashboard', 'fa-tachometer', 'fa-comment-o', 'fa-comments-o', 'fa-flash', 'fa-bolt', 'fa-sitemap', 'fa-umbrella', 'fa-paste', 'fa-clipboard', 'fa-lightbulb-o', 'fa-exchange', 'fa-cloud-download', 'fa-cloud-upload', 'fa-user-md', 'fa-stethoscope', 'fa-suitcase', 'fa-bell-o', 'fa-coffee', 'fa-cutlery', 'fa-file-text-o', 'fa-building-o', 'fa-hospital-o', 'fa-ambulance', 'fa-medkit', 'fa-fighter-jet', 'fa-beer', 'fa-h-square', 'fa-plus-square', 'fa-angle-double-left', 'fa-angle-double-right', 'fa-angle-double-up', 'fa-angle-double-down', 'fa-angle-left', 'fa-angle-right', 'fa-angle-up', 'fa-angle-down', 'fa-desktop', 'fa-laptop', 'fa-tablet', 'fa-mobile-phone', 'fa-mobile', 'fa-circle-o', 'fa-quote-left', 'fa-quote-right', 'fa-spinner', 'fa-circle', 'fa-mail-reply', 'fa-reply', 'fa-github-alt', 'fa-folder-o', 'fa-folder-open-o', 'fa-smile-o', 'fa-frown-o', 'fa-meh-o', 'fa-gamepad', 'fa-keyboard-o', 'fa-flag-o', 'fa-flag-checkered', 'fa-terminal', 'fa-code', 'fa-mail-reply-all', 'fa-reply-all', 'fa-star-half-empty', 'fa-star-half-full', 'fa-star-half-o', 'fa-location-arrow', 'fa-crop', 'fa-code-fork', 'fa-unlink', 'fa-chain-broken', 'fa-question', 'fa-info', 'fa-exclamation', 'fa-superscript', 'fa-subscript', 'fa-eraser', 'fa-puzzle-piece', 'fa-microphone', 'fa-microphone-slash', 'fa-shield', 'fa-calendar-o', 'fa-fire-extinguisher', 'fa-rocket', 'fa-maxcdn', 'fa-chevron-circle-left', 'fa-chevron-circle-right', 'fa-chevron-circle-up', 'fa-chevron-circle-down', 'fa-anchor', 'fa-unlock-alt', 'fa-bullseye', 'fa-ellipsis-h', 'fa-ellipsis-v', 'fa-rss-square', 'fa-play-circle', 'fa-ticket', 'fa-minus-square', 'fa-minus-square-o', 'fa-level-up', 'fa-level-down', 'fa-check-square', 'fa-pencil-square', 'fa-external-link-square', 'fa-share-square', 'fa-compass', 'fa-toggle-down', 'fa-toggle-up', 'fa-toggle-right', 'fa-euro', 'fa-eur', 'fa-gbp', 'fa-dollar', 'fa-usd', 'fa-rupee', 'fa-inr', 'fa-cny', 'fa-rmb', 'fa-yen', 'fa-jpy', 'fa-ruble', 'fa-rouble', 'fa-rub', 'fa-won', 'fa-krw', 'fa-bitcoin', 'fa-btc', 'fa-file', 'fa-file-text', 'fa-sort-alpha-asc', 'fa-sort-alpha-desc', 'fa-sort-amount-asc', 'fa-sort-amount-desc', 'fa-sort-numeric-asc', 'fa-sort-numeric-desc', 'fa-thumbs-up', 'fa-thumbs-down', 'fa-youtube-square', 'fa-youtube', 'fa-xing', 'fa-xing-square', 'fa-youtube-play', 'fa-dropbox', 'fa-stack-overflow', 'fa-instagram', 'fa-flickr', 'fa-adn', 'fa-bitbucket', 'fa-bitbucket-square', 'fa-tumblr', 'fa-tumblr-square', 'fa-long-arrow-down', 'fa-long-arrow-up', 'fa-long-arrow-left', 'fa-long-arrow-right', 'fa-apple', 'fa-windows', 'fa-android', 'fa-linux', 'fa-dribbble', 'fa-skype', 'fa-foursquare', 'fa-trello', 'fa-female', 'fa-male', 'fa-gittip', 'fa-gratipay', 'fa-sun-o', 'fa-moon-o', 'fa-archive', 'fa-bug', 'fa-vk', 'fa-weibo', 'fa-renren', 'fa-pagelines', 'fa-stack-exchange', 'fa-toggle-left', 'fa-dot-circle-o', 'fa-wheelchair', 'fa-vimeo-square', 'fa-turkish-lira', 'fa-try', 'fa-plus-square-o', 'fa-space-shuttle', 'fa-slack', 'fa-envelope-square', 'fa-wordpress', 'fa-openid', 'fa-institution', 'fa-bank', 'fa-university', 'fa-mortar-board', 'fa-graduation-cap', 'fa-yahoo', 'fa-google', 'fa-reddit', 'fa-reddit-square', 'fa-stumbleupon-circle', 'fa-stumbleupon', 'fa-delicious', 'fa-digg', 'fa-pied-piper-pp', 'fa-pied-piper-alt', 'fa-drupal', 'fa-joomla', 'fa-language', 'fa-fax', 'fa-building', 'fa-child', 'fa-paw', 'fa-spoon', 'fa-cube', 'fa-cubes', 'fa-behance', 'fa-behance-square', 'fa-steam', 'fa-steam-square', 'fa-recycle', 'fa-automobile', 'fa-car', 'fa-cab', 'fa-taxi', 'fa-tree', 'fa-spotify', 'fa-deviantart', 'fa-soundcloud', 'fa-database', 'fa-file-pdf-o', 'fa-file-word-o', 'fa-file-excel-o', 'fa-file-powerpoint-o', 'fa-file-photo-o', 'fa-file-picture-o', 'fa-file-image-o', 'fa-file-zip-o', 'fa-file-archive-o', 'fa-file-sound-o', 'fa-file-audio-o', 'fa-file-movie-o', 'fa-file-video-o', 'fa-file-code-o', 'fa-vine', 'fa-codepen', 'fa-jsfiddle', 'fa-life-bouy', 'fa-life-buoy', 'fa-life-saver', 'fa-support', 'fa-life-ring', 'fa-circle-o-notch', 'fa-ra', 'fa-resistance', 'fa-rebel', 'fa-ge', 'fa-empire', 'fa-git-square', 'fa-git', 'fa-y-combinator-square', 'fa-yc-square', 'fa-hacker-news', 'fa-tencent-weibo', 'fa-qq', 'fa-wechat', 'fa-weixin', 'fa-send', 'fa-paper-plane', 'fa-send-o', 'fa-paper-plane-o', 'fa-history', 'fa-circle-thin', 'fa-header', 'fa-paragraph', 'fa-sliders', 'fa-share-alt', 'fa-share-alt-square', 'fa-bomb', 'fa-soccer-ball-o', 'fa-futbol-o', 'fa-tty', 'fa-binoculars', 'fa-plug', 'fa-slideshare', 'fa-twitch', 'fa-yelp', 'fa-newspaper-o', 'fa-wifi', 'fa-calculator', 'fa-paypal', 'fa-google-wallet', 'fa-cc-visa', 'fa-cc-mastercard', 'fa-cc-discover', 'fa-cc-amex', 'fa-cc-paypal', 'fa-cc-stripe', 'fa-bell-slash', 'fa-bell-slash-o', 'fa-trash', 'fa-copyright', 'fa-at', 'fa-eyedropper', 'fa-paint-brush', 'fa-birthday-cake', 'fa-area-chart', 'fa-pie-chart', 'fa-line-chart', 'fa-lastfm', 'fa-lastfm-square', 'fa-toggle-off', 'fa-toggle-on', 'fa-bicycle', 'fa-bus', 'fa-ioxhost', 'fa-angellist', 'fa-cc', 'fa-shekel', 'fa-sheqel', 'fa-ils', 'fa-meanpath', 'fa-buysellads', 'fa-connectdevelop', 'fa-dashcube', 'fa-forumbee', 'fa-leanpub', 'fa-sellsy', 'fa-shirtsinbulk', 'fa-simplybuilt', 'fa-skyatlas', 'fa-cart-plus', 'fa-cart-arrow-down', 'fa-diamond', 'fa-ship', 'fa-user-secret', 'fa-motorcycle', 'fa-street-view', 'fa-heartbeat', 'fa-venus', 'fa-mars', 'fa-mercury', 'fa-intersex', 'fa-transgender', 'fa-transgender-alt', 'fa-venus-double', 'fa-mars-double', 'fa-venus-mars', 'fa-mars-stroke', 'fa-mars-stroke-v', 'fa-mars-stroke-h', 'fa-neuter', 'fa-genderless', 'fa-facebook-official', 'fa-pinterest-p', 'fa-whatsapp', 'fa-server', 'fa-user-plus', 'fa-user-times', 'fa-hotel', 'fa-bed', 'fa-viacoin', 'fa-train', 'fa-subway', 'fa-medium', 'fa-yc', 'fa-y-combinator', 'fa-optin-monster', 'fa-opencart', 'fa-expeditedssl', 'fa-battery', 'fa-battery-full', 'fa-battery-three-quarters', 'fa-battery-half', 'fa-battery-quarter', 'fa-battery-empty', 'fa-mouse-pointer', 'fa-i-cursor', 'fa-object-group', 'fa-object-ungroup', 'fa-sticky-note', 'fa-sticky-note-o', 'fa-cc-jcb', 'fa-cc-diners-club', 'fa-clone', 'fa-balance-scale', 'fa-hourglass-o', 'fa-hourglass-start', 'fa-hourglass-half', 'fa-hourglass-end', 'fa-hourglass', 'fa-hand-grab-o', 'fa-hand-rock-o', 'fa-hand-stop-o', 'fa-hand-paper-o', 'fa-hand-scissors-o', 'fa-hand-lizard-o', 'fa-hand-spock-o', 'fa-hand-pointer-o', 'fa-hand-peace-o', 'fa-trademark', 'fa-registered', 'fa-creative-commons', 'fa-gg', 'fa-gg-circle', 'fa-tripadvisor', 'fa-odnoklassniki', 'fa-odnoklassniki-square', 'fa-get-pocket', 'fa-wikipedia-w', 'fa-safari', 'fa-chrome', 'fa-firefox', 'fa-opera', 'fa-internet-explorer', 'fa-tv', 'fa-television', 'fa-contao', 'fa-amazon', 'fa-calendar-plus-o', 'fa-calendar-minus-o', 'fa-calendar-times-o', 'fa-calendar-check-o', 'fa-industry', 'fa-map-pin', 'fa-map-signs', 'fa-map-o', 'fa-map', 'fa-commenting', 'fa-commenting-o', 'fa-houzz', 'fa-vimeo', 'fa-black-tie', 'fa-fonticons', 'fa-reddit-alien', 'fa-edge', 'fa-credit-card-alt', 'fa-codiepie', 'fa-modx', 'fa-fort-awesome', 'fa-usb', 'fa-product-hunt', 'fa-mixcloud', 'fa-scribd', 'fa-pause-circle', 'fa-pause-circle-o', 'fa-stop-circle', 'fa-stop-circle-o', 'fa-shopping-bag', 'fa-shopping-basket', 'fa-hashtag', 'fa-bluetooth', 'fa-bluetooth-b', 'fa-percent', 'fa-gitlab', 'fa-wpbeginner', 'fa-wpforms', 'fa-envira', 'fa-universal-access', 'fa-wheelchair-alt', 'fa-question-circle-o', 'fa-blind', 'fa-audio-description', 'fa-volume-control-phone', 'fa-braille', 'fa-assistive-listening-systems', 'fa-asl-interpreting', 'fa-deafness', 'fa-hard-of-hearing', 'fa-deaf', 'fa-glide', 'fa-glide-g', 'fa-signing', 'fa-sign-language', 'fa-low-vision', 'fa-viadeo', 'fa-viadeo-square', 'fa-snapchat', 'fa-snapchat-ghost', 'fa-snapchat-square', 'fa-pied-piper', 'fa-first-order', 'fa-yoast', 'fa-themeisle', 'fa-google-plus-circle', 'fa-google-plus-official', 'fa-fa', 'fa-font-awesome', 'fa-handshake-o', 'fa-envelope-open', 'fa-envelope-open-o', 'fa-linode', 'fa-address-book', 'fa-address-book-o', 'fa-vcard', 'fa-address-card', 'fa-vcard-o', 'fa-address-card-o', 'fa-user-circle', 'fa-user-circle-o', 'fa-user-o', 'fa-id-badge', 'fa-drivers-license', 'fa-id-card', 'fa-drivers-license-o', 'fa-id-card-o', 'fa-quora', 'fa-free-code-camp', 'fa-telegram', 'fa-thermometer', 'fa-thermometer-full', 'fa-thermometer-three-quarters', 'fa-thermometer-half', 'fa-thermometer-quarter', 'fa-thermometer-empty', 'fa-shower', 'fa-bathtub', 'fa-bath', 'fa-podcast', 'fa-window-maximize', 'fa-window-minimize', 'fa-window-restore', 'fa-times-rectangle', 'fa-window-close', 'fa-times-rectangle-o', 'fa-window-close-o', 'fa-bandcamp', 'fa-grav', 'fa-etsy', 'fa-imdb', 'fa-ravelry', 'fa-eercast', 'fa-microchip', 'fa-snowflake-o', 'fa-superpowers', 'fa-wpexplorer', 'fa-meetup',];/*DOM functions*/
function GeneralOptionDOM(optionClass, label, dataType, isdraggable, dragHandle, canDuplicate, duplicateClass, canPaste, pasteClass, showBurgerMenu, showstyle, styleLabel) {
    var optionDOM = '';
    //text to know the option
    if (typeof (showBurgerMenu) !== "undefined" && showBurgerMenu) {
        optionDOM += DOMCreate('i', '', 'fa fa-bars showhideColumns', '', []);
    }
    //optionDOM += DOMCreate('i', label, 'opt-name', '', ['title="option name"']);
    //paste option
    if (typeof (canPaste) !== "undefined" && canPaste)
        optionDOM += DOMCreate('i', 'Paste', 'inactivePaste ' + pasteClass, '', ['title="paste"']);
    //setting options
    optionDOM += DOMCreate('i', 'Settings', 'com-settings', '', ['title="' + label + ' settings"', 'data-type="' + dataType + '"']);
    //copy option
    if (typeof (canDuplicate) !== "undefined" && canDuplicate)
        optionDOM += DOMCreate('i', 'Duplicate', duplicateClass, '', ['title="duplicate"']);
    //setting options
    if (typeof (showstyle) !== "undefined" && showstyle) {
        var stylelbl = 'Style';
        if (typeof (styleLabel) !== "undefined") {
            stylelbl = styleLabel;
        }
        optionDOM += DOMCreate('i', stylelbl, 'com-style', '', ['title="' + stylelbl + ' settings"', 'data-type="' + dataType + '"']);
    }
    //delete  options
    optionDOM += DOMCreate('i', 'Delete', 'deletehelper', '', ['title="delete"']);
    //Wrap options in carries-options
    //drag option
    var tooglereplace = '';
    if (isdraggable)
        tooglereplace += DOMCreate('i', '', 'icon-icon-drag ' + dragHandle, '', ['title="drag"']);
    tooglereplace += label + DOMCreate('i', '', 'tooglesettings fa fa-bars');
    optionDOM = DOMCreate('div', tooglereplace, 'carrier-open-option', '') + DOMCreate('div', optionDOM, 'hide-element  carries-options ' + optionClass);
    return optionDOM;
}
function GeneralColOptionDOM(optionClass, label, dataType, isdraggable, dragHandle, canDuplicate, duplicateClass, canPaste, pasteClass) {
    var optionDOM = '';
    //text to know the option
    if (typeof (showBurgerMenu) !== "undefined") {
        optionDOM += DOMCreate('i', '', 'fa fa-bars showhideColumns', '', []);
    }
    //optionDOM += DOMCreate('i', label, 'opt-name', '', ['title="option name"']);
    //copy option
    if (typeof (canDuplicate) !== "undefined" && canDuplicate)
        optionDOM += DOMCreate('i', 'Copy Components', duplicateClass, '', ['title="duplicate"']);
    //paste option
    if (typeof (canPaste) !== "undefined" && canPaste)
        optionDOM += DOMCreate('i', 'Paste Components', 'inactivePaste ' + pasteClass, '', ['title="paste"']);
    //setting options
    optionDOM += DOMCreate('i', 'Settings', 'com-settings', '', ['title="' + label + ' settings"', 'data-type="' + dataType + '"']);
    //delete  options
    optionDOM += DOMCreate('i', 'Empty Column', 'deletehelper', '', ['title="delete"']);
    //Wrap options in carries-options
    //drag option
    var tooglereplace = '';
    if (isdraggable)
        tooglereplace += DOMCreate('i', '', 'icon-icon-drag ' + dragHandle, '', ['title="drag"']);
    tooglereplace += label + DOMCreate('i', '', 'fa fa-bars');
    optionDOM = DOMCreate('div', tooglereplace, 'carrier-open-option', '') + DOMCreate('div', optionDOM, 'hide-element  carries-options ' + optionClass);
    return optionDOM;
}

function SelectDOMCreate(selID, selClass, optionArray) {
    var selDOM = '<select';
    if (typeof (selID) !== 'undefined' && selID.length > 0) {
        selDOM += ' id="' + selID + '"';
    }
    if (selID !== 'undefined') {
        selDOM += ' class="' + selClass + '"';
    }
    selDOM += '>';
    if (typeof (optionArray) !== 'undefined') {
        var optionArrayLen = optionArray.length;
        for (var i = 0; i < optionArrayLen; i++) {
            selDOM += '<option value="' + optionArray[i][0] + '">' + optionArray[i][1] + '</option>';
        }
    }
    selDOM += '</select>';
    return selDOM;
}
function FieldRowDOMCreate(data) {
    return '<div class="field-row">' + data + '</div>';
}
function FieldRowDOMCreateCol100(data) {
    return '<div class="field-row stElWrap col100">' + data + '</div>';
}
function FieldRowDOMCreateCol90_10(data) {
    return '<div class="field-row stElWrap col90-10">' + data + '</div>';
}
function FieldRowDOMCreateCol80_20(data) {
    return '<div class="field-row stElWrap col80-20">' + data + '</div>';
}
function FieldRowDOMCreateCol70_30(data) {
    return '<div class="field-row stElWrap col70-30">' + data + '</div>';
}
function FieldRowDOMCreateCol50_50(data) {
    return '<div class="field-row stElWrap col50-50">' + data + '</div>';
}

function CreateSliderDOM(sliderID, sliderHandlerID, label) {
    var sliderDOM = '';
    if (typeof (sliderHandlerID) !== 'undefined' && typeof (sliderID) !== 'undefined' && sliderID.length > 0 && sliderHandlerID.length > 0) {
        sliderDOM = DOMCreate('div', '0', 'ui-slider-handle', sliderHandlerID, ['title ="' + label + '"']);
        sliderDOM = DOMCreate('div', sliderDOM, '', sliderID);
        sliderDOM = DOMCreate('span', sliderDOM, 'range__slider fCol');
        sliderDOM = FieldRowDOMCreateCol100(sliderDOM);
    }
    return sliderDOM;
}
function CreateSliderWithColorDOM(sliderID, sliderHandlerID, label, colorID, colorClass) {
    var sliderDOM = '';
    if (typeof (sliderHandlerID) !== 'undefined' && typeof (sliderID) !== 'undefined' && sliderID.length > 0 && sliderHandlerID.length > 0) {
        sliderDOM = DOMCreate('div', '0', 'ui-slider-handle', sliderHandlerID, ['title ="' + label + '"']);
        sliderDOM = DOMCreate('div', sliderDOM, '', sliderID);
        sliderDOM = DOMCreate('span', sliderDOM, 'range__slider fCol') + DOMCreate('span', '', 'color-picker-holder fCol Tx-A-r ' + colorClass, colorID);
        sliderDOM = FieldRowDOMCreateCol90_10(sliderDOM);
    }
    return sliderDOM;
}
function CreateColorPickerDOM(label, colorID, colorClass) {
    var clrDOM = '';
    if (typeof (colorID) !== 'undefined' && typeof (colorClass)) {
        clrDOM = DOMCreate('span', '', 'color-picker-holder ' + colorClass, colorID);
        clrDOM = DOMCreate('label', label, 'fCol') + DOMCreate('div', clrDOM, 'fCol TxAl-r');
        clrDOM = FieldRowDOMCreateCol50_50(clrDOM);
    }
    return clrDOM;
}
function CreateCheckboxDOM(label, chkID, chkCLass) {
    var chkDOM = '';
    if (typeof (chkID) !== 'undefined' && typeof (chkCLass)) {
        chkDOM = ' <input id="' + chkID + '" class="' + chkCLass + '" type="checkbox" />';
        chkDOM += '<label for="' + chkID + '" class="tgl_slider"></label>';
        chkDOM = DOMCreate('label', label, 'fCol') + DOMCreate('div', DOMCreate('span', chkDOM, 'toggle_btn'), 'fCol TxAl-r');
        chkDOM = FieldRowDOMCreateCol50_50(chkDOM);
    }
    return chkDOM;
} var rowOption = GeneralOptionDOM('row-options', 'Row', 'row', true, 'dragRow', true, 'copyRow', false, '', false, true, 'Manage Columns');
var textOption = `<div class="SetHdlr">
    <span class="stng">
        <i class="cb-stng" title="Text settings"></i>
        <ul class="setDrp no_txt">
            <li class="com-settings" data-type="text">
                <span class="text-wrp">Text Settings</span>
                <i class="cb-mxr" title="Text Settings"></i>
            </li>
            <li class="s-style" data-type="text">
                <span class="text-wrp">Style</span>
                <i class="cb-stl" title="Style"></i>
            </li>
            <li class="deletehelper delete_icon">
                <i class="cb-del" title="Delete"></i>
            </li>
        </ul>
    </span>
    <span class="sortComponent"><i class="cb-drg" title="Drag Up and down"></i></span>
</div>`;
//var textOption = GeneralOptionDOM('text-options', 'Text', 'text', true, 'sortComponent');
var colortextOption = GeneralOptionDOM('colortext-options', 'Text', 'color text', true, 'sortComponent');
var imageOption = GeneralOptionDOM('img-options', 'Image', 'image', true, 'sortComponent');
var fontOption = GeneralOptionDOM('font-options', 'Icon', 'paragraph', true, 'sortComponent');
var holderOption = GeneralOptionDOM('holder-options', 'Holder', 'holder', true, 'sortComponent', true, 'duplicateHolder', false, '', false, '');
//var colOption = GeneralColOptionDOM('col-options', 'Col', 'column', false, '', true, 'copyData', true, 'pasteData', 'showBurgerMenu');
var rowSeparatorOption = GeneralOptionDOM('seperator-options', 'Separator', 'row separator', true, 'dragRow');
var underlineOption = GeneralOptionDOM('underline-options', 'UnderLine', 'row separator', true, 'sortComponent');
var fontIconOption = GeneralOptionDOM('font-icon-options', 'icon', 'font icon', true, 'sortComponent', false, '', false, '', false, true, 'Manage Style');
var linkbuttonIcon = GeneralOptionDOM('button-options', 'link', 'button', true, 'sortComponent', false, '', false, '', false, true, 'Manage Style');
var divEnd = DOMCreateEnd('div');
var spanEnd = '</span>';
var rowInitStart = '<div class="editor-row sfCol_100">';
var rowInitEnd = '</div>';
var divHolderStart = '<div class="editor-component">';
var rawImage = divHolderStart + '<img src="' + webbuildermodulepath + '/img/def5.jpg" style="width:100%" class="editor-image"/>' + divEnd;
var rawParaGraph = divHolderStart + '<p class="editor-para">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</p>' + divEnd;
var rawHeading = divHolderStart + '<h1 class="editor-heading">Lorem Ipsum<h1>' + divEnd;
var absoluteBar = '<div class="resizebar"></resizebar>';
var noElement = '<div class="noElement"><span class="startnew">Drag a row here</span></div>';
var noColumnElem = '<div class="noColumn">Create column<i class="fa fa-plus" aria-hidden="true"></i></div>';

var columnCreateDOM = '<div class="column-empty">';
columnCreateDOM += '<h4>This is ROW</h4>';
columnCreateDOM += '<p>You can choose given column setup inside ROW or you can create by your own</p>';
columnCreateDOM += '<span class="col-select">';
columnCreateDOM += '<span><img class="imgCreateCol" data-col="1" src="' + webbuildermodulepath + '/img/col1.png"><span>1 column</span></span>';
columnCreateDOM += '<span><img class="imgCreateCol" data-col="2" src="' + webbuildermodulepath + '/img/col2.png"><span>2 columns</span></span>';
columnCreateDOM += '<span><img class="imgCreateCol" data-col="3" src="' + webbuildermodulepath + '/img/col3.png"><span>3 columns</span></span>';
columnCreateDOM += '<span><img class="imgCreateCol" data-col="4" src="' + webbuildermodulepath + '/img/col4.png"><span>4 columns</span></span>';
//columnCreateDOM += '</span>';
columnCreateDOM += spanEnd;
columnCreateDOM += '<div class="clearfix set-custom-col">';
columnCreateDOM += '<label>Set Custom Column</label>';
columnCreateDOM += '<span class="value">';
columnCreateDOM += '<input type="text" class="txtColumNo"> Column(s)';
columnCreateDOM += '<span class="sfCreateRow sfBtn smlbtn-succ icon-icon-tick">Create</span>';
columnCreateDOM += spanEnd;
columnCreateDOM += divEnd;
columnCreateDOM += divEnd;
var rowBasicDOM = '';
var onlineComponentArr = [];
var sageFrameFakeURL = 'fakeHostURL';
var defaultColor = 'rgb(221, 221, 221)';
var blackColor = "#000";
var dragcomponetwidth = '2';
var dragComponetWidth = dragcomponetwidth + 'px';
var fontCollectionBasics = {
    "montserrat": {
        "Text": "Montserrat",
        "weight": [100, 200, 300, 400, 500, 600, 700, 800]
    },
    "opensans": {
        "Text": "Open Sans",
        "weight": [300, 400, 600, 700, 800]
    },
    "rubik": {
        "Text": "Rubik",
        "weight": [300, 400, 500, 700, 900]
    },
    "quicksand": {
        "Text": "Quick Sand",
        "weight": [300, 400, 500, 700]
    },
    "robotoslab": {
        "Text": "Roboto Slab",
        "weight": [100, 200, 400, 700]
    },
    "poppins": {
        "Text": "Poppins",
        "weight": [100, 200, 300, 400, 500, 600, 700, 800, 900]
    },
    "raleway": {
        "Text": "Raleway",
        "weight": [100, 200, 300, 400, 500, 600, 700, 800, 900]
    },
    "oswald": {
        "Text": "Oswald",
        "weight": [200, 300, 400, 500, 600, 700]
    },
    "lato": {
        "Text": "lato",
        "weight": [100, 300, 500, 700, 900]
    },
    "playfair": {
        "Text": "Playfair",
        "weight": [400, 700, 900]
    },
    "sourcesans": {
        "Text": "sourcesans",
        "weight": [200, 300, 400, 600, 700, 900]
    },
    "merriweather": {
        "Text": "Merriweather",
        "weight": [300, 400, 700, 900]
    },

};
var fontCollectionStyling = {
    "kaushan": {
        "Text": "Kaushan",
        "weight": [0]
    },
    "prata": {
        "Text": "Prata",
        "weight": [0]
    },
    "cookie": {
        "Text": "Cookie",
        "weight": [0]
    },
    "abrilfatface": {
        "Text": "Abril Fatface",
        "weight": [0]
    },
    "lobster": {
        "Text": "Lobster",
        "weight": [0]
    },
    "satisfy": {
        "Text": "Satisfy",
        "weight": [0]
    }
};
var marginSliderList = [];
var paddingSliderList = [];
var borderSliderList = [];
var borderHoverSliderList = [];
var boxRadiusSliderList = [];
var boxShadowSliderList = [];
var boxShadowEffectSliderList = [];
var hoverEffect = {
    "bg": "rgba(204, 204, 204, 0)",
    "font": "#000",
    "box": {
        "on": "off",
        "hl": "0px",
        "vl": "1px",
        "br": "5px",
        "c": "#000",
        "i": "false",
    },
    "border": {
        "on": "none",
        "top": "0",
        "right": "0",
        "bottom": "0",
        "left": "0",
        "tc": "#000",
        "rc": "#000",
        "bc": "#000",
        "lc": "#000"
    },
    "zoom": "10",
    "delay": 0
};
var CompenentCreateDOM = '<div class="column-data-empty">';
CompenentCreateDOM += '<h4>This is Column</h4>';
CompenentCreateDOM += '<p>You can Drag and drop Components here</p>';
CompenentCreateDOM += divEnd;
let DropComponent = `<div class="column-data-empty">
                                <h4>This is Container</h4>
                                <p>You can Drag and drop Components here</p>
                         </div>`;
var minFontSize = 1;
var maxFontsize = 1080;
var minImagesize = 1;
var maxImagesize = 1080;
var extentComponent = {};
var option =
    `<div class="setting__handler">
    <span class="settings">
        <i class="fas fa-cog"></i>
        <ul class="setting__drop--menu">
            <li><span class="text-wrp">Settings</span><i class="fas fa-sliders-h" title="Settings"></i></li>
            <li><span class="text-wrp">Background</span> <i class="far fa-edit" title="Styles"></i></li>
            <li class="delete_icon"><span class="text-wrp">Delete</span><i class="far fa-trash-alt" title="Delete"></i></li>
        </ul>
    </span>
</div>`;
//addded
var colOption = `<div class="SetHdlr">
                <span class="stng">
                    <i class="cb-stng"></i>
                    <ul class="setDrp no_txt">
                      <li class ="com-settings" data-type="column"><span class ="text-wrp">Settings</span><i class="cb-mxr" title="Settings"></i></li>
                        <li class ="s-style" data-type="column"><span class ="text-wrp">Style</span><i class="cb-stl" title="Styles"></i></li>
                        <li class ="copyData"><span class ="text-wrp">Copy</span><i class="cb-cpy" title="copy data"></i></li>
                        <li class ="pasteData"><span class ="text-wrp">Copy</span><i class="cb-paste" title="paste data"></i></li>
                        <li class ="holder-bucket"><span class ="text-wrp">Add to Bucket</span><i class="cb-bucket add-to-bucket bucketCol" title="Add To Bucket"></i></li>
                        <li class ="delete_icon deletehelper"><span class ="text-wrp">Delete</span><i class="cb-del deletehelper" title="Delete"></i></li>
                    </ul>
                </span>
            </div>`;
var $activeDOM = $('.activeSettings');
let easyMessageList = {
    "reloadpage": "Changes you made may not be saved. Click Cancel and save the changes",
    "logout": "Did you save your data ? Do you want to Logout?",
    "deletehelper": "Are you sure you want to delete?",
    "publish": " Do you want to publish the site? This will update your live site.",
    "publishtitle": "Publish",
    "savetitle": "Save and Publish",
    "saveandpublish": " Your site is automatically saved. Click on Yes if you also want to update and publish your site instantly.",
    "underconstruction": "Are you sure you want to set site Under Construction ?",
    "underconstructiontitle": "Under Construction",
    "updatecomponent": "Updating component may take a while. Are you sure you want to proceed ?",
    "updatecomponenttitle": "Update Component",
    "emptycolumn": "Do you want to empty column ?",
    "message": "message",
    "themeinstall": "Your current site will all be changed by this Site. You cannot revert the lost data. Do you want to change? ",
    "themeinstalltitle": "Site Install Confirm",
    "themewaiting": "Your theme is being installed. Please have some patience.",
    "componentwaiting": "Your component is being installed. Please have some patience.",
    "componentSettingNotexists": "It seems like component is either renamed or deleted. "
};
var staticDOMs = {
    divbackcolorchoose: '<div class="field-row stElWrap col50-50" id="divBackColorChoose"><label class="fCol">Background Color</label><div class="fCol TxAl-r"><span class="color-picker-holder chooseBGColors selected" id="chooseColorColBG" style="background-color:rgba(247, 247, 247,.8);color:rgb(34, 34, 34);"></span></div></div>',
    //divbackimagechoose: '<div class="field-row stElWrap col100"><div class="img-preview"><img id="RowBGImageSrc" src="/modules/webbuilder/img/tiger.jpg" class="imageBG"></div><span id="RowBGImage" class="change_image">Change Image</span></div><div class="field-row stElWrap col50-50"><label class="fCol">Background Style</label><div class="fCol TxAl-r"><span class="select__box"><select id="bgImageEffect"><option value="background-effect-size-contain">None</option><option value="background-effect-image-parallax">Parallax</option><option value="background-effect-size-cover">Cover</option></select></span></div></div><div class="field-row stElWrap col50-50 setting__has--child"><label class="fCol">Shaded Layer</label><div class="fCol TxAl-r"><span class="toggle_btn"><input type="checkbox" id="shadedLayerActive" name="toggleButton"><label for="toggleButton" class="tgl_slider"></label></span></div></div><div class="child__setting--wrap" id="divPickShaded" style="display: none;"><div class="field-row stElWrap col50-50"><label class="fCol">Layer Color</label><div class="fCol TxAl-r"><span class="color-picker-holder chooseBGColors selected" id="chooseColorShadedCol" style="background-color:rgba(247, 247, 247,.8);color:rgb(34, 34, 34);"></span></div></div></div>',
    divbackimagechoose: '<div class="field-row stElWrap col100"><div class="img-preview"><img id="RowBGImageSrc" src="/modules/webbuilder/img/tiger.jpg" class="imageBG"></div><span id="RowBGImage" class="change_image">Change Image</span></div><div class="field-row stElWrap col50-50"><label class="fCol">Background Style</label><div class="fCol TxAl-r"><span class="select__box"><select id="bgImageEffect"><option value="background-effect-size-contain">None</option><option value="background-effect-image-parallax">Parallax</option><option value="background-effect-size-cover">Cover</option></select></span></div></div><div class="field-row stElWrap col50-50" id="divBackgroundPositionTab" style="display:none;"><label class="fCol">Background Position</label><div class="fCol TxAl-r"><span class="select__box"><select id="bgImagePosition"><option value="bgp-p-left">left</option><option value="bgp-p-center">center</option><option value="bgp-p-right">right</option></select></span></div></div><div class="field-row stElWrap col50-50" id="divBackgroundPositionCover" style="display:none;"><label class="fCol">Background Position</label><div class="fCol TxAl-r"><span class="select__box"><select id="bgImageCoverPosition"><option value="bgp-c-left-top">left top</option><option value="bgp-c-left-center">left center</option><option value="bgp-c-left-bottom">left bottom</option><option value="bgp-c-right-top">right top</option><option value="bgp-c-right-center">right center</option><option value="bgp-c-right-bottom">right bottom</option><option value="bgp-c-center-top">center top</option><option value="bgp-c-center-center">center center</option><option value="bgp-c-center-bottom">center bottom</option></select></span></div></div><div class="field-row stElWrap col50-50 setting__has--child"><label class="fCol">Shaded Layer</label><div class="fCol TxAl-r"><span class="toggle_btn"><input type="checkbox" id="shadedLayerActive" name="toggleButton"><label for="toggleButton" class="tgl_slider"></label></span></div></div><div class="child__setting--wrap" id="divPickShaded" style="display: none;"><div class="field-row stElWrap col50-50"><label class="fCol">Layer Color</label><div class="fCol TxAl-r"><span class="color-picker-holder chooseBGColors selected" id="chooseColorShadedCol" style="background-color:rgba(247, 247, 247,.8);color:rgb(34, 34, 34);"></span></div></div></div>',
    //backgroundtab: '<div class="field-row"><div class="field-row stElWrap col50-50"><label class="fCol">Background</label><div class="fCol TxAl-r"><span class="select__box"><select id="selBackround"><option value="none">None</option><option value="color">Color</option><option value="image">Image</option></select></span></div></div><div class="field-row stElWrap col50-50" id="divBackColorChoose" style="display: none;"><label class="fCol">Background Color</label><div class="fCol TxAl-r"><span class="color-picker-holder chooseBGColors selected" id="chooseColorColBG" style="background-color:rgba(247, 247, 247,.8);color:rgb(34, 34, 34);"></span></div></div><div class="hidden-div field-row" id="divBackImageChoose" style="display: none;"><div class="field-row stElWrap col100"><div class="img-preview"><img id="RowBGImageSrc" src="/modules/webbuilder/img/tiger.jpg" class="imageBG"></div><span id="RowBGImage" class="change_image">Change Image</span></div><div class="field-row stElWrap col50-50"><label class="fCol">Background Style</label><div class="fCol TxAl-r"><span class="select__box"><select id="bgImageEffect"><option value="background-effect-size-contain">None</option><option value="background-effect-image-parallax">Parallax</option><option value="background-effect-size-cover">Cover</option></select></span></div></div><div class="field-row stElWrap col50-50 setting__has--child"><label class="fCol">Shaded Layer</label><div class="fCol TxAl-r"><span class="toggle_btn"><input type="checkbox" id="shadedLayerActive" name="toggleButton"><label for="toggleButton" class="tgl_slider"></label></span></div></div><div class="child__setting--wrap" id="divPickShaded" style="display: none;"><div class="field-row stElWrap col50-50"><label class="fCol">Layer Color</label><div class="fCol TxAl-r"><span class="color-picker-holder chooseBGColors selected" id="chooseColorShadedCol" style="background-color:rgba(247, 247, 247,.8);color:rgb(34, 34, 34);"></span></div></div></div></div></div>',
    backgroundtab: '<div class="field-row"><div class="field-row stElWrap col50-50"><label class="fCol">Background</label><div class="fCol TxAl-r"><span class="select__box"><select id="selBackround"><option value="none">None</option><option value="color">Color</option><option value="image">Image</option></select></span></div></div><div class="field-row stElWrap col50-50" id="divBackColorChoose" style="display: none;"><label class="fCol">Background Color</label><div class="fCol TxAl-r"><span class="color-picker-holder chooseBGColors selected" id="chooseColorColBG" style="background-color:rgba(247, 247, 247,.8);color:rgb(34, 34, 34);"></span></div></div><div class="hidden-div field-row" id="divBackImageChoose" style="display: none;"><div class="field-row stElWrap col100"><div class="img-preview"><img id="RowBGImageSrc" src="/modules/webbuilder/img/tiger.jpg" class="imageBG"></div><span id="RowBGImage" class="change_image">Change Image</span></div><div class="field-row stElWrap col50-50"><label class="fCol">Background Style</label><div class="fCol TxAl-r"><span class="select__box"><select id="bgImageEffect"><option value="background-effect-size-contain">None</option><option value="background-effect-image-parallax">Parallax</option><option value="background-effect-size-cover">Cover</option></select></span></div></div><div class="field-row stElWrap col50-50" id="divBackgroundPositionTab" style="display:none;"><label class="fCol">Background Position</label><div class="fCol TxAl-r"><span class="select__box"><select id="bgImagePosition"><option value="bgp-p-left">left</option><option value="bgp-p-center">center</option><option value="bgp-p-right">right</option></select></span></div></div><div class="field-row stElWrap col50-50" id="divBackgroundPositionCover" style="display:none;"><label class="fCol">Background Position</label><div class="fCol TxAl-r"><span class="select__box"><select id="bgImageCoverPosition"><option value="bgp-c-left-top">left top</option><option value="bgp-c-left-center">left center</option><option value="bgp-c-left-bottom">left bottom</option><option value="bgp-c-right-top">right top</option><option value="bgp-c-right-center">right center</option><option value="bgp-c-right-bottom">right bottom</option><option value="bgp-c-center-top">center top</option><option value="bgp-c-center-center">center center</option><option value="bgp-c-center-bottom">center bottom</option></select></span></div></div><div class="field-row stElWrap col50-50 setting__has--child"><label class="fCol">Shaded Layer</label><div class="fCol TxAl-r"><span class="toggle_btn"><input type="checkbox" id="shadedLayerActive" name="toggleButton"><label for="toggleButton" class="tgl_slider"></label></span></div></div><div class="child__setting--wrap" id="divPickShaded" style="display: none;"><div class="field-row stElWrap col50-50"><label class="fCol">Layer Color</label><div class="fCol TxAl-r"><span class="color-picker-holder chooseBGColors selected" id="chooseColorShadedCol" style="background-color:rgba(247, 247, 247,.8);color:rgb(34, 34, 34);"></span></div></div></div></div></div>',
    txtbasictab: '<div class="field-row"><div class="field-row stElWrap col100" id="textSet_width"><span class="range__slider fCol"><div id="fontWidthSlider"><div id="fontWidthHandle" class="ui-slider-handle" title="Width">0</div></div></span></div><div class="field-row stElWrap col100" id="textSet_size"><span class="range__slider fCol"><div id="fontsizeSlider"><div id="fontsizeHandle" class="ui-slider-handle" title="Font Size">0</div></div></span></div><div class="field-row stElWrap col100" id="textSet_lineheight"><span class="range__slider fCol"><div id="lineheightslider"><div id="lineheighthandle" class="ui-slider-handle" title="Line Height">0</div></div></span></div><div class="field-row stElWrap col100" id="textSet_spacing"><span class="range__slider fCol"><div id="letterSpacingSlider"><div id="letterSpacingHandle" class="ui-slider-handle" title="Letter Spacing">0</div></div></span></div><div class="field-row stElWrap col50-50" id="textSet_style"><label class="fCol">Text Style </label><span id="textStyle" class="textSWrapper"><i class="fa fa-italic" data-name="FsI" aria-hidden="true"></i><i class="fa fa-underline" data-name="TdU" aria-hidden="true"></i><i class="fa fa-strikethrough" data-name="TdS" aria-hidden="true"></i></span></div><div class="field-row stElWrap col50-50" id="textSet_heading"><label class="fCol">Heading Tag</label><span class="fCol TxAl-r select__box"><select id="textHeading"></select></span></div><div class="field-row stElWrap col50-50" id="textSet_transform"><label class="fCol">Text Transform </label><span class="fCol TxAl-r select__box"><select id="textTransform"><option value="">None</option><option value="txU">UPPERCASE</option><option value="txL">lowercase</option><option value="txC">Captitalize</option></select></span></div><div class="field-row stElWrap col50-50" id="textSet_family"><label class="fCol">Font Family </label><span class="fCol TxAl-r select__box"><select id="fontfamily"><option value="">Coming soon...</option></select></span></div><div class="field-row stElWrap col50-50" id="textSet_weight"><label class="fCol">Font Weight </label><span class="fCol TxAl-r select__box"><select id="fontWeight"><option value="">Coming soon...</option></select></span></div><div class="field-row stElWrap col50-50" id="textSet_color"><label class="fCol">Font Color </label><span class="fCol TxAl-r"><span class="color-picker-holder chooseColor" id="chooseFontColor"></span></span></div></div>',
    scrolltotop: '<div class="scrolltotop" id="ScroolToTop"><div class="ScrollToTop editor-component"><div class="scrollDOM"><i class="fa fa-arrow-up" aria-hidden="true"></i></div></div></div>',
    siteheadertab: '<div data-type="siteheader" data-headertype="lLogo" class="cRow sfCol_100 Pr-0 Pl-0 TxAl-l Pt-20 Pb-20" data-backgroundcolor="color" data-backgroundimage="" style="color: rgb(34, 34, 34); background-color: rgba(255, 255, 255, 0.506);" data-mbgcolor="rgba(46, 90, 232,1)" data-mcolor="rgba(255, 255, 255,0.79)"><div class="SetHdlr"><span class="stng"><i class="cb-stng" title="Settings"></i><ul class="setDrp no_txt" style="display: none;"><li class="com-settings" data-type="siteheader" title="setting"><span class="text-wrp">settings</span><i class="cb-mxr" title="setting"></i></li><li class="s-style" data-type="siteheader" title="style"><span class="text-wrp">style</span><i class="cb-stl" title="style"></i></li></ul></span></div><div class="editor-row-container container-extralarge"><div class="cGrid "><div class="editor-col ui-sortable ui-droppable cCol sfCol_20" data-type="column"><div class="editor-component sfCol_100 tsfCol_100 msfCol_100 Dib" data-type="Image Link"><div class="SetHdlr no-drag"><span class="stng"><i class="cb-stng" title="Settings"></i><ul class="setDrp no_txt"><li class="com-settings" data-type="Image Link"><span class="text-wrp">Settings</span><i class="cb-mxr" title="Settings"></i></li><li class="s-style" data-type="Image Link"><span class="text-wrp">Style</span><i class="cb-stl" title="Styles"></i></li><li class="image-settings" data-type="image"><span class="text-wrp">Change Image</span><i class="cb-img" title="Change Image"></i></li></ul></span></div><a><img id="headerLogo" src="/cbuilderassets/img/logo.png" class="editor-image sfCol_100 tsfCol_100 msfCol_100" data-stickylogo="/cbuilderassets/img/logo2.png"></a></div></div><div data-type="column" style="display: block;" class="editor-col cCol ui-state-default ui-sortable ui-droppable sfCol_80 msty-tred"><div class="editor-component menuHeader sfCol_100 text-align-right Pt-0 Pr-0 Pb-0 Pl-0 TxAl-r activeSetting  mDn tDn" data-backgroundcolor="color" data-backgroundimage="" style="float:left; background-color: rgba(143, 170, 211, 0); color: rgb(34, 34, 34);" data-mcolor="rgba(0, 0, 0,1)" data-mbgcolor="rgba(255, 255, 255,1)" data-type="menu"><div class="SetHdlr no-drag"><span class="stng"><i class="cb-stng" title="MenuSetings"></i><ul class="setDrp no_txt" style="display: none;"><li class="com-settings" data-type="menu" data-menutype="1" title="menu"><span class="text-wrp">menu</span><i class="cb-menu" title="menu"></i></li><li class="com-settings" data-type="menupages" title="pages"><span class="text-wrp">pages</span><i class="cb-add-page" title="pages"></i></li></ul></span></div><nav class="editor-com-nav nav-style-fill" data-active="mutiplepage"><ul class="eb-menu sfDropdown clearfix sf-js-enabled" style="" data-textcolor="rgba(90, 90, 90,1)" data-navhamtype="ham-right" data-navlinkbgcol="rgba(46, 90, 232,1)"></ul><ul class="onepagemenu sfDropdown clearfix sf-js-enabled" style="display: none;" data-textcolor="rgba(54, 58, 63,1)"></ul></nav><span class="plusBtn"><i class="fa fa-plus-circle"></i></span></div><div id="menuholder" class="editor-component sfFixed holder sfCol_100 tsfCol_100 tDib msfCol_100"  data-type="holder" style="float:left;"><div class="SetHdlr no-drag"><span class="stng"><i class="cb-stng" title="Settings"></i><ul class="setDrp no_txt"><li class="com-settings" data-type="holder"><span class="text-wrp">Settings</span><i class="cb-mxr" title="Settings"></i></li><li class="s-style" data-type="holder"><span class="text-wrp">Style</span><i class="cb-stl" title="Style"></i></li></ul></span></div><div class="editor-col ui-state-default sfFixed sfCol_100 ui-sortable ui-droppable"></div></div></div><div class="editor-col cCol ui-state-default ui-sortable ui-droppable sfCol_80 msty-ham ham-right Dn tDb mDb" data-type="column" style=""><div class="res-menu-trigger"><span></span><span></span><span></span></div><div class="editor-component menuHeader sfCol_100 text-align-right TxAl-l Pt-20 Pr-20 Pb-20 Pl-20" data-backgroundcolor="color" data-backgroundimage="" style="background-color: rgb(231, 231, 231); color: rgb(34, 34, 34);" data-mcolor="rgba(0, 0, 0,1)" data-mbgcolor="rgba(255, 255, 255,1)" data-type="menu"><div class="SetHdlr no-drag"><span class="stng"><i class="cb-stng" title="MenuSetings"></i><ul class="setDrp no_txt" style="display: none;"><li class="com-settings" data-type="menu" data-menutype="1" title="menu"><span class="text-wrp">menu</span><i class="cb-menu" title="menu"></i></li><li class="com-settings" data-type="menupages" title="pages"><span class="text-wrp">pages</span><i class="cb-add-page" title="pages"></i></li></ul></span></div><nav class="editor-com-nav nav-style-fill" data-active="mutiplepage"><ul class="eb-menu sfDropdown clearfix sf-js-enabled" style="" data-textcolor="rgba(54, 58, 63,1)" data-navhamtype="ham-right"></ul><ul class="onepagemenu sfDropdown clearfix sf-js-enabled" style="display: none;" data-textcolor="rgba(54, 58, 63,1)"></ul></nav><span class="plusBtn"><i class="fa fa-plus-circle"></i></span></div></div></div><span class="addPro headeradd"><i class="fa fa-plus"></i></span></div></div>',
    onecolumnfooter: '<div class="cRow TxAl-c" data-type="row"><div class="SetHdlr"><span class="stng" ><i class="cb-stng" title="Settings" data-title="footer"></i><ul class="setDrp"><li class="com-settings" data-type="row" data-title="footer"><span>Settings</span><i class="cb-mxr"></i></li><li class="s-style" data-type="row" data-title="footer"><span>Style</span><i class="cb-stl"></i></li><li class="com-style" data-type="row" data-title="footer\'s column"><span>Column</span><i class="cb-col"></i></li></ul></span></div><div class="cGrid "><div class="editor-col cCol ui-state-default sfFixed  ui-sortable ui-droppable sfCol_100 tsfCol_100 msfCol_100 mMt-0 mMb-0 mPt-0 mPr-0 mPb-0 mPl-0 mTxAl-n mTxAl-o mDib tDib tMt-0 tMb-0 tPt-0 tPr-0 tPb-0 tPl-0 tTxAl-n tTxAl-o Pt-0 Pr-0 Pb-0 Pl-0 TxAl-n TxAl-o" data-type="column"><div class="SetHdlr"><span class="stng"><i class="cb-stng"></i><ul class="setDrp no_txt"><li class="com-settings" data-type="column"><span class="text-wrp">Settings</span><i class="cb-mxr" title="Settings"></i></li><li class="s-style" data-type="column"><span class="text-wrp">Style</span><i class="cb-stl" title="Styles"></i></li><li class="copyData"><span class="text-wrp">Copy</span><i class="cb-cpy" title="copy data"></i></li><li class="pasteData"><span class="text-wrp">Paste</span><i class="cb-paste" title="paste data"></i></li><li class="delete_icon deletehelper"><span class="text-wrp">Delete</span><i class="cb-del deletehelper" title="Delete"></i></li></ul></span></div><div class="column-data-empty"><h4>This is Column</h4><p>You can Drag and drop Components here</p></div></div></div></div>',
    responsivebasic: '<div class="field-row" id="responsiveBasicDOM"><div class="field-row stElWrap col100 Dn" data-opt="height"><span class="range__slider fCol"><div id="boxHeightSlider"><div id="boxHeightHandle" class="ui-slider-handle" title="Height">0</div></div></span></div><div class="field-row stElWrap col100 Dn" data-opt="lineheight"><span class="range__slider fCol"><div id="respoLineHeightSizeSlider"><div id="respolineHeightHandle" class="ui-slider-handle" title="Line Height">0</div></div></span></div><div class="field-row stElWrap col100  Dn" data-opt="width"><span class="range__slider fCol"><div id="boxWidthSlider"><div id="boxWidthHandle" class="ui-slider-handle" title="Width">0</div></div></span></div><div class="field-row stElWrap col100 Dn" data-opt="fontsize"><span class="range__slider fCol"><div id="fontSizeSlider"><div id="fontSizeHandle" class="ui-slider-handle" title="Font Size">0</div></div></span></div><div class="field-row stElWrap col80-20 Dn" data-opt="visibility"><label class="fCol">Visibility</label><span class="fCol toggle_btn"><input id="deviceVisibility" name="enable visibility" type="checkbox" /><label for="deviceVisibility" class="tgl_slider"></label></span></div><div class="Dn" data-opt="ordering"><div class="field-row stElWrap col100"><label class="fCol">Rearrange Columns </label></div><div class="field-row stElWrap col100"><div class="orderWrappers PosR RearrangeColumnWrapper " id="sortedData"></div></div></div></div>',
    rowadd: '<div class=\'proLoader\' data-online="false"><div class="proLoaderArea cGrid "><div class=\'sfCol_25 compoLists\'><h2>Please choose what you want to place in this Row Section.</h2><!-- Search --><div class="module-search"><input type="text" placeholder="Search components" id="procomponentSearch"><i class="fa fa-refresh" id="refreshProSearch"></i></div><!--Ends Search--><!-- All Pro Components List --><div class="proItemsList"></div><!-- Ends Component wrapper --><span class="getOnlCompo" id="getOnlCompo">Online Components</span></div><div class=\'sfCol_75 compoOptions PosR\'><div class="actionBtns"><a href="#" class="smlBtn Dn">Help Video</a><div class="applyArea"><span id="ApplyProComponent" class="sfBtn smlbtn-succ"><i class="cb-tick"></i>Apply</span></div><span class="cb-close"></span></div><div class="proLoaderArea cGrid "><div class="ImageSliderDOM sfCol_80 overflow-hidden options-display-inside" data-id="" data-delay="5000" data-loop="" style="height: 400px; width:80%" data-transition="slide"><div class="ImageSliderWrapper SliderWrapper"><div class="ImageSlider"><ul class="itemsWrapper"></ul></div><!--Next-prev--><div class="arrows-wrapper"><span class="prev-btn"><i class="fa fa-chevron-left" aria-hidden="true"></i></span><span class="next-btn"><i class="fa fa-chevron-right" aria-hidden="true"></i></span></div><!--Pager dot--><div class="pager-dot"><span class="active-dot"></span><span></span><span></span><span></span></div></div></div></div></div></div></div>',
};
var customEffects = {
    skew: {
        group: "Custom",
        effect: "skew",
        name: 'Skew In',
        values: [
            { keyframe: 0, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: 0, translateY: 0, translateZ: 0 },
            { keyframe: 25, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: -10, translateY: -20, translateZ: 0 },
            { keyframe: 50, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: -40, translateY: -60, translateZ: 0 },
            { keyframe: 75, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: -100, translateY: -100, translateZ: 0 },
            { keyframe: 100, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: 0, translateY: 0, translateZ: 0 },
        ]
    }
};


var definedEffects = {
    slideup: {
        group: 'slide',
        effect: 'slideup',
        name: 'Slide-Up',
        values: [
            { keyframe: 0, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: 0, translateY: 0, translateZ: 0 },
            { keyframe: 25, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: -10, translateY: -20, translateZ: 0 },
            { keyframe: 50, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: -40, translateY: -60, translateZ: 0 },
            { keyframe: 75, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: -100, translateY: -100, translateZ: 0 },
            { keyframe: 100, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: 0, translateY: 0, translateZ: 0 },
        ]
    },
    slidedown: {
        group: 'slide',
        effect: 'slidedown',
        name: 'Slide-Down',
        values: [
            { keyframe: 0, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: 0, translateY: 0, translateZ: 0 },
            { keyframe: 25, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: -10, translateY: -20, translateZ: 0 },
            { keyframe: 50, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: -40, translateY: -60, translateZ: 0 },
            { keyframe: 75, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: -100, translateY: -100, translateZ: 0 },
            { keyframe: 100, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: 0, translateY: 0, translateZ: 0 },
        ]
    },
    fadein: {
        group: 'fade',
        effect: 'fadein',
        name: 'Fade In',
        values: [
            { keyframe: 0, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: 0, translateY: 0, translateZ: 0 },
            { keyframe: 25, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: -10, translateY: -20, translateZ: 0 },
            { keyframe: 50, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: -40, translateY: -60, translateZ: 0 },
            { keyframe: 75, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: -100, translateY: -100, translateZ: 0 },
            { keyframe: 100, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: 0, translateY: 0, translateZ: 0 },
        ]
    },
    fadeout: {
        group: 'fade',
        effect: 'fadeout',
        name: 'Fade Out',
        values: [
            { keyframe: 0, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: 0, translateY: 0, translateZ: 0 },
            { keyframe: 25, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: -10, translateY: -20, translateZ: 0 },
            { keyframe: 50, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: -40, translateY: -60, translateZ: 0 },
            { keyframe: 75, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: -100, translateY: -100, translateZ: 0 },
            { keyframe: 100, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: 0, translateY: 0, translateZ: 0 },
        ]
    },
    rotateout: {
        group: "rotate",
        effect: "rotateout",
        name: 'Rotate Out',
        values: [
            { keyframe: 0, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: 0, translateY: 0, translateZ: 0 },
            { keyframe: 25, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: -10, translateY: -20, translateZ: 0 },
            { keyframe: 50, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: -40, translateY: -60, translateZ: 0 },
            { keyframe: 75, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: -100, translateY: -100, translateZ: 0 },
            { keyframe: 100, opacity: 1, rotateX: 0, scaleX: 1, skewX: 0, translateX: 0, translateY: 0, translateZ: 0 },
        ]
    },

};






var effectList = $.extend(definedEffects, customEffects);

function groupEffects(obj, key, removeItem) {
    obj = JSON.parse(JSON.stringify(obj));
    obj = $.map(obj, function (value, index) {
        delete value[removeItem];
        return [value];
    });
    return obj.reduce(function (result, currentValue) {
        (result[currentValue[key]] = result[currentValue[key]] || []).push(
            currentValue
        );
        return result;
    }, {});
}

function getEffectList(obj, removeItem) {
    obj = JSON.parse(JSON.stringify(obj));
    obj = $.map(obj, function (value, index) {
        delete value[removeItem];
        return [value];
    });
    return obj;
}
var effectSelectOption = groupEffects(effectList, 'group', "values");
var animationEffectList = getEffectList(effectList, "values"); var sel, range;
"use strict";
const WbGlobal = {};
let webBuilderSettings = {
    "primaryColor": 'rgb(69, 83, 252)',
    "secondaryColor": '#ccc',
    "optionalColor": "#ccc",
    "defaultLayout": 'fullwidth',
    "defaultFontFamily": "Montserrat",
    "SiteHeaderEffect": "hdr-nml",
    "body": {
        "class": "editor-box activeSetting background-effect-image-parallax",
        "data-backgroundcolor": "",
        "data-backgroundimage": "image",
        "style": ""
    },
    "shadedLayer": "",
    "temporaryBackgroundcolor": '#FFF',
    "temporaryWidth": '100',
    "scrolltotop": false,
    "idcount": 0,
    "isunderconstruction": false
};
let screenWidth = $(window).width();
let screenSize = ScreenDimension();
let Website = {
    "Name": "Personal",
    "PageList": [],
    "DefaultPage": "",
    "Components": "1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,1,1,1",
    "UserModuleID": 0,
    "Culture": null,
    "SecureToken": null,
    "UserName": null,
    "PortalID": 0,
    "HostURL": SageFrameHostURL,
    "HeaderView": "",
    "HeaderEdit": "",
    "FooterEdit": "",
    "FooterView": ""
};
let autoSlideInterval = {};
let currentOnePAge = '';

let WbHostURL = '';
if (typeof EditorMode === "undefined") {
    EditorMode = false;
}
if (typeof isPreview === "undefined") {
    isPreview = false;
}
if (GetSiteID === "0") {
    if (EditorMode)
        WbHostURL = SageFrameHostURL + '/webbuilder';
    else if (isPreview) {
        WbHostURL = SageFrameHostURL + '/webbuilderpreview';
    } else {
        WbHostURL = SageFrameHostURL;
    }
} else {
    if (EditorMode)
        WbHostURL = SageFrameHostURL + '/webbuilder/' + GetSiteID;
    else if (isPreview) {
        WbHostURL = SageFrameHostURL + '/webbuilderpreview/' + GetSiteID;
    } else {
        WbHostURL = SageFrameHostURL;
    }
}
let FakeImageURL = 'https://cdn.contentder.com/img/fakeimg.jpg'; (function (root, factory) {
    if (typeof exports === 'object') {
        module.exports = factory(root);
    } else if (typeof define === 'function' && define.amd) {
        define('colors', [], function () {
            return factory(root);
        });
    } else {
        root.Colors = factory(root);
    }
}(this, function (window, undefined) {
    "use strict";

    var _valueRanges = {
        rgb: { r: [0, 255], g: [0, 255], b: [0, 255] },
        hsv: { h: [0, 360], s: [0, 100], v: [0, 100] },
        hsl: { h: [0, 360], s: [0, 100], l: [0, 100] },
        alpha: { alpha: [0, 1] },
        HEX: { HEX: [0, 16777215] } // maybe we don't need this
    },

        _Math = window.Math,
        _round = _Math.round,

        _instance = {},
        _colors = {},

        grey = { r: 0.298954, g: 0.586434, b: 0.114612 }, // CIE-XYZ 1931
        luminance = { r: 0.2126, g: 0.7152, b: 0.0722 }, // W3C 2.0

        Colors = function (options) {
            this.colors = { RND: {} };
            this.options = {
                color: 'rgba(0,0,0,0)', // init value(s)...
                grey: grey,
                luminance: luminance,
                valueRanges: _valueRanges
                // customBG: '#808080'
                // convertCallback: undefined,
                // allMixDetails: false
            };
            initInstance(this, options || {});
        },
        initInstance = function (THIS, options) {
            var importColor,
                _options = THIS.options,
                customBG;

            focusInstance(THIS);
            for (var option in options) {
                if (options[option] !== undefined) _options[option] = options[option];
            }
            customBG = _options.customBG;
            _options.customBG = (typeof customBG === 'string') ? ColorConverter.txt2color(customBG).rgb : customBG;
            _colors = setColor(THIS.colors, _options.color, undefined, true); // THIS.colors = _colors = 
        },
        focusInstance = function (THIS) {
            if (_instance !== THIS) {
                _instance = THIS;
                _colors = THIS.colors;
            }
        };

    Colors.prototype.setColor = function (newCol, type, alpha) {
        focusInstance(this);
        if (newCol) {
            return setColor(this.colors, newCol, type, undefined, alpha);
        } else {
            if (alpha !== undefined) {
                this.colors.alpha = limitValue(alpha, 0, 1);
            }
            return convertColors(type);
        }
    };

    Colors.prototype.setCustomBackground = function (col) { // wild gues,... check again...
        focusInstance(this); // needed???
        this.options.customBG = (typeof col === 'string') ? ColorConverter.txt2color(col).rgb : col;
        // return setColor(this.colors, this.options.customBG, 'rgb', true); // !!!!RGB
        return setColor(this.colors, undefined, 'rgb'); // just recalculate existing
    };

    Colors.prototype.saveAsBackground = function () { // alpha
        focusInstance(this); // needed???
        // return setColor(this.colors, this.colors.RND.rgb, 'rgb', true);
        return setColor(this.colors, undefined, 'rgb', true);
    };

    Colors.prototype.toString = function (colorMode, forceAlpha) {
        return ColorConverter.color2text((colorMode || 'rgb').toLowerCase(), this.colors, forceAlpha);
    };

    // ------------------------------------------------------ //
    // ---------- Color calculation related stuff  ---------- //
    // -------------------------------------------------------//

    function setColor(colors, color, type, save, alpha) { // color only full range
        if (typeof color === 'string') {
            color = ColorConverter.txt2color(color); // new object
            type = color.type;
            _colors[type] = color[type];
            alpha = alpha !== undefined ? alpha : color.alpha;
        } else if (color) {
            for (var n in color) {
                colors[type][n] = limitValue(color[n] / _valueRanges[type][n][1], 0, 1);
            }
        }
        if (alpha !== undefined) {
            colors.alpha = limitValue(+alpha, 0, 1);
        }
        return convertColors(type, save ? colors : undefined);
    }

    function saveAsBackground(RGB, rgb, alpha) {
        var grey = _instance.options.grey,
            color = {};

        color.RGB = { r: RGB.r, g: RGB.g, b: RGB.b };
        color.rgb = { r: rgb.r, g: rgb.g, b: rgb.b };
        color.alpha = alpha;
        // color.RGBLuminance = getLuminance(RGB);
        color.equivalentGrey = _round(grey.r * RGB.r + grey.g * RGB.g + grey.b * RGB.b);

        color.rgbaMixBlack = mixColors(rgb, { r: 0, g: 0, b: 0 }, alpha, 1);
        color.rgbaMixWhite = mixColors(rgb, { r: 1, g: 1, b: 1 }, alpha, 1);
        color.rgbaMixBlack.luminance = getLuminance(color.rgbaMixBlack, true);
        color.rgbaMixWhite.luminance = getLuminance(color.rgbaMixWhite, true);

        if (_instance.options.customBG) {
            color.rgbaMixCustom = mixColors(rgb, _instance.options.customBG, alpha, 1);
            color.rgbaMixCustom.luminance = getLuminance(color.rgbaMixCustom, true);
            _instance.options.customBG.luminance = getLuminance(_instance.options.customBG, true);
        }

        return color;
    }

    function convertColors(type, colorObj) {
        // console.time('convertColors');
        var colors = colorObj || _colors,
            convert = ColorConverter,
            options = _instance.options,
            ranges = _valueRanges,
            RND = colors.RND,
            // type = colorType, // || _mode.type,
            modes, mode = '', from = '', // value = '',
            exceptions = { hsl: 'hsv', rgb: type },
            RGB = RND.rgb, SAVE, SMART;

        if (type !== 'alpha') {
            for (var typ in ranges) {
                if (!ranges[typ][typ]) { // no alpha|HEX
                    if (type !== typ) {
                        from = exceptions[typ] || 'rgb';
                        colors[typ] = convert[from + '2' + typ](colors[from]);
                    }

                    if (!RND[typ]) RND[typ] = {};
                    modes = colors[typ];
                    for (mode in modes) {
                        RND[typ][mode] = _round(modes[mode] * ranges[typ][mode][1]);
                    }
                }
            }

            RGB = RND.rgb;
            colors.HEX = convert.RGB2HEX(RGB);
            colors.equivalentGrey =
                options.grey.r * colors.rgb.r +
                options.grey.g * colors.rgb.g +
                options.grey.b * colors.rgb.b;
            colors.webSave = SAVE = getClosestWebColor(RGB, 51);
            // colors.webSave.HEX = convert.RGB2HEX(colors.webSave);
            colors.webSmart = SMART = getClosestWebColor(RGB, 17);
            // colors.webSmart.HEX = convert.RGB2HEX(colors.webSmart);
            colors.saveColor =
                RGB.r === SAVE.r && RGB.g === SAVE.g && RGB.b === SAVE.b ? 'web save' :
                    RGB.r === SMART.r && RGB.g === SMART.g && RGB.b === SMART.b ? 'web smart' : '';
            colors.hueRGB = ColorConverter.hue2RGB(colors.hsv.h);

            if (colorObj) {
                colors.background = saveAsBackground(RGB, colors.rgb, colors.alpha);
            }
        } // else RGB = RND.rgb;

        var rgb = colors.rgb, // for better minification...
            alpha = colors.alpha,
            luminance = 'luminance',
            background = colors.background,
            rgbaMixBlack, rgbaMixWhite, rgbaMixCustom,
            rgbaMixBG, rgbaMixBGMixBlack, rgbaMixBGMixWhite, rgbaMixBGMixCustom;

        rgbaMixBlack = mixColors(rgb, { r: 0, g: 0, b: 0 }, alpha, 1);
        rgbaMixBlack[luminance] = getLuminance(rgbaMixBlack, true);
        colors.rgbaMixBlack = rgbaMixBlack;

        rgbaMixWhite = mixColors(rgb, { r: 1, g: 1, b: 1 }, alpha, 1);
        rgbaMixWhite[luminance] = getLuminance(rgbaMixWhite, true);
        colors.rgbaMixWhite = rgbaMixWhite;

        if (options.customBG) {
            rgbaMixBGMixCustom = mixColors(rgb, background.rgbaMixCustom, alpha, 1);
            rgbaMixBGMixCustom[luminance] = getLuminance(rgbaMixBGMixCustom, true);
            rgbaMixBGMixCustom.WCAG2Ratio = getWCAG2Ratio(rgbaMixBGMixCustom[luminance],
                background.rgbaMixCustom[luminance]);
            colors.rgbaMixBGMixCustom = rgbaMixBGMixCustom;
            /* ------ */
            rgbaMixBGMixCustom.luminanceDelta = _Math.abs(
                rgbaMixBGMixCustom[luminance] - background.rgbaMixCustom[luminance]);
            rgbaMixBGMixCustom.hueDelta = getHueDelta(background.rgbaMixCustom, rgbaMixBGMixCustom, true);
            /* ------ */
        }

        colors.RGBLuminance = getLuminance(RGB);
        colors.HUELuminance = getLuminance(colors.hueRGB);

        // renderVars.readyToRender = true;
        if (options.convertCallback) {
            options.convertCallback(colors, type); //, convert); //, _mode);
        }

        // console.timeEnd('convertColors')
        // if (colorObj)
        return colors;
    }


    // ------------------------------------------------------ //
    // ------------------ color conversion ------------------ //
    // -------------------------------------------------------//

    var ColorConverter = {
        txt2color: function (txt) {
            var color = {},
                parts = txt.replace(/(?:#|\)|%)/g, '').split('('),
                values = (parts[1] || '').split(/,\s*/),
                type = parts[1] ? parts[0].substr(0, 3) : 'rgb',
                m = '';

            color.type = type;
            color[type] = {};
            if (parts[1]) {
                for (var n = 3; n--;) {
                    m = type[n] || type.charAt(n); // IE7
                    color[type][m] = +values[n] / _valueRanges[type][m][1];
                }
            } else {
                color.rgb = ColorConverter.HEX2rgb(parts[0]);
            }
            // color.color = color[type];
            color.alpha = values[3] ? +values[3] : 1;

            return color;
        },

        color2text: function (colorMode, colors, forceAlpha) {
            var alpha = forceAlpha !== false && _round(colors.alpha * 100) / 100,
                hasAlpha = typeof alpha === 'number' &&
                    forceAlpha !== false && (forceAlpha || alpha !== 1),
                RGB = colors.RND.rgb,
                HSL = colors.RND.hsl,
                shouldBeHex = colorMode === 'hex' && hasAlpha,
                isHex = colorMode === 'hex' && !shouldBeHex,
                isRgb = colorMode === 'rgb' || shouldBeHex,
                innerText = isRgb ? RGB.r + ', ' + RGB.g + ', ' + RGB.b :
                    !isHex ? HSL.h + ', ' + HSL.s + '%, ' + HSL.l + '%' :
                        '#' + colors.HEX;

            return isHex ? innerText : (shouldBeHex ? 'rgb' : colorMode) +
                (hasAlpha ? 'a' : '') + '(' + innerText +
                (hasAlpha ? ', ' + alpha : '') + ')';
        },

        RGB2HEX: function (RGB) {
            return (
                (RGB.r < 16 ? '0' : '') + RGB.r.toString(16) +
                (RGB.g < 16 ? '0' : '') + RGB.g.toString(16) +
                (RGB.b < 16 ? '0' : '') + RGB.b.toString(16)
            ).toUpperCase();
        },

        HEX2rgb: function (HEX) {
            HEX = HEX.split(''); // IE7
            return {
                r: +('0x' + HEX[0] + HEX[HEX[3] ? 1 : 0]) / 255,
                g: +('0x' + HEX[HEX[3] ? 2 : 1] + (HEX[3] || HEX[1])) / 255,
                b: +('0x' + (HEX[4] || HEX[2]) + (HEX[5] || HEX[2])) / 255
            };
        },

        hue2RGB: function (hue) {
            var h = hue * 6,
                mod = ~~h % 6, // _Math.floor(h) -> faster in most browsers
                i = h === 6 ? 0 : (h - mod);

            return {
                r: _round([1, 1 - i, 0, 0, i, 1][mod] * 255),
                g: _round([i, 1, 1, 1 - i, 0, 0][mod] * 255),
                b: _round([0, 0, i, 1, 1, 1 - i][mod] * 255)
            };
        },

        // ------------------------ HSV ------------------------ //

        rgb2hsv: function (rgb) { // faster
            var r = rgb.r,
                g = rgb.g,
                b = rgb.b,
                k = 0, chroma, min, s;

            if (g < b) {
                g = b + (b = g, 0);
                k = -1;
            }
            min = b;
            if (r < g) {
                r = g + (g = r, 0);
                k = -2 / 6 - k;
                min = _Math.min(g, b); // g < b ? g : b; ???
            }
            chroma = r - min;
            s = r ? (chroma / r) : 0;
            return {
                h: s < 1e-15 ? ((_colors && _colors.hsl && _colors.hsl.h) || 0) :
                    chroma ? _Math.abs(k + (g - b) / (6 * chroma)) : 0,
                s: r ? (chroma / r) : ((_colors && _colors.hsv && _colors.hsv.s) || 0), // ??_colors.hsv.s || 0
                v: r
            };
        },

        hsv2rgb: function (hsv) {
            var h = hsv.h * 6,
                s = hsv.s,
                v = hsv.v,
                i = ~~h, // _Math.floor(h) -> faster in most browsers
                f = h - i,
                p = v * (1 - s),
                q = v * (1 - f * s),
                t = v * (1 - (1 - f) * s),
                mod = i % 6;

            return {
                r: [v, q, p, p, t, v][mod],
                g: [t, v, v, q, p, p][mod],
                b: [p, p, t, v, v, q][mod]
            };
        },

        // ------------------------ HSL ------------------------ //

        hsv2hsl: function (hsv) {
            var l = (2 - hsv.s) * hsv.v,
                s = hsv.s * hsv.v;

            s = !hsv.s ? 0 : l < 1 ? (l ? s / l : 0) : s / (2 - l);

            return {
                h: hsv.h,
                s: !hsv.v && !s ? ((_colors && _colors.hsl && _colors.hsl.s) || 0) : s, // ???
                l: l / 2
            };
        },

        rgb2hsl: function (rgb, dependent) { // not used in Color
            var hsv = ColorConverter.rgb2hsv(rgb);

            return ColorConverter.hsv2hsl(dependent ? hsv : (_colors.hsv = hsv));
        },

        hsl2rgb: function (hsl) {
            var h = hsl.h * 6,
                s = hsl.s,
                l = hsl.l,
                v = l < 0.5 ? l * (1 + s) : (l + s) - (s * l),
                m = l + l - v,
                sv = v ? ((v - m) / v) : 0,
                sextant = ~~h, // _Math.floor(h) -> faster in most browsers
                fract = h - sextant,
                vsf = v * sv * fract,
                t = m + vsf,
                q = v - vsf,
                mod = sextant % 6;

            return {
                r: [v, q, m, m, t, v][mod],
                g: [t, v, v, q, m, m][mod],
                b: [m, m, t, v, v, q][mod]
            };
        }
    };

    // ------------------------------------------------------ //
    // ------------------ helper functions ------------------ //
    // -------------------------------------------------------//

    function getClosestWebColor(RGB, val) {
        var out = {},
            tmp = 0,
            half = val / 2;

        for (var n in RGB) {
            tmp = RGB[n] % val; // 51 = 'web save', 17 = 'web smart'
            out[n] = RGB[n] + (tmp > half ? val - tmp : -tmp);
        }
        return out;
    }

    function getHueDelta(rgb1, rgb2, nominal) {
        return (_Math.max(rgb1.r - rgb2.r, rgb2.r - rgb1.r) +
            _Math.max(rgb1.g - rgb2.g, rgb2.g - rgb1.g) +
            _Math.max(rgb1.b - rgb2.b, rgb2.b - rgb1.b)) * (nominal ? 255 : 1) / 765;
    }

    function getLuminance(rgb, normalized) {
        var div = normalized ? 1 : 255,
            RGB = [rgb.r / div, rgb.g / div, rgb.b / div],
            luminance = _instance.options.luminance;

        for (var i = RGB.length; i--;) {
            RGB[i] = RGB[i] <= 0.03928 ? RGB[i] / 12.92 : _Math.pow(((RGB[i] + 0.055) / 1.055), 2.4);
        }
        return ((luminance.r * RGB[0]) + (luminance.g * RGB[1]) + (luminance.b * RGB[2]));
    }

    function mixColors(topColor, bottomColor, topAlpha, bottomAlpha) {
        var newColor = {},
            alphaTop = (topAlpha !== undefined ? topAlpha : 1),
            alphaBottom = (bottomAlpha !== undefined ? bottomAlpha : 1),
            alpha = alphaTop + alphaBottom * (1 - alphaTop); // 1 - (1 - alphaTop) * (1 - alphaBottom);

        for (var n in topColor) {
            newColor[n] = (topColor[n] * alphaTop + bottomColor[n] * alphaBottom * (1 - alphaTop)) / alpha;
        }
        newColor.a = alpha;
        return newColor;
    }

    function getWCAG2Ratio(lum1, lum2) {
        var ratio = 1;

        if (lum1 >= lum2) {
            ratio = (lum1 + 0.05) / (lum2 + 0.05);
        } else {
            ratio = (lum2 + 0.05) / (lum1 + 0.05);
        }
        return _round(ratio * 100) / 100;
    }

    function limitValue(value, min, max) {
        // return _Math.max(min, _Math.min(max, value)); // faster??
        return (value > max ? max : value < min ? min : value);
    }

    return Colors;
}));/**/
function ScrollTopVisible() {
    if ($('body').find('#ScroolToTop').length > 0) {
        let top = GetScrollTop();
        if (ScreenDimension().height < top) {
            //if ((ScreenDimension().height + top) >= document.body.scrollHeight) {
            $('#ScroolToTop').show();
        }
        else {
            $('#ScroolToTop').hide();
        }
    }
}

function ScrollToTop() {
    let top = GetScrollTop();
    if (top > screenSize) {
        $('#chkScrollToTop').show(400);
    }
    else {
        $('#chkScrollToTop').hide(400);
    }
}
function FixMenuOnScroll() {
    //Build your website on your own  height
    if (typeof ($('.main-top-row').css('height')) !== "undefined") {
        let webbbuilderBar = parseInt($('.main-top-row').css('height').replace('px', ''));
        //scroll top 
        let $sticky = $('.edit-area').hasClass('hdr-stky');
        let scrollTop = GetScrollTop() + webbbuilderBar;
        if ($sticky || $('.edit-area').hasClass('hdr-fxd')) {
            $('.editor-componentWrapper').addClass('clearfix');
            $('.editor-site-header').addClass('clearfix');
            $('.editor-site-header').css('width', '');
            let extraHeight = 0;
            //if there is any extra field above the menu
            if ($('.rowaboveheader').length > 0)
                extraHeight = parseInt($('.rowaboveheader').css('height').replace('px', ''));
            // menu wrpper height +  extrafield 
            let topPos = $('.editor-site-header').offset().top + extraHeight;
            let $stickHeader = $('.editor-site-header > .cRow');
            $('.main-container').css('padding-top', '');
            if (scrollTop > topPos) {
                $('.edit-area').addClass('stick');
                let containerWidth = $('.editor-componentWrapper').css('width');
                $stickHeader.css('width', containerWidth);
                if ($sticky) {
                    // $('.main-container').css('padding-top', webbbuilderBar);
                    $('.main-container').css('padding-top', '');
                }
            } else {

                $('.editor-site-header > .cRow').removeClass('stick');

                $('.editor-componentWrapper').css('padding-top', '');
            }
        }
    }
}
function HeaderTopPadding() {
    if ($('.edit-area').hasClass('hdr-stky') || $('.edit-area').hasClass('hdr-fxd')) {
        let webbbuilderBar = 0;
        if ($('.main-top-row').length > 0)
            webbbuilderBar = parseInt($('.main-top-row').css('height').replace('px', ''));
        $('.editor-site-header').css('top', webbbuilderBar);
    }
    else {
        $('.main-container').css('padding-top', '');
    }
}
function FixMenuOnResize() {
    $('.editor-site-header > .cRow').css('width', '');
    $('.editor-site-header').css('width', '');
    if ($('.edit-area').hasClass('hdr-fxd')) {
        let containerWidth = $('.editor-componentWrapper').css('width');
        $('.editor-site-header').css('width', containerWidth);
        $('.editor-site-header > .cRow').css('width', '');
    }
    if ($('.edit-area').hasClass('hdr-stky')) {
        setTimeout(function () {
            let containerWidth = $('.editor-componentWrapper').css('width');
            $('.editor-site-header > .cRow').css('width', containerWidth);
            $('.editor-site-header').css('width', '');
        }, 1);
    }
}
function ScreenDimension() {
    let myWidth = 0, myHeight = 0;
    if (typeof (window.innerWidth) == 'number') {
        //Non-IE
        myWidth = window.innerWidth;
        myHeight = window.innerHeight;
    } else if (document.documentElement && (document.documentElement.clientWidth || document.documentElement.clientHeight)) {
        //IE 6+ in 'standards compliant mode'
        myWidth = document.documentElement.clientWidth;
        myHeight = document.documentElement.clientHeight;
    } else if (document.body && (document.body.clientWidth || document.body.clientHeight)) {
        //IE 4 compatible
        myWidth = document.body.clientWidth;
        myHeight = document.body.clientHeight;
    }
    return { "height": myHeight, "width": myWidth };
}
function AdjustSize($appendLayer) {
    let d = ViewDeviceAlpha();
    let regex = new RegExp('\\b' + d + 'H-([0-9]{1,3})' + '\\b', 'g');
    let hCls = $appendLayer.attr('class').match(regex);
    if (hCls || $appendLayer.hasClass(d + 'adjustheight')) {
        //$appendLayer.css('height', '');
        return;
    }
    let height = ScreenDimension().height;
    $appendLayer.css('height', height + 'px');
    $appendLayer.find('.ImageSlider').css('height', height + 'px');
}
function RemoveCarouselHeight($appendLayer) {
    $appendLayer.css('height', '400px');
    let img = $appendLayer.find('.ImageSlider').find('img').eq(0);
    $appendLayer.find('.ImageSlider').css('height', '400px');
    setTimeout(function () {
        $appendLayer.find('.ImageSlider').css('height', '');
    }, 100);
}
function GetScrollTop() {
    let top = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
    return top;
}
function MenuChangeInstant($nav, primarycolor, secondarycolor, style) {
    let color = $nav.attr('data-textcolor');
    $nav.find('> li > a > span').css('color', color);
    $nav.find('> li > a').css('background-color', '');
    let $a = $nav.find('> li > a.active-page');
    let $span = $a.find('> span');
    $a.css('background-color', '');
    let textColor = $span.css('color');
    ApplyMenuHover(style, primarycolor, secondarycolor, $a, $span);
}
function ApplyMenuHover(navClass, primaryColor, secondary, $a, $span) {
    let navBorderWidth = $a.parents('ul:visible').attr('data-navBorderWidth');
    let navLinkBorCol = $a.parents('ul:visible').attr('data-navLinkBorCol');
    switch (navClass) {
        case 'nav-style-none':
            $span.css('color', secondary);
            break;
        case 'nav-style-fill':
        case 'nav-style-rounded':
            let navLinkBg = $a.parents('ul:visible').attr('data-navLinkTextCol');
            $span.css('color', secondary);
            $a.css('background-color', primaryColor);
            break;
        case 'nav-style-line':
        case 'nav-style-roundedline':
            $span.css('color', secondary);

            $a.css({
                'border-color': navLinkBorCol,
                'border-top-width': navBorderWidth,
                'border-right-width': navBorderWidth,
                'border-left-width': navBorderWidth,
                'border-bottom-width': navBorderWidth,
                'background-color': ''
            });
            break;
        case 'nav-style-underline':
            $span.css('color', secondary);
            $a.css({
                'border-bottom-width': navBorderWidth,
                'border-color': navLinkBorCol,
                'background-color': ''
            });
            break;
    }
}
function AdjustSizeFullpage($dom) {
    if (typeof $dom !== 'undefined') {
        AdjustSize($dom);
        return;
    }
    $('.fullpagebanner').each(function () {
        AdjustSize($(this));
    });
}
function OnePageMenuScrollEvent() {
    let $NavList = $('.editor-site-header').find('.onepagemenu>li');
    CheckSiglePageSectionExists($NavList);
    let $nav = $('.editor-site-header').find('.msty-ham').find('.onepagemenu').find('> li > a').eq(0);
    $nav.addClass('active-page');
    $nav = $('.editor-site-header').find('.msty-tred').find('.onepagemenu').find('> li > a').eq(0);
    $nav.addClass('active-page');
    let activedata = $nav.parent().attr('data-opscroll');
    currentOnePAge = activedata;
    ActiveOnepageMenu(activedata);
    MenuHover(webBuilderSettings.primaryColor, webBuilderSettings.secondaryColor);
    $('.oneMenu').off().on('click', function () {
        //$('.pagelink.onepage.active-page').removeClass('active-page');
        //$(this).find('.pagelink.onepage').addClass('active-page');
        let data = $(this).attr('data-opscroll');
        if (data != undefined) {
            currentOnePAge = data;
            let $scrollTo = $('.editor-componentWrapper > .cRow[data-opscroll="' + data + '"]');
            if ($scrollTo.length > 0) {
                let siteheader = $('.editor-site-header').height();
                if ($('.main-top-row').length > 0)
                    siteheader += $('.main-top-row').height();
                if ($('.edit-area ').hasClass('leftLayout') || $('.edit-area ').hasClass('leftRight')) {
                    siteheader = 0;
                }
                let top = $scrollTo.offset().top - siteheader;
                $('body,html').animate({
                    scrollTop: top + 'px'
                }, 400);
            }
        }
        ActiveOnepageMenu(data);
    });
    function CheckSiglePageSectionExists($NavList) {
        if (!EditorMode) {
            $.each($NavList, function () {
                let $ths = $(this);
                if ($('.editor-componentWrapper > .cRow[data-opscroll="' + $ths.attr('data-opscroll') + '"]').length == 0)
                    $ths.addClass('Dn');
            });
        }
    }
}

function ActiveOnepageMenu(data) {
    let currentPage = data;
    let $ebTredMenu = $('.editor-site-header').find('.msty-ham').find('.onepagemenu');
    ActivateMenu($ebTredMenu, currentPage, true);
    let $ebHamMenu = $('.editor-site-header').find('.msty-tred').find('.onepagemenu');
    ActivateMenu($ebHamMenu, currentPage, true);
}
function ScrollOnePageMenu() {
    if ($('.editor-com-nav').attr('data-active') == 'onepagemenu') {
        let windtop = GetScrollTop();
        let siteheader = $('.editor-site-header').height();
        if ($('.main-top-row').length > 0)
            siteheader += $('.main-top-row').height();
        if ($('.edit-area').hasClass('leftLayout') || $('.edit-area ').hasClass('leftRight')) {
            siteheader = 0;
        }
        let winTop = windtop + siteheader;
        let $divs = $('div.editor-componentWrapper > .cRow');
        let top = $.grep($divs, function (item) {
            return ($(item).offset().top - siteheader) <= winTop;
        });
        let $topDiv;
        if (top.length >= 0) {
            $topDiv = $(top).eq(top.length - 1);
        }
        let data = $topDiv.attr('data-opscroll');
        if (data != undefined && data != currentOnePAge) {
            currentOnePAge = data;
            ActiveOnepageMenu(data);
        }
    }
}
function ParallexEffect() {
    let height = ScreenDimension().height;
    let width = ScreenDimension().width;
    let heightofscreen = ScreenDimension().height / 2;
    $('.background-effect-image-parallax').each(function () {
        $(this).css({
            'background-position-y': "0px",
            //'background-size': ' 120%',
            //'background-position':'center'
        });
    });
    window.addEventListener("scroll", function () {
        $('.background-effect-image-parallax').each(function () {
            parallexAsync($(this), heightofscreen);
        });
    });
}
async function parallexAsync($bgobj, heighofscreen) {
    let parallaxTop = $bgobj.offset().top;
    let parallaxStart = parallaxTop - heighofscreen;
    let scrollTOP = GetScrollTop();
    if (scrollTOP >= parallaxStart) {
        $bgobj.css({
            'background-position-y': -((scrollTOP - parallaxStart) / 10) + "px"
        });
    }
}

function StickyHeader() {
    let headerHeight = $('.editor-site-header').height();
    if (GetScrollTop() > (headerHeight)) {
        if (!$('.editor-site-header').hasClass('scrolled')) {
            $('.editor-site-header').addClass('scrolled');
            let $header = $('.editor-site-header > .cRow');
            let $headerColor = $header.attr('data-mcolor');
            let bgcolor = '', color = '';
            if (typeof ($headerColor) !== "undefined") {
                $('.editor-site-header').attr('data-prevColor', $('.menuHeader:visible .eb-menu').find('.pagelink').not('.active-page').find('.pageName').css('color'));
                $('.menuHeader:visible .eb-menu').find('.pagelink').not('.active-page').find('.pageName').css('color', $headerColor);
            }
            $headerColor = $header.attr('data-mbgcolor');
            if (typeof ($headerColor) !== "undefined") {
                $('.editor-site-header').attr('data-prevBgColor', $('.editor-site-header > .cRow').css('background-color'));
                $('.editor-site-header > .cRow').css('background-color', $headerColor);
            }

            let stickyImage = $('.editor-site-header').find('#headerLogo').attr('data-stickyLogo');
            if (stickyImage != undefined) {
                stickyImage = stickyImage.trim();
                let oldsrc = $('#headerLogo').attr('src');
                $('#headerLogo').attr('data-stickyLogo', oldsrc);
                $('#headerLogo').attr('src', stickyImage);
            }

        }
    }
    else {
        if ($('.editor-site-header').hasClass('scrolled')) {
            $('.editor-site-header').removeClass('scrolled');
            let $header = $('.editor-site-header');
            let $headerColor = $header.attr('data-prevColor');
            let bgcolor = '', color = '';
            if (typeof ($headerColor) !== "undefined") {
                $('.menuHeader:visible .eb-menu').find('.pagelink').not('.active-page').find('.pageName').css('color', $headerColor);
            }
            $headerColor = $header.attr('data-prevBgColor');
            if (typeof ($headerColor) !== "undefined") {
                $('.editor-site-header > .cRow').css('background-color', $headerColor);
            }
            let stickyImage = $('.editor-site-header').find('#headerLogo').attr('data-stickyLogo');
            if (stickyImage != undefined) {
                stickyImage = stickyImage.trim();
                let oldsrc = $('#headerLogo').attr('src');
                $('#headerLogo').attr('data-stickyLogo', oldsrc);
                $('#headerLogo').attr('src', stickyImage);
            }
        }
    }
}
function MenuColor() {
    let clr = $('.editor-site-header .editor-com-nav:visible .eb-menu:visible').attr('data-textcolor');
    if (typeof clr !== "undefined") {
        $('.editor-site-header .editor-com-nav:visible .eb-menu:visible').find('.pagelink').not('.active-page').find('.pageName').css('color', clr);
    }
}
function MenuURL() {
    $('.eb-menu:visible li').each(function () {
        let $this = $(this);
        let href = $this.find(' > a').attr('href');
        href = href.replace('fakeMenuURL', SageFrameHostURL);
        $this.find(' > a').attr('href', href);
    });
    $('.anchorpage').each(function () {
        let $this = $(this);
        let href = $this.attr('href');
        href = href.replace('fakeMenuURL', SageFrameHostURL);
        $this.attr('href', href);
    });
}
function RemoveActiveDom($a) {
    $a.removeClass('active-page');
    let textbgcolor = $a.parent().parent().attr('data-textbgcolor');
    let textcolor = $a.parent().parent().attr('data-textcolor');
    let lineBorderWidth = $a.parent().parent().attr('data-navborderwidth');
    let textBordercolor = $nav.attr('data-lineBorderColor');
    let $span = $a.find('> span');
    if ($('.editor-site-header').hasClass('scrolled') && $a.parents('nav').hasClass('editor-com-nav')) {
        let $header = $('.editor-site-header').find('[data-type="siteheader"]');
        let $headerColor = $header.attr('data-mcolor');
        if ($headerColor != 'undefined' && $headerColor != '') {
            textcolor = $headerColor;
        }
    }
    $span.css('color', textcolor);
    $a.css({
        'background-color': textbgcolor,
        'border-color': textBordercolor
    });
}
function RemoveActiveMenu($a) {
    let $nav = $a.parent().parent();
    let textbgcolor = $nav.attr('data-textbgcolor');
    let textcolor = $nav.attr('data-textcolor');
    let lineBorderWidth = $nav.attr('data-navborderwidth');
    let textBordercolor = $nav.attr('data-lineBorderColor');
    if ($('.editor-site-header').hasClass('scrolled') && $a.parents('nav').hasClass('editor-com-nav')) {
        let $header = $('.editor-site-header').find('[data-type="siteheader"]');
        let $headerColor = $header.attr('data-mcolor');
        if ($headerColor != 'undefined' && $headerColor != '') {
            textcolor = $headerColor;
        }
    }
    if (!$a.hasClass('active-page')) {
        let $span = $a.find('> span');
        textbgcolor = typeof (textbgcolor) !== "undefined" ? textbgcolor : "";
        textBordercolor = typeof (textBordercolor) !== "undefined" ? textBordercolor : "";
        $span.css('color', textcolor);
        $a.css({
            'background-color': textbgcolor,
            'border-color': textBordercolor
        });
    }
}

function AddActiveMenu($a, isHover) {
    let $ebMenu = $a.parent().parent();
    let navLinkBGCol = $ebMenu.attr('data-navLinkBGCol');
    let navLinkTextCol = $ebMenu.attr('data-navLinkTextCol');
    let $span = $a.find('.pageName');
    if (!isHover) {
        $a.addClass('active-page');
    }
    let navClass = 'nav-style-none';
    let navStyleClasses = $ebMenu.parent().attr('class');
    if (navStyleClasses != undefined) {
        navStyleClasses = navStyleClasses.match(/nav-style-[a-z]{1,20}/g);
        if (navStyleClasses != null) {
            navClass = navStyleClasses[0];
        }
        let primaryColor = '';
        let secondary = '';
        if (navLinkBGCol != undefined) {
            primaryColor = navLinkBGCol;
        }
        else {
            primaryColor = webBuilderSettings.primaryColor;
        }
        if (navLinkTextCol != undefined) {
            secondary = navLinkTextCol;
        }
        else {
            secondary = webBuilderSettings.secondaryColor;
        }
        ApplyMenuHover(navClass, primaryColor, secondary, $a, $span);
    }
}

function ActiveMenu() {
    let $ebTredMenu = $('.eb-menu');
    ActivateMenu($ebTredMenu, currentpageName, false);
    //let $ebHAmMenu = $('.editor-site-header').find('.msty-ham').find('.eb-menu');
    //ActivateMenu($ebHAmMenu, currentpageName, false);
}
function ActivateMenu($ebMenu, currentPage, isOnePage) {
    let textColor = 'white';
    let achorBGClor = 'white';
    let achBorderWidth = '';
    let achLinkBorCol = '';
    let achBorderStype = '';
    let navLinkBGCol = $ebMenu.attr('data-navLinkBGCol');
    let navLinkTextCol = $ebMenu.attr('data-navLinkTextCol');
    achorBGClor = $ebMenu.attr('data-textbgcolor');
    $ebMenu.find('.pagelink.active-page').removeClass('active-page');
    $ebMenu.find('.pageName').each(function () {
        let activePage = '';
        if (isOnePage) {
            activePage = $(this).parent().parent().attr('data-opscroll').toLowerCase();
        }
        else {
            activePage = $(this).text().toLowerCase();
        }
        if (activePage === currentPage.toLowerCase()) {
            let $a = $(this).parent();
            AddActiveMenu($a, false);
        }
        else {
            let $a = $(this).parent();
            RemoveActiveMenu($a);
        }
    });
}
function MenuHover(primaryColor, secondary) {
    let textColor = 'white';
    let achorBGClor = 'white';
    let achBorderWidth = '';
    let achLinkBorCol = '';
    let achBorderStype = '';
    $('.editor-com-nav  ul  li  a ').off('mouseover').on('mouseover', function () {
        let $a = $(this);
        if (!$a.hasClass('active-page')) {
            AddActiveMenu($a, true);
        }
    }).off('mouseout').on('mouseout', function () {
        let $a = $(this);
        if (!$a.hasClass('active-page'))
            RemoveActiveMenu($a);
    });

    $('.menus  ul  li  a ').off('mouseover').on('mouseover', function () {
        let $a = $(this);
        if (!$a.hasClass('active-page')) {
            AddActiveMenu($a, true);
        }
    }).off('mouseout').on('mouseout', function () {
        let $a = $(this);
        if (!$a.hasClass('active-page'))
            RemoveActiveMenu($a);
    });
}

function JSONStringify(componentValue) {
    let $key = '';
    let $value = '';
    try {
        return JSON.stringify(componentValue, function (key, value) {
            $key = key;
            $value = value;
            return (typeof value === 'function') ? value.toString() : value;
        });
    } catch (e) {
        WriteLog(`Error occured while JSON parsing. key: ${$key}, value: ${$value} ,error message: ${e}`);
    }
}
function JSONParse(str) {
    let $key = '';
    let $value = '';
    try {
        return JSON.parse(str, function (key, value) {
            if (typeof value != 'string') return value;
            $key = key;
            $value = value;
            return (value.substring(0, 8) == 'function') ? eval(`(${value})`) : value;
        });
    } catch (e) {
        WriteLog(`Error occured while JSON parsing. key: ${$key}, value: ${$value} ,error message: ${e}`);
    }
}
function WriteLog(msg) {
    console.log(msg);
}
function StringToFunction(value) {
    //return (value.substring(0, 8) == 'function') ? eval('function()' + value) : value;
    if (value.substring(0, 8) == 'function') {
        value = value.slice(15, value.length - 1);
        //value = value.slice(0, -1);
    }
    let myFunction = new Function("", value);
    return myFunction();
}
function FullPagePopup(fullpageOption) {
    //WBPopup.init(fullpageOption);
    $('.fullpagepopupWrapper').remove();
    let option = {
        heading: "popup header title",
        data: "no data",
        showheading: true,
        width: "80%",
        height: "80%",
        advance: false,
        onappend: function ($wrapper) {
        },
        onclose: function ($wrapper) {
        }
    };
    option = $.extend(option, fullpageOption);
    let classes = {
        'header': 'fullpage-popup-header',
        'title': 'fullpage-popup-title',
        'body': 'fullpage-popup-model-body',
        'innerwrapper': 'fullpagepopup',
    };
    if (typeof option.advance !== "undefined" && option.advance) {
        classes = {
            'header': 'popupfullpage_model_header',
            'title': 'header_title',
            'body': 'popupfullpage_model_body',
            'innerwrapper': 'fullpagepopup',
        };
    }
    option.classes = classes;
    let fullpageHeader = '';
    if (option.showheading) {
        fullpageHeader = DOMCreate('div', DOMCreate('span', option.heading, option.classes.title + ' txC') + DOMCreate('span', '<i class="fa fa-times"></i>', ' f-right fullpage-close-model'), option.classes.header, 'fullpagePopup');
    }
    //var body = DOMCreate('div', '', 'scrollbar') + DOMCreate('div', option.data, option.classes.body + ' scrollable__child');
    let body = DOMCreate('div', option.data, option.classes.body);
    //body = DOMCreate('div', body);
    let fullpagPopup = DOMCreate('div', fullpageHeader + body, option.classes.innerwrapper, '', ['style="width:' + option.width + ';max-height:' + option.height + '"']);
    fullpagPopup = DOMCreate('div', fullpagPopup, 'v-align');
    fullpagPopup = DOMCreate('div', fullpagPopup, 'fullpagepopupWrapper');
    $('body').append(fullpagPopup);
    if (typeof (option.onappend) !== "undefined") {
        option.onappend($('.fullpagepopupWrapper'));
    }
    $('.fullpage-close-model').on('click', function () {
        $('.fullpagepopupWrapper').remove();
        if (typeof option.onclose !== "undefined")
            option.onclose($('.fullpagepopupWrapper'));
    });
    $('.main-left , #popupModel').hide();
}
function CloseFullPagePopup() {
    $('.fullpage-close-model').trigger('click');
}
function InvokeAPI() {
    if (typeof apiResultString !== "undefined") {
        $.each(apiResultString, function (i, v) {
            try {
                let id = v.ComponentID;
                let $childCompo = $('[data-id="' + id + '"]');
                id = parseInt(id);
                if (!isNaN(id)) {
                    if (v.ErrorOccured)
                        component[v.ComponentName].binddataerror($childCompo, v.Error === null ? v.Error : v.Error[0]);
                    else
                        component[v.ComponentName].binddata($childCompo, v.Result === null ? v.Result : v.Result[0]);
                }
            } catch (error) {
                WriteLog(error);
            }
        });
    }
}
function APIController() {
    this.ComponentID = 1,
        this.ComponentName = "",
        this.NameSpace = "SageFrame.WebBuilder",
        this.ClassNames = "WebBuilderController",
        this.MethodNames = "GetComponentByIDAndVersions",
        this.PageName = "home",
        this.Parameters = "1,1.1",
        this.StaticParameters = "",//fixed components
        this.Type = "URL"; //options: URL, method
    this.PageName = "";
}
function GetSingleAPIResult(key) {
    if (typeof apiResultString !== "undefined" && typeof apiResultString[key] !== "undefined" && apiResultString[key].Result !== null)
        return apiResultString[key].Result[0];
    else
        return null;
}
function SetSEOValues(Title, Description, ImageURL, Type) {
    let metaHtml = '';
    let metaTags = {
        type: ['property="og:type"', 'name="twitter:card"', 'name="type"'],
        image: ['name="image"', 'name="twitter:image"', 'property="og:image"'],
        title: ['property="og:title"', 'name="twitter:title"', 'name="title"'],
        description: ['name="description"', 'name="twitter:description"', 'property="og:description"']
    };
    if (typeof Description != undefined && Description != '')
        SetMetatagValue(metaTags.description, Description);
    if (typeof Title != undefined && Title != '') {
        SetMetatagValue(metaTags.title, Title);
        $('title').text(Title);
    }
    if (typeof ImageURL != undefined && ImageURL != '')
        SetMetatagValue(metaTags.image, ImageURL);
    if (typeof Type != undefined && Type != '')
        SetMetatagValue(metaTags.type, Type);

    function SetMetatagValue(attrArr, seoValue) {
        let len = attrArr.length;
        for (var i = 0; i < len; i++) {
            let ele = $('meta[' + attrArr[i] + ']');
            if (ele.length > 0)
                ele.attr('content', seoValue);
            else {
                metaHtml += '<meta ' + attrArr[i] + 'content="' + seoValue + '">';
            }
        }
    }
    $('head#head').append(metaHtml);
}
function ObjectToString(object) {
    let str = '';
    for (var p in object) {
        if (object.hasOwnProperty(p)) {
            if (typeof object[p] === "number")
                str += '"' + p + '":' + object[p] + ', \n';
            else if (typeof object[p] === "boolean")
                str += '"' + p + '":' + object[p] + ', \n';
            else if (typeof object[p] === "string")
                str += '"' + p + '":' + JSON.stringify(object[p]) + ', \n';
            else if (typeof object[p] === "function")
                str += '"' + p + '" :' + object[p] + ', \n';
            else if (Array.isArray(object[p])) {
                str += '"' + p + '":' + JSON.stringify(object[p]) + ', \n';
            }
            else if (typeof object[p] === "object") {
                str += '"' + p + '" :{ \n \t' + ObjectToString(object[p]) + '}, \n';
            }
        }
    }
    return str;
}
function CarouselInit($this) {
    InitCarouselSlider($this);
}
function InitCarouselSlider($this) {
    let componentId = $this.parent().attr('data-id');
    autoSlideInterval[componentId] = (typeof autoSlideInterval[componentId] != 'undefined' && autoSlideInterval[componentId] instanceof Array) ? autoSlideInterval[componentId] : [];

    if (!$this.hasClass('binded')) {
        $this.addClass('binded');

        // clear set interval
        if (autoSlideInterval[componentId].length > 0) {
            stopAutoSlider();
        }
        let $parWrap = $this.parent();
        //let perSlider = 1;
        //if (typeof ($parWrap.attr('data-perslider')) !== "undefined") {
        //    perSlider = parseInt($parWrap.attr('data-perslider'));
        //}
        let perSlider = DeviceItemPerView($parWrap.attr('data-perslider'));

        // to slide by one slide
        let isSingleSlide = '0';
        if (typeof ($this.parent().attr('data-singleslide')) !== "undefined") {
            isSingleSlide = $parWrap.attr('data-singleslide');
        }

        //width of the viewport (carousel parent container width)
        let viewportwidth = $this.find('.ImageSlider').width();

        //per item width    
        let itemsWidth = viewportwidth / perSlider;
        let items = $this.find('.itemWrapper').length;
        $this.find('.itemWrapper').width(itemsWidth);
        let totalwidth = (viewportwidth * items) / perSlider;
        $this.find('.itemsWrapper').width(totalwidth);

        let slidewidth = 0;
        let currentFrame = 1;
        let prevFrame = 0;
        let totalFrame = isSingleSlide === '1' ? (items - (perSlider - 1)) : Math.ceil(items / perSlider);
        totalFrame = totalFrame == 0 ? 1 : totalFrame;
        let firstLoad = true;
        let isTransition = false;

        function Animate() {
            let transType = "slide";
            if (typeof ($parWrap.attr('data-transition')) !== "undefined") {
                transType = $parWrap.attr('data-transition');
            }

            let animateCss = { "margin-left": slidewidth + "px" };
            let enableFade = false;
            switch (transType.toLowerCase()) {
                case "slide":
                    isTransition = true;
                    $this.find('.itemsWrapper > .itemWrapper').css({ "opacity": 1 });
                    $this.find('.itemsWrapper').animate(
                        animateCss, 'slow', function () {
                            firstLoad = false;
                            isTransition = false;
                            DisableButtons();
                            ActivateDot();
                        });
                    break;
                case "fade":
                    isTransition = true;
                    let c1 = prevFrame;
                    let c2 = currentFrame;
                    if (firstLoad) {
                        c1 = currentFrame;
                        c2 = currentFrame + 1;
                    }
                    let cIn = getSlideIndices(c1);
                    let cur = $this.find('.itemsWrapper > .itemWrapper').slice(cIn[0], cIn[1]);
                    let nIn = getSlideIndices(c2);
                    let nex = $this.find('.itemsWrapper > .itemWrapper').slice(nIn[0], nIn[1]);
                    if (nex.length == 0) {
                        cur.css('opacity', 1);
                        return;
                    }
                    //console.log("current frame ", c1, "next frame", c2);
                    //console.log("current slides ", cur, "next", nex);
                    $.when(cur.fadeTo(0.4, 1000)).done(function () {
                        firstLoad = false;
                        HideSlides(nex);
                        $this.find('.itemsWrapper').css(animateCss);
                        DisableButtons();
                        FadeSuccess(nex);
                        ActivateDot();
                    });
                    break;
                default:
            }
        }
        function getSlideIndices(frame) {
            let start = (frame * perSlider) - perSlider;
            let end = start + perSlider;
            return [start, end];
        }
        function HideSlides(nex) {
            nex.css('opacity', 0.4);
        }
        function FadeSuccess(nex) {
            $.when(nex.animate({ "opacity": '1' }, 1000, 'swing')).done(function () {
                isTransition = false;
            });
        }

        function slideRight() {
            if (isTransition) {
                return;
            }
            slidewidth -= (isSingleSlide === '1') ? itemsWidth : viewportwidth;
            prevFrame = currentFrame;
            currentFrame++;
            Animate();
        }

        function slideLeft() {
            if (isTransition) {
                return;
            }
            slidewidth += (isSingleSlide === '1') ? itemsWidth : viewportwidth;
            prevFrame = currentFrame;
            currentFrame--;
            Animate();
        }

        $this.find('.prev-btn').off().on('click', function () {
            if (currentFrame !== 1)
                slideLeft();
        });
        $this.find('.next-btn').off().on('click', function () {
            if (currentFrame !== totalFrame)
                slideRight();
        });
        function DisableButtons() {
            $this.find('.prev-btn').removeClass('disable');
            $this.find('.next-btn').removeClass('disable');
            if (currentFrame == 1)
                $this.find('.prev-btn').addClass('disable');
            if (currentFrame === totalFrame)
                $this.find('.next-btn').addClass('disable');
        }
        CreateBalls();
        Animate();
        DisableButtons();
        ActivateDot();
        function CreateBalls() {
            let dots = '';
            let limit = (isSingleSlide === '1') ? (items - (perSlider - 1)) : Math.ceil(items / perSlider);

            for (var balls = 0; balls < limit; balls++) {
                dots += '<span class="dots" style="display: inline-block; margin: 0 2px; height: 10px; width: 10px; border-radius: 50%; background-color: rgba(0,0,0,0.6);"></span>';
            }
            $this.find('.pager-dot').html(dots);
            $this.find('.pager-dot span').on('click', function () {
                if (isTransition) {
                    return;
                }
                let index = $this.find('.dots').index($(this));
                let clickIndex = index + 1;
                prevFrame = currentFrame;
                currentFrame = clickIndex;
                slidewidth = 0;
                slidewidth = (isSingleSlide === '1') ? -(itemsWidth * index) : -(viewportwidth * index);
                ActivateDot();
                Animate();
            });
        }

        function ActivateDot() {
            $this.find('.pager-dot').find('.dots').removeClass('active-dot').css("background-color", "rgba(0,0,0,0.6)");
            $this.find('.pager-dot').find('.dots').eq(currentFrame - 1).addClass('active-dot').css("background-color", "rgba(0,0,0,1)");

            SetDefaultDotSetting();
        }

        function SetDefaultDotSetting() {
            //  let $sliderWrap = $slider.closest('.layerSliderWrap');
            //dots color
            let dotscolor = $this.attr('data-dots-color');
            let dotsShape = $this.attr('data-dots-shape');
            let $dots = $this.find(".dots");
            let $activeDot = $this.find(".active-dot");
            let activeDotColor = $this.attr("data-activedot-color");
            let dotsize = $this.attr("data-dot-size");

            if (typeof dotsShape === 'undefined')
                dotsShape = '50%';
            if (typeof activeDotColor === 'undefined')
                activeDotColor = '#000000';
            if (typeof dotscolor === 'undefined') {
                dotscolor = '#ffffff';
            }
            //dots size
            if (typeof dotsize === 'undefined')
                dotsize = 'H-10 W-10';

            //$dots.removeClass(function (index, className) {
            //    return (className.match(/.*H-[0-9]{1,3}/g) || []).join(' ');
            //}).
            $dots.addClass(dotsize);

            $dots.css({
                'background-color': dotscolor,
                'border-radius': dotsShape
            });
            $activeDot.css('background-color', activeDotColor);
        }
        LoadLoop();
        //MouseEventOnAutoSlider();

        function LoadLoop() {
            let $par = $this.parent();
            let looperValue = $par.attr('data-loop');
            if (typeof looperValue !== "undefined" && looperValue === 'loop') {
                startAutoSlider();
            } else {
                stopAutoSlider();
            }
        }

        function startAutoSlider() {
            let $Interval = setInterval(function () {
                AutoSlide();
            }, 5000);
            autoSlideInterval[componentId].push($Interval);
        }

        function stopAutoSlider() {
            $.each(autoSlideInterval[componentId], function (i, v) {
                clearInterval(v);
            });
            autoSlideInterval[componentId] = [];
        }

        function AutoSlide() {
            if (currentFrame === totalFrame) {
                prevFrame = currentFrame;
                currentFrame = 1;
                slidewidth = 0;
                ActivateDot();
                Animate();
            } else {
                slideRight();
            }
        }
    }
}
function TriggerView($html) {
    $html.find('.editor-component').each(function () {
        let $this = $(this);
        let key = $this.find(' > .carries-options > .com-settings').attr('data-type');
        let compo = component[key];
        if (typeof compo !== "undefined" && typeof compo.afterdrop !== "undefined")
            compo.afterdrop($this.parent(), $this, false, true);
    });
}
function findSelectedLayer($elem) {
    let $editcontainer = $elem.find('> .editor-row-shaded-layer');
    if ($editcontainer.length > 0) {
        let $shadedLayer = $editcontainer.find('> .editor-row-container');
        if ($shadedLayer.length > 0) {
            return $shadedLayer;
        }
        else {
            return $editcontainer;
        }
    }
    else if ($elem.find('> .editor-row-container').length > 0) {
        return $elem.find('> .editor-row-container');
    }
    else {
        return $elem;
    }
}

//dom
function DOMCreateStart(tag, className, id, extra) {
    var returnDOM = '';
    if (tag !== undefined) {
        returnDOM += '<' + tag;
        if (className !== undefined && className.length > 0)
            returnDOM += ' class="' + className + '"';
        if (id !== undefined && id.length > 0)
            returnDOM += ' id="' + id + '" ';

        if (extra !== undefined && extra.length > 0) {
            var extraLength = extra.length;
            var dType = '';
            for (var extraItem = 0; extraItem < extraLength; extraItem++) {
                dType += ' ' + extra[extraItem];
            }
            returnDOM += dType;
        }
        returnDOM += '>';
    }
    return returnDOM;
}
function DOMCreateEnd(tag) {
    return '</' + tag + '>';
}
function DOMCreate(tag, appendData, className, id, extra) {
    return DOMCreateStart(tag, className, id, extra) + appendData + DOMCreateEnd(tag);
}
function DivCreate(className, id, datatype, style) {
    return DOMCreateStart('div', className, id, datatype, style);
}
function divStart(divClass) {
    return '<div class="' + divClass + '">';
}

//Responsive menu
function HammenuEvent() {
    $('.res-menu-trigger').off().on('click', function () {
        let $this = $(this);
        $('body').removeClass('offset-right').removeClass('offset-left').removeClass('offset-top');
        if ($this.parent().find('.menuHeader').hasClass('show-menu')) {
            $this.parent().find('.menuHeader').removeClass('show-menu');
            $this.removeClass('close-menu');
            $('.responsivefade').remove();
        }
        else {
            $this.parent().find('.menuHeader').addClass('show-menu');
            $this.addClass('close-menu');
            $('body').toggleClass('offset-menu');
            $this.parent().append('<div class="responsivefade"></div>');
            $('.responsivefade').off().on('click', function () {
                $('.res-menu-trigger').trigger('click');
            });
            if ($this.parent().hasClass('ham-right')) {
                $('body').addClass('offset-right');
            }
            else if ($this.parent().hasClass('ham-left')) {
                $('body').addClass('offset-left');
            }
            else if ($this.parent().hasClass('ham-top')) {
                $('body').addClass('offset-top');
            }
        }
    });
}
HammenuEvent();
//$('.responsivefade').off().on('click', function () {
//    $(this).siblings('nav').toggleClass('show-menu');
//    $(this).toggleClass('close-menu');
//    $('body').toggleClass('offset-menu');
//    $('body').append('<div class="responsivefade"></div>');
//});

function ViewDeviceAlpha() {
    let device = '';
    if (typeof DeviceAlpha === 'function') {
        device = DeviceAlpha();
    } else {
        let dim = ScreenDimension();
        if (dim.width <= 767) {
            device = 'm';
        } else if (dim.width <= 1023) {
            device = 't';
        }
    }
    return device;
}

function DeviceItemPerView(perViewData) {
    let perView = 1;
    if (typeof (perViewData) !== "undefined") {
        if (!isNaN(perViewData)) {
            perView = parseInt(perViewData);
        } else {
            try {
                let jsonD = JSON.parse(perViewData);
                let dev = ViewDeviceAlpha();
                if (dev.length == 0) dev = "d";
                if (typeof jsonD[dev] !== 'undefined' && !isNaN(jsonD[dev])) {
                    perView = parseInt(jsonD[dev]);
                }
            } catch (e) {
                console.error("Invalid Per view data ", perViewData);
            }
        }
    }
    return perView;
}

function SetDeviceItemPerView(prevData, value) {
    let dev = ViewDeviceAlpha();
    if (dev.length == 0) dev = "d";
    let jsonD = {};
    jsonD[dev] = value;
    if (typeof prevData !== 'undefined') {
        try {
            let tmp = JSON.parse(prevData);
            jsonD = $.extend({}, tmp, jsonD);
        } catch (e) {
            console.log("Prev data is not in JSON format ", prevData);
        }
    }
    return JSON.stringify(jsonD);
}

function ViewMouseOverEffect() {
    function ApplyEffects($this) {
        let previousdata = {
            "bg": $this.css('background-color'),
            "font": "#000",
            "box": {
                "on": "off",
                "hl": "0px",
                "vl": "1px",
                "br": "5px",
                "c": "#000",
                "i": "false",
            },
            "border": {
                "on": "off",
                "top": "0",
                "right": "0",
                "bottom": "0",
                "left": "0",
                "tc": "#000",
                "rc": "#000",
                "bc": "#000",
                "lc": "#000"
            },
            "zoom": null
        };
        let hoverEffect = JSON.parse($this.attr('data-hovereffect'));
        if ($this.find('.onhoverbgcolor').length > 0) {
            previousdata.bg = $this.find('.onhoverbgcolor').eq(0).css('background-color');
            $this.find('.onhoverbgcolor').css({ 'background-color': hoverEffect.bg });
        }
        else {
            previousdata.bg = $this.css('background-color');
            if (hoverEffect.bg !== 'none')
                $this.css({ 'background-color': hoverEffect.bg });
        }
        if ($this.find('.onhovercolor').length > 0) {
            previousdata.font = $this.find('.onhovercolor').eq(0).css('color');
            $this.find('.onhovercolor').css({ 'color': hoverEffect.font });
        }
        else {
            previousdata.font = $this.css('color');
            $this.css({ 'color': hoverEffect.font });
        }
        let zoomClass = $this.attr('class').match(/scale-[0-1]-[0-9]/g);
        if (zoomClass !== null) {
            $this.removeClass(zoomClass[0]);
            previousdata.zoom = zoomClass[0];
        }
        let zoom = hoverEffect.zoom;
        $this.addClass('scale-' + parseInt(zoom / 10) + '-' + (zoom % 10));
        let $shadow = hoverEffect.box;
        function ParentBoxShadow() {
            previousdata.box.on = "off";
            let boxShadow = $this.css('box-shadow');
            if (typeof (boxShadow) !== "undefined" && boxShadow !== null && boxShadow !== 'none') {
                previousdata.box.on = "on";
                let lenCol = boxShadow.match(/-?\d{1,3}px/g);
                previousdata.box.hl = lenCol[0] + ' ';// parseInt(lenCol[0].replace('px', ''));
                previousdata.box.vl = lenCol[1] + ' ';//parseInt(lenCol[1].replace('px', ''));
                previousdata.box.br = lenCol[2] + ' ';// parseInt(lenCol[2].replace('px', ''));
                let inset = '';
                let hasInset = boxShadow.match(/inset/);
                if (hasInset !== null && hasInset.length > 0) {
                    inset = ' inset ';
                }
                previousdata.box.i = inset;
                let spreadDistace = '';
                if (lenCol.length == 4)
                    spreadDistace = lenCol[3];
                let dropColor = boxShadow.replace(previousdata.box.hl, '')
                    .replace(previousdata.box.vl, '')
                    .replace(previousdata.box.br, '')
                    .replace(spreadDistace, '')
                    .replace('inset', '').trim();
                if (dropColor.length > 0) {
                    previousdata.box.c = dropColor;
                }
            }
            if ($shadow.on === "on") {
                let shadowDOM = '';
                shadowDOM += $shadow.c;
                shadowDOM += $shadow.hl;
                shadowDOM += $shadow.vl;
                shadowDOM += $shadow.br;
                shadowDOM += $shadow.i;
                $this.css({ 'box-shadow': shadowDOM });
            }
        }
        let $border = hoverEffect.border;
        function BorderOnHover() {
            previousdata.border.on = $this.css("border-top-style");
            previousdata.border.top = $this.css("border-top-width");
            previousdata.border.right = $this.css("border-right-width");
            previousdata.border.bottom = $this.css("border-bottom-width");
            previousdata.border.left = $this.css("border-left-width");

            previousdata.border.tc = $this.css('border-top-color');
            previousdata.border.rc = $this.css('border-right-color');
            previousdata.border.bc = $this.css('border-bottom-color');
            previousdata.border.lc = $this.css('border-left-color');

            if ($border.on !== "none") {
                $this.css({
                    "border-style": $border.on,
                    "border-top-width": $border.top,
                    "border-right-width": $border.right,
                    "border-bottom-width": $border.bottom,
                    "border-left-width": $border.left,
                    'border-top-color': $border.tc,
                    'border-right-color': $border.rc,
                    'border-bottom-color': $border.bc,
                    'border-left-color': $border.lc
                });
            }
        }
        ParentBoxShadow();
        BorderOnHover();
        $this.attr('data-prevhovereffect', JSON2.stringify(previousdata));
    }

    function ResetPreviousEffect($this) {
        let hoverEffect = JSON.parse($this.attr('data-prevhovereffect'));
        $this.css({ 'background-color': hoverEffect.bg });
        if ($this.find('.onhoverbgcolor').length > 0) {
            $this.find('.onhoverbgcolor').css({ 'background-color': hoverEffect.bg });
        }
        else {
            $this.css({ 'background-color': hoverEffect.bg });
        }
        if ($this.find('.onhovercolor').length > 0) {
            $this.find('.onhovercolor').css({ 'color': hoverEffect.font });
        }
        else {
            $this.css({ 'color': hoverEffect.font });
        }

        $this.removeAttr('data-prevhovereffect');
        let zoomClass = $this.attr('class').match(/scale-[0-1]-[0-9]/g);
        if (zoomClass !== null) {
            $this.removeClass(zoomClass[0]);
        }
        if (typeof (hoverEffect.zoom) !== "undefined") {
            $this.addClass(hoverEffect.zoom);
        }
        let $shadow = hoverEffect.box;
        if ($shadow.on === "on") {
            let shadowDOM = '';
            shadowDOM += $shadow.c;
            shadowDOM += $shadow.hl;
            shadowDOM += $shadow.vl;
            shadowDOM += $shadow.br;
            shadowDOM += $shadow.i;
            $this.css({ 'box-shadow': shadowDOM });
        }
        else {
            $this.css({ 'box-shadow': '' });
        }
        let $border = hoverEffect.border;
        //if ($border.on !== "none") {
        $this.css({
            "border-style": $border.on,
            "border-top-width": $border.top,
            "border-right-width": $border.right,
            "border-bottom-width": $border.bottom,
            "border-left-width": $border.left,
            'border-top-color': $border.tc,
            'border-right-color': $border.rc,
            'border-bottom-color': $border.bc,
            'border-left-color': $border.lc
        });
        //}
    }
    $('.hovered').off('mouseover').on('mouseover', function () {
        ApplyEffects($(this));
    });
    $('.hovered').off('mouseout').on('mouseout', function () {
        ResetPreviousEffect($(this));
    });
}

function ChangeRedirectURL($selector) {
    if (typeof ($selector) == "undefined")
        $selector = $('.redirectLink');
    $selector.off().on('click', function (e) {
        let $this = $(this);
        e.preventDefault();
        let param = $this.attr('data-param');
        if (typeof (param) == "undefined")
            param = QueryParams;
        let viewMode = EditorMode ? "/webbuilder" : "";
        let url = SageFrameHostURL + viewMode + "/" + $this.attr('data-pageName') + CultureURL + param;
        window.location = url;
    });
}/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 20112014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
(function ($) {

    // Detect touch support
    $.support.touch = 'ontouchend' in document;

    // Ignore browsers without touch support
    if (!$.support.touch) {
        return;
    }

    var mouseProto = $.ui.mouse.prototype,
        _mouseInit = mouseProto._mouseInit,
        _mouseDestroy = mouseProto._mouseDestroy,
        touchHandled;

    /**
     * Simulate a mouse event based on a corresponding touch event
     * @param {Object} event A touch event
     * @param {String} simulatedType The corresponding mouse event
     */
    function simulateMouseEvent(event, simulatedType) {

        // Ignore multi-touch events
        if (event.originalEvent.touches.length > 1) {
            return;
        }

        event.preventDefault();

        var touch = event.originalEvent.changedTouches[0],
            simulatedEvent = document.createEvent('MouseEvents');

        // Initialize the simulated mouse event using the touch event's coordinates
        simulatedEvent.initMouseEvent(
            simulatedType,    // type
            true,             // bubbles                    
            true,             // cancelable                 
            window,           // view                       
            1,                // detail                     
            touch.screenX,    // screenX                    
            touch.screenY,    // screenY                    
            touch.clientX,    // clientX                    
            touch.clientY,    // clientY                    
            false,            // ctrlKey                    
            false,            // altKey                     
            false,            // shiftKey                   
            false,            // metaKey                    
            0,                // button                     
            null              // relatedTarget              
        );

        // Dispatch the simulated event to the target element
        event.target.dispatchEvent(simulatedEvent);
    }

    /**
     * Handle the jQuery UI widget's touchstart events
     * @param {Object} event The widget element's touchstart event
     */
    mouseProto._touchStart = function (event) {

        var self = this;

        // Ignore the event if another widget is already being handled
        if (touchHandled || !self._mouseCapture(event.originalEvent.changedTouches[0])) {
            return;
        }

        // Set the flag to prevent other widgets from inheriting the touch event
        touchHandled = true;

        // Track movement to determine if interaction was a click
        self._touchMoved = false;

        // Simulate the mouseover event
        simulateMouseEvent(event, 'mouseover');

        // Simulate the mousemove event
        simulateMouseEvent(event, 'mousemove');

        // Simulate the mousedown event
        simulateMouseEvent(event, 'mousedown');
    };

    /**
     * Handle the jQuery UI widget's touchmove events
     * @param {Object} event The document's touchmove event
     */
    mouseProto._touchMove = function (event) {

        // Ignore event if not handled
        if (!touchHandled) {
            return;
        }

        // Interaction was not a click
        this._touchMoved = true;

        // Simulate the mousemove event
        simulateMouseEvent(event, 'mousemove');
    };

    /**
     * Handle the jQuery UI widget's touchend events
     * @param {Object} event The document's touchend event
     */
    mouseProto._touchEnd = function (event) {

        // Ignore event if not handled
        if (!touchHandled) {
            return;
        }

        // Simulate the mouseup event
        simulateMouseEvent(event, 'mouseup');

        // Simulate the mouseout event
        simulateMouseEvent(event, 'mouseout');

        // If the touch interaction did not move, it should trigger a click
        if (!this._touchMoved) {

            // Simulate the click event
            simulateMouseEvent(event, 'click');
        }

        // Unset the flag to allow other widgets to inherit the touch event
        touchHandled = false;
    };

    /**
     * A duck punch of the $.ui.mouse _mouseInit method to support touch events.
     * This method extends the widget with bound touch event handlers that
     * translate touch events to mouse events and pass them to the widget's
     * original mouse event handling methods.
     */
    mouseProto._mouseInit = function () {

        var self = this;

        // Delegate the touch handlers to the widget's element
        self.element.bind({
            touchstart: $.proxy(self, '_touchStart'),
            touchmove: $.proxy(self, '_touchMove'),
            touchend: $.proxy(self, '_touchEnd')
        });

        // Call the original $.ui.mouse init method
        _mouseInit.call(self);
    };

    /**
     * Remove the touch event handlers
     */
    mouseProto._mouseDestroy = function () {

        var self = this;

        // Delegate the touch handlers to the widget's element
        self.element.unbind({
            touchstart: $.proxy(self, '_touchStart'),
            touchmove: $.proxy(self, '_touchMove'),
            touchend: $.proxy(self, '_touchEnd')
        });

        // Call the original $.ui.mouse destroy method
        _mouseDestroy.call(self);
    };

})(jQuery);/*! tinyColorPicker - v1.0.4 2016-04-17 */

/*The MIT License (MIT)
Copyright (c) 2016 Peter Dematt
Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/

!function (a, b) { "object" == typeof exports ? module.exports = b(a) : "function" == typeof define && define.amd ? define("colors", [], function () { return b(a) }) : a.Colors = b(a) }(this, function (a, b) { "use strict"; function c(a, c, d, f, g) { if ("string" == typeof c) { var c = v.txt2color(c); d = c.type, p[d] = c[d], g = g !== b ? g : c.alpha } else if (c) for (var h in c) a[d][h] = k(c[h] / l[d][h][1], 0, 1); return g !== b && (a.alpha = k(+g, 0, 1)), e(d, f ? a : b) } function d(a, b, c) { var d = o.options.grey, e = {}; return e.RGB = { r: a.r, g: a.g, b: a.b }, e.rgb = { r: b.r, g: b.g, b: b.b }, e.alpha = c, e.equivalentGrey = n(d.r * a.r + d.g * a.g + d.b * a.b), e.rgbaMixBlack = i(b, { r: 0, g: 0, b: 0 }, c, 1), e.rgbaMixWhite = i(b, { r: 1, g: 1, b: 1 }, c, 1), e.rgbaMixBlack.luminance = h(e.rgbaMixBlack, !0), e.rgbaMixWhite.luminance = h(e.rgbaMixWhite, !0), o.options.customBG && (e.rgbaMixCustom = i(b, o.options.customBG, c, 1), e.rgbaMixCustom.luminance = h(e.rgbaMixCustom, !0), o.options.customBG.luminance = h(o.options.customBG, !0)), e } function e(a, b) { var c, e, k, q = b || p, r = v, s = o.options, t = l, u = q.RND, w = "", x = "", y = { hsl: "hsv", rgb: a }, z = u.rgb; if ("alpha" !== a) { for (var A in t) if (!t[A][A]) { a !== A && (x = y[A] || "rgb", q[A] = r[x + "2" + A](q[x])), u[A] || (u[A] = {}), c = q[A]; for (w in c) u[A][w] = n(c[w] * t[A][w][1]) } z = u.rgb, q.HEX = r.RGB2HEX(z), q.equivalentGrey = s.grey.r * q.rgb.r + s.grey.g * q.rgb.g + s.grey.b * q.rgb.b, q.webSave = e = f(z, 51), q.webSmart = k = f(z, 17), q.saveColor = z.r === e.r && z.g === e.g && z.b === e.b ? "web save" : z.r === k.r && z.g === k.g && z.b === k.b ? "web smart" : "", q.hueRGB = v.hue2RGB(q.hsv.h), b && (q.background = d(z, q.rgb, q.alpha)) } var B, C, D, E = q.rgb, F = q.alpha, G = "luminance", H = q.background; return B = i(E, { r: 0, g: 0, b: 0 }, F, 1), B[G] = h(B, !0), q.rgbaMixBlack = B, C = i(E, { r: 1, g: 1, b: 1 }, F, 1), C[G] = h(C, !0), q.rgbaMixWhite = C, s.customBG && (D = i(E, H.rgbaMixCustom, F, 1), D[G] = h(D, !0), D.WCAG2Ratio = j(D[G], H.rgbaMixCustom[G]), q.rgbaMixBGMixCustom = D, D.luminanceDelta = m.abs(D[G] - H.rgbaMixCustom[G]), D.hueDelta = g(H.rgbaMixCustom, D, !0)), q.RGBLuminance = h(z), q.HUELuminance = h(q.hueRGB), s.convertCallback && s.convertCallback(q, a), q } function f(a, b) { var c = {}, d = 0, e = b / 2; for (var f in a) d = a[f] % b, c[f] = a[f] + (d > e ? b - d : -d); return c } function g(a, b, c) { return (m.max(a.r - b.r, b.r - a.r) + m.max(a.g - b.g, b.g - a.g) + m.max(a.b - b.b, b.b - a.b)) * (c ? 255 : 1) / 765 } function h(a, b) { for (var c = b ? 1 : 255, d = [a.r / c, a.g / c, a.b / c], e = o.options.luminance, f = d.length; f--;) d[f] = d[f] <= .03928 ? d[f] / 12.92 : m.pow((d[f] + .055) / 1.055, 2.4); return e.r * d[0] + e.g * d[1] + e.b * d[2] } function i(a, c, d, e) { var f = {}, g = d !== b ? d : 1, h = e !== b ? e : 1, i = g + h * (1 - g); for (var j in a) f[j] = (a[j] * g + c[j] * h * (1 - g)) / i; return f.a = i, f } function j(a, b) { var c = 1; return c = a >= b ? (a + .05) / (b + .05) : (b + .05) / (a + .05), n(100 * c) / 100 } function k(a, b, c) { return a > c ? c : b > a ? b : a } var l = { rgb: { r: [0, 255], g: [0, 255], b: [0, 255] }, hsv: { h: [0, 360], s: [0, 100], v: [0, 100] }, hsl: { h: [0, 360], s: [0, 100], l: [0, 100] }, alpha: { alpha: [0, 1] }, HEX: { HEX: [0, 16777215] } }, m = a.Math, n = m.round, o = {}, p = {}, q = { r: .298954, g: .586434, b: .114612 }, r = { r: .2126, g: .7152, b: .0722 }, s = function (a) { this.colors = { RND: {} }, this.options = { color: "rgba(0,0,0,0)", grey: q, luminance: r, valueRanges: l }, t(this, a || {}) }, t = function (a, d) { var e, f = a.options; u(a); for (var g in d) d[g] !== b && (f[g] = d[g]); e = f.customBG, f.customBG = "string" == typeof e ? v.txt2color(e).rgb : e, p = c(a.colors, f.color, b, !0) }, u = function (a) { o !== a && (o = a, p = a.colors) }; s.prototype.setColor = function (a, d, f) { return u(this), a ? c(this.colors, a, d, b, f) : (f !== b && (this.colors.alpha = k(f, 0, 1)), e(d)) }, s.prototype.setCustomBackground = function (a) { return u(this), this.options.customBG = "string" == typeof a ? v.txt2color(a).rgb : a, c(this.colors, b, "rgb") }, s.prototype.saveAsBackground = function () { return u(this), c(this.colors, b, "rgb", !0) }, s.prototype.toString = function (a, b) { return v.color2text((a || "rgb").toLowerCase(), this.colors, b) }; var v = { txt2color: function (a) { var b = {}, c = a.replace(/(?:#|\)|%)/g, "").split("("), d = (c[1] || "").split(/,\s*/), e = c[1] ? c[0].substr(0, 3) : "rgb", f = ""; if (b.type = e, b[e] = {}, c[1]) for (var g = 3; g--;) f = e[g] || e.charAt(g), b[e][f] = +d[g] / l[e][f][1]; else b.rgb = v.HEX2rgb(c[0]); return b.alpha = d[3] ? +d[3] : 1, b }, color2text: function (a, b, c) { var d = c !== !1 && n(100 * b.alpha) / 100, e = "number" == typeof d && c !== !1 && (c || 1 !== d), f = b.RND.rgb, g = b.RND.hsl, h = "hex" === a && e, i = "hex" === a && !h, j = "rgb" === a || h, k = j ? f.r + ", " + f.g + ", " + f.b : i ? "#" + b.HEX : g.h + ", " + g.s + "%, " + g.l + "%"; return i ? k : (h ? "rgb" : a) + (e ? "a" : "") + "(" + k + (e ? ", " + d : "") + ")" }, RGB2HEX: function (a) { return ((a.r < 16 ? "0" : "") + a.r.toString(16) + (a.g < 16 ? "0" : "") + a.g.toString(16) + (a.b < 16 ? "0" : "") + a.b.toString(16)).toUpperCase() }, HEX2rgb: function (a) { return a = a.split(""), { r: +("0x" + a[0] + a[a[3] ? 1 : 0]) / 255, g: +("0x" + a[a[3] ? 2 : 1] + (a[3] || a[1])) / 255, b: +("0x" + (a[4] || a[2]) + (a[5] || a[2])) / 255 } }, hue2RGB: function (a) { var b = 6 * a, c = ~~b % 6, d = 6 === b ? 0 : b - c; return { r: n(255 * [1, 1 - d, 0, 0, d, 1][c]), g: n(255 * [d, 1, 1, 1 - d, 0, 0][c]), b: n(255 * [0, 0, d, 1, 1, 1 - d][c]) } }, rgb2hsv: function (a) { var b, c, d, e = a.r, f = a.g, g = a.b, h = 0; return g > f && (f = g + (g = f, 0), h = -1), c = g, f > e && (e = f + (f = e, 0), h = -2 / 6 - h, c = m.min(f, g)), b = e - c, d = e ? b / e : 0, { h: 1e-15 > d ? p && p.hsl && p.hsl.h || 0 : b ? m.abs(h + (f - g) / (6 * b)) : 0, s: e ? b / e : p && p.hsv && p.hsv.s || 0, v: e } }, hsv2rgb: function (a) { var b = 6 * a.h, c = a.s, d = a.v, e = ~~b, f = b - e, g = d * (1 - c), h = d * (1 - f * c), i = d * (1 - (1 - f) * c), j = e % 6; return { r: [d, h, g, g, i, d][j], g: [i, d, d, h, g, g][j], b: [g, g, i, d, d, h][j] } }, hsv2hsl: function (a) { var b = (2 - a.s) * a.v, c = a.s * a.v; return c = a.s ? 1 > b ? b ? c / b : 0 : c / (2 - b) : 0, { h: a.h, s: a.v || c ? c : p && p.hsl && p.hsl.s || 0, l: b / 2 } }, rgb2hsl: function (a, b) { var c = v.rgb2hsv(a); return v.hsv2hsl(b ? c : p.hsv = c) }, hsl2rgb: function (a) { var b = 6 * a.h, c = a.s, d = a.l, e = .5 > d ? d * (1 + c) : d + c - c * d, f = d + d - e, g = e ? (e - f) / e : 0, h = ~~b, i = b - h, j = e * g * i, k = f + j, l = e - j, m = h % 6; return { r: [e, l, f, f, k, e][m], g: [k, e, e, l, f, f][m], b: [f, f, k, e, e, l][m] } } }; return s }), function (a, b) { "object" == typeof exports ? module.exports = b(a, require("jquery"), require("colors")) : "function" == typeof define && define.amd ? define(["jquery", "colors"], function (c, d) { return b(a, c, d) }) : b(a, a.jQuery, a.Colors) }(this, function (a, b, c, d) { "use strict"; function e(a) { return a.value || a.getAttribute("value") || b(a).css("background-color") || "#FFF" } function f(a) { return a = a.originalEvent && a.originalEvent.touches ? a.originalEvent.touches[0] : a, a.originalEvent ? a.originalEvent : a } function g(a) { return b(a.find(r.doRender)[0] || a[0]) } function h(c) { var d = b(this), f = d.offset(), h = b(a), k = r.gap; c ? (s = g(d), s._colorMode = s.data("colorMode"), p.$trigger = d, (t || i()).css(r.positionCallback.call(p, d) || { left: (t._left = f.left) - ((t._left += t._width - (h.scrollLeft() + h.width())) + k > 0 ? t._left + k : 0), top: (t._top = f.top + d.outerHeight()) - ((t._top += t._height - (h.scrollTop() + h.height())) + k > 0 ? t._top + k : 0) }).show(r.animationSpeed, function () { c !== !0 && (y.toggle(!!r.opacity)._width = y.width(), v._width = v.width(), v._height = v.height(), u._height = u.height(), q.setColor(e(s[0])), n(!0)) }).off(".tcp").on(D, ".cp-xy-slider,.cp-z-slider,.cp-alpha", j)) : p.$trigger && b(t).hide(r.animationSpeed, function () { n(!1), p.$trigger = null }).off(".tcp") } function i() { return b("head")[r.cssPrepend ? "prepend" : "append"]('<style type="text/css" id="tinyColorPickerStyles">' + (r.css || I) + (r.cssAddon || "") + "</style>"), b(H).css({ margin: r.margin }).appendTo("body").show(0, function () { p.$UI = t = b(this), F = r.GPU && t.css("perspective") !== d, u = b(".cp-z-slider", this), v = b(".cp-xy-slider", this), w = b(".cp-xy-cursor", this), x = b(".cp-z-cursor", this), y = b(".cp-alpha", this), z = b(".cp-alpha-cursor", this), r.buildCallback.call(p, t), t.prepend("<div>").children().eq(0).css("width", t.children().eq(0).width()), t._width = this.offsetWidth, t._height = this.offsetHeight }).hide() } function j(a) { var c = this.className.replace(/cp-(.*?)(?:\s*|$)/, "$1").replace("-", "_"); (a.button || a.which) > 1 || (a.preventDefault && a.preventDefault(), a.returnValue = !1, s._offset = b(this).offset(), (c = "xy_slider" === c ? k : "z_slider" === c ? l : m)(a), n(), A.on(E, function () { A.off(".tcp") }).on(C, function (a) { c(a), n() })) } function k(a) { var b = f(a), c = b.pageX - s._offset.left, d = b.pageY - s._offset.top; q.setColor({ s: c / v._width * 100, v: 100 - d / v._height * 100 }, "hsv") } function l(a) { var b = f(a).pageY - s._offset.top; q.setColor({ h: 360 - b / u._height * 360 }, "hsv") } function m(a) { var b = f(a).pageX - s._offset.left, c = b / y._width; q.setColor({}, "rgb", c) } function n(a) { var b = q.colors, c = b.hueRGB, e = (b.RND.rgb, b.RND.hsl, r.dark), f = r.light, g = q.toString(s._colorMode, r.forceAlpha), h = b.HUELuminance > .22 ? e : f, i = b.rgbaMixBlack.luminance > .22 ? e : f, j = (1 - b.hsv.h) * u._height, k = b.hsv.s * v._width, l = (1 - b.hsv.v) * v._height, m = b.alpha * y._width, n = F ? "translate3d" : "", p = s[0].value, t = s[0].hasAttribute("value") && "" === p && a !== d; v._css = { backgroundColor: "rgb(" + c.r + "," + c.g + "," + c.b + ")" }, w._css = { transform: n + "(" + k + "px, " + l + "px, 0)", left: F ? "" : k, top: F ? "" : l, borderColor: b.RGBLuminance > .22 ? e : f }, x._css = { transform: n + "(0, " + j + "px, 0)", top: F ? "" : j, borderColor: "transparent " + h }, y._css = { backgroundColor: "#" + b.HEX }, z._css = { transform: n + "(" + m + "px, 0, 0)", left: F ? "" : m, borderColor: i + " transparent" }, s._css = { backgroundColor: t ? "" : g, color: t ? "" : b.rgbaMixBGMixCustom.luminance > .22 ? e : f }, s.text = t ? "" : p !== g ? g : "", a !== d ? o(a) : G(o) } function o(a) { v.css(v._css), w.css(w._css), x.css(x._css), y.css(y._css), z.css(z._css), r.doRender && s.css(s._css), s.text && s.val(s.text), r.renderCallback.call(p, s, "boolean" == typeof a ? a : d) } var p, q, r, s, t, u, v, w, x, y, z, A = b(document), B = b(), C = "touchmove.tcp mousemove.tcp pointermove.tcp", D = "touchstart.tcp mousedown.tcp pointerdown.tcp", E = "touchend.tcp mouseup.tcp pointerup.tcp", F = !1, G = a.requestAnimationFrame || a.webkitRequestAnimationFrame || function (a) { a() }, H = '<div class="cp-color-picker"><div class="cp-z-slider"><div class="cp-z-cursor"></div></div><div class="cp-xy-slider"><div class="cp-white"></div><div class="cp-xy-cursor"></div></div><div class="cp-alpha"><div class="cp-alpha-cursor"></div></div></div>', I = ".cp-color-picker{position:absolute;overflow:hidden;padding:6px 6px 0;background-color:#444;color:#bbb;font-family:Arial,Helvetica,sans-serif;font-size:12px;font-weight:400;cursor:default;border-radius:5px}.cp-color-picker>div{position:relative;overflow:hidden}.cp-xy-slider{float:left;height:128px;width:128px;margin-bottom:6px;background:linear-gradient(to right,#FFF,rgba(255,255,255,0))}.cp-white{height:100%;width:100%;background:linear-gradient(rgba(0,0,0,0),#000)}.cp-xy-cursor{position:absolute;top:0;width:10px;height:10px;margin:-5px;border:1px solid #fff;border-radius:100%;box-sizing:border-box}.cp-z-slider{float:right;margin-left:6px;height:128px;width:20px;background:linear-gradient(red 0,#f0f 17%,#00f 33%,#0ff 50%,#0f0 67%,#ff0 83%,red 100%)}.cp-z-cursor{position:absolute;margin-top:-4px;width:100%;border:4px solid #fff;border-color:transparent #fff;box-sizing:border-box}.cp-alpha{clear:both;width:100%;height:16px;margin:6px 0;background:linear-gradient(to right,#444,rgba(0,0,0,0))}.cp-alpha-cursor{position:absolute;margin-left:-4px;height:100%;border:4px solid #fff;border-color:#fff transparent;box-sizing:border-box}", J = function (a) { q = this.color = new c(a), r = q.options, p = this }; J.prototype = { render: n, toggle: h }, b.fn.colorPicker = function (c) { var d = this, f = function () { }; return c = b.extend({ animationSpeed: 150, GPU: !0, doRender: !0, customBG: "#FFF", opacity: !0, renderCallback: f, buildCallback: f, positionCallback: f, body: document.body, scrollResize: !0, gap: 4, dark: "#222", light: "#DDD" }, c), !p && c.scrollResize && b(a).on("resize.tcp scroll.tcp", function () { p.$trigger && p.toggle.call(p.$trigger[0], !0) }), B = B.add(this), this.colorPicker = p || new J(c), this.options = c, b(c.body).off(".tcp").on(D, function (a) { -1 === B.add(t).add(b(t).find(a.target)).index(a.target) && h() }), this.on("focusin.tcp click.tcp", function (a) { p.color.options = b.extend(p.color.options, r = d.options), h.call(this, a) }).on("change.tcp", function () { q.setColor(this.value || "#FFF"), d.colorPicker.render(!0) }).each(function () { var a = e(this), d = a.split("("), f = g(b(this)); f.data("colorMode", d[1] ? d[0].substr(0, 3) : "HEX").attr("readonly", r.preventFocus), c.doRender && f.css({ "background-color": a, color: function () { return q.setColor(a).rgbaMixBGMixCustom.luminance > .22 ? c.dark : c.light } }) }) }, b.fn.colorPicker.destroy = function () { b("*").off(".tcp"), p.toggle(!1), B = b() } });/**
 * dependencies:
 * variables.js
 * functions.js
 */
function GenericRemove($ele) {
    $ele.find('.SetHdlr').remove();
    $ele.find('.ui-droppable').each(function () {
        $(this).removeClass('ui-droppable');
    });
    $ele.find('.ui-sortable').each(function () {
        $(this).removeClass('ui-sortable');
    });
    /*remove contenteditable*/
    $ele.find('.editor-para').removeAttr('contenteditable');
    $ele.find('.rowTitleHeading > h1').removeAttr('contenteditable');
    $ele.find('.rowTitleHeading > h1').removeAttr('contenteditable');
    $ele.find('.editor-component > h1').removeAttr('contenteditable');
    $ele.find('.editor-component span').removeAttr('contenteditable');
    $ele.find('.editor-component').removeClass('ui-sortable');
    $ele.find('.editor-component').removeClass('ui-droppable');
    $ele.find('.resizebar').remove();
    $ele.find('.noElement').remove();
    $ele.find('.pagelink.active-page').removeClass('active-page');
    /*to be remove at last*/
    $ele.find('.editor-col').each(function () {
        let $this = $(this);
        $this.removeAttr('data-width');
        $('.editor-col').css({ 'width': '' });
    });
}
function FontawesomeFonts() {
    let html = '';
    $.each(fontawesomeClasses, function (i, fontClass) {
        html += "<li><i class='fa " + fontClass + "' data-class='" + fontClass + "'></i>" + "</li>";
    });
    $('#fontIconCollection').html(html);
}
FontawesomeFonts();

function DOMFontBasicCollection() {
    let basicFontDOM = '';
    let keys = Object.keys(fontCollectionBasics);
    let len = keys.length;
    for (var k = 0; k < len; k++) {
        basicFontDOM += '<option class="f-weight-400 ff-' + fontCollectionBasics[keys[k]].Text.toLowerCase().replace(' ', '') + '" value="' + keys[k] + '" >' + fontCollectionBasics[keys[k]].Text + '</option>';
    }
    return basicFontDOM;
}
function DOMFontAdvanceCollection() {
    let basicFontDOM = '';
    let keys = Object.keys(fontCollectionBasics);
    let len = keys.length;
    for (var k = 0; k < len; k++) {
        basicFontDOM += '<option class="f-weight-400 ff-' + fontCollectionBasics[keys[k]].Text.toLowerCase().replace(' ', '') + '" value="' + keys[k] + '" >' + fontCollectionBasics[keys[k]].Text + '</option>';
    }
    keys = Object.keys(fontCollectionStyling);
    len = keys.length;
    for (var l = 0; l < len; l++) {
        basicFontDOM += '<option class="f-weight-400 ff-' + fontCollectionStyling[keys[l]].Text.toLowerCase().replace(' ', '') + '" value="' + keys[l] + '" >' + fontCollectionStyling[keys[l]].Text + '</option>';
    }
    return basicFontDOM;
}
function DOMFontWeight(fontName) {
    let fontWeightDOM = '';
    let weights = '';
    if (typeof (fontCollectionBasics[fontName.toLowerCase()]) !== "undefined") {
        weights = fontCollectionBasics[fontName.toLowerCase()].weight;
    }
    else {
        weights = fontCollectionStyling[fontName.toLowerCase()].weight;
    }
    let len = weights.length;
    for (var k = 0; k < len; k++) {
        fontWeightDOM += '<option value="' + weights[k] + '" >' + weights[k] + '</option>';
    }
    return fontWeightDOM;
}
function GeneralAlignment($par) {
    let alignmentClasses = $par.attr('class').match(/text-align-[a-z]{4,6}/g);
    let alignClass = '';
    if (alignmentClasses !== null) {
        alignClass = alignmentClasses[0];
    }
    $('.alignmentWrapper').find('i[data-class="' + alignClass + '"]').addClass('selected');
}
function GeneralAlignmentEvent($par) {
    $('.alignmentWrapper i').off().on('click', function () {
        let $this = $(this);
        let alignmentClasses = $par.attr('class').match(/text-align-[a-z]{4,6}/g);
        let alignClass = '';
        if (alignmentClasses !== null) {
            alignClass = alignmentClasses[0];
            $par.removeClass(alignClass);
        }
        $par.addClass($this.attr('data-class'));
        $('.alignmentWrapper i').removeClass('selected');
        $this.addClass('selected');
    });
}
function SageSlider($slider, $sliderHandler, min, max, initialValue, callbackFunction, $parent) {
    $slider.slider({
        range: "max",
        min: min,
        max: max,
        value: initialValue,
        create: function () {
            $sliderHandler.text($(this).slider("value"));
        },
        slide: function (event, ui) {
            let space = ui.value;
            $sliderHandler.text(space);
            if (typeof (callbackFunction) === 'function') {
                callbackFunction(space, $parent);
            }
            else if (typeof (callbackFunction) === 'string') {
                window[callbackFunction](space, $parent);
            }
        }
    });
}
function AdvanceSageSlider($slider, $sliderHandler, min, max, initialValue, callbackFunction, $parent, type, ref, stopfunction) {
    if (typeof ref === 'undefined') {
        ref = null;
    }
    let tempFunction = function () { };
    $slider.slider({
        range: "max",
        min: min,
        max: max,
        value: initialValue,
        create: function () {
            $sliderHandler.text($(this).slider("value"));
        },
        slide: function (event, ui) {
            let space = ui.value;
            $sliderHandler.text(space);
            if (typeof (callbackFunction) === 'function') {
                /*callbackFunction(space, $parent);*/
                tempFunction = callbackFunction;
            }
            else if (typeof (callbackFunction) === 'string') {
                /* window[callbackFunction](space, $parent);*/
                tempFunction = window[callbackFunction];
            }
            tempFunction(space, $parent, ref);
        },
        stop: function (event, ui) {
            let space = ui.value;
            if (typeof (stopfunction) === 'function') {
                stopfunction(space, $parent, ref);
            }
        }
    });
    if (typeof (callbackFunction) === 'function') {
        tempFunction = callbackFunction;
    }
    else if (typeof (callbackFunction) === 'string') {
        tempFunction = window[callbackFunction];
    }
    BuildManualSize($slider, min, max, initialValue, type, tempFunction, $parent, ref, stopfunction);
}
function ChangeSliderValue($slider, newSize) {
    $slider.slider({
        value: newSize
    });
    $slider.slider('option', 'slide');
    $slider.find('> div.ui-slider-handle').text(newSize);
    $slider.slider("enable");
}
function BuildManualSize($sliders, min, max, initialValue, type, tempFunction, $parent, ref, stopfunction) {
    let decreaseSize = document.createElement('i');
    decreaseSize.className = 'decreaseSliderSize fa fa-chevron-left';
    decreaseSize.onclick = function () {
        let $this = $(this);
        let $slider = $this.parent().prev();
        let newSize = parseInt($slider.find('> div.ui-slider-handle').text());
        let limit = parseInt($this.attr('data-min'));
        if (newSize > limit) {
            newSize = newSize - 1;
            ChangeSliderValue($slider, newSize);
            tempFunction(newSize, $parent, ref);
            if (typeof (stopfunction) === 'function') {
                stopfunction(newSize, $parent, ref);
            }
        }
    };
    decreaseSize.setAttribute('data-min', min);
    let increaseSize = document.createElement('i');
    increaseSize.className = 'increaseSliderSize fa fa-chevron-right';
    increaseSize.onclick = function () {
        let $this = $(this);
        let $slider = $this.parent().prev();
        let newSize = parseInt($slider.find('> div.ui-slider-handle').text());
        let limit = parseInt($this.attr('data-max'));
        if (newSize < limit) {
            newSize = newSize + 1;
            ChangeSliderValue($slider, newSize);
            tempFunction(newSize, $parent, ref);
            if (typeof (stopfunction) === 'function') {
                stopfunction(newSize, $parent, ref);
            }
        }
    };
    increaseSize.setAttribute('data-max', max);
    let $sliderHelper = $(DOMCreate('span', '', 'manualSize'));
    $sliderHelper.insertAfter($sliders);
    $sliderHelper.append(decreaseSize);
    $sliderHelper.append(increaseSize);
    $sliderHelper.append(DOMCreate('span', type, 'slider-type'));
}
function PagelinkStop() {
    $('.pagelink').not('.onepage').off().on('click', function (e) {
        let tempName = $(this).find('.pageName').text();
        e.preventDefault();
        SageConfirmDialog(`Are you sure you want to switch to ${tempName}? All your unsaved data maybe lost.`).done(function () {
            ReloadPageNone();
            let href = SageFrameHostURL + '/WebBuilder' + webBuilderPageExtension + '/' + tempName.replace(/ /g, '-') + CultureURL;
            window.location = href;
        });
    });
    anylinkstop();
}
function anylinkstop() {
    $('.anylinkstop').off('click').on('click', function (e) {
        let $this = $(this);
        let message = $this.attr('data-message');
        e.preventDefault();
        //let href = $this.attr('href');
        //if (typeof href === 'undefined')
        //    href = $this.attr('data-href');
        //if (typeof href !== 'undefined') {
        //    SageConfirmDialog(message).done(function () {
        //        ReloadPageNone();
        //        window.location = href;
        //    });
        //}
    });
}
function ColorPickerOption($option) {
    let objColor = {};
    let colorPickerOption = {
        customBG: '#222',
        margin: '4px -2px 0',
        doRender: 'div div',
        buildCallback: function ($elm) {
            BuildColorPicker($elm, this);
        },
        renderCallback: function ($elm, toggled) {
            let objColor = RenderCallBackColor(this);
            /* Example of implementation*/
            /*var objColor = RenderCallBackColor(this);
            objColor.bgColor
            objColor.textColor
            apply the color logic here
            let colorPickerID = $elm.attr('id');*/
        },
        positionCallback: function ($elm) {

        },
    };
    return $.extend(colorPickerOption, $option);
}
function GetThemeColor() {
    let primaryColor = $('#primaryColor').css('background-color');
    let secondaryColor = $('#secondaryColor').css('background-color');
    let optionalColor = $('#optionalColor').css('background-color');
    let html = DOMCreate('div', '', 'themeColorpicker', '', ['style="background-color: #fff0;"']);
    html += DOMCreate('div', '', 'themeColorpicker', 'primaryChange', ['style="background-color: ' + primaryColor + ';"']);
    html += DOMCreate('div', '', 'themeColorpicker', 'secondaryChange', ['style="background-color: ' + secondaryColor + ';"']);
    html += DOMCreate('div', '', 'themeColorpicker', 'optionalChange', ['style="background-color: ' + optionalColor + ';"']);
    html += DOMCreate('div', '', 'themeColorpicker', '', ['style="background-color: #FFF;"']);
    html += DOMCreate('div', '', 'themeColorpicker', '', ['style="background-color: #000;"']);
    html += DOMCreate('div', '', 'themeColorpicker', '', ['style="background-color: #CCC;"']);
    //html += DOMCreate('div', '', 'themeColorpicker', '', ['style="background-color: #121212;"']);
    // html += DOMCreate('h6', 'Set Color Tranparency');
    html = DOMCreate('div', '<h6>Choose From Theme Colors</h6>' + html, 'themeColorpickerWrapper');
    return html;
}

function BuildColorPicker($element, $thisElem) {
    let colorInstance = $thisElem.color,
        colorPicker = $thisElem;
    /* original DOM
    $element.prepend('<div class="cp-panel">' +
        'R <input type="text" class="cp-r" /><br>' +
        'G <input type="text" class="cp-g" /><br>' +
        'B <input type="text" class="cp-b" /><hr>' +
        'H <input type="text" class="cp-h" /><br>' +
        'S <input type="text" class="cp-s" /><br>' +
        'B <input type="text" class="cp-v" /><hr>' +
        'Paste color code<br>' +
        '<input type="text" class="cp-HEX" />' +
        '</div>').on('change', 'input', function (e) {
            let value = this.value,
                className = this.className,
                type = className.split('-')[1],
                color = {};
            color[type] = value;
            colorInstance.setColor(type === 'HEX' ? value : color,
                type === 'HEX' ? 'HEX' : /(?:r|g|b)/.test(type) ? 'rgb' : 'hsv');
            colorPicker.render();
            this.blur();
        }); */
    $element.append('<div class="cp-panel">' +
        ' <input type="text" class="cp-r Dn" />' +
        ' <input type="text" class="cp-g Dn" />' +
        ' <input type="text" class="cp-b Dn" />' +
        ' <input type="text" class="cp-h Dn" />' +
        ' <input type="text" class="cp-s Dn" />' +
        ' <input type="text" class="cp-v Dn" />' +
        'Paste color code<br>' +
        '<input type="text" class="cp-HEX" />' +
        '</div>').on('change', 'input', function (e) {
            let value = this.value,
                className = this.className,
                type = className.split('-')[1],
                color = {};
            color[type] = value;
            colorInstance.setColor(type === 'HEX' ? value : color,
                type === 'HEX' ? 'HEX' : /(?:r|g|b)/.test(type) ? 'rgb' : 'hsv');
            colorPicker.render();
            this.blur();
        });
    $element.prepend(GetThemeColor());
    $('.themeColorpicker').off().on('click', function () {
        $('.cp-HEX').val($(this).css('background-color'));
        $('.cp-HEX').trigger('change');
    });
}
function RenderCallBackColor($thisElem) {
    let colors = $thisElem.color.colors.RND,
        modes = {
            r: colors.rgb.r, g: colors.rgb.g, b: colors.rgb.b,
            h: colors.hsv.h, s: colors.hsv.s, v: colors.hsv.v,
            HEX: $thisElem.color.colors.HEX
        };
    $('input', '.cp-panel').each(function () {
        this.value = modes[this.className.substr(3)];
    });

    colors = $thisElem.color.colors;
    let colorsRGB = colors.RND.rgb;
    let alpha = colors.alpha;
    let textColor = '';
    if (colors.RGBLuminance > 0.22) {
        textColor = '#222';
    }
    else {
        textColor = '#ddd';
    }
    let bgColor = 'rgba(' + colorsRGB.r + ', ' + colorsRGB.g + ', ' + colorsRGB.b + ',' + alpha + ')';
    let colorObj = {
        'bgColor': bgColor,
        'textColor': textColor
    };
    return colorObj;
}
var sagemedia;
$(function () {
    sagemedia = $(this).SageMedia({
        userModuleID: webBuilderUserModuleID,
        onSelect: function (src, response, type, filename, extension) {

        },
        success: function (resposne) {
            $image.attr('src', resposne.filePath).attr('alt', resposne.alt);
        },
        mediaType: 'image',
        extension: 'png,jpeg,jpg,ico,svg,gif,webp'
    });
});
//function SageMedia($image) {
//    $image.SageMedia({
//        userModuleID: webBuilderUserModuleID,
//        onSelect: function (src, response, type, filename, extension) {

//        },
//        success: function (resposne) {
//            $image.attr('src', resposne.filePath).attr('alt', resposne.alt);
//        },
//        mediaType: 'image',
//        extension: 'png,jpeg,jpg,ico,svg,gif,webp'
//    });
//}
function InitTab() {
    AppendArrowEvent();
    $('.content').hide().filter(':first').show();
    $('#tabs li[data-tabs]').on('click', function () {
        $('#tabs li[data-tabs]').removeClass('active');
        $('.tabcontent').hide();
        let tab = $(this).data('tabs');
        $(this).addClass('active');
        $('#' + tab).fadeIn().show();
        let datatype = $activeDOM.attr("data-type");
        let tabName = $(this).text();
        let settings = $('#tabs').attr("data-settingtype");
        if (EasyLibrary.IsDefined(component[datatype])
            && EasyLibrary.IsDefined(component[datatype][settings])
            && EasyLibrary.IsDefined(component[datatype][settings].tabs)
            && EasyLibrary.IsDefined(component[datatype][settings].tabs[tabName])
            && EasyLibrary.IsDefined(component[datatype][settings].tabs[tabName].active)
        )
            component[datatype][settings].tabs[tabName].active();
    });
    $(".tabs li").click(function () {
        let cur = $(".tabs li").index(this);
        let elm = $('.tabcontent:eq(' + cur + ')');
        elm.addClass("pulse");
        setTimeout(function () {
            elm.removeClass("pulse");
        }, 220);
    });
    $('#tabs li[data-tabs]').eq(0).trigger('click');
}
function SettingEvents($elem) {
    let $comsettings = $('.com-settings');
    let $comStyle = $('.com-style');
    let $comTemp = $('.com-temp');
    let $settingStyle = $('.s-style');
    let $imagesettings = $('.image-settings');
    let $duplicateHolder = $('.duplicateHolder');
    let $manageData = $('.manageData');
    let $settingList = $('.SetHdlr > .stng >.cb-stng');
    let $addtobucket = $('.holder-bucket');
    let $extrasettings = $('.extra-settings');
    if (typeof $elem !== "undefined") {
        $comsettings = $elem.find('.com-settings');
        $comStyle = $elem.find('.com-style');
        $comTemp = $elem.find('.com-temp');
        $settingStyle = $elem.find('.s-style');
        $imagesettings = $elem.find('.image-settings');
        $duplicateHolder = $elem.find('.duplicateHolder');
        $manageData = $elem.find('.manageData');
        $settingList = $elem.find('.SetHdlr > .stng >.cb-stng');
        $addtobucket = $elem.find('.holder-bucket');
        $extrasettings = $elem.find('.extra-settings');
    }
    $extrasettings.off().on('click', function () {
        HidePopUpSetting();
        let $this = $(this);
        let $offset = $this.offset();
        let top = $offset.top;
        let left = $offset.left;
        let height = $this.height();
        $('.activeSetting').removeClass('activeSetting');
        let $parent = $this.closest('.SetHdlr').parent();
        $parent.addClass('activeSetting');
        $activeDOM = $parent;
        let componentType = $this.attr('data-type');
        let type = "extraSettingDOMs";
        let title = componentType;
        if (EasyLibrary.IsDefined($this.attr('data-title')))
            title = $this.attr('data-title');
        PopUpSetting(title, '50%', left, 0, 0, componentType, type, $parent, $this);
        $('.collapse').trigger('click');
    });
    $comsettings.off().on('click', function () {
        HidePopUpSetting();
        let $this = $(this);
        let $offset = $this.offset();
        let top = $offset.top;
        let left = $offset.left;
        let height = $this.height();
        $('.activeSetting').removeClass('.activeSetting');
        let $parent = $this.closest('.SetHdlr').parent();
        $parent.addClass('activeSetting');
        $activeDOM = $parent;
        let componentType = $this.attr('data-type');
        if (EasyLibrary.IsDefined(component[componentType]) && EasyLibrary.IsDefined(component[componentType].inherits)) {
            componentType = component[componentType].inherits;
        }
        let title = componentType;
        if (EasyLibrary.IsDefined($this.attr('data-title')))
            title = $this.attr('data-title');
        let type = "settingDOMs";
        PopUpSetting(title, '50%', left, 0, 0, componentType, type, $parent, $this);
        $('.collapse').trigger('click');
    });
    $settingStyle.off().on('click', function () {
        HidePopUpSetting();
        let $this = $(this);
        let $offset = $this.offset();
        let top = $offset.top;
        let left = $offset.left;
        let height = $this.height();
        $('.activeSetting').removeClass('activeSetting');
        let $parent = $this.closest('.SetHdlr').parent();
        $parent.addClass('activeSetting');
        $activeDOM = $parent;
        let componentType = $this.attr('data-type');
        if (EasyLibrary.IsDefined(component[componentType]) && EasyLibrary.IsDefined(component[componentType].inherits)) {
            componentType = component[componentType].inherits;
        }
        let type = "styleDOMs";
        let title = componentType;
        if (EasyLibrary.IsDefined($this.attr('data-title')))
            title = $this.attr('data-title');
        PopUpSetting(title, '50%', left, 0, 0, componentType, type, $parent, $this);
        $('.collapse').trigger('click');
    });

    $comStyle.off().on('click', function () {
        let $this = $(this);
        let dataType = $this.attr('data-type');
        $('.activeSetting').removeClass('activeSetting');
        let $parent = $this.closest('.SetHdlr').parent();
        $parent.addClass('activeSetting');
        $activeDOM = $parent;
        //var $element = $this.parent().parent();
        //if ($element.hasClass('editor-row-container')) {
        //    if ($element.parent().hasClass('editor-row-shaded-layer')) {
        //        $element = $element.parent().parent();
        //    }
        //    else if ($element.parent().hasClass('editor-row ')) {
        //        $element = $element.parent();
        //    }
        //}
        //else if ($element.hasClass('editor-row-shaded-layer')) {
        //    if ($element.parent().hasClass('editor-row ')) {
        //        $element = $element.parent();
        //    }
        //}
        if (typeof (component[dataType].beforedrop) !== 'undefined') {
            component[dataType].beforedrop($activeDOM.parent(), $activeDOM, false);
        }
    });

    $comTemp.off('click').on('click', function () {
        EasyLibrary.ComponentTemplate($(this).closest('.editor-component'), false);
    });
    $imagesettings.off().on('click', function () {
        let $image = $(this).closest('.editor-component').find('img');
        let media = $image.SageMedia({
            userModuleID: webBuilderUserModuleID,
            onSelect: function (src, response, type, filename, extension) {

            },
            success: function (resposne) {
                $image.attr('src', resposne.filePath.replace(/\/{2,}/g, '/')).attr('alt', resposne.alt);
            },
            mediaType: 'image',
            extension: 'png,jpeg,jpg,ico,svg,gif,webp'
        });
        media.Show();
    });
    $duplicateHolder.off().on('click', function () {
        let $this = $(this);
        $('.activeSetting').removeClass('activeSetting');
        let $parent = $this.closest('.SetHdlr').parent();
        $parent.addClass('activeSetting');
        $activeDOM = $parent;
        //var $copyParent = $this.closest('.editor-component');
        //if ($copyParent.hasClass('editor-row-shaded-layer')) {
        //    $copyParent = $copyParent.parent();
        //}
        let copyAttrs = $activeDOM.attrs();
        let $html = $(DOMCreate('div', $activeDOM.html()));
        $html.insertAfter($activeDOM);
        $html.attrs(copyAttrs);
        $html.removeAttr('data-opscroll').removeClass('activeSetting');
        RowEvents();
        DraggableSortable();
        BindColumnEvents($html);
        CopyPasteEvents($html);
        ChangeIDWithParent($html);
        // $html.find(".holder-bucket").addToBucket();
    });
    EditableSetBreak($elem);
    $settingList.off().on('click', function () {
        $('.activeSetting').removeClass('activeSetting');
        var $this = $(this);
        let $parent = $this.closest('.SetHdlr').parent();
        $parent.addClass('activeSetting');
        $activeDOM = $parent;
        $('.main-left , #popupModel').hide();
        if ($('.active.changePort').hasClass('desktop')) {
            let $this = $(this).parent().parent();
            if ($this.hasClass('active')) {
                $this.removeClass('active');
                $this.find('.setDrp').hide();
            }
            else {
                $('.SetHdlr').removeClass('active');
                $this.addClass('active');
                $('.setDrp').hide();
                $this.find('.setDrp').show();
            }
        }
        else {
            //in other device 
            let componentType = $activeDOM.attr('data-type');
            if (EasyLibrary.IsDefined(component[componentType])) {
                if (EasyLibrary.IsDefined(component[componentType].inherits)) {
                    componentType = component[componentType].inherits;
                }
                let title = componentType;
                if (EasyLibrary.IsDefined($this.attr('data-title')))
                    title = $this.attr('data-title');
                let type = "responsiveDOMs";
                $('#tabs').attr("data-settingtype", type);
                if (component[componentType].row && !EasyLibrary.IsDefined(component[componentType].settingDOMs) && !EasyLibrary.IsDefined(component[componentType].styleDOMs))
                    componentType = 'row';
                PopUpSettingResponsive(title, 0, 0, 0, 0, componentType, type, $activeDOM);
            }
        }
    });
    $manageData.off().on('click', function () {
        let $href = $(this).attr('data-href');
        if (EasyLibrary.IsDefined($href)) {
            window.location = $href;
        }
        else {
            HidePopUpSetting();
            $('.activeSetting').removeClass('activeSetting');
            let $parent = $(this).closest('.SetHdlr').parent();
            $parent.addClass('activeSetting');
            $activeDOM = $parent;
            let $this = $activeDOM;
            let componentType = $this.attr('data-type');
            if (EasyLibrary.IsDefined(component[componentType]) && EasyLibrary.IsDefined(component[componentType].inherits)) {
                componentType = component[componentType].inherits;
            }
            if (EasyLibrary.IsDefined(component[componentType]) && EasyLibrary.IsDefined(component[componentType].managedata)) {
                let option = {
                    heading: "Manage Data",
                    data: "no data",
                    showheading: true,
                    width: "80%",
                    height: "80%",
                    advance: false,
                    onappend: function ($wrapper) {
                    },
                    onclose: function ($wrapper) {
                    }
                };
                if (EasyLibrary.IsDefined(component[componentType].managedata.option)) {
                    option = $.extend(option, component[componentType].managedata.option);
                }
                FullPagePopup(option);
            }
        }
    });
    $('.SetHdlr >.mvUp').off().on('click', function () {
        let $child = $(this).parents('.cRow');
        let $parent = $child.parent();
        let total = $parent.find('> .cRow').length;
        let index = $parent.find('> .cRow').index($child);
        if (index > 0 && index < total) {
            $child.insertBefore($child.prev()).animate({}, 5000);
        }
    });
    $('.SetHdlr >.mvDn').off().on('click', function () {
        let $child = $(this).closest('.cRow');
        let $parent = $child.parent();
        let total = $parent.find('> .cRow').length;
        let index = $parent.find('> .cRow').index($child);
        if (index => 0 && index < total) {
            $child.insertAfter($child.next()).animate({}, 5000);
        }
    });
    CopyPlaneText();
    $addtobucket.off('click').on('click', function () {
        $(this).addToBucket();
    });
    DeleteComponent($elem);
}
function ChangeIDWithParent($changeParent) {
    EasyLibrary.GenerateAndAppendID($changeParent);
    $changeParent.find("div[data-id]").each(function ($i, $v) {
        EasyLibrary.GenerateAndAppendID($(this));
    });
}


function UpdateSettingKeyValue(key, value) {
    SecureAjaxCall.PassObject({
        async: false,
        url: `${SageFrameHostURL}/webbuilder/UpdateSettings`,
        data: JSON.stringify({
            Key: key,
            Value: value,
        }),
        success: function () {
            return 1;
        }
    });

}
function PopUpSetting(title, top, left, height, width, componentType, type, $parentRow, $this) {
    let $popUpModel = $('#popupModel');
    $popUpModel.find('.pTitle').text(title);
    if (EasyLibrary.Pinned()) {
        let siteWidth = ScreenDimension().width - $('#popupModel').width();
        $popUpModel.css({ 'top': '0px', 'left': `${siteWidth}px` }).fadeIn(400);
    }
    else {
        let sidebarWidth = $('.editor-box').offset().left;
        let screenWidth = ($('.editor-box').width() - sidebarWidth) / 2;
        let scrPer = screenWidth * 0.1;
        if (left < screenWidth)
            $popUpModel.css({ top: '0%', left: 'auto', right: scrPer + 'px', 'position': 'fixed' }).fadeIn(400);
        else
            $popUpModel.css({ top: '0%', left: (sidebarWidth + scrPer) + 'px', 'position': 'fixed' }).fadeIn(400);
    }
    if (typeof (component[componentType]) === 'undefined') {
        $popUpModel.find('.popup-model-body').html(easyMessageList.componentSettingNotexists);
    }
    else {
        if (typeof (component[componentType][type]) !== 'undefined') {
            BuildSettingDOM(component[componentType], $this, type);
        }
        else if (typeof (component[componentType][type]) !== 'undefined') {
            $popUpModel.find('.popup-model-body').html(component[componentType][type]);
        }
        if (typeof (component[componentType].loadSetting) !== 'undefined') {
            component[componentType].loadSetting($this);
        }
        /* remove the tab there is only one */
        let tabs = $popUpModel.find('#tabs').find('.tabs li').length;
        if (tabs == 1) {
            width = $popUpModel.find('#tabs').find('.tabsWrapper').width();
            $popUpModel.find('#tabs').find('.tabs').remove();
            $('.popup-model').css({ 'width': width });
        }
        else {
            $('.popup-model').css({ 'width': '' });
        }
    }
}
function PopUpSettingResponsive(title, top, left, height, width, componentType, type, $par) {
    let $popUpModel = $('#popupModel');
    $popUpModel.find('.pTitle').text(title);
    let $compo = component[componentType];
    let appendData = '';
    if (EasyLibrary.IsDefined($compo[type]) && EasyLibrary.IsDefined($compo[type].tabs)) {
        let $tabResponsiveComponent = $compo[type].tabs;
        let tabKeys = Object.keys($tabResponsiveComponent);
        let tabLength = tabKeys.length;
        let tabs = '';
        let tabData = '';
        let tab = '';
        //var $selectedLayer = $this.closest('.SetHdlr').parent();
        for (let j = 0; j < tabLength; j++) {
            let $tabCompo = tabKeys[j];
            tab = 'tab' + (j + 1);
            let showTab = true;
            if (typeof ($tabResponsiveComponent[$tabCompo].show) !== "undefined") {
                showTab = $tabResponsiveComponent[$tabCompo].show;
            }
            if (showTab === true)
                tabs += DOMCreate('li', $tabCompo, '', '', ['data-tabs="' + tab + '"']);

            if ($tabResponsiveComponent[$tabCompo].custom) {
                if (typeof ($tabResponsiveComponent[$tabCompo].DOM) !== 'undefined') {
                    appendData = $tabResponsiveComponent[$tabCompo].DOM;
                }
            }
            else {
                switch ($tabCompo.toLowerCase()) {
                    case 'basic':
                        if (typeof ($tabResponsiveComponent[$tabCompo].options) !== 'undefined') {
                            appendData = '<div class="field-row" id="responsiveBasic">' + staticDOMs.responsivebasic + '</div>';
                        }
                        break;
                    case 'spacing':
                        if (typeof ($tabResponsiveComponent[$tabCompo].options) !== 'undefined') {
                            appendData = '<div class="field-row" id="responsiveSpace"></div>';
                        }
                        break;
                    case 'alignment':
                        if (typeof ($tabResponsiveComponent[$tabCompo].options) !== 'undefined') {
                            appendData = GeneralAlignMentDOM($tabResponsiveComponent[$tabCompo].options);
                        }
                        break;
                    default:
                        if (typeof ($compo[type].tabs[$tabCompo].DOM) !== 'undefined') {
                            appendData = $compo[type].tabs[$tabCompo].DOM;
                        }
                        break;
                }
            }
            //appendData = ScrollBarDOM() + appendData.WrapScroller();
            if (j === 0) {
                tabData += DOMCreate('div', appendData, 'tabcontent scroll__parent', tab);
            }
            else {
                tabData += DOMCreate('div', appendData, 'tabcontent scroll__parent', tab, ['style="display: none;"']);
            }
        }
        let settingTabDOM = DOMCreate('ul', tabs, 'tabs');
        settingTabDOM = Appendleftright(settingTabDOM);
        settingTabDOM += DOMCreate('div', tabData, 'tabsWrapper');
        settingTabDOM = DOMCreate('div', settingTabDOM, '', 'tabs');
        $('#popupModel .popup-model-body').html(settingTabDOM);
        $('#tabs').attr("data-settingtype", type);
        InitTab();
        for (let j = 0; j < tabLength; j++) {
            let $tabCompo = tabKeys[j];
            if ($tabResponsiveComponent[$tabCompo].custom) {
                if (typeof ($tabResponsiveComponent[$tabCompo].onload) !== 'undefined') {
                    $tabResponsiveComponent[$tabCompo].onload($par);
                }
            }
            else {
                switch ($tabCompo.toLowerCase()) {
                    case 'basic':
                        if (typeof ($tabResponsiveComponent[$tabCompo].options) !== 'undefined') {
                            ResponsiveBasicEvents($tabResponsiveComponent[$tabCompo].options);
                        }
                        break;
                    case 'spacing':
                        {
                            let $selectedLayer = $activeDOM;
                            if (typeof ($tabResponsiveComponent[$tabCompo].selectLayer) !== 'undefined') {
                                $selectedLayer = $tabResponsiveComponent[$tabCompo].selectLayer($activeDOM);
                            }
                            if (typeof ($tabResponsiveComponent[$tabCompo].options) !== 'undefined') {
                                $("#responsiveSpace").AdvanceSpacing({
                                    targetParent: $selectedLayer.parent(),
                                    targetElem: $selectedLayer,
                                    options: $tabResponsiveComponent[$tabCompo].options
                                });
                            }
                        }
                        break;
                    case 'alignment':
                        {
                            let $selectedLayer = $activeDOM;
                            if (typeof ($tabResponsiveComponent[$tabCompo].selectLayer) !== 'undefined') {
                                $selectedLayer = $tabResponsiveComponent[$tabCompo].selectLayer($activeDOM);
                            }
                            if (typeof ($tabResponsiveComponent[$tabCompo].options) !== 'undefined') {
                                GeneralAlignMentEvents($selectedLayer);
                            }
                        }
                        break;
                    default:
                        if (typeof ($tabResponsiveComponent[$tabCompo].onload) !== 'undefined') {
                            $tabResponsiveComponent[$tabCompo].onload($par);
                        }
                        break;
                }
            }
            //appendData = ScrollBarDOM() + appendData.WrapScroller();
            if (j === 0) {
                tabData += DOMCreate('div', appendData, 'tabcontent scroll__parent', tab);
            }
            else {
                tabData += DOMCreate('div', appendData, 'tabcontent scroll__parent', tab, ['style="display: none;"']);
            }
        }
    }
    else {
        $('#popupModel .popup-model-body').html("This component doenot have responsive settings ");
    }
    $('#popupModel').css({
        'right': 0,
        'left': 'auto',
        'top': 0,
        'position': 'fixed'
    }).fadeIn(400);
}
function Appendleftright(tabs) {
    return DOMCreate('span', '<i class="fa fa-chevron-left"></i>', 'tabmoveleft', 'tabmoveleft') + DOMCreate('div', tabs, 'tabHeadWrap', 'tabHeadWrap') + DOMCreate('span', '<i class="fa fa-chevron-right"></i>', 'tabmoveright', 'tabmoveright');
}
function AppendArrowEvent() {
    let wrapperWidth = $('#tabHeadWrap').width();
    let innerWrapperWidth = 0;
    $('#tabHeadWrap > .tabs li').each(function () {
        innerWrapperWidth += $(this).width() + 16;//left right padding of each li
    });
    innerWrapperWidth = innerWrapperWidth + 17;//padding left of last child
    $('#tabHeadWrap > .tabs').css({ 'width': innerWrapperWidth + 'px' });
    if (innerWrapperWidth <= wrapperWidth) {
        $('.tabmoveleft').hide();
        $('.tabmoveright').hide();
        $('#tabHeadWrap > .tabs').addClass('nothing');
    }
    else {
        $('.tabmoveleft').on('click', function () {
            document.getElementById('tabHeadWrap').scrollLeft -= 70;
        });
        $('.tabmoveright').on('click', function () {
            document.getElementById('tabHeadWrap').scrollLeft += 70;
        });
    }
}
function ResponsiveBasicEvents($option) {
    Load();
    function Load() {
        let optionKeys = Object.keys($option);
        let optionLength = optionKeys.length;
        let $impactLayer = $activeDOM;
        for (var i = 0; i < optionLength; i++) {
            let $optionKeys = optionKeys[i];
            $impactLayer = $activeDOM;
            if (EasyLibrary.IsDefined($option[$optionKeys].selectLayer)) {
                $impactLayer = $option[$optionKeys].selectLayer();
            }
            switch ($optionKeys.toLowerCase()) {
                case 'height':
                    HeightInit($impactLayer, $option[$optionKeys].callback);
                    $('#responsiveBasicDOM > div[data-opt="height"]').removeClass('Dn');
                    break;
                case 'lineheight':
                    LineHeightInit($impactLayer, $option[$optionKeys].callback);
                    $('#responsiveBasicDOM > div[data-opt="lineheight"]').removeClass('Dn');
                    break;
                case 'width':
                    WidthInit($impactLayer, $option[$optionKeys].callback);
                    $('#responsiveBasicDOM > div[data-opt="width"]').removeClass('Dn');
                    break;
                case 'fontsize':
                    FontSizeInit($impactLayer, $option[$optionKeys].callback);
                    $('#responsiveBasicDOM > div[data-opt="fontsize"]').removeClass('Dn');
                    break;
                case 'visibility':
                    Visibility($impactLayer);
                    $('#responsiveBasicDOM > div[data-opt="visibility"]').removeClass('Dn');
                    break;
                case 'ordering':
                    Ordering($impactLayer);
                    $('#responsiveBasicDOM > div[data-opt="ordering"]').removeClass('Dn');
                    break;
                default:
                    if (typeof ($option[$optionKeys].DOM) !== 'undefined') {
                        if (typeof ($option[$optionKeys].prepend) !== 'undefined') {
                            $('#responsiveBasicDOM').prepend($option[$optionKeys].DOM);
                        }
                        else {
                            $('#responsiveBasicDOM').append($option[$optionKeys].DOM);
                        }
                    }
                    if (typeof ($option[$optionKeys].onload) !== 'undefined') {
                        $option[$optionKeys].onload();
                    }
                    break;
            }
        }
        $('#responsiveBasicDOM > div.Dn').remove();
    }
    function HeightInit($selectDOM, callback) {
        let parentClasses = $selectDOM.attr('class');
        let dAlpha = DeviceAlphaSpace();
        let regex = new RegExp(dAlpha + 'H-[0-9]{1,4}', 'g');
        let HeightClass = parentClasses.match(regex);
        let height = $selectDOM.height();
        if (HeightClass !== null) {
            height = HeightClass[0].replace(dAlpha + 'H-', '');
        }
        function ResponsiveHeight(space, $parent) {
            dAlpha = DeviceAlphaSpace();
            parentClasses = $selectDOM.attr('class');
            regex = new RegExp(dAlpha + 'H-[0-9]{1,4}', 'g');
            let HeightClass = parentClasses.match(regex);
            let height = 0;
            if (HeightClass !== null) {
                $selectDOM.removeClass(HeightClass[0]);
            }
            $selectDOM.addClass(dAlpha + 'H-' + space);
        }
        if (EasyLibrary.IsDefined(callback)) {
            ResponsiveHeight = callback;
        }
        AdvanceSageSlider($('#boxHeightSlider'), $('#boxHeightHandle'), 1, 1000, height, ResponsiveHeight, $selectDOM, 'px');
    }
    function LineHeightInit($selectDOM, callback) {
        let $parent = $selectDOM;
        function LineHeightChange(space) {
            ReplaceClassByPattern($parent, 'Lh-[0-9]{1,4}', 'Lh-' + space);
        }
        AdvanceSageSlider($('#respoLineHeightSizeSlider'), $('#respolineHeightHandle'), 5, 200,
            GetValueByClassName($parent, 'Lh-[0-9]{1,4}', 'Lh-'), LineHeightChange, $parent, 'px');
    }
    function WidthInit($selectDOM, callback) {
        let parentClasses = $selectDOM.attr('class');
        let dAlpha = DeviceAlphaSpace();
        let regex = new RegExp(dAlpha + 'sfCol_[0-9]{1,3}', 'g');
        let sfWidth = parentClasses.match(regex);
        let width = 100;
        if (sfWidth !== null) {
            width = sfWidth[0].split('_')[1];
        }
        function ResponsiveWidth(space, $parent) {
            dAlpha = DeviceAlphaSpace();
            regex = new RegExp(dAlpha + 'sfCol_[0-9]{1,3}', 'g');
            parentClasses = $selectDOM.attr('class');
            let sfWidth = parentClasses.match(regex);
            if (sfWidth !== null) {
                $selectDOM.removeClass(sfWidth[0]);
            }
            $selectDOM.addClass(dAlpha + 'sfCol_' + space);
        }
        if (EasyLibrary.IsDefined(callback)) {
            ResponsiveWidth = callback;
        }
        AdvanceSageSlider($('#boxWidthSlider'), $('#boxWidthHandle'), 1, 100, width, ResponsiveWidth, $selectDOM, 'px');
    }
    function FontSizeInit($selectDOM, callback) {
        let parentClasses = $selectDOM.attr('class');
        let dAlpha = DeviceAlphaSpace();
        let regex = new RegExp(dAlpha + 'Fs-[0-9]{1,4}', 'g');
        let fontSizeClass = parentClasses.match(regex);
        let fontSize = 0;
        if (fontSizeClass !== null) {
            fontSize = fontSizeClass[0].replace(dAlpha + 'Fs-', '');
        }
        function ResponsiveFontSize(space, $parent) {
            dAlpha = DeviceAlphaSpace();
            parentClasses = $selectDOM.attr('class');
            regex = new RegExp(dAlpha + 'Fs-[0-9]{1,4}', 'g');
            let fontClass = parentClasses.match(regex);
            if (fontClass !== null) {
                $selectDOM.removeClass(fontClass[0]);
            }
            $selectDOM.addClass(dAlpha + 'Fs-' + space);
        }
        if (EasyLibrary.IsDefined(callback)) {
            ResponsiveFontSize = callback;
        }
        AdvanceSageSlider($('#fontSizeSlider'), $('#fontSizeHandle'), 1, 100, fontSize, ResponsiveFontSize, $selectDOM, 'px');
    }
    function Visibility($selectDOM) {
        let parentClasses = $selectDOM.attr('class');
        let dAlpha = DeviceAlphaSpace();
        let regex = new RegExp(dAlpha + 'Dn', 'g');
        let visibilityClass = parentClasses.match(regex);
        if (visibilityClass !== null)
            $('#deviceVisibility').prop('checked', false);
        else
            $('#deviceVisibility').prop('checked', true);
        $('#deviceVisibility').off().on('click', function () {
            dAlpha = DeviceAlphaSpace();
            if ($(this).is(':checked')) {
                $selectDOM.removeClass(dAlpha + 'Dn').addClass(dAlpha + 'Dib');
            }
            else {
                $selectDOM.addClass(dAlpha + 'Dn').removeClass(dAlpha + 'Dib');
            }
        });
    }
    function Ordering($selectDOM) {
        let cols = $selectDOM.find('.cGrid').eq(0).find('>.editor-col');
        let len = cols.length;
        let list = '';
        let dAlpha = DeviceAlphaSpace();
        let oldOrder = [];
        if (len > 1) {
            cols.each(function (i, v) {
                let $this = $(this);
                let regex = new RegExp(dAlpha + 'Odr-[0-9]', 'g');
                let colClasses = $this.attr('class');
                let OrderClasses = colClasses.match(regex);
                if (OrderClasses != null) {
                    oldOrder.push(OrderClasses[0].replace(dAlpha + 'Odr-', ''));
                }
                else
                    oldOrder.push(i + 1);
            });
            for (var j = 0; j < len; j++) {
                let ord = oldOrder[j];
                list += `<span class="items colOrder" data-order="${ord}">Col ${ord}</span>`;
            }
            $('#sortedData').html(list);
            $("#sortedData").sortable({
                revert: 0,
                delay: 150,
                items: '.colOrder',
                containment: '.RearrangeColumnWrapper',
                //handle: ".colOrder",
                //helper: function () {
                //    return $('<div class="comhelperBox" style="height:40px;width:100px;"></div>');
                //},
                connectWith: '.colOrder',
                cursorAt: { left: 5, top: 5 },
                placeholder: 'ui-state-com-sortable-hover ui-hover-state',
                stop: function (event, ui) {
                    dAlpha = DeviceAlphaSpace();
                    let order = [];
                    $('#sortedData span').each(function () {
                        order.push($(this).attr('data-order'));
                    });
                    let length = order.length;
                    for (var i = 0; i < length; i++) {
                        let $this = $activeDOM.find('.cGrid').eq(0).find('>.editor-col').eq(parseInt(order[i]) - 1);
                        let regex = new RegExp(dAlpha + 'Odr-[0-9]', 'g');
                        let colClasses = $this.attr('class');
                        let OrderClasses = colClasses.match(regex);
                        if (OrderClasses != null) {
                            $this.removeClass(OrderClasses[0]);
                        }
                        $this.addClass(dAlpha + 'Odr-' + (i + 1));
                    }
                },
                receive: function (event, ui) {

                }
            });
        }
    }
}
function SimplePopup($opt) {
    let popupOption = {
        Title: 'simplePopup',
        Top: '100',
        Left: '221',
        Height: '200',
        Data: '',
        Minimize: true,
        Width: '200',
        Position: 'absolute',
        ShowClose: true,
        ShowTitle: true,
        Draggable: false,
        CallbackBeforePopup: function () { },
        CallbackaftePopUp: function () { }
    };
    popupOption = $.extend(popupOption, $opt);
    let $popUpModel = $('#simplePopupModel');
    if (popupOption.ShowTitle) {
        $popUpModel.find('.simple-popup-title').text(popupOption.Title).show();
    }
    else {
        $popUpModel.find('.simple-popup-title').hide();
    }
    $popUpModel.find('.simple-popup-header').show();
    let popUpwidth = $popUpModel.width();
    let $editorBox = $('.editor-box');
    let $editorBoxOffset = $editorBox.offset();
    let editorTop = $editorBoxOffset.top;
    let editorLeft = $editorBoxOffset.left;
    let popUpModelLeft = 0;
    let leftThreshold = 0;
    let rightthreshHold = 10;
    let popUpModelTop = (top + rightthreshHold);
    if ((popupOption.Left - editorLeft) > popUpwidth) {
        popUpModelLeft = popupOption.Left - popUpwidth - leftThreshold;
    }
    else {
        popUpModelLeft = popupOption.Left - leftThreshold;
    }
    if (popupOption.Height > 0) {
        $popUpModel.css({ height: popupOption.Height });
    }
    if (popupOption.Width > 0) {
        $popUpModel.css({ width: popupOption.Width });
    }
    if (popupOption.ShowClose)
        $('.simple-close-model').show();
    else
        $('.simple-close-model').hide();
    $popUpModel.css({ 'position': popupOption.Position });
    $('.simple-popup-model-body').html(popupOption.Data);
    popupOption.CallbackBeforePopup($('.simple-popup-model-body'));
    $popUpModel.css({
        top: popupOption.top,
        left: popUpModelLeft
    }).fadeIn(400);
    if (popupOption.Draggable) {
        $popUpModel.draggable({
            handle: '.simple-popup-header',
            containment: '.WebBuilderWrapper',
            start: function (e, ui) {
                $(ui.helper).css({
                    "position": "fixed"
                });
            },
            stop: function (event, ui) {
                //AutoAlignDragger(ui.helper);
            }
        });
    }
    popupOption.CallbackaftePopUp();
    $('.simple-close-model').off().on('click', function () {
        FadeSimplePopUp();
    });
}
function HideSimplePopUp() {
    $('#simplePopupModel').hide().css({ 'position': 'absolute' });
}
function FadeSimplePopUp() {
    $('#simplePopupModel').fadeOut(400).css({ 'position': 'absolute' });
}
function Messages(title, message, type) {

}
function BuildSettingDOM($compo, $this, type) {
    marginSliderList = [
        ['bulkMarginSlider', 'bulkMarginHandler', false, 'BulkMargin', 0],
        ['marginTopSlider', 'marginTopHandler', false, 'MarginTop', 0],
        ['marginRightSlider', 'marginRightHandler', false, 'MarginRight', 0],
        ['marginBottomSlider', 'marginBottomHandler', false, 'MarginBottom', 0],
        ['marginLeftSlider', 'marginLeftHandler', false, 'MarginLeft', 0]
    ];
    paddingSliderList = [
        ['bulkPaddingSlider', 'bulkPaddingHandler', false, 'BulkPadding', 0],
        ['paddingTopSlider', 'paddingTopHandler', false, 'PaddingTop', 0],
        ['paddingRightSlider', 'paddingRightHandler', false, 'PaddingRight', 0],
        ['paddingBottomSlider', 'paddingBottomHandler', false, 'PaddingBottom', 0],
        ['paddingLeftSlider', 'paddingLeftHandler', false, 'PaddingLeft', 0]
    ];
    /*initializing border slider with unused values*/
    /* sliderID, sliderHandlerID, used, sliderFunction, initialvalue, colorPickerID*/
    borderSliderList = [
        ['bulkBorderSlider', 'bulkBorderHandler', false, 'BorderBulk', 1, 'bulkBorderColor'],
        ['borderTopSlider', 'borderTopHandler', false, 'BorderTop', 1, 'topBorderColor'],
        ['borderRightSlider', 'borderRightHandler', false, 'BorderRight', 1, 'rightBorderColor'],
        ['borderBottomSlider', 'borderBottomHandler', false, 'BorderBottom', 1, 'bottomBorderColor'],
        ['borderLeftSlider', 'borderLeftHandler', false, 'BorderLeft', 1, 'leftBorderColor']
    ];

    borderHoverSliderList = [
        ['bulkBorderHoverSlider', 'bulkBorderHoverHandler', false, 'BorderHoverBulk', 1, 'bulkBorderHoverColor'],
        ['borderHoverTopSlider', 'borderHoverTopHandler', false, 'BorderHoverTop', 1, 'topBorderHoverColor'],
        ['borderHoverRightSlider', 'borderHoverRightHandler', false, 'BorderHoverRight', 1, 'rightBorderHoverColor'],
        ['borderHoverBottomSlider', 'borderHoverBottomHandler', false, 'BorderHoverBottom', 1, 'bottomBorderHoverColor'],
        ['borderHoverLeftSlider', 'borderHoverLeftHandler', false, 'BorderHoverLeft', 1, 'leftBorderHoverColor']
    ];

    boxRadiusSliderList = [
        ['bulkBoxRadiusSlider', 'bulkBoxRadiusHandler', false, 'BoxRadiusBulk', 0],
        ['boxRadiusTopLeftSlider', 'boxRadiusTopLeftHandler', false, 'BoxRadiusTopLeft', 0],
        ['boxRadiusTopRightSlider', 'boxRadiusTopRightHandler', false, 'BoxRadiusTopRight', 0],
        ['boxRadiusBottomLeftSlider', 'boxRadiusBottomLeftHandler', false, 'BoxRadiusBottomLeft', 0],
        ['boxRadiusBottomRightSlider', 'boxRadiusBottomRightHandler', false, 'BoxRadiusBottomRight', 0]
    ];

    boxShadowSliderList = [
        ['boxShadowHorizontalSlider', 'boxShadowHorizontalHandler', 'boxShadowHorizontal', 0],
        ['boxShadowVerticalSlider', 'boxShadowVerticalHandler', 'boxShadowVertical', 0],
        ['boxShadowBlurSlider', 'boxShadowBlurHandler', 'boxShadowBlur', 0]
    ];
    boxShadowEffectSliderList = [
        ['boxShadowEffectHorizontalSlider', 'boxShadowEffectHorizontalHandler', 'boxShadowEffectHorizontal', 0],
        ['boxShadowEffectVerticalSlider', 'boxShadowEffectVerticalHandler', 'boxShadowEffectVertical', 0],
        ['boxShadowEffectBlurSlider', 'boxShadowEffectBlurHandler', 'boxShadowEffectBlur', 0]
    ];
    let settingDOM = '';
    if (typeof ($compo[type].tabs) !== undefined) {
        let $tabComponent = $compo[type].tabs;
        let tabKeys = Object.keys($tabComponent);
        let tabLength = tabKeys.length;
        let tabs = '';
        let tabData = '';
        for (var j = 0; j < tabLength; j++) {
            let $tabCompo = tabKeys[j];
            let tab = 'tab' + (j + 1);
            let showTab = true;
            if (typeof ($tabComponent[$tabCompo].show) !== "undefined") {
                showTab = $tabComponent[$tabCompo].show;
            }
            if (showTab === true)
                tabs += DOMCreate('li', $tabCompo, '', '', ['data-tabs="' + tab + '"']);
            let appendData = '';
            if ($tabComponent[$tabCompo].custom) {
                if (typeof ($tabComponent[$tabCompo].DOM) !== 'undefined') {
                    appendData = $tabComponent[$tabCompo].DOM;
                }
            }
            else {
                switch ($tabCompo.toLowerCase()) {
                    case 'background':
                        if (typeof ($tabComponent[$tabCompo].options) !== 'undefined') {
                            //appendData = GeneralBackgroundDOM($tabComponent[$tabCompo].options);
                            appendData = '<div class="field-row" id="cbBgDOM"></div>';
                        }
                        break;
                    case 'spacing':
                        if (typeof ($tabComponent[$tabCompo].options) !== 'undefined') {
                            appendData = '<div class="field-row" id="cbspacingDOM"></div>';
                        }
                        break;
                    case 'alignment':
                        if (typeof ($tabComponent[$tabCompo].options) !== 'undefined') {
                            //appendData = GeneralAlignMentDOM($tabComponent[$tabCompo].options);
                            appendData = '<div class="field-row" id="cbAlignDOM"></div>';
                        }
                        break;
                    case 'border':
                        if (typeof ($tabComponent[$tabCompo].options) !== 'undefined') {
                            //appendData = GeneralBorderDOM($tabComponent[$tabCompo].options);
                            appendData = '<div class="field-row" id="cbBorderDOM"></div>';
                        }
                        break;
                    case 'box radius':
                        if (typeof ($tabComponent[$tabCompo].options) !== 'undefined') {
                            //appendData = GeneralBoxRadiusDOM($tabComponent[$tabCompo].options);
                            appendData = '<div class="field-row" id="cbBoxRadDOM"></div>';
                        }
                        break;
                    case 'box shadow':
                        if (typeof ($tabComponent[$tabCompo].options) !== 'undefined') {
                            //appendData = GeneralBoxShadowDOM($tabComponent[$tabCompo].options);
                            appendData = '<div class="field-row" id="cbBoxShadowDOM"></div>';
                        }
                        break;
                    case 'hover effect':
                        if (typeof ($tabComponent[$tabCompo].options) !== 'undefined') {
                            //appendData = GeneralHoverEffectDOM($tabComponent[$tabCompo].options);
                            appendData = '<div class="field-row" id="cbHoverEffectDOM"></div>';
                        }
                        break;
                    case 'scroll effect':
                        appendData = '<div class="field-row" id="cbScrollEffectDOM"></div>';
                        //if (typeof ($tabComponent[$tabCompo].options) !== 'undefined') {
                        //    appendData = GeneralScrolleffect($tabComponent[$tabCompo].options);
                        //}
                        break;
                    default:
                        if (typeof ($tabComponent[$tabCompo].DOM) !== 'undefined') {
                            appendData = $tabComponent[$tabCompo].DOM;
                        }
                        break;
                }
            }
            //appendData = ScrollBarDOM() + appendData.WrapScroller();
            if (j === 0) {
                tabData += DOMCreate('div', appendData, 'tabcontent scroll__parent', tab);
            }
            else {
                tabData += DOMCreate('div', appendData, 'tabcontent scroll__parent', tab, ['style="display: none;"']);
            }
        }
        let settingTabDOM = DOMCreate('ul', tabs, 'tabs');
        settingTabDOM = Appendleftright(settingTabDOM);
        settingTabDOM += DOMCreate('div', tabData, 'tabsWrapper');
        settingTabDOM = DOMCreate('div', settingTabDOM, '', 'tabs');
        $('#popupModel .popup-model-body').html(settingTabDOM);
        $('#tabs').attr("data-settingtype", type);
        for (var k = 0; k < tabLength; k++) {
            let $tabCompo = tabKeys[k];
            if ($tabComponent[$tabCompo].custom) {
                if (typeof ($tabComponent[$tabCompo].onload) !== 'undefined') {
                    $tabComponent[$tabCompo].onload($this);
                }
            }
            else {
                switch ($tabCompo.toLowerCase()) {
                    case 'background':
                        {
                            let $selectedLayer = GetSelectedLayer($this, $compo, $tabComponent[$tabCompo].selectLayer, type);
                            if (typeof ($tabComponent[$tabCompo].options) !== 'undefined') {
                                $("#cbBgDOM").AdvanceBackground({
                                    targetParent: $selectedLayer.parent(),
                                    targetElem: $selectedLayer,
                                    options: $tabComponent[$tabCompo].options
                                });
                            }
                            //GeneralBackgroundEvents($selectedLayer);
                        }
                        break;
                    case 'alignment':
                        {
                            let $selectedLayer = GetSelectedLayer($this, $compo, $tabComponent[$tabCompo].selectLayer, type);
                            if (typeof ($tabComponent[$tabCompo].options) !== 'undefined') {
                                let alignParams = {
                                    targetParent: $selectedLayer.parent(),
                                    targetElem: $selectedLayer,
                                    options: $tabComponent[$tabCompo].options
                                };
                                if (typeof ($tabComponent[$tabCompo].labels) !== 'undefined') {
                                    alignParams.labels = $tabComponent[$tabCompo].labels;
                                }
                                $("#cbAlignDOM").AdvanceAlignment(alignParams);
                            }
                        }
                        //GeneralAlignMentEvents($selectedLayer);
                        break;
                    case 'spacing':
                        {
                            let $selectedLayer = GetSelectedLayer($this, $compo, $tabComponent[$tabCompo].selectLayer, type);
                            if (typeof ($tabComponent[$tabCompo].options) !== 'undefined') {
                                $("#cbspacingDOM").AdvanceSpacing({
                                    targetParent: $selectedLayer.parent(),
                                    targetElem: $selectedLayer,
                                    options: $tabComponent[$tabCompo].options
                                });
                            }
                        }
                        break;
                    case 'border':
                        {
                            let $selectedLayer = GetSelectedLayer($this, $compo, $tabComponent[$tabCompo].selectLayer, type);
                            if (typeof ($tabComponent[$tabCompo].options) !== 'undefined') {
                                $("#cbBorderDOM").AdvanceBorder({
                                    targetParent: $selectedLayer.parent(),
                                    targetElem: $selectedLayer,
                                    options: $tabComponent[$tabCompo].options
                                });
                            }
                        }
                        //GeneralBorderEvents($selectedLayer);
                        break;
                    case 'box radius':
                        {
                            let $selectedLayer = GetSelectedLayer($this, $compo, $tabComponent[$tabCompo].selectLayer, type);
                            if (typeof ($tabComponent[$tabCompo].options) !== 'undefined') {
                                $("#cbBoxRadDOM").AdvanceBoxRadius({
                                    targetParent: $selectedLayer.parent(),
                                    targetElem: $selectedLayer,
                                    options: $tabComponent[$tabCompo].options
                                });
                            }
                        }
                        //GeneralBoxRadiusEvents($selectedLayer);
                        break;
                    case 'box shadow':
                        {
                            let $selectedLayer = GetSelectedLayer($this, $compo, $tabComponent[$tabCompo].selectLayer, type);
                            if (typeof ($tabComponent[$tabCompo].options) !== 'undefined') {
                                $("#cbBoxShadowDOM").AdvanceBoxShadow({
                                    targetParent: $selectedLayer.parent(),
                                    targetElem: $selectedLayer,
                                    options: $tabComponent[$tabCompo].options
                                });
                            }
                        }
                        //GeneralBoxShadowEvents($selectedLayer);
                        break;
                    case 'hover effect':
                        {
                            let $selectedLayer = GetSelectedLayer($this, $compo, $tabComponent[$tabCompo].selectLayer, type);
                            //GeneralIconHoverEffectEvent($selectedLayer);
                            if (typeof ($tabComponent[$tabCompo].options) !== 'undefined') {
                                $("#cbHoverEffectDOM").AdvanceHoverEffect({
                                    targetParent: $selectedLayer.parent(),
                                    targetElem: $selectedLayer,
                                    options: $tabComponent[$tabCompo].options
                                });
                            }
                        }
                        break;
                    case 'scroll effect':
                        {
                            let $selectedLayer = GetSelectedLayer($this, $compo, $tabComponent[$tabCompo].selectLayer, type);
                            //GeneralScrollEffectEvent($selectedLayer); 
                            $("#cbScrollEffectDOM").AdvanceScrollEffect({
                                targetParent: $selectedLayer.parent(),
                                targetElem: $selectedLayer
                            });
                        }
                        break;
                    default:
                        if (typeof ($tabComponent[$tabCompo].onload) !== 'undefined') {
                            $tabComponent[$tabCompo].onload($this);
                        }
                }
            }
        }
        InitTab();
        DeleteComponent();
    }
}

function DeleteComponent($elem) {
    let $deleteHelper = $('.deletehelper');
    if (typeof $elem !== "undefined") {
        $deleteHelper = $elem.find('.deletehelper');
    }
    $deleteHelper.off('click').on('click', function () {
        $('.activeSetting').removeClass('activeSetting');
        let $parent = $(this).parents('.SetHdlr').parent();
        $parent.addClass('activeSetting');
        $activeDOM = $parent;
        var dataScroll = $activeDOM.attr('data-opscroll');
        if (!EasyLibrary.IsUndefined(dataScroll)) {
            $(".editor-site-header").find('.onepagemenu').find('li[data-opscroll="' + dataScroll + '"]').remove();
        }
        if ($parent.not('.holder').hasClass('editor-col')) {
            SageConfirmDialog(easyMessageList.emptycolumn).done(function () {
                let $nodata = $parent.find('> .column-data-empty');
                let $tooglemenu = $parent.find('> .SetHdlr');
                $parent.find(' > div').not($nodata).not($tooglemenu).remove();
            });
        }
        else {
            SageConfirmDialog(easyMessageList.deletehelper).done(function () {
                //if ($parent.hasClass('editor-row-container')) {
                //    if ($parent.parent().hasClass('editor-row-shaded-layer')) {
                //        $parent.parent().parent().remove();
                //    }
                //    else {
                //        $parent.parent().remove();
                //    }
                //}
                //else if ($parent.hasClass('editor-row-shaded-layer')) {
                //    $parent.parent().remove();
                //}
                //else {
                //}
                $parent.remove();
                CheckNoRow();
            });

            function CheckNoRow() {
                if ($('.editor-componentWrapper').find('.cRow').length === 0
                    && $('.editor-componentWrapper').find('.noElement').length === 0
                ) {
                    $('.editor-componentWrapper').append('<div class="noElement"><span class="startnew">Drag a row here</span></div>');
                    StartNewEvent();
                }
                if ($('.editor-site-header').find('.cRow').length === 0) {
                    $('.editor-site-header').addClass('emptydata');
                }
                if ($('.editor-site-footer').find('.cRow').length === 0) {
                    $('.editor-site-footer').addClass('emptydata');
                }
            }
        }
    });
}
function StartNewEvent() {
    $('.startnew').off('click').on('click', function () {
        //$('.addPro.headeradd').trigger('click');
        proLoadingAppend($(this));
    });
}
function GetSelectedLayer($this, $compo, $compoOption, type) {
    let $selectedLayer = '';
    if (typeof ($compoOption) !== 'undefined') {
        $selectedLayer = $compoOption($this);
    }
    else if (typeof ($compo[type].selectLayer) !== 'undefined') {
        $selectedLayer = $compo[type].selectLayer($this);
    }
    else {
        $selectedLayer = $this.parent().parent();
    }
    return $selectedLayer;
}
function HidePopUpSetting() {
    if (!EasyLibrary.Pinned()) {
        $('#popupModel').hide();
        $('.actEle').removeClass('actEle');
        $('#popupModel').css({ 'position': 'absolute' });
    }
    $('.headerControls').removeClass('clicked');
    //$('.activeSetting').removeClass('activeSetting');
    //$activeDOM = $('.activeSetting');
}
function FadeOutPopUpSetting() {
    $('#popupModel').fadeOut(400);
    $('.actEle').removeClass('actEle');
    $('#popupModel').css({ 'position': 'absolute' });
    $('.headerControls').removeClass('clicked');
    $('.activeSetting').removeClass('activeSetting');
    $activeDOM = $('.activeSetting');
}
function GeneralBackgroundDOM(options) {
    let backGroundDOM = '';
    let optionLen = options.length;
    if (optionLen > 0) {
        if (optionLen == 1) {
            backGroundDOM += DOMCreate('h4', 'Background');
            let optionValue = options[0];
            switch (optionValue) {
                case 'color':
                    backGroundDOM += staticDOMs.divbackcolorchoose;
                    break;
                case 'image':
                    backGroundDOM += staticDOMs.divbackimagechoose;
                    break;
            }
            backGroundDOM = FieldRowDOMCreate(backGroundDOM);
        }
        else {
            backGroundDOM += staticDOMs.backgroundtab;
        }
    }
    return backGroundDOM;
}
function GeneralBackgroundEvents($parent) {
    let $shadedlayer = $parent.find(' > .editor-row-shaded-layer');
    if ($parent.hasClass('editor-row-shaded-layer')) {
        $shadedlayer = $parent;
        $parent = $parent.parent();
    }
    loadSettings();
    InitEvents();
    function loadSettings() {
        BGImage();
        function BGImage() {
            let parentBgImage = $parent.css('background-image');
            if (typeof (parentBgImage) === 'undefined' || parentBgImage === 'none') {
                parentBgImage = webbuildermodulepath + '/img/tiger.jpg';
            }
            parentBgImage = parentBgImage.replace('url(', '').replace(')', '').replace(/\"/gi, "");
            $('#RowBGImageSrc').attr('src', parentBgImage);
        }
    }
    function InitEvents() {
        let bgColor = $parent.css('background-color');
        let txtColor = $parent.css('color');
        if (typeof ($parent.attr('style')) === 'undefined' || typeof (bgColor) === "undefined") {
            bgColor = "rgba(255, 255, 255, 1)";
        }
        if (typeof ($parent.attr('style')) === 'undefined' || typeof (txtColor) === "undefined") {
            txtColor = "rgba(0, 0, 0, 1)";
        }
        let prevhovereffect = $parent.attr('data-prevhovereffect');
        if (typeof prevhovereffect !== 'undefined') {
            let tmpEff = JSON.parse(prevhovereffect);
            if (tmpEff.bg) {
                bgColor = tmpEff.bg;
            }
            if (tmpEff.font) {
                txtColor = tmpEff.font;
            }
        }
        $('#selBackround').off().on('change', function () {
            let select = $(this).val();
            let backgroundColor = '';
            let backgroundImage = '';
            switch (select) {
                case 'none':
                    $('#divBackColorChoose').hide();
                    $('#divBackImageChoose').hide();
                    backgroundColor = '';
                    backgroundImage = '';
                    removeImageBG();
                    removeColorBG();
                    break;
                case 'image':
                    $('#divBackColorChoose').hide();
                    $('#divBackImageChoose').show();
                    backgroundColor = '';
                    backgroundImage = 'image';
                    removeColorBG();
                    break;
                case 'color':
                    $('#divBackColorChoose').show();
                    $('#divBackImageChoose').hide();
                    backgroundColor = 'color';
                    backgroundImage = '';
                    removeImageBG();
                    break;
            }
            $parent.attr('data-backgroundColor', backgroundColor);
            $parent.attr('data-backgroundImage', backgroundImage);
        });
        $('#bgImageEffect').off().on('change', function () {
            let newEffectClass = $(this).val();
            let effectClass = 'background-effect-size-contain';
            let sfEffect = $parent.attr('class').match(/background-effect-[a-z]{1,10}-[a-z]{1,10}/g);
            if (sfEffect !== null) {
                effectClass = sfEffect[0];
            }
            $parent.removeClass(effectClass).addClass(newEffectClass);
        });
        /*for shaded layer */
        if ($shadedlayer.length > 0) {
            $('#shadedLayerActive').prop('checked', true);
            let conClass = $shadedlayer.attr('class').replace('editor-row-container', '').trim();
            $('#selContainerWidth').val(conClass);
            $('#divPickShaded').fadeIn(400);
            $('#chooseColorShadedCol').css({ 'background-color': $shadedlayer.css('background-color') });
        }
        else {
            $('#shadedLayerActive').prop('checked', false);
        }

        let backgroundColor = $parent.attr('data-backgroundColor');
        let backgroundImage = $parent.attr('data-backgroundImage');
        let selected = 'none';
        if (typeof (backgroundColor) !== 'undefined' && backgroundColor.length > 0) {
            selected = 'color';
        }
        else if (typeof (backgroundImage) !== 'undefined' && backgroundImage.length > 0) {
            selected = 'image';
            BackImageSetting();
        }
        $('#selBackround').val(selected);
        $('#selBackround').trigger('change');

        $('#RowBGImage').on('click', function () {
            let media = $(this).SageMedia({
                onSelect: function (src, response, type, filename, extension) {

                },
                success: function (resposne) {
                    src = resposne.filePath.replace(/\\/g, '/');
                    $("#RowBGImageSrc").attr('src', src).attr('alt', resposne.alt);
                    $parent.css({
                        'background-image': 'url("' + src + '")'
                    });
                },
                mediaType: 'image',
                extension: 'png,jpeg,jpg,ico,svg,gif,webp',
            });
            media.Show();
        });
        $('#shadedLayerActive').off().on('click', function () {
            if ($(this).is(':checked')) {
                let shadedDiv = '<div class="editor-row-shaded-layer" style="height:100%;"></div>';
                //var appendElem = $parent.children();
                //$parent.append(shadedDiv);
                $parent.children().not(".SetHdlr, .addPro").wrapAll(shadedDiv);
                $('#divPickShaded').fadeIn(400);
                //$parent.find(' > .editor-row-shaded-layer').append(appendElem).css({ 'background-color': 'rgba(37, 113, 211, 0.38)' });
                $parent.find(' > .editor-row-shaded-layer').css({ 'background-color': $("#chooseColorShadedCol").css('background-color') });
                let parentClasses = $parent.attr('class');
                let paddingClass = parentClasses.match(/P[a-z]{0,1}-[0-9]{1,3}/g);
                if (paddingClass !== null) {
                    $(paddingClass).each(function (i, v) {
                        $parent.find(' > .editor-row-shaded-layer').addClass(v);
                        $parent.removeClass(v);
                    });
                }
            }
            else {
                /* removing and adding padding between shaded and row */
                let parentClasses = $parent.find('.editor-row-shaded-layer').attr('class');
                let paddingClass = parentClasses.match(/P[a-z]{0,1}-[0-9]{1,3}/g);
                if (paddingClass !== null) {
                    $(paddingClass).each(function (i, v) {
                        $parent.find('.editor-row-shaded-layer').removeClass(v);
                        $parent.addClass(v);
                    });
                }
                RemoveShadedLayer();
            }
        });

        $('#chooseColorColBG').css({
            'background-color': bgColor,
            'color': txtColor
        });
        let extracolor = GetUsedBgColor();
        if (extracolor.length > 0) {
            $(extracolor).insertAfter('#chooseColorBG');
            $('.obtainColor').on('click', function () {
                let bgnewColor = $(this).css('background-color');
                $('#chooseColorBG').css({
                    'background-color': bgnewColor,
                });
                $parent.css({
                    'background-color': bgnewColor,
                });

            });
        }
        let $shadedObject = $parent.find('.editor-row-shaded-layer');
        if (typeof ($shadedObject) !== "undefined") {
            let shadedBGColor = $shadedObject.css('background-color');
            let txtshadedColor = $shadedObject.css('color');
            if (typeof (shadedBGColor) === "undefined") {
                shadedBGColor = "rgba(37, 113, 211, 0.38)";
            }
            if (typeof (txtshadedColor) === "undefined") {
                txtshadedColor = "rgb(0, 0, 0, 1)";
            }
            $('#chooseColorShaded').css({
                'background-color': shadedBGColor,
                'color': txtshadedColor
            });
        }

        let colorPickerOption = {
            customBG: '#222',
            margin: '4px -2px 0',
            doRender: 'div div',
            buildCallback: function ($elm) {
                BuildColorPicker($elm, this);
            },
            renderCallback: function ($elm, toggled) {
                let colors = this.color.colors.RND,
                    modes = {
                        r: colors.rgb.r, g: colors.rgb.g, b: colors.rgb.b,
                        h: colors.hsv.h, s: colors.hsv.s, v: colors.hsv.v,
                        HEX: this.color.colors.HEX
                    };
                $('input', '.cp-panel').each(function () {
                    this.value = modes[this.className.substr(3)];
                });
                colors = this.color.colors;
                let colorsRGB = colors.RND.rgb;
                let alpha = colors.alpha;
                let textColor = '';
                if (colors.RGBLuminance > 0.22) {
                    textColor = '#222';
                }
                else {
                    textColor = '#ddd';
                }
                let colorPickerID = $elm.attr('id');
                switch (colorPickerID) {
                    case 'chooseColorShadedCol':
                        $parent.find(' > .editor-row-shaded-layer').css({
                            'background-color': 'rgb(' + colorsRGB.r + ', ' + colorsRGB.g + ', ' + colorsRGB.b + ',' + alpha + ')',
                            'color': textColor
                        });
                        break;
                    case 'chooseColorColBG':
                        $parent.css({
                            'background-color': 'rgb(' + colorsRGB.r + ', ' + colorsRGB.g + ', ' + colorsRGB.b + ',' + alpha + ')',
                            'color': textColor
                        });
                        break;
                }
            }
        };
        $('.chooseBGColors').colorPicker(colorPickerOption);

        function GetUsedBgColor() {
            let extracolor = '';
            $('.editor-row').each(function () {
                extracolor += '<span class="obtainColor  color-picker-holder" style="background-color: ' + $(this).css('background-color') + ';"></span>';
            });
            extracolor = '<span><i>Used colors :</i> ' + extracolor + '</span>';
            return extracolor;
        }
        function removeImageBG() {
            RemoveShadedLayer();
            $parent.removeClass('editor-row-bg-image-parallax');
            $parent.css({
                'background-image': ''
            });
        }
        function RemoveShadedLayer() {
            //var appendElem = $parent.find(' > .editor-row-shaded-layer').children();
            //$parent.append(appendElem);
            //$parent.find(' > .editor-row-shaded-layer').remove();
            $parent.find(' > .editor-row-shaded-layer').children().unwrap();
            $('#divPickShaded').fadeOut(100);
            $('#shadedLayerActive').prop('checked', false);
        }
        function removeColorBG() {
            $parent.css({ 'background-color': '', 'color': '' });
            $('#chooseColorColBG').css({ 'background-color': bgColor, 'color': txtColor });
        }
        function BackImageSetting() {
            let effectClass = 'background-effect-size-contain';
            let sfEffect = $parent.attr('class').match(/background-effect-[a-z]{1,10}-[a-z]{1,10}/g);
            if (sfEffect !== null) {
                effectClass = sfEffect[0];
            }
            $('#bgImageEffect').val(effectClass);
        }
    }
}
function GeneralAlignMentDOM(options) {
    let alignTotalDOM = '';
    if (EasyLibrary.IsDefined(options)) {
        let alignDOM = '';
        if (EasyLibrary.IsDefined(options.horizontal) && options.horizontal.length > 0) {
            let optionLen = options.horizontal.length;
            for (let i = 0; i < optionLen; i++) {
                alignDOM += DOMCreate('i', '', 'cb-algn-' + options.horizontal[i].substring(0, 1), '', ['data-class="TxAl-' + options.horizontal[i].substring(0, 1) + '"']);
            }
            alignDOM += DOMCreate('i', '', 'cb-algn-n', '', ['data-class="TxAl-n"']);
            alignDOM = DOMCreate('span', alignDOM, 'alignmentHWrapper');
            alignDOM = FieldRowDOMCreateCol100(DOMCreate('label', 'Horizontal Alignment')) + FieldRowDOMCreateCol100(alignDOM);
        }
        alignTotalDOM = alignDOM;
        alignDOM = '';
        if (EasyLibrary.IsDefined(options.vertical) && options.vertical.length > 0) {
            let optionLen = options.vertical.length;
            for (let i = 0; i < optionLen; i++) {
                alignDOM += DOMCreate('i', '', 'cb-v-algn-' + options.vertical[i].substring(0, 1), '', ['data-class="TxAl-' + options.vertical[i].substring(0, 1) + '"']);
            }
            alignDOM += DOMCreate('i', '', 'cb-v-algn-o', '', ['data-class="TxAl-o"']);
            alignDOM = DOMCreate('span', alignDOM, 'alignmentVWrapper');
            alignDOM = FieldRowDOMCreateCol100(DOMCreate('label', 'Vertical Alignment')) + FieldRowDOMCreateCol100(alignDOM);
        }
        alignTotalDOM = alignTotalDOM + alignDOM;
    }
    return alignTotalDOM;
}
function GeneralAlignMentEvents($parent) {
    if (typeof $parent.attr('data-alignCollection') !== "undefined") {
        $parent = $('.' + $parent.attr('data-alignCollection'));
    }
    LoadSetting();
    function LoadSetting() {
        let parentClasses = $parent.attr('class');
        if (typeof (parentClasses) !== "undefined") {
            let dAlpha = DeviceAlpha();
            let regex = new RegExp(dAlpha + 'TxAl-[a-z]', 'g');
            let alignmentClasses = parentClasses.match(regex);
            if (alignmentClasses !== null) {
                switch (alignmentClasses.length) {
                    case 2:
                        if (dAlpha.length > 0) {
                            alignmentClasses[1] = alignmentClasses[1].slice(1);
                        }
                        $('.alignmentHWrapper').find(`i[data-class="${alignmentClasses[1]}"]`).addClass('selected');
                        $('.alignmentVWrapper').find('i[data-class="' + alignmentClasses[1] + '"]').addClass('selected');
                    //here is no break because if the length is 2 then first also need to be checked.
                    case 1:
                        if (dAlpha.length > 0) {
                            alignmentClasses[0] = alignmentClasses[0].slice(1);
                        }
                        $('.alignmentHWrapper').find('i[data-class="' + alignmentClasses[0] + '"]').addClass('selected');
                        $('.alignmentVWrapper').find('i[data-class="' + alignmentClasses[0] + '"]').addClass('selected');
                        break;
                }
            }
        }
    }
    InitEvent();
    function InitEvent() {
        $('.alignmentHWrapper i').on('click', function () {
            let $this = $(this);
            let dAlpha = DeviceAlpha();
            $parent.removeClass(dAlpha + 'TxAl-l').removeClass(dAlpha + 'TxAl-c').removeClass(dAlpha + 'TxAl-r').removeClass(dAlpha + 'TxAl-n');
            $parent.addClass(dAlpha + $this.attr('data-class'));
            $('.alignmentHWrapper i').removeClass('selected');
            $this.addClass('selected');
        });
        $('.alignmentVWrapper i').on('click', function () {
            let $this = $(this);
            let dAlpha = DeviceAlpha();
            $parent.removeClass(dAlpha + 'TxAl-t').removeClass(dAlpha + 'TxAl-m').removeClass(dAlpha + 'TxAl-b').removeClass(dAlpha + 'TxAl-o');
            $parent.addClass(dAlpha + $this.attr('data-class'));
            $('.alignmentVWrapper i').removeClass('selected');
            $this.addClass('selected');
        });
    }
}
function GeneralSpacingDOM($options) {
    let outerDOM = '';
    let innerDOM = '';
    if (typeof ($options) !== 'undefined') {
        let spaceOption = Object.keys($options);
        let spaceOptionLength = spaceOption.length;
        for (var j = 0; j < spaceOptionLength; j++) {
            let $sp = spaceOption[j];
            switch ($sp) {
                case 'margin':
                    outerDOM += DOMCreate('h4', 'Outer Spacing / Margin', '', 'OuterSpacingWrap', ['data-min="' + $options['margin']['min'] + '"', 'data-max="' + $options['margin']['max'] + '"', 'data-times="' + $options['margin']['times'] + '"']);
                    if (typeof ($options['margin']['position'] !== 'undefined')) {
                        let positionList = $options['margin']['position'];
                        let positionListLen = positionList.length;
                        for (let i = 0; i < positionListLen; i++) {
                            switch (positionList[i].toLowerCase()) {
                                case 'all':
                                    outerDOM += CreateSliderDOM(marginSliderList[0][0], marginSliderList[0][1], 'Bulk');
                                    marginSliderList[0][2] = true;
                                    break;
                                case 'top':
                                    outerDOM += CreateSliderDOM(marginSliderList[1][0], marginSliderList[1][1], 'Top');
                                    marginSliderList[1][2] = true;
                                    break;
                                case 'right':
                                    outerDOM += CreateSliderDOM(marginSliderList[2][0], marginSliderList[2][1], 'Right');
                                    marginSliderList[2][2] = true;
                                    break;
                                case 'bottom':
                                    outerDOM += CreateSliderDOM(marginSliderList[3][0], marginSliderList[3][1], 'Bottom');
                                    marginSliderList[3][2] = true;
                                    break;
                                case 'left':
                                    outerDOM += CreateSliderDOM(marginSliderList[4][0], marginSliderList[4][1], 'Left');
                                    marginSliderList[4][2] = true;
                                    break;
                            }
                        }
                    }
                    outerDOM = FieldRowDOMCreate(outerDOM);
                    break;
                case 'padding':
                    innerDOM += DOMCreate('h4', 'Inner Spacing / Padding', '', 'InnerSpacingWrap', ['data-min="' + $options['padding']['min'] + '"', 'data-max="' + $options['padding']['max'] + '"', 'data-times="' + $options['padding']['times'] + '"']);
                    if (typeof ($options['padding']['position'] !== 'undefined')) {
                        let positionList = $options['padding']['position'];
                        let positionListLen = positionList.length;
                        for (let i = 0; i < positionListLen; i++) {
                            switch (positionList[i].toLowerCase()) {
                                case 'all':
                                    innerDOM += CreateSliderDOM(paddingSliderList[0][0], paddingSliderList[0][1], 'Bulk');
                                    paddingSliderList[0][2] = true;
                                    break;
                                case 'top':
                                    innerDOM += CreateSliderDOM(paddingSliderList[1][0], paddingSliderList[1][1], 'Top');
                                    paddingSliderList[1][2] = true;
                                    break;
                                case 'right':
                                    innerDOM += CreateSliderDOM(paddingSliderList[2][0], paddingSliderList[2][1], 'Right');
                                    paddingSliderList[2][2] = true;
                                    break;
                                case 'bottom':
                                    innerDOM += CreateSliderDOM(paddingSliderList[3][0], paddingSliderList[3][1], 'Bottom');
                                    paddingSliderList[3][2] = true;
                                    break;
                                case 'left':
                                    innerDOM += CreateSliderDOM(paddingSliderList[4][0], paddingSliderList[4][1], 'Left');
                                    paddingSliderList[4][2] = true;
                                    break;
                            }
                        }
                    }
                    innerDOM = FieldRowDOMCreate(innerDOM);
                    break;
            }
        }
    }
    return outerDOM + innerDOM;
}
function GeneralBorderDOM($options) {
    let borderDOM = '';
    if (typeof ($options !== 'undefined')) {
        borderDOM += DOMCreate('h4', 'Border', '', 'borderWrapper', ['data-min="' + $options['min'] + '"', 'data-max="' + $options['max'] + '"', 'data-times="' + $options['times'] + '"', "style='display:none;'"]);
        let selectDOM = DOMCreate('label', 'Border Style', 'fCol') + '<span class="fCol TxAl-r select__box">' + SelectDOMCreate('borderStyle', 'BorderStyle', [['none', 'None'], ['solid', 'Solid'], ['dashed', 'Dashed'], ['dotted', 'Dotted'], ['double', 'Double']]) + '</span>';
        borderDOM += FieldRowDOMCreateCol50_50(selectDOM);
        let borderSliderCollection = '';
        let positionList = $options['position'];
        let positionLength = positionList.length;
        for (var i = 0; i < positionLength; i++) {
            switch (positionList[i].toLowerCase()) {
                case 'all':
                    borderSliderCollection += CreateSliderWithColorDOM(borderSliderList[0][0], borderSliderList[0][1], 'Bulk Border', borderSliderList[0][5], 'borderColorChoose');
                    borderSliderList[0][2] = true;
                    break;
                case 'top':
                    borderSliderCollection += CreateSliderWithColorDOM(borderSliderList[1][0], borderSliderList[1][1], 'Top Border', borderSliderList[1][5], 'borderColorChoose');
                    borderSliderList[1][2] = true;
                    break;
                case 'right':
                    borderSliderCollection += CreateSliderWithColorDOM(borderSliderList[2][0], borderSliderList[2][1], 'Right Border', borderSliderList[2][5], 'borderColorChoose');
                    borderSliderList[2][2] = true;
                    break;
                case 'bottom':
                    borderSliderCollection += CreateSliderWithColorDOM(borderSliderList[3][0], borderSliderList[3][1], 'Bottom Border', borderSliderList[3][5], 'borderColorChoose');
                    borderSliderList[3][2] = true;
                    break;
                case 'left':
                    borderSliderCollection += CreateSliderWithColorDOM(borderSliderList[4][0], borderSliderList[4][1], 'Left Border', borderSliderList[4][5], 'borderColorChoose');
                    borderSliderList[4][2] = true;
                    break;
            }
        }
        borderSliderCollection = DOMCreate('div', borderSliderCollection, 'borderSliderCollection', '', ['style="display:none;"']);
        borderDOM = FieldRowDOMCreate(borderDOM + borderSliderCollection);
    }
    return borderDOM;
}
function BorderBulk(space, $parent) {

    if (borderSliderList[1][2]) {
        $parent.css({ "border-top-width": space });
        $('#' + borderSliderList[1][0]).slider('value', space);
        $('#' + borderSliderList[1][1]).text(space);
    }
    if (borderSliderList[2][2]) {
        $parent.css({ "border-right-width": space });
        $('#' + borderSliderList[2][0]).slider('value', space);
        $('#' + borderSliderList[2][1]).text(space);
    }
    if (borderSliderList[3][2]) {
        $parent.css({ "border-bottom-width": space });
        $('#' + borderSliderList[3][0]).slider('value', space);
        $('#' + borderSliderList[3][1]).text(space);
    }
    if (borderSliderList[4][2]) {
        $parent.css({ "border-left-width": space });
        $('#' + borderSliderList[4][0]).slider('value', space);
        $('#' + borderSliderList[4][1]).text(space);
    }
    if (!borderSliderList[1][2] && !borderSliderList[2][2] && !borderSliderList[3][2] && !borderSliderList[4][2]) {
        $parent.css({ "border-width": space });
    }
}
function BorderTop(space, $parent) {
    $parent.css({ "border-top-width": space });
    BorderBulkNull();
}
function BorderRight(space, $parent) {
    $parent.css({ "border-right-width": space });
    BorderBulkNull();
}
function BorderBottom(space, $parent) {
    $parent.css({ "border-bottom-width": space });
    BorderBulkNull();
}
function BorderLeft(space, $parent) {
    $parent.css({ "border-left-width": space });
    BorderBulkNull();
}
function BorderBulkNull() {
    $('#' + borderSliderList[0][0]).slider('value', 0);
    $('#' + borderSliderList[0][1]).text(0);
}

function GeneralBorderEvents($parent) {
    $('#borderStyle').on('change', function () {
        let style = $(this).val();
        $parent.css('border-style', style);
        if (style === 'none') {
            $parent.css("border-width", '0px');
            $('.borderSliderCollection').hide();
            for (let i = 0; i < 5; i++) {
                $(`#${borderSliderList[i][0]}`).slider('value', 0);
                $('#' + borderSliderList[i][1]).text(0);
            }
        }
        else {
            $parent.css("border-width", '1px');
            for (let i = 0; i < 5; i++) {
                $('#' + borderSliderList[i][0]).slider('value', 1);
                $('#' + borderSliderList[i][1]).text(1);
            }
            $('.borderSliderCollection').show();
        }
    });
    let initialData = {
        on: 'none',
        top: 0,
        left: 0,
        bottom: 0,
        right: 0,
        tc: '',
        lc: '',
        bc: '',
        rc: '',
    };
    if (typeof ($parent[0]) !== "undefined") {
        let prevhovereffect = $parent.attr('data-prevhovereffect');
        if (typeof prevhovereffect !== 'undefined') {
            let tmpEff = JSON.parse(prevhovereffect);
            if (tmpEff.border) {
                //Object.keys(tmpEff.border).forEach((k) => {
                //    initialData[k] = tmpEff.border[k];
                //});
                initialData = tmpEff.border;
            }
        } else if (typeof ($parent[0].style) !== "undefined") {
            let borderStyle = $parent[0].style.borderStyle;
            if (borderStyle.length == 0)
                borderStyle = 'none';
            initialData.on = borderStyle;
            initialData.top = $parent.css('border-top-width');
            initialData.left = $parent.css('border-left-width');
            initialData.bottom = $parent.css('border-bottom-width');
            initialData.right = $parent.css('border-right-width');
            initialData.tc = $parent.css('border-top-color');
            initialData.lc = $parent.css('border-left-color');
            initialData.bc = $parent.css('border-bottom-color');
            initialData.rc = $parent.css('border-right-color');
        }
        $('#borderStyle').val(initialData.on);
        if (initialData.on == 'none') {
            $('.borderSliderCollection').hide();
        } else {
            $('.borderSliderCollection').show();
        }
    }
    LoadBorderInitialValue();
    let $borderWrapper = $('#borderWrapper');
    if (typeof ($borderWrapper.attr('data-max')) !== 'undefined' && typeof ($borderWrapper.attr('data-min')) !== 'undefined') {
        let maxValue = parseInt($borderWrapper.attr('data-max'));
        let minValue = parseInt($borderWrapper.attr('data-min'));
        for (var i = 0; i < 5; i++) {
            if (borderSliderList[i][2]) {
                AdvanceSageSlider($('#' + borderSliderList[i][0]), $('#' + borderSliderList[i][1]), minValue, maxValue, borderSliderList[i][4], borderSliderList[i][3], $parent, 'px');
            }
        }
    }
    function LoadBorderInitialValue() {
        let times = 1;
        if (typeof ($('#borderWrapper').attr('data-times')) !== 'undefined')
            times = parseInt($('#borderWrapper').attr('data-times'));
        if (times == 0)
            times = 1;

        let topWidth = 0, rightWidth = 0, bottomWidth = 0, leftWidth = 0;

        topWidth = initialData.top;
        if (typeof (topWidth) != 'undefined')
            topWidth = parseInt(topWidth.replace('px', ''));
        topWidth = topWidth / times;
        borderSliderList[1][4] = topWidth;


        rightWidth = initialData.right;
        if (typeof (rightWidth) != 'undefined')
            rightWidth = parseInt(rightWidth.replace('px', ''));
        rightWidth = rightWidth / times;
        borderSliderList[2][4] = rightWidth;

        bottomWidth = initialData.bottom;
        if (typeof (bottomWidth) != 'undefined')
            bottomWidth = parseInt(bottomWidth.replace('px', ''));
        bottomWidth = bottomWidth / times;
        borderSliderList[3][4] = bottomWidth;

        leftWidth = initialData.left;
        if (typeof (leftWidth) != 'undefined')
            leftWidth = parseInt(leftWidth.replace('px', ''));
        leftWidth = leftWidth / times;
        borderSliderList[4][4] = leftWidth;

        if (borderSliderList[1][4] === borderSliderList[2][4] &&
            borderSliderList[3][4] === borderSliderList[4][4] &&
            borderSliderList[1][4] === borderSliderList[4][4])
            borderSliderList[0][4] = borderSliderList[1][4];
    }
    LoadBorderColor();
    BorderColorEvents();
    function BorderColorEvents() {
        let colorPickerOption = ColorPickerOption({
            renderCallback: function ($elm, toggled) {
                let objColor = RenderCallBackColor(this);
                let colorPickerID = $elm.attr('id');
                if (colorPickerID === borderSliderList[0][5]) {
                    $parent.css('border-top-color', objColor.bgColor);
                    $parent.css('border-right-color', objColor.bgColor);
                    $parent.css('border-bottom-color', objColor.bgColor);
                    $parent.css('border-left-color', objColor.bgColor);

                    LoadBorderColor();
                }
                else if (colorPickerID === borderSliderList[1][5]) {
                    $parent.css('border-top-color', objColor.bgColor);
                }
                else if (colorPickerID === borderSliderList[2][5]) {
                    $parent.css('border-right-color', objColor.bgColor);
                }
                else if (colorPickerID === borderSliderList[3][5]) {
                    $parent.css('border-bottom-color', objColor.bgColor);
                }
                else if (colorPickerID === borderSliderList[4][5]) {
                    $parent.css('border-left-color', objColor.bgColor);
                }
            }
        });
        $('.borderColorChoose').colorPicker(colorPickerOption);
    }
    function LoadBorderColor() {
        let borderTopColor = initialData.tc;
        let borderRightColor = initialData.rc;
        let borderBottomColor = initialData.bc;
        let borderLeftColor = initialData.lc;
        $('#' + borderSliderList[1][5]).css('background-color', borderTopColor);
        $('#' + borderSliderList[2][5]).css('background-color', borderRightColor);
        $('#' + borderSliderList[3][5]).css('background-color', borderBottomColor);
        $('#' + borderSliderList[4][5]).css('background-color', borderLeftColor);
        if (borderTopColor === borderRightColor && borderBottomColor === borderLeftColor && borderTopColor === borderLeftColor)
            $('#' + borderSliderList[0][5]).css('background-color', borderTopColor);
        else
            $('#' + borderSliderList[0][5]).css('background-color', '#000');

    }
}
function GeneralBoxRadiusDOM($options) {
    let boxRadiusDOM = '';
    if (typeof ($options !== 'undefined')) {
        boxRadiusDOM += DOMCreate('h4', 'Box Radius', '', 'boxRadiusWrapper', ['data-min="' + $options['min'] + '"', 'data-max="' + $options['max'] + '"', 'data-times="' + $options['times'] + '"', 'style="display:none;"']);
        let boxRadiusSliderCollection = '';
        let positionList = $options['position'];
        let positionLength = positionList.length;
        for (var i = 0; i < positionLength; i++) {
            switch (positionList[i].toLowerCase()) {
                case 'all':
                    boxRadiusSliderCollection += CreateSliderDOM(boxRadiusSliderList[0][0], boxRadiusSliderList[0][1], 'Bulk', boxRadiusSliderList[0][5]);
                    boxRadiusSliderList[0][2] = true;
                    break;
                case 'top-left':
                    boxRadiusSliderCollection += CreateSliderDOM(boxRadiusSliderList[1][0], boxRadiusSliderList[1][1], 'Top-Left', boxRadiusSliderList[1][5]);
                    boxRadiusSliderList[1][2] = true;
                    break;
                case 'top-right':
                    boxRadiusSliderCollection += CreateSliderDOM(boxRadiusSliderList[2][0], boxRadiusSliderList[2][1], 'Top- Right', boxRadiusSliderList[2][5]);
                    boxRadiusSliderList[2][2] = true;
                    break;
                case 'bottom-left':
                    boxRadiusSliderCollection += CreateSliderDOM(boxRadiusSliderList[3][0], boxRadiusSliderList[3][1], 'Bottom-Left', boxRadiusSliderList[3][5]);
                    boxRadiusSliderList[3][2] = true;
                    break;
                case 'bottom-right':
                    boxRadiusSliderCollection += CreateSliderDOM(boxRadiusSliderList[4][0], boxRadiusSliderList[4][1], 'Bottom-Right', boxRadiusSliderList[4][5]);
                    boxRadiusSliderList[4][2] = true;
                    break;
            }
        }
        boxRadiusDOM = FieldRowDOMCreate(boxRadiusDOM + boxRadiusSliderCollection);
    }
    return boxRadiusDOM;
}
function BoxRadiusBulk(space, $parent) {

    if (boxRadiusSliderList[1][2]) {
        $parent.css({ "border-top-left-radius": space });
        $parent.find(' > .editor-row-shaded-layer').css({ "border-top-left-radius": space });
        $('#' + boxRadiusSliderList[1][0]).slider('value', space);
        $('#' + boxRadiusSliderList[1][1]).text(space);
    }
    if (boxRadiusSliderList[2][2]) {
        $parent.css({ "border-top-right-radius": space });
        $parent.find(' > .editor-row-shaded-layer').css({ "border-top-right-radius": space });
        $('#' + boxRadiusSliderList[2][0]).slider('value', space);
        $('#' + boxRadiusSliderList[2][1]).text(space);
    }
    if (boxRadiusSliderList[3][2]) {
        $parent.css({ "border-bottom-left-radius": space });
        $parent.find(' > .editor-row-shaded-layer').css({ "border-bottom-left-radius": space });
        $('#' + boxRadiusSliderList[3][0]).slider('value', space);
        $('#' + boxRadiusSliderList[3][1]).text(space);
    }
    if (boxRadiusSliderList[4][2]) {
        $parent.css({ "border-bottom-right-radius": space });
        $parent.find(' > .editor-row-shaded-layer').css({ "border-bottom-right-radius": space });
        $('#' + boxRadiusSliderList[4][0]).slider('value', space);
        $('#' + boxRadiusSliderList[4][1]).text(space);
    }
    if (!boxRadiusSliderList[1][2] && !boxRadiusSliderList[2][2] && !boxRadiusSliderList[3][2] && !boxRadiusSliderList[4][2]) {
        $parent.css({ "border-radius": space });
    }
}
function BoxRadiusTopLeft(space, $parent) {
    $parent.css({ "border-top-left-radius": space });
    $parent.find(' > .editor-row-shaded-layer').css({ "border-top-left-radius": space });
    BoxRadiusBulkNull();
}
function BoxRadiusTopRight(space, $parent) {
    $parent.css({ "border-top-right-radius": space });
    $parent.find(' > .editor-row-shaded-layer').css({ "border-top-right-radius": space });
    BoxRadiusBulkNull();
}
function BoxRadiusBottomLeft(space, $parent) {
    $parent.css({ "border-bottom-left-radius": space });
    $parent.find(' > .editor-row-shaded-layer').css({ "border-bottom-left-radius": space });
    BoxRadiusBulkNull();
}
function BoxRadiusBottomRight(space, $parent) {
    $parent.css({ "border-bottom-right-radius": space });
    $parent.find(' > .editor-row-shaded-layer').css({ "border-bottom-right-radius": space });
    BoxRadiusBulkNull();
}
function BoxRadiusBulkNull() {
    $('#' + boxRadiusSliderList[0][0]).slider('value', 0);
    $('#' + boxRadiusSliderList[0][1]).text(0);
}

function GeneralBoxRadiusEvents($parent) {
    function LoadBoxRadiusInitialValue() {
        let times = 1;
        if (typeof ($('#boxRadiusWrapper').attr('data-times')) !== 'undefined')
            times = parseInt($('#boxRadiusWrapper').attr('data-times'));
        if (times == 0)
            times = 1;


        let topleft = 0, topRight = 0, bottomLeft = 0, bottomRight = 0;

        topleft = $parent.css("border-top-left-radius");
        if (typeof (topleft) != 'undefined')
            topleft = parseInt(topleft.replace('px', ''));
        topleft = topleft / times;
        boxRadiusSliderList[1][4] = topleft;

        topRight = $parent.css("border-top-right-radius");
        if (typeof (topRight) != 'undefined')
            topRight = parseInt(topRight.replace('px', ''));
        topRight = topRight / times;
        boxRadiusSliderList[2][4] = topRight;

        bottomLeft = $parent.css("border-bottom-left-radius");
        if (typeof (bottomLeft) != 'undefined')
            bottomLeft = parseInt(bottomLeft.replace('px', ''));
        bottomLeft = bottomLeft / times;
        boxRadiusSliderList[3][4] = bottomLeft;

        bottomRight = $parent.css("border-bottom-right-radius");
        if (typeof (bottomRight) != 'undefined')
            bottomRight = parseInt(bottomRight.replace('px', ''));
        bottomRight = bottomRight / times;
        boxRadiusSliderList[4][4] = bottomRight;

        if (boxRadiusSliderList[1][4] === boxRadiusSliderList[2][4] && boxRadiusSliderList[3][4] === boxRadiusSliderList[4][4] && boxRadiusSliderList[1][4] === boxRadiusSliderList[4][4])
            boxRadiusSliderList[0][4] = boxRadiusSliderList[1][4];
    }

    LoadBoxRadiusInitialValue();
    let $boxRadiusWrapper = $('#boxRadiusWrapper');
    if (typeof ($boxRadiusWrapper.attr('data-max')) !== 'undefined' && typeof ($boxRadiusWrapper.attr('data-min')) !== 'undefined') {
        let maxValue = parseInt($boxRadiusWrapper.attr('data-max'));
        let minValue = parseInt($boxRadiusWrapper.attr('data-min'));
        for (var i = 0; i < 5; i++) {
            if (boxRadiusSliderList[i][2]) {
                AdvanceSageSlider($('#' + boxRadiusSliderList[i][0]), $('#' + boxRadiusSliderList[i][1]), minValue, maxValue, boxRadiusSliderList[i][4], boxRadiusSliderList[i][3], $parent, 'px');
            }
        }
    }
}
function GeneralBoxShadowDOM($options) {
    let boxShadowDOM = '';
    //boxShadowDOM += DOMCreate('h4', 'Box Shadow', '', 'BoxShadowWrap');
    boxShadowDOM += CreateCheckboxDOM('Activate Box Shadow', 'ShowBoxShadowOption', 'ShowBoxShadowOption');
    let sliderDOM = '';
    let boxOptions = Object.keys($options);
    let boxOptionslen = boxOptions.length;
    sliderDOM = CreateSliderDOM(boxShadowSliderList[0][0], boxShadowSliderList[0][1], 'Horizontal Length');
    sliderDOM += CreateSliderDOM(boxShadowSliderList[1][0], boxShadowSliderList[1][1], 'Vertical Length');
    sliderDOM += CreateSliderDOM(boxShadowSliderList[2][0], boxShadowSliderList[2][1], 'Blur Radius');
    sliderDOM += CreateColorPickerDOM('Shadow Color', 'shadowColor', 'shadowColor');
    sliderDOM += CreateCheckboxDOM('Inset', 'boxshadowInset', 'boxshadowInset');
    sliderDOM = DOMCreate('div', sliderDOM, 'boxShadowEffects', '', ['style="display:none;"']);
    let horiMaxLen = 100, horiMinLen = -100;
    let vertiMaxLen = 100, vertiMinLen = -100;
    let blurMaxLen = 100, blurMinLen = 0;
    sliderDOM += '<input type="hidden" id="boxShadowMinMax" data-hori-min="' + horiMinLen;
    sliderDOM += '" data-hori-max="' + horiMaxLen;
    sliderDOM += '" data-verti-min="' + vertiMinLen + '" data-verti-max="' + vertiMaxLen;
    sliderDOM += '" data-blur-min="' + blurMinLen + '" data-blur-max="' + blurMaxLen + '" />';
    boxShadowDOM += sliderDOM;
    boxShadowDOM = FieldRowDOMCreate(boxShadowDOM);
    return boxShadowDOM;
}
function GeneralBoxShadowEvents($parent) {

    let objBoxShadow = {
        'inset': 'false',
        'horizontal': '0',
        'vertical': '1',
        'blur': '5',
        'color': defaultColor,
    };
    let boxShadow = 'none';
    let prevhovereffect = $parent.attr('data-prevhovereffect');
    if (typeof prevhovereffect !== 'undefined') {
        let tmpEff = JSON.parse(prevhovereffect);
        if (tmpEff.boxShadowStyle) {
            boxShadow = tmpEff.boxShadowStyle;
        }
    } else if (typeof ($parent.attr('style')) !== 'undefined') {
        boxShadow = $parent.css('box-shadow');
    }
    $('#shadowColor').css('background-color', '#000');
    let horiLen = 0, verLen = 0, blurRadius = 0, lenCol = 0;
    if (typeof (boxShadow) !== "undefined" && boxShadow !== null && boxShadow !== 'none') {
        horiLen = objBoxShadow.horizontal;
        verLen = objBoxShadow.vertical;
        blurRadius = objBoxShadow.blur;
        lenCol = boxShadow.match(/-?\d{1,3}px/g);
        horiLen = parseInt(lenCol[0].replace('px', ''));
        verLen = parseInt(lenCol[1].replace('px', ''));
        blurRadius = parseInt(lenCol[2].replace('px', ''));
        objBoxShadow.horizontal = horiLen;
        objBoxShadow.vertical = verLen;
        objBoxShadow.blur = blurRadius;
        $('.boxShadowEffects').show();
        $('#ShowBoxShadowOption').prop('checked', true);
        let dropColor = boxShadow;
        lenCol.forEach((l) => {
            dropColor = dropColor.replace(l, '');
        });
        //let dropColor = boxShadow.replace(horiLen + 'px', '').replace(verLen + 'px', '').replace(blurRadius + 'px', '');
        dropColor = dropColor.replace('inset', '').trim();
        if (dropColor.length > 0) {
            objBoxShadow.color = dropColor;
            $('#shadowColor').css('background-color', dropColor);
        }
        let hasInset = boxShadow.match(/inset/);
        if (hasInset !== null && hasInset.length > 0) {
            $('#boxshadowInset').prop('checked', true);
        }
        else {
            $('#boxshadowInset').prop('checked', false);
        }
    }
    else {
        $('.boxShadowEffects').hide();
        $('#ShowBoxShadowOption').prop('checked', false);
        $('#shadowColor').css('background-color', '#000');
    }
    function parentBoxShadow() {
        let shadowDOM = '';
        shadowDOM += objBoxShadow.color + ' ';
        shadowDOM += objBoxShadow.horizontal + 'px ';
        shadowDOM += objBoxShadow.vertical + 'px ';
        shadowDOM += objBoxShadow.blur + 'px ';
        if ($('#boxshadowInset').prop('checked')) {
            shadowDOM += 'inset ';
        }
        $parent.css({ 'box-shadow': shadowDOM });
    }
    $('#boxshadowInset').off().on('click', function () {
        parentBoxShadow();
    });
    $('#ShowBoxShadowOption').off().on('click', function () {
        if ($(this).is(':checked')) {
            $('.boxShadowEffects').slideDown(400);
            objBoxShadow.color = $('#shadowColor').css('background-color');
            parentBoxShadow();
        }
        else {
            $('.boxShadowEffects').slideUp(400);
            $parent.css({ 'box-shadow': '' });
        }
    });
    let horiMaxLen = parseInt($('#boxShadowMinMax').attr('data-hori-max'));
    let horiMinLen = parseInt($('#boxShadowMinMax').attr('data-hori-min'));
    let vertiMaxLen = parseInt($('#boxShadowMinMax').attr('data-verti-max'));
    let vertiMinLen = parseInt($('#boxShadowMinMax').attr('data-verti-min'));
    let blurMaxLen = parseInt($('#boxShadowMinMax').attr('data-blur-max'));
    let blurMinLen = parseInt($('#boxShadowMinMax').attr('data-blur-min'));
    function BoxShadowHoriLengthSlide(space, $parent) {
        objBoxShadow.horizontal = space;
        parentBoxShadow();
    }
    AdvanceSageSlider($('#' + boxShadowSliderList[0][0]), $('#' + boxShadowSliderList[0][1]), horiMinLen, horiMaxLen, horiLen, BoxShadowHoriLengthSlide, $parent, 'px');

    function BoxShadowVerticalLengthSlide(space) {
        objBoxShadow.vertical = space;
        parentBoxShadow();
    }
    AdvanceSageSlider($('#' + boxShadowSliderList[1][0]), $('#' + boxShadowSliderList[1][1]), vertiMinLen, vertiMaxLen, verLen, BoxShadowVerticalLengthSlide, $parent, 'px');

    function BoxShadowBlurSlide(space) {
        objBoxShadow.blur = space;
        parentBoxShadow();
    }
    AdvanceSageSlider($('#' + boxShadowSliderList[2][0]), $('#' + boxShadowSliderList[2][1]), blurMinLen, blurMaxLen, blurRadius, BoxShadowBlurSlide, $parent, 'px');

    let colorPickerOption = ColorPickerOption({
        renderCallback: function ($elm, toggled) {
            let objColor = RenderCallBackColor(this);
            objBoxShadow.color = objColor.bgColor;
            parentBoxShadow();
        }
    });
    $('#shadowColor').colorPicker(colorPickerOption);
}
function GeneralHoverEffectDOM($options) {
    let hoverDOM = '';
    //hoverDOM += DOMCreate('h4', 'Hover Effect', '', 'hoverEffectWrap');
    hoverDOM += CreateCheckboxDOM('Activate Hover Effect', 'hoverEffectOption', 'hoverEffectOption');
    hoverDOM += '<div class="field-row" id="hoverEffectOptionWrap" style="display:none;">';
    let colorEffect = $options["color"];
    if (typeof (colorEffect) !== "undefined" && colorEffect.length > 0) {
        let colorLength = colorEffect.length;
        for (var i = 0; i < colorLength; i++) {
            switch (colorEffect[i].toLowerCase()) {
                case 'background':
                    hoverDOM += CreateColorPickerDOM('Background Color', 'hoverBGColor', 'hoverColor');
                    break;
                case 'text':
                    hoverDOM += CreateColorPickerDOM('Text Color', 'hoverTextColor', 'hoverColor');
            }
        }
    }
    let showShadow = $options["shadow"];
    if (typeof (showShadow) !== "undefined" && showShadow === "on") {
        hoverDOM += GeneralHoverEffectBoxShadowDOM($options);
    }
    let showHover = $options["border"];
    if (typeof (showHover) !== "undefined") {
        hoverDOM += GeneralBorderHoverDOM($options);
    }
    let showZoom = $options["zoom"];
    if (typeof (showZoom) !== "undefined" && showZoom === "on") {
        hoverDOM += CreateSliderDOM('HoverZoomSlider', 'HoverZoomSliderHandle', 'Zoom');
    }
    hoverDOM += '</div>';
    hoverDOM = FieldRowDOMCreate(hoverDOM);

    function GeneralHoverEffectBoxShadowDOM($options) {
        let boxShadowDOM = '';
        boxShadowDOM += CreateCheckboxDOM('Activate Box Shadow', 'ShowBoxShadowEffectOption', 'ShowBoxShadowShadowEffectOption');
        let sliderDOM = '';
        let boxOptions = Object.keys($options);
        let boxOptionslen = boxOptions.length;
        sliderDOM = CreateSliderDOM(boxShadowEffectSliderList[0][0], boxShadowEffectSliderList[0][1], 'Horizontal Length');
        sliderDOM += CreateSliderDOM(boxShadowEffectSliderList[1][0], boxShadowEffectSliderList[1][1], 'Vertical Length');
        sliderDOM += CreateSliderDOM(boxShadowEffectSliderList[2][0], boxShadowEffectSliderList[2][1], 'Blur Radius');
        sliderDOM += CreateColorPickerDOM('Shadow Color', 'shadowEffectColor', 'shadowEffectColor');
        sliderDOM += CreateCheckboxDOM('Inset', 'boxshadowEffectInset', 'boxshadowEffectInset');
        sliderDOM = DOMCreate('div', sliderDOM, 'boxShadowEffectWrappers', '', ['style="display:none;"']);
        let horiMaxLen = 100, horiMinLen = -100;
        let vertiMaxLen = 100, vertiMinLen = -100;
        let blurMaxLen = 100, blurMinLen = 0;

        sliderDOM += '<input type="hidden" id="boxShadowEffectMinMax" data-hori-min="' + horiMinLen;
        sliderDOM += '" data-hori-max="' + horiMaxLen;
        sliderDOM += '" data-verti-min="' + vertiMinLen + '" data-verti-max="' + vertiMaxLen;
        sliderDOM += '" data-blur-min="' + blurMinLen + '" data-blur-max="' + blurMaxLen + '" />';
        boxShadowDOM += sliderDOM;
        boxShadowDOM = FieldRowDOMCreate(boxShadowDOM);
        return boxShadowDOM;
    }

    function GeneralBorderHoverDOM($border) {
        let borderHoverDOM = "";
        if (typeof ($border) !== 'undefined') {
            let $options = $border['border'];
            if (typeof ($options) !== 'undefined') {
                borderHoverDOM += DOMCreate('h4', 'Border', '', 'borderHoverWrapper', ['data-min="' + $options['min'] + '"', 'data-max="' + $options['max'] + '"', "style=display:none;", 'data-times="' + $options['times'] + '"']);
                let selectDOM = DOMCreate('label', 'Border Hover Style', 'fCol') +
                    DOMCreate('div', DOMCreate('span', SelectDOMCreate('borderHoverStyle', 'BorderHoverStyle', [['none', 'None'], ['solid', 'Solid'], ['dashed', 'Dashed'], ['dotted', 'Dotted'], ['double', 'Double']]), 'select__box'), 'fCol TxAl-r');
                borderHoverDOM += FieldRowDOMCreateCol50_50(selectDOM);
                let borderHoverSliderCollection = '';
                let positionList = $options['position'];
                if (typeof (positionList) !== "undefined") {
                    let positionLength = positionList.length;
                    for (var i = 0; i < positionLength; i++) {
                        switch (positionList[i].toLowerCase()) {
                            case 'all':
                                borderHoverSliderCollection += CreateSliderWithColorDOM(borderHoverSliderList[0][0], borderHoverSliderList[0][1], 'Bulk Border', borderHoverSliderList[0][5], 'borderHoverColorChoose');
                                borderHoverSliderList[0][2] = true;
                                break;
                            case 'top':
                                borderHoverSliderCollection += CreateSliderWithColorDOM(borderHoverSliderList[1][0], borderHoverSliderList[1][1], 'Top Border', borderHoverSliderList[1][5], 'borderHoverColorChoose');
                                borderHoverSliderList[1][2] = true;
                                break;
                            case 'right':
                                borderHoverSliderCollection += CreateSliderWithColorDOM(borderHoverSliderList[2][0], borderHoverSliderList[2][1], 'Right Border', borderHoverSliderList[2][5], 'borderHoverColorChoose');
                                borderHoverSliderList[2][2] = true;
                                break;
                            case 'bottom':
                                borderHoverSliderCollection += CreateSliderWithColorDOM(borderHoverSliderList[3][0], borderHoverSliderList[3][1], 'Bottom Border', borderHoverSliderList[3][5], 'borderHoverColorChoose');
                                borderHoverSliderList[3][2] = true;
                                break;
                            case 'left':
                                borderHoverSliderCollection += CreateSliderWithColorDOM(borderHoverSliderList[4][0], borderHoverSliderList[4][1], 'Left Border', borderHoverSliderList[4][5], 'borderHoverColorChoose');
                                borderHoverSliderList[4][2] = true;
                                break;
                        }
                    }
                    borderHoverSliderCollection = DOMCreate('div', borderHoverSliderCollection, 'borderHoverSliderCollection', '', ['style="display:none;"']);
                    borderHoverDOM = FieldRowDOMCreate(borderHoverDOM + borderHoverSliderCollection);
                }
            }
        }
        return borderHoverDOM;
    }
    return hoverDOM;
}
function MouseOverEffect($parent) {
    function ApplyEffects($this) {
        let boxShadowStyle = $this.css('box-shadow');
        let previousdata = {
            "bg": $this.css('background-color'),
            "font": "#000",
            "box": {
                "on": "off",
                "hl": "0px",
                "vl": "1px",
                "br": "5px",
                "c": "#000",
                "i": "false",
            },
            "boxShadowStyle": boxShadowStyle,
            "border": {
                "on": "off",
                "top": "0",
                "right": "0",
                "bottom": "0",
                "left": "0",
                "tc": "#000",
                "rc": "#000",
                "bc": "#000",
                "lc": "#000"
            },
            "zoom": null
        };
        hoverEffect = JSON.parse($this.attr('data-hovereffect'));
        if ($this.find('.onhoverbgcolor').length > 0) {
            previousdata.bg = $this.find('.onhoverbgcolor').eq(0).css('background-color');
            $this.find('.onhoverbgcolor').css({ 'background-color': hoverEffect.bg });
        }
        else {
            previousdata.bg = $this.css('background-color');
            $this.css({ 'background-color': hoverEffect.bg });
        }
        if ($this.find('.onhovercolor').length > 0) {
            previousdata.font = $this.find('.onhovercolor').eq(0).css('color');
            $this.find('.onhovercolor').css({ 'color': hoverEffect.font });
        }
        else {
            previousdata.font = $this.css('color');
            $this.css({ 'color': hoverEffect.font });
        }
        let zoomClass = $this.attr('class').match(/scale-[0-1]-[0-9]/g);
        if (zoomClass !== null) {
            $this.removeClass(zoomClass[0]);
            previousdata.zoom = zoomClass[0];
        }
        let zoom = hoverEffect.zoom;
        $this.addClass('scale-' + parseInt(zoom / 10) + '-' + (zoom % 10));
        let $shadow = hoverEffect.box;
        function ParentBoxShadow() {
            //previousdata.box.on = "off";
            if ($this.attr('hovered-mousein') === "in")
                previousdata.box.on = "off";
            let boxShadow = $this.css('box-shadow');
            if (typeof (boxShadow) !== "undefined" && boxShadow !== null && boxShadow !== 'none') {
                //previousdata.box.on = "on";
                let lenCol = boxShadow.match(/-?\d{1,3}px/g);
                previousdata.box.hl = lenCol[0] + ' ';
                previousdata.box.vl = lenCol[1] + ' ';
                previousdata.box.br = lenCol[2] + ' ';
                let inset = '';
                let hasInset = boxShadow.match(/inset/);
                if (hasInset !== null && hasInset.length > 0) {
                    inset = ' inset ';
                }
                previousdata.box.i = inset;
                let spreadDistace = '';
                if (lenCol.length == 4)
                    spreadDistace = lenCol[3];
                let dropColor = boxShadow.replace(previousdata.box.hl, '')
                    .replace(previousdata.box.vl, '')
                    .replace(previousdata.box.br, '')
                    .replace(spreadDistace, '')
                    .replace('inset', '').trim();
                if (dropColor.length > 0) {
                    previousdata.box.c = dropColor;
                }
            }
            if ($shadow.on === "on") {
                let shadowDOM = '';
                shadowDOM += $shadow.c;
                shadowDOM += $shadow.hl;
                shadowDOM += $shadow.vl;
                shadowDOM += $shadow.br;
                shadowDOM += $shadow.i;
                $this.css({ 'box-shadow': shadowDOM });
            }
        }
        let $border = hoverEffect.border;
        function BorderOnHover() {

            previousdata.border.on = $this.css("border-top-style");
            previousdata.border.top = $this.css("border-top-width");
            previousdata.border.right = $this.css("border-right-width");
            previousdata.border.bottom = $this.css("border-bottom-width");
            previousdata.border.left = $this.css("border-left-width");

            previousdata.border.tc = $this.css('border-top-color');
            previousdata.border.rc = $this.css('border-right-color');
            previousdata.border.bc = $this.css('border-bottom-color');
            previousdata.border.lc = $this.css('border-left-color');

            if ($border.on !== "none") {
                $this.css({
                    "border-style": $border.on,
                    "border-top-width": $border.top,
                    "border-right-width": $border.right,
                    "border-bottom-width": $border.bottom,
                    "border-left-width": $border.left,
                    'border-top-color': $border.tc,
                    'border-right-color': $border.rc,
                    'border-bottom-color': $border.bc,
                    'border-left-color': $border.lc
                });
            }
        }
        ParentBoxShadow();
        BorderOnHover();
        //if ($this.attr('hovered-mousein') === "in")
        //previousdata.box.on = 'off';
        $this.attr('data-prevhovereffect', JSON2.stringify(previousdata));
    }

    function ResetPreviousEffect($this) {
        let prevEff = $this.attr('data-prevhovereffect');
        if (typeof prevEff === 'undefined') {
            return;
        }
        let hoverEffect = JSON.parse(prevEff);
        $this.css({ 'background-color': hoverEffect.bg });
        if ($this.find('.onhoverbgcolor').length > 0) {
            $this.find('.onhoverbgcolor').css({ 'background-color': hoverEffect.bg });
        }
        else {
            $this.css({ 'background-color': hoverEffect.bg });
        }
        if ($this.find('.onhovercolor').length > 0) {
            $this.find('.onhovercolor').css({ 'color': hoverEffect.font });
        }
        else {
            $this.css({ 'color': hoverEffect.font });
        }

        $this.removeAttr('data-prevhovereffect');
        let zoomClass = $this.attr('class').match(/scale-[0-1]-[0-9]/g);
        if (zoomClass !== null) {
            $this.removeClass(zoomClass[0]);
        }
        if (typeof (hoverEffect.zoom) !== "undefined") {
            $this.addClass(hoverEffect.zoom);
        }
        let $shadow = hoverEffect.box;
        if ($shadow.on === "on") {
            let shadowDOM = '';
            shadowDOM += $shadow.c;
            shadowDOM += $shadow.hl;
            shadowDOM += $shadow.vl;
            shadowDOM += $shadow.br;
            shadowDOM += $shadow.i;
            $this.css({ 'box-shadow': shadowDOM });
        }
        else {
            $this.css({ 'box-shadow': hoverEffect.boxShadowStyle });
        }
        let $border = hoverEffect.border;
        $this.css({
            "border-style": $border.on,
            "border-top-width": $border.top,
            "border-right-width": $border.right,
            "border-bottom-width": $border.bottom,
            "border-left-width": $border.left,
            'border-top-color': $border.tc,
            'border-right-color': $border.rc,
            'border-bottom-color': $border.bc,
            'border-left-color': $border.lc
        });
    }
    let $selected = $('.hovered');
    if (typeof ($parent) !== "undefined") {
        if ($parent.hasClass('hovered')) {
            $selected = $parent;
            effect($selected);
        }
        else if ($parent.find('.hovered').length > 0) {
            $selected = $parent.find('.hovered');
            $selected.each(function () {
                effect($(this));
            });
        }
    }

    function effect($sel) {
        $sel.off('mouseout').on('mouseout', function () {
            $(this).attr('hovered-mousein', 'out');
            ResetPreviousEffect($(this));
        });
        $sel.off('mouseover').on('mouseover', function () {
            $(this).attr('hovered-mousein', 'in');
            ApplyEffects($(this));
        });
    }
}
function RemoveMouseOverEffect($parent) {
    if (typeof ($parent) !== "undefined") {
        if ($parent.hasClass('hovered')) {
            $parent.off('mouseover').off('mouseout').removeClass('hovered');
        }
        else if ($parent.find('.hovered').length > 0) {
            let $selected = $parent.find('.hovered');
            $selected[0].off('mouseover').off('mouseout').removeClass('hovered');
            $selected.each(function (i, v) {
                v.off('mouseover').off('mouseout').removeClass('hovered');
            });
        }
    }
    else
        $('.hovered').off('mouseover').off('mouseout').removeClass('hovered');
}
function BorderHoverBulk(space, $parent) {
    if (borderHoverSliderList[1][2]) {
        currentHoverEffect.border.top = space;
        $('#' + borderHoverSliderList[1][0]).slider('value', space);
        $('#' + borderHoverSliderList[1][1]).text(space);
    }
    if (borderHoverSliderList[2][2]) {
        currentHoverEffect.border.right = space;
        $('#' + borderHoverSliderList[2][0]).slider('value', space);
        $('#' + borderHoverSliderList[2][1]).text(space);
    }
    if (borderHoverSliderList[3][2]) {
        currentHoverEffect.border.bottom = space;
        $('#' + borderHoverSliderList[3][0]).slider('value', space);
        $('#' + borderHoverSliderList[3][1]).text(space);
    }
    if (borderHoverSliderList[4][2]) {
        currentHoverEffect.border.left = space;
        $('#' + borderHoverSliderList[4][0]).slider('value', space);
        $('#' + borderHoverSliderList[4][1]).text(space);
    }
    UpdateEffect($parent);
}
function BorderHoverTop(space, $parent) {
    currentHoverEffect.border.top = space;
    BorderHoverBulkNull($parent);
}
function BorderHoverRight(space, $parent) {
    currentHoverEffect.border.right = space;
    BorderHoverBulkNull($parent);
}
function BorderHoverBottom(space, $parent) {
    currentHoverEffect.border.bottom = space;
    BorderHoverBulkNull($parent);
}
function BorderHoverLeft(space, $parent) {
    currentHoverEffect.border.left = space;
    BorderHoverBulkNull($parent);
}
function BorderHoverBulkNull($parent) {
    $('#' + borderHoverSliderList[0][0]).slider('value', 0);
    $('#' + borderHoverSliderList[0][1]).text(0);
    UpdateEffect($parent);
}
function UpdateEffect($parent) {
    $parent.attr('data-hovereffect', JSON2.stringify(currentHoverEffect));
}
let currentHoverEffect = {
    "bg": "#ccc",
    "font": "#000",
    "box": {
        "on": "off",
        "hl": "0px",
        "vl": "0px",
        "br": "0px",
        "c": "#000",
        "i": "false",
    },
    "border": {
        "on": "none",
        "top": "0",
        "right": "0",
        "bottom": "0",
        "left": "0",
        "tc": "#000",
        "rc": "#000",
        "bc": "#000",
        "lc": "#000"
    },
    "zoom": "10",
    "delay": 0
};
function GeneralIconHoverEffectEvent($parent) {
    let hoverdata = $parent.attr('data-hovereffect');
    if (typeof hoverdata !== 'undefined') {
        try {
            currentHoverEffect = JSON.parse(hoverdata);
        } catch (e) {
            console.log("invalid hovereffect data");
        }
    }
    InitEvents();
    function InitEvents() {
        GeneralBoxShadowEffectEvents($parent);
        GeneralBorderHoverEvents($parent);
        $('#hoverEffectOption').off().on('click', function () {
            if ($(this).is(':checked')) {
                $('#hoverEffectOptionWrap').show();
                $parent.addClass('hovered');
                //currentHoverEffect = {
                //    "bg": "#ccc",
                //    "font": "#000",
                //    "box": {
                //        "on": "off",
                //        "hl": "0px",
                //        "vl": "1px",
                //        "br": "5px",
                //        "c": "#000",
                //        "i": "false",
                //    },
                //    "border": {
                //        "on": "none",
                //        "top": "0",
                //        "right": "0",
                //        "bottom": "0",
                //        "left": "0",
                //        "tc": "#000",
                //        "rc": "#000",
                //        "bc": "#000",
                //        "lc": "#000"
                //    },
                //    "zoom": "10",
                //    "delay": 0
                //};
                MouseOverEffect($parent);
                UpdateEffect($parent);
                InitializeEffecValue();
            }
            else {
                $('#hoverEffectOptionWrap').hide();
                RemoveMouseOverEffect($parent);
            }
        });
        let colorPickerOption = ColorPickerOption({
            renderCallback: function ($elm, toggled) {
                let objColor = RenderCallBackColor(this);
                let colorPickerID = $elm.attr('id');
                switch (colorPickerID) {
                    case 'hoverBGColor':
                        currentHoverEffect.bg = objColor.bgColor;
                        break;
                    case 'hoverTextColor':
                        currentHoverEffect.font = objColor.bgColor;
                        break;
                }
                UpdateEffect($parent);
            }
        });
        $('.hoverColor').colorPicker(colorPickerOption);
        function OnZoom(space) {
            currentHoverEffect.zoom = space;
            UpdateEffect($parent);
        }
        AdvanceSageSlider($('#HoverZoomSlider'), $('#HoverZoomSliderHandle'), 1, 20, 10, OnZoom, $parent, '');
        if ($parent.hasClass('hovered')) {
            InitializeEffecValue();
            $('#hoverEffectOption').prop('checked', true);
            $('#hoverEffectOptionWrap').show();
        }
        else {
            $('#hoverEffectOption').prop('checked', false);
        }
    }

    function InitializeEffecValue() {
        let initHoverEffect = JSON.parse($parent.attr('data-hovereffect'));
        $('#hoverBGColor').css('background-color', initHoverEffect.bg);
        $('#hoverTextColor').css('background-color', initHoverEffect.font);
        let effectZoom = initHoverEffect.zoom;
        ChangeSliderValue($('#HoverZoomSlider'), effectZoom);
        let shadowon = initHoverEffect.box.on;
        if (shadowon == "on") {
            $('.boxShadowEffectWrappers').show();
            $('#ShowBoxShadowEffectOption').prop('checked', true);
        }
        else {
            $('.boxShadowEffectWrappers').hide();
            $('#ShowBoxShadowEffectOption').prop('checked', false);
        }
    }

    function GeneralBoxShadowEffectEvents($parent) {

        $('#boxshadowEffectInset').off().on('click', function () {
            parentBoxShadow();
        });
        $('#ShowBoxShadowEffectOption').off().on('click', function () {
            if ($(this).is(':checked')) {
                $('.boxShadowEffectWrappers').slideDown(400);
                currentHoverEffect.box.on = "on";
                parentBoxShadow();
            }
            else {
                $('.boxShadowEffectWrappers').slideUp(400);
                currentHoverEffect.box.on = "off";
                parentBoxShadow();
            }
        });
        let objBoxShadow = {
            'inset': '',
            'horizontal': '0',
            'vertical': '0',
            'blur': '0',
            'color': '#000',
        };
        let boxShadow = $parent.attr('data-hovereffect');
        $('#shadowEffectColor').css('background-color', '#000');
        let horiLen = 0;
        let verLen = 0;
        let blurRadius = 0;
        if (typeof (boxShadow) !== "undefined" && boxShadow !== null && boxShadow !== 'none') {
            let initHoverEffect = JSON.parse($parent.attr('data-hovereffect'));
            let $shadow = initHoverEffect.box;
            horiLen = $shadow.hl;
            verLen = $shadow.vl;
            blurRadius = $shadow.br;
            horiLen = parseInt(horiLen.replace('px', ''));
            verLen = parseInt(verLen.replace('px', ''));
            blurRadius = parseInt(blurRadius.replace('px', ''));
            objBoxShadow.horizontal = horiLen;
            objBoxShadow.vertical = verLen;
            objBoxShadow.blur = blurRadius;
            $('.boxShadowEffectWrappers').show();
            $('#ShowBoxShadowEffectOption').prop('checked', true);
            $('#shadowEffectColor').css('background-color', $shadow.c);
            let inset = $shadow.i;
            if (inset == "true" || inset.trim() == "inset") {
                $('#boxshadowEffectInset').prop('checked', true);
            }
            else {
                $('#boxshadowEffectInset').prop('checked', false);
            }
        }
        else {
            $('.boxShadowEffectWrappers').hide();
            $('#ShowBoxShadowEffectOption').prop('checked', false);
            $('#shadowEffectColor').css('background-color', '#000');
        }
        function parentBoxShadow() {
            currentHoverEffect.box.c = objBoxShadow.color + ' ';
            currentHoverEffect.box.hl = objBoxShadow.horizontal + 'px ';
            currentHoverEffect.box.vl = objBoxShadow.vertical + 'px ';
            currentHoverEffect.box.br = objBoxShadow.blur + 'px ';
            if ($('#boxshadowEffectInset').prop('checked')) {
                currentHoverEffect.box.i = ' inset ';
            }
            else
                currentHoverEffect.box.i = '';
            UpdateEffect($parent);
        }
        let horiMaxLen = parseInt($('#boxShadowEffectMinMax').attr('data-hori-max'));
        let horiMinLen = parseInt($('#boxShadowEffectMinMax').attr('data-hori-min'));
        let vertiMaxLen = parseInt($('#boxShadowEffectMinMax').attr('data-verti-max'));
        let vertiMinLen = parseInt($('#boxShadowEffectMinMax').attr('data-verti-min'));
        let blurMaxLen = parseInt($('#boxShadowEffectMinMax').attr('data-blur-max'));
        let blurMinLen = parseInt($('#boxShadowEffectMinMax').attr('data-blur-min'));
        function BoxShadowHoriLengthSlide(space, $parent) {
            objBoxShadow.horizontal = space;
            parentBoxShadow();
        }
        AdvanceSageSlider($('#' + boxShadowEffectSliderList[0][0]), $('#' + boxShadowEffectSliderList[0][1]), horiMinLen, horiMaxLen, horiLen, BoxShadowHoriLengthSlide, $parent, 'px');

        function BoxShadowVerticalLengthSlide(space) {
            objBoxShadow.vertical = space;
            parentBoxShadow();
        }
        AdvanceSageSlider($('#' + boxShadowEffectSliderList[1][0]), $('#' + boxShadowEffectSliderList[1][1]), vertiMinLen, vertiMaxLen, verLen, BoxShadowVerticalLengthSlide, $parent, 'px');

        function BoxShadowBlurSlide(space) {
            objBoxShadow.blur = space;
            parentBoxShadow();
        }
        AdvanceSageSlider($('#' + boxShadowEffectSliderList[2][0]), $('#' + boxShadowEffectSliderList[2][1]), blurMinLen, blurMaxLen, blurRadius, BoxShadowBlurSlide, $parent, 'px');

        let colorPickerOption = ColorPickerOption({
            renderCallback: function ($elm, toggled) {
                let objColor = RenderCallBackColor(this);
                objBoxShadow.color = objColor.bgColor;
                parentBoxShadow();
            }
        });
        $('#shadowEffectColor').colorPicker(colorPickerOption);
    }

    function GeneralBorderHoverEvents($parent) {
        $('#borderHoverStyle').on('change', function () {
            let style = $(this).val();
            let borderHoverEfffect = {
                "top": "0px",
                "right": "0px",
                "bottom": "0px",
                "left": "0px"
            };
            if (style === 'none') {
                $('.borderHoverSliderCollection').hide();
                for (var i = 0; i < 5; i++) {
                    $('#' + borderHoverSliderList[i][0]).slider('value', 0);
                    $('#' + borderHoverSliderList[i][1]).text(0);
                }
                currentHoverEffect.border.on = style;
                currentHoverEffect.border.top = "0px";
                currentHoverEffect.border.right = "0px";
                currentHoverEffect.border.bottom = "0px";
                currentHoverEffect.border.left = "0px";
                UpdateEffect($parent);
            }
            else {
                currentHoverEffect.border.on = style;
                currentHoverEffect.border.top = "1px";
                currentHoverEffect.border.right = "1px";
                currentHoverEffect.border.bottom = "1px";
                currentHoverEffect.border.left = "1px";
                for (var i = 0; i < 5; i++) {
                    $('#' + borderHoverSliderList[i][0]).slider('value', 1);
                    $('#' + borderHoverSliderList[i][1]).text(1);
                }
                UpdateEffect($parent);
                $('.borderHoverSliderCollection').show();
            }
        });

        let domHoverEffect = $parent.attr('data-hovereffect');
        if (typeof (domHoverEffect) !== "undefined" && domHoverEffect !== null && domHoverEffect !== 'none') {
            domHoverEffect = JSON.parse($parent.attr('data-hovereffect'));
            let borderStyle = domHoverEffect.border.on;
            if (borderStyle.length == 0)
                borderStyle = 'none';
            $('#borderHoverStyle').val(borderStyle);
            if (borderStyle == 'none') {
                $('.borderHoverSliderCollection').hide();
            } else {
                $('.borderHoverSliderCollection').show();
            }
        }
        else {
            domHoverEffect = hoverEffect;
        }
        let $borderWrapper = $('#borderHoverWrapper');
        LoadBorderHoverInitialValue();
        if (typeof ($borderWrapper) !== "undefined" && typeof ($borderWrapper.attr('data-max')) !== 'undefined' && typeof ($borderWrapper.attr('data-min')) !== 'undefined') {
            let maxValue = parseInt($borderWrapper.attr('data-max'));
            let minValue = parseInt($borderWrapper.attr('data-min'));
            for (var i = 0; i < 5; i++) {
                if (borderHoverSliderList[i][2]) {
                    AdvanceSageSlider($('#' + borderHoverSliderList[i][0]), $('#' + borderHoverSliderList[i][1]), minValue, maxValue, borderHoverSliderList[i][4], borderHoverSliderList[i][3], $parent, 'px');
                }
            }
        }
        function LoadBorderHoverInitialValue() {
            let times = 1;
            if (typeof ($borderWrapper.attr('data-times')) !== 'undefined')
                times = parseInt($borderWrapper.attr('data-times'));
            if (times == 0)
                times = 1;

            let topWidth = 0, rightWidth = 0, bottomWidth = 0, leftWidth = 0;
            if (typeof (domHoverEffect) !== "undefined") {
                topWidth = domHoverEffect.border.top;
                if (typeof (topWidth) != 'undefined')
                    topWidth = parseInt(topWidth);
                topWidth = topWidth / times;
            }
            borderHoverSliderList[1][4] = topWidth;

            if (typeof (domHoverEffect) !== "undefined") {
                rightWidth = domHoverEffect.border.right;
                if (typeof (rightWidth) != 'undefined')
                    rightWidth = parseInt(rightWidth);
                rightWidth = rightWidth / times;
            }
            borderHoverSliderList[2][4] = rightWidth;

            if (typeof (domHoverEffect) !== "undefined") {
                bottomWidth = domHoverEffect.border.bottom;
                if (typeof (bottomWidth) != 'undefined')
                    bottomWidth = parseInt(bottomWidth);
                bottomWidth = bottomWidth / times;
            }
            borderHoverSliderList[3][4] = bottomWidth;

            if (typeof (domHoverEffect) !== "undefined") {
                leftWidth = domHoverEffect.border.left;
                if (typeof (leftWidth) != 'undefined')
                    leftWidth = parseInt(leftWidth);
                leftWidth = leftWidth / times;
            }
            borderHoverSliderList[4][4] = leftWidth;

            if (borderHoverSliderList[1][4] === borderHoverSliderList[2][4] &&
                borderHoverSliderList[3][4] === borderHoverSliderList[4][4] &&
                borderHoverSliderList[1][4] === borderHoverSliderList[4][4])
                borderHoverSliderList[0][4] = borderHoverSliderList[1][4];
        }
        LoadBorderHoverColor();
        BorderColorEvents();
        function BorderColorEvents() {
            let colorPickerOption = ColorPickerOption({
                renderCallback: function ($elm, toggled) {
                    let objColor = RenderCallBackColor(this);
                    let colorPickerID = $elm.attr('id');
                    if (colorPickerID === borderHoverSliderList[0][5]) {
                        currentHoverEffect.border.tc = objColor.bgColor;
                        currentHoverEffect.border.rc = objColor.bgColor;
                        currentHoverEffect.border.bc = objColor.bgColor;
                        currentHoverEffect.border.lc = objColor.bgColor;
                        $('#' + borderHoverSliderList[1][5]).css('background-color', objColor.bgColor);
                        $('#' + borderHoverSliderList[2][5]).css('background-color', objColor.bgColor);
                        $('#' + borderHoverSliderList[3][5]).css('background-color', objColor.bgColor);
                        $('#' + borderHoverSliderList[4][5]).css('background-color', objColor.bgColor);
                    }
                    else if (colorPickerID === borderHoverSliderList[1][5]) {
                        currentHoverEffect.border.tc = objColor.bgColor;
                    }
                    else if (colorPickerID === borderHoverSliderList[2][5]) {
                        currentHoverEffect.border.rc = objColor.bgColor;
                    }
                    else if (colorPickerID === borderHoverSliderList[3][5]) {
                        currentHoverEffect.border.bc = objColor.bgColor;
                    }
                    else if (colorPickerID === borderHoverSliderList[4][5]) {
                        currentHoverEffect.border.lc = objColor.bgColor;
                    }
                    UpdateEffect($parent);
                }
            });
            $('.borderHoverColorChoose').colorPicker(colorPickerOption);
        }

        function LoadBorderHoverColor() {

            let borderTopColor = blackColor, borderRightColor = blackColor, borderBottomColor = blackColor, borderLeftColor = blackColor;
            if (typeof (domHoverEffect) !== "undefined") {
                borderTopColor = domHoverEffect.border.tc;
                borderRightColor = domHoverEffect.border.rc;
                borderBottomColor = domHoverEffect.border.bc;
                borderLeftColor = domHoverEffect.border.lc;
            }
            $('#' + borderHoverSliderList[1][5]).css('background-color', borderTopColor);
            $('#' + borderHoverSliderList[2][5]).css('background-color', borderRightColor);
            $('#' + borderHoverSliderList[3][5]).css('background-color', borderBottomColor);
            $('#' + borderHoverSliderList[4][5]).css('background-color', borderLeftColor);
            if (borderTopColor === borderRightColor && borderBottomColor === borderLeftColor && borderTopColor === borderLeftColor)
                $('#' + borderHoverSliderList[0][5]).css('background-color', borderTopColor);
            else
                $('#' + borderHoverSliderList[0][5]).css('background-color', '#000');
        }
    }

}
function GeneralScrolleffect($option) {
    let effectDOM = FieldRowDOMCreateCol50_50(
        DOMCreate('label', 'Scroll Effect', 'fCol') +
        DOMCreate('div',
            DOMCreate('span',
                SelectDOMCreate('scrolleffect', 'scrolleffect', [['none', 'None'], ['fade-up', 'fade-up'], ['fade-down', 'fade-down'], ['fade-left', 'fade-left'], ['fade-right', 'fade-right']]),//['zoom-in', 'zoom-in'], ['zoom-out', 'zoom-out']
                'select__box'),
            'fCol TxAl-r')
    );
    let delayDOM = DOMCreate('div',
        DOMCreate('label', 'Delay', 'fCol') +
        DOMCreate('div',
            DOMCreate('span',
                SelectDOMCreate('delayscrolleffect', 'delayscrolleffect', [['0', '0'], ['50', '50'], ['100', '100'], ['200', '200'], ['300', '300'], ['400', '400'], ['800', '800'], ['1200', '1200'], ['1600', '1600'], ['1200', '1200'], ['2000', '2000'], ['2400', '2400'], ['2800', '2800'], ['3200', '3200'], ['3600', '3600'], ['4000', '4000']]),
                'select__box'),
            'fCol TxAl-r'),
        'field-row stElWrap col50-50', 'delayscrolleffectWrap');
    //var previewScroll = FieldRowDOMCreateCol100()

    return FieldRowDOMCreate(effectDOM + delayDOM);
}
function GeneralScrollEffectEvent($selectedLayer) {
    InitEvents();
    function InitEvents() {
        let scrollClass = 'none';
        $('#delayscrolleffectWrap').hide();
        if ($selectedLayer.hasClass('scroll-begin')) {
            scrollClass = $selectedLayer.attr('data-scroll');
            $('#delayscrolleffectWrap').show();
        }
        $('#scrolleffect').val(scrollClass);
        let delayamount = '0';
        if ($selectedLayer.hasClass('scroll-begin') && typeof ($selectedLayer.attr('data-scrolldelay')) !== "undefined") {
            delayamount = $selectedLayer.attr('data-scrolldelay');
        }
        $('#delayscrolleffect').val(delayamount);

        $('#scrolleffect').on('change', function () {
            let value = $(this).val();
            $selectedLayer.attr('data-scroll', value);
            if (value === "none") {
                $selectedLayer.removeClass('scroll-begin');
                $selectedLayer.removeAttr('data-scroll');
                $('#delayscrolleffectWrap').hide();
            }
            else {
                $('#delayscrolleffectWrap').show();
                if (!$selectedLayer.hasClass('scroll-begin'))
                    $selectedLayer.addClass('scroll-begin');
            }

        });

        $('#delayscrolleffect').on('change', function () {
            let value = $(this).val();
            $selectedLayer.attr('data-scrolldelay', value);
        });
    }
}
function CalculateWidth($parent) {
    /*$parent.find('.editor-col').each(function () {
        let $this = $(this);
        let width = $this.width();
        let sfColVal = $this.attr('class').match(/sfCol_[0-9]{1,3}/g);
        if (sfColVal !== null) {
            let sfColPer = sfColVal[0].split('_')[1];
            $this.attr('data-width', width);
            $this.css({ 'width': 'calc( ' + sfColPer + '% - ' + dragComponetWidth + ' )' });
        }
    });*/
}
function InitComponentStyle($currentComponent, manipulateSelector, dropped, iconStyles, defaultdata, displayStyle, $title) {
    let option = {
        "ulClass": "sfCol_100 ",
        "liClass": "",
        "ulStyle": "",
        "liStyle": ""
    };
    option = $.extend(option, displayStyle);
    let selectDOM = '';
    $.each(iconStyles, function (title, $section) {
        let totalStyle = Object.keys($section).length;
        let list = DOMCreate('li', title, 'title sfCol_100 Dn');
        for (var i = 0; i < totalStyle; i++) {
            list += DOMCreate('li', defaultdata, 'selectData ' + option.liClass, '', ['style="' + option.liStyle + '"', 'data-title="' + title + '"', 'data-style="' + i + '"']);
        }
        selectDOM += DOMCreate('ul', list, 'selectDataWrapper Dfx flxWrp ' + option.ulClass, '', ['style="' + option.ulStyle + '"']);
    });
    //if (typeof (dropped) !== "undefined") {
    //    if (dropped) {
    //        selectDOM = selectDOM;
    //    }
    //}
    InitComponentStyleWithdata($currentComponent, manipulateSelector, iconStyles, selectDOM, $title);
}
/* dropped component, component to be manipulate, stylesm, PopoupDOM*/
function InitComponentStyleWithdata($currentComponent, manipulateSelector, iconStyles, selectDOM, $title) {
    FullPagePopup({
        data: selectDOM,
        heading: $title,
        showheading: true,
        width: '40%'
    });
    let count = 0;
    $.each(iconStyles, function (title, $section) {
        let totalStyle = Object.keys($section).length;
        for (var i = 0; i < totalStyle; i++) {
            let icon = $section[i];
            SetStyleAttribute($('.selectDataWrapper').eq(count).find('.selectData').eq(i).find(manipulateSelector), icon);
        }
        count++;
    });
    $('.selectDataWrapper').find('.SetHdlr').remove();
    $('.selectData').off().on('click', function () {
        let $this = $(this);
        let icon = iconStyles[$this.attr('data-title')][$this.attr('data-style')];
        SetStyleAttribute($currentComponent, icon);
        CloseFullPagePopup();
    });
}
function SetStyleAttribute($component, $attributes) {
    let attributesKeyList = Object.keys($attributes);
    let attributeLength = attributesKeyList.length;

    for (var i = 0; i < attributeLength; i++) {
        let key = attributesKeyList[i];
        let value = $attributes[key];
        if (typeof (value) === "string")
            $component.attr(key, $attributes[key]);
        else if (typeof (value) === "function") {
            value($component);
        }
    }
}
let slickSliderList = {};
function DraggableSortable() {
    $(".editor-col").sortable({
        revert: 0,
        delay: 150,
        items: 'div.editor-component',
        cancel: '.col-options',
        handle: ".sortComponent",
        helper: function () {
            return $('<div class="comhelperBox" style="height:40px;width:100px;"></div>');
        },
        connectWith: '.editor-col',
        cursorAt: { left: 5, top: 5 },
        placeholder: 'ui-state-com-sortable-hover ui-hover-state',
        stop: function (event, ui) {
            let dataType = $(ui.item[0]).find('> .SetHdlr').find('.com-settings').attr('data-type');
            if (dataType !== "undefined") {
                if (typeof component[dataType].onsort !== "undefined") {
                    component[dataType].onsort($(ui.item[0]));
                }
            }
        },
        receive: function (event, ui) {
            $(this).find("> .column-data-empty").remove();
        }
    }).droppable({
        accept: ".comBasic",
        greedy: true,
        tolerance: 'pointer',
        hoverClass: "ui-state-com-droppable-hover ui-hover-state",
        drop: function (event, ui) {
            $('.ui-hover-state').removeClass('ui-state-com-droppable-hover ui-hover-state ui-state-row-hover');
            let $slickSlide = $(this).parents('.slick-slide');
            if ($slickSlide.length == 1 && $slickSlide.css("z-index") != "auto") {
                let $contentsliderDom = $slickSlide.parents('.contentsliderDom');
                let $dataId = $contentsliderDom.attr('data-id');
                //console.log($dataId, slickSliderList, slickSliderList[$dataId]);
                let cList = slickSliderList[$dataId];
                //find element with highest z-index
                let highest = 0;
                let topEl;
                for (let i = 0; i < cList.length; i++) {
                    let el = $contentsliderDom.find('.slide-c-' + cList[i]).parents('.slick-slide');
                    let zi = $(el).css('z-index');
                    //console.log("current ", highest, "new ", zi, " c = ", cList[i]);
                    if (zi > highest) {
                        highest = zi;
                        topEl = '.slide-c-' + cList[i];
                    }
                }
                //console.log("top el ", topEl);
                if ($(this).parents(topEl).length === 0) {
                    return;
                }
            }
            let $this = $(this);
            let item = $(ui.draggable);
            let dataType = item.attr('data-type');
            let appendDOM = '';

            if (typeof (component[dataType].defaultdata) !== 'undefined') {
                appendDOM = component[dataType].defaultdata;
            }
            let $appendLayer = $(appendDOM);
            let $appendedParent = $this;
            let $shadedLayer = $this.find(' > .editor-row-shaded-layer');
            if (typeof ($shadedLayer) === 'undefined' || $shadedLayer.length == 0) {
            }
            else {
                $appendedParent = $shadedLayer;
            }
            /*beforedrop callbackfunction*/
            if (typeof (component[dataType].beforedrop) !== 'undefined') {
                component[dataType].beforedrop($appendedParent, $appendLayer, true);
            }
            if ($this.find(" > .column-data-empty").length > 0) /*add first element when cart is empty*/ {
                $this.find(" > .column-data-empty").remove();
                $appendedParent.append($appendLayer);
            } else {
                let i = 0; /*used as flag to find out if element added or not*/
                $appendedParent.children('.editor-component').each(function () {
                    if ($(this).offset().top >= ui.offset.top) {
                        $appendLayer.insertBefore($(this));
                        i = 1;
                        return false;
                    }
                });
                if (i !== 1) /*if element dropped at the end of cart*/ {
                    $appendedParent.append($appendLayer);
                }
            }
            DraggableSortable();
            SettingEvents($appendLayer);
            MouseOverEffect($appendLayer);
            EasyLibrary.GenerateAndAppendID($appendLayer, 'row');
            if (component[dataType].type != "Bucket" &&
                !(EasyLibrary.IsDefined(component[dataType].customComponent) && component[dataType].customComponent)) {
                dataType = EasyLibrary.GenerateAndAppendDataType($appendLayer, dataType);
            }
            /*afterDrop callbackfunction*/
            if (typeof (component[dataType].afterdrop) !== 'undefined') {
                component[dataType].afterdrop($appendedParent, $appendLayer, true);
            }
            /*afterDrop callbackfunction*/
            if (typeof (component[dataType].dropstop) !== 'undefined') {
                component[dataType].dropstop($appendedParent, $appendLayer, true);
            }
            AfterDropRecursive($appendLayer);
            BindCopyEvents($appendLayer);
            DeleteComponent($appendLayer);
        },
        over: function (event, ui) {
            let $slickSlide = $(this).parents('.slick-slide');
            if ($slickSlide.length == 1 && $slickSlide.css("z-index") != "auto") {
                let $contentsliderDom = $slickSlide.parents('.contentsliderDom');
                let $dataId = $contentsliderDom.attr('data-id');
                if (typeof slickSliderList[$dataId] === 'undefined') {
                    slickSliderList[$dataId] = [];
                }
                let $c = $slickSlide.find('.anim-slide').attr('data-c');
                if (slickSliderList[$dataId].indexOf($c) === -1) {
                    slickSliderList[$dataId].push($c);
                }
            }
            /*$(".editor-col").not($(this)).droppable("disable");
            $(".editor-col").droppable("disable");
            $(this).droppable("enabled");
            ui.draggable.attr('drg_time', this.drg_time = evt.timeStamp);
            $(this).is(':visible')*/
        },
        out: function (event, ui) {
        }
    });
    let i = 0;
    $(".editor-componentWrapper, .editor-site-header, .editor-site-footer").sortable({
        //$(".cRow-sort").sortable({
        revert: true,
        items: '.cRow',
        handle: '.drag',
        connectWith: ".cRow-sort",
        cursorAt: { left: 5, top: 5 },
        helper: function (event, ui) {
            return $('<div class="rowhelperBox" style="height:40px;width:100%;"></div>');
        },
        placeholder: 'ui-state-Sortablerow-hover ui-hover-state',
        containment: '.edit-area',
        stop: function (event, ui) {

        }
    }).droppable({
        accept: ".rowBasic",
        greedy: true,
        hoverClass: "ui-state-row-hover ui-hover-state",
        drop: function (event, ui) {
            $('.ui-hover-state').removeClass('ui-state-com-droppable-hover ui-hover-state ui-state-row-hover');
            let $this = $(this);
            let item = $(ui.draggable);
            let dataType = item.attr('data-type');
            AppendComponent(dataType, $this, ui);
            if (!EasyLibrary.Pinned())
                closeComponentPopup();
        }
    });
    $(".comBasic").draggable({
        helper: "clone",
        revert: true,
        cursor: 'pointer',
        connectWith: '.editor-col',
        containment: '.main-container',
        start: function (event, ui) {
            slickSliderList = {};
            HideSimplePopUp();
        }
    });
    $(".rowBasic").draggable({
        helper: "clone",
        revert: true,
        cursor: 'pointer',
        connectWith: '.editor-componentWrapper',
        containment: '.main-container',
        start: function (event, ui) {
            HideSimplePopUp();
        }
    });
}
function BindCopyEvents($parentCol) {
    $parentCol.find('.copyData').off().on('click', function () {

        let $this = $activeDOM;
        $('body').find('.readyCopy').removeClass('readyCopy');
        $this.addClass('readyCopy');
        if ($this.find('> .column-data-empty').length == 0) {
            $('.pasteData').removeClass('inactivePaste').addClass('activePaste');
        }
        let html = `<div id="copytoclipboard" class="editor-component paragraph sfFixed TxAl-n Dib tDib tTxAl-n mDib mTxAl-n sfCol_48" data-id="511" data-type="heading" style="background-color: rgb(208, 170, 41); border-radius: 65px; box-shadow: rgb(238, 150, 6) 0px 0px 16px;width: 208px;min-width: 208px !important;text-align: center;position: fixed;top: 50%;left: calc(50% - 100px);left: -webkit-calc(50% - 100px);z-index: 99999999;">
                    <h1 style="color: rgb(255, 255, 255);" class="editor-para ff-montserrat Mt-0 Mr-0 Mb-0 Ml-0 Pr-0 Pl-0 LtrSpc-0 tFs-18 tMt-0 tMr-0 tMb-0 tMl-0 tPt-0 tPr-0 tPb-0 tPl-0 mFs-16 mMt-0 mMr-0 mMb-0 mMl-0 mPt-0 mPr-0 mPb-0 mPl-0 Lh-24 tLh-22 mLh-20 Pt-10 Pb-10 Fs-16 f-weight-600" contenteditable="true">Copied to clipboard !</h1>
                </div>`;
        if ($('#copytoclipboard').length > 0) {
            $('#copytoclipboard').remove();
        }
        $('body').append(html);
        setTimeout(function () {
            $('#copytoclipboard').fadeOut(2000, function () {
                $(this).remove();
            });
        });
    });
}
function AfterDropRecursive($appendLayer) {
    let afterDropList = [];
    $appendLayer.find('.editor-component').each(function (index, value) {
        let $this = $(this);
        let key = $this.find('.com-settings').attr('data-type');
        if (EasyLibrary.IsDefined(key)) {
            if (jQuery.inArray(key, afterDropList) == -1) {
                afterDropList.push(key);
                let compo = component[key];
                if (EasyLibrary.IsDefined(compo.afterdrop))
                    compo.afterdrop($this.parent(), $this, false, true);

                if (EasyLibrary.IsDefined(compo.dropstop))
                    compo.dropstop($this.parent(), $this, false, true);
            }
        }
    });
}
function BindColumnEvents($parentCol) {
    BindCopyEvents($parentCol);
    $parentCol.find('.pasteData').off().on('click', function () {
        let $pasteParent = $activeDOM;
        let $copyParent = $('.readyCopy');
        if ($copyParent.find('>.column-data-empty').length == 0) {
            let html = '';
            if ($copyParent.hasClass('editor-component')) {
                html = $copyParent.get(0).outerHTML;
            }
            else {
                html = $copyParent.html();
            }
            let html_ = $(html);
            html_.find('.readyCopy').removeClass('readyCopy');
            let $isColEmpty = $pasteParent.find('>.column-data-empty');
            $pasteParent.append(html_);
            $pasteParent.find(' > .SetHdlr').eq(1).remove();
            $isColEmpty.remove();
            CopyPasteEvents($pasteParent);
            //            $pasteParent.find('.readyCopy').removeClass('readyCopy');
        }
    });
    $parentCol.find('.emptyColumnData').off().on('click', function () {
        let $this = $(this);
        SageConfirmDialog(easyMessageList.emptycolumn).done(function () {
            let $myCol = $this.parent().parent();
            $myCol.find('div').not('.col-options').not('.column-data-empty').remove();
        });
    });
    $parentCol.find('.showhideColumns').off().on('click', function () {

        let $parent = $(this).parent();
        if ($parent.hasClass('activeOption')) {
            $parent.removeClass('activeOption');
        }
        else {
            $('.SetHdlr.col-options').removeClass('activeOption');
            $parent.addClass('activeOption');
        }

    });
}
function RowEvents() {
    $('.copyRow').off().on('click', function () {
        let $this = $(this);
        let $copyParent = $this.parents('.cRow');
        let copyAttrs = $copyParent.attrs();
        let $html = $(DOMCreate('div', $copyParent.html(), 'cRow sfCol_100'));
        $html.insertAfter($copyParent);
        $html.find('>.SetHdlr .setDrp').hide();
        $html.attrs(copyAttrs);
        $html.removeAttr('data-opscroll').removeClass('activeSetting');
        RowEvents();
        DraggableSortable();
        BindColumnEvents($html);
        TriggerView($html);
        ChangeIDWithParent($html);
        RowAddBindEvent($html);
        CopyPasteEvents($html);
    });
}
function CopyPasteEvents($pasteParent) {
    SettingEvents($pasteParent);
    DeleteComponent($pasteParent);
    MouseOverEffect($pasteParent);
    BindCopyEvents($pasteParent);
    $pasteParent.find('.editor-component').each(function (index, value) {
        let $this = $(this);
        let $skipid = $this.attr('data-skipid');
        if (typeof $skipid === 'undefined') {
            ChangeIDWithParent($this);
        }
        let key = $this.find('.com-settings').attr('data-type');
        let compo = component[key];
        if (typeof compo !== "undefined" && typeof compo.afterdrop !== "undefined")
            compo.afterdrop($this.parent(), $this, false, true);
        //ChangeIDWithParent($this);
        CopyPasteEvents($this);
    });
}
function AutoAlignDragger($helper) {
    let offsets = $helper.position();
    let top = offsets.top;
    let screenHeight = ScreenDimension().height;
    if ((screenHeight - 100) < top) {
        $helper.css('top', (screenHeight - 100) + "px");
    }
    else if ($('.main-top-row').height() > top) {
        $helper.css('top', $('.main-top-row').height() + 10 + "px");
    }
}
function EditableSetBreak() {
    $('[contenteditable]').not('.nobreak').off().on('keydown', function (e) {
        /* trap the return key being pressed */
        if (e.keyCode === 13) {
            /* insert 2 br tags (if only one br tag is inserted the cursor won't go to the next line)*/
            document.execCommand('insertHTML', false, '<br /><br />');
            /* prevent the default behaviour of return key pressed*/
            return false;
        }
    });
    /* document.body.addEventListener("paste", function (e) {
         e.preventDefault();
         var text = e.clipboardData.getData("text/plain");
         document.execCommand("insertHTML", false, text);
     });*/
}
function TextSetting($parent, $textChange) {
    InitEvents();
    LoadSettings();
    function InitEvents() {
        TextTranformCheck();
        FontWidth();
    }
    function FontWidth() {
        let fontWidth = 100;
        let $parentWidthClass = $parent.attr('class').match(/sfCol_[0-9]{1,3}/g);
        if ($parentWidthClass !== null) {
            fontWidth = parseInt($parentWidthClass[0].replace('sfCol_', ''));
            $('#fontWidthSlider').show();
        }
        else {
            $('#fontWidthSlider').hide();
        }
        function fonstWidthSlider(space) {
            let $parentWidth = $parent.attr('class').match(/sfCol_[0-9]{1,3}/g);
            if ($parentWidth !== null) {
                $parent.removeClass($parentWidth[0]).addClass('sfCol_' + space);
            }
            else {
                $parent.addClass('sfCol_' + space);
            }
        }
        AdvanceSageSlider($('#fontWidthSlider'), $('#fontWidthHandle'), 1, 100, fontWidth, fonstWidthSlider, $parent, '%');
    }
    function TextTranformCheck() {
        let trasformValue = '';
        if ($textChange.hasClass('txU')) {
            trasformValue = 'txU';
        } else if ($textChange.hasClass('txL')) {
            trasformValue = 'txL';
        }
        else if ($textChange.hasClass('txC')) {
            trasformValue = 'txC';
        }
        $('#textTransform').val(trasformValue);
        $('#textTransform').off().on('change', function () {
            let tranformCase = $(this).val();
            switch (tranformCase) {
                case 'txU':
                    $textChange.removeClass('txC').removeClass('txL').addClass('txU');
                    break;
                case 'txL':
                    $textChange.removeClass('txC').removeClass('txU').addClass('txL');
                    break;
                case 'txC':
                    $textChange.removeClass('txL').removeClass('txU').addClass('txC');
                    break;
                case '':
                    $textChange.removeClass('txC').removeClass('txL').removeClass('txU');
                    break;
            }
        });
    }
    function LoadSettings() {
        let fontsize = $textChange.css('font-size');
        if (typeof (fontsize) === 'undefined') {
            fontsize = minFontSize;
        }
        fontsize = parseInt(fontsize.replace('px', ''));
        $('.changeFontSize').val(fontsize);
        function FontSize(space) {
            let handleFontSize = $("#fontsizeHandle");
            handleFontSize.parent().next().find('.changeFontSize').val(space);
            $textChange.css('font-size', space + 'px');
        }
        AdvanceSageSlider($('#fontsizeSlider'), $('#fontsizeHandle'), minFontSize, maxFontsize, fontsize, FontSize, $parent, 'px');
        let letteSpace = 0;
        let removeClass = '';
        if (typeof ($textChange.attr('class')) !== 'undefined') {
            let letterSpacingNegClass = $textChange.attr('class').match(/LtrSpc-n-[0-9]{1,2}/g);
            if (letterSpacingNegClass !== null) {
                removeClass = letterSpacingNegClass[0].trim();
                letteSpace = parseInt(removeClass.replace('LtrSpc-n-', ''));
            }
            else {
                let letterSpacingPosClass = $textChange.attr('class').match(/LtrSpc-[0-9]{1,2}/g);
                if (letterSpacingPosClass !== null) {
                    removeClass = letterSpacingPosClass[0].trim();
                    letteSpace = parseInt(removeClass.replace('LtrSpc-', ''));
                }
            }
        }

        function LetteSpaceChange(space) {
            let addClass = '';
            let removeClass = '';
            if (typeof ($textChange.attr('class')) !== 'undefined') {
                let negClass = $textChange.attr('class').match(/LtrSpc-n-[0-9]{1,2}/g);
                if (negClass !== null) {
                    removeClass = negClass[0].trim();
                }
                else {
                    let posClass = $textChange.attr('class').match(/LtrSpc-[0-9]{1,2}/g);
                    if (posClass !== null) {
                        removeClass = posClass[0].trim();
                    }
                }
            }
            if (space >= 0) {
                addClass = 'LtrSpc-' + space;
            }
            else {
                space = Math.abs(space);
                addClass = 'LtrSpc-n-' + space;
            }
            $textChange.removeClass(removeClass).addClass(addClass);
        }
        AdvanceSageSlider($('#letterSpacingSlider'), $('#letterSpacingHandle'), -10, 10, letteSpace, LetteSpaceChange, $parent, 'px');
        loadColorPicker();
        LoadFontFamily();
    }
    function loadColorPicker() {
        $('#chooseFontColor').css('background-color', $textChange.css('color'));
        let colorPickerOption = ColorPickerOption({
            renderCallback: function ($elm, toggled) {
                let objColor = RenderCallBackColor(this);
                $textChange.css({ 'color': objColor.bgColor });
            }
        });
        $('#chooseFontColor').colorPicker(colorPickerOption);

    }
    function LoadFontFamily() {
        $('#fontfamily').html(DOMFontAdvanceCollection());

        let defaultFontFamily = 'montserrat';
        let classesList = $textChange.attr('class');
        if (typeof (classesList) !== "undefined") {
            let fontClasses = classesList.match(/ff-(\w+)/g);
            if (fontClasses !== null) {
                defaultFontFamily = fontClasses[0].replace('ff-', '');
            }
        }
        $('#fontfamily').val(defaultFontFamily);
        fontWeight(defaultFontFamily);
        if (typeof (classesList) !== "undefined") {
            let weightClasses = classesList.match(/f-weight-[0-9]{0,3}/g);
            if (weightClasses !== null) {
                $('#fontWeight').val(weightClasses[0].replace('f-weight-', ''));
            }
        }
        $('#fontWeight').off().on('change', function () {
            let classList = $textChange.attr('class');
            if (typeof (classesList) !== "undefined") {
                let familyClass = classList.match(/f-weight-[0-9]{0,3}/g);
                if (familyClass !== null) {
                    $textChange.removeClass(familyClass[0]);
                }
            }
            $textChange.addClass('f-weight-' + $(this).val());
        });

        $('#fontfamily').off().on('change', function () {
            let classList = $textChange.attr('class');
            if (typeof (classesList) !== "undefined") {
                let fontClass = classList.match(/ff-(\w+)/g);
                if (fontClass !== null) {
                    $textChange.removeClass(fontClass[0]);
                }
            }
            $textChange.addClass('ff-' + $(this).val());
            fontWeight($(this).val());
            $('#fontWeight').trigger('change');
        });
        function fontWeight(fontName) {
            let fontDOM = DOMFontWeight(fontName);
            if (fontDOM.length > 0) {
                $('#fontWeight').html(fontDOM);
            }
        }
    }
}
function SaveMessageShow(message, iconClass) {
    if (typeof iconClass === "undefined")
        iconClass = 'fa fa-spinner fa-spin fa-3x fa-fw';
    let html = '<div class="fullpage-layer-pop savingLayer dis-table" style="display:none;" >';
    html += '<div class="inner-content dis-table-cell" id="message">';
    html += '<span><i class="' + iconClass + '"></i></span>';
    html += '<span>' + message + '</span>';
    html += '</div>';
    html += '</div>';
    $('body').append(html);
    $('.fullpage-layer-pop.savingLayer.dis-table').fadeIn(1);
}
function SaveMessageRemove() {
    let html = '<span><i class="fa fa-check" aria-hidden="true"></i></span>';
    $('.fullpage-layer-pop.savingLayer.dis-table').find('#message').html(html);
    $('.fullpage-layer-pop.savingLayer.dis-table').fadeOut(400);
    $('.fullpage-layer-pop.savingLayer.dis-table').remove();
}
/*Fixed header case showing options =============================*/
function SetToggleValueBasedOnHideElement($element, $toggleBoxID) {
    if (!$element.hasClass('Dn')) $($toggleBoxID).prop('checked', true);
}
function SetEventToShowHideElement($item, $toggleButton, $effectedElement) {
    $toggleButton.off().on('click', function () {
        let isChecked = $(this).is(':checked');
        if (!isChecked) {
            $effectedElement.addClass('Dn');
            SettingEvents();
        }
        else {
            $effectedElement.each(function () {
                let $im = $(this);
                $(this).removeClass('Dn');
            });
        }
        //component.carousel.settingDOMs.tabs.Data.onload($item);
    });
}
//function UpdateSettings() {
//    let objWebBuilderInfo = {
//        WebBuilderID: 0,
//        EditDOM: "",
//        ViewDOM: "",
//        PortalID: SageFramePortalID,
//        UserModuleID: webBuilderUserModuleID,
//        UserName: SageFrameUserName,
//        SecureToken: SageFrameSecureToken,
//        Culture: SageFrameCurrentCulture,
//        Extra: '',
//        Settings: JSON2.stringify(webBuilderSettings),
//        PageName: currentpageName,
//        Header: "",
//        HeaderEdit: "",
//        Footer: "",
//        FooterEdit: "",
//        PackageXML: ""
//    };
//    $.ajax({
//        isPostBack: false,
//        async: false,
//        cache: false,
//        type: 'POST',
//        contentType: "application/json; charset=utf-8",
//        data: JSON2.stringify({
//            objWebBuilderInfo: objWebBuilderInfo
//        }),
//        dataType: 'json',
//        crossDomain: true,
//        url: SageFrameHostURL + '/Builder/UpdateSettings',
//        success: function () {
//        },
//        error: function () {
//        },
//    });
//}

function proLoadingAppend($this, $add) {

    function ReadProComponent() {
        $('.proItemsList').html('');
        $('.components-list >.comItems').find('>.rowBasic').each(function () {
            let $this = $(this);
            let category = $this.attr('data-type');
            if (EasyLibrary.IsDefined(category)) {
                if (EasyLibrary.IsDefined(component[category].type) && EasyLibrary.IsDefined(component[category].typeicon)) {
                    let type = component[category].type;
                    let icon = component[category].typeicon;
                    BindProComponent(icon, type);
                }
            }
        });
    }
    function BindProComponent(icon, type) {
        let $proList = $('.proItemsList');
        let compo = DOMCreate('span', '<i class="' + icon + '"></i><br>' + type, 'comItemBlocks', '', ['category-type="' + type + '"']);
        if ($proList.find('span[category-type="' + type + '"]').length == 0) {
            $proList.append(compo);
        }
    }
    function ProItemlistEvent() {
        $('.proItemsList').find('.comItemBlocks').off('click').on('click', function () {
            $('.proItemsList > .comItemBlocks').removeClass('active');
            let $this = $(this);
            $this.addClass('active');
            let categoryType = $this.attr('category-type');
            let imageList = '';
            let componentlist = component;
            if (IsOnline())
                componentlist = onlinecomponentprolist;
            $.each(componentlist, function (key, value) {
                if (EasyLibrary.IsDefined(componentlist[key].row)
                    && componentlist[key].row
                    && EasyLibrary.IsDefined(componentlist[key].type)
                    && componentlist[key].type == categoryType
                    //&& EasyLibrary.IsDefined(componentlist[key].Screenshot)
                    && EasyLibrary.IsDefined(componentlist[key].description)
                    && componentlist[key].description.length > 0
                ) {
                    let screen = EasyLibrary.NoScreenshotImagePath();
                    if (EasyLibrary.IsDefined(componentlist[key].Screenshot))
                        screen = componentlist[key].Screenshot;
                    let url = EasyLibrary.GetAdminURL();
                    screen = screen.includes(url) ? screen : url + screen;
                    let text = `<div class="compodesc">
                            <div class="sfFixed sfCol_100 Dib TxAl-c" data-id="280" data-type="heading">
                                <h1 style="color: rgb(116, 119, 122);" class =" Mt-0 Mr-0 Ml-0 Pt-0 Pr-0 Pb-0 Pl-0 Fs-20 LtrSpc-0 tFs-18 tMt-0 tMr-0 tMb-0 tMl-0 tPt-0 tPr-0 tPb-0 tPl-0 mFs-16 mMt-0 mMr-0 mMb-0 mMl-0 mPt-0 mPr-0 mPb-0 mPl-0 Lh-24 tLh-22 mLh-20 Mb-20 ff-null" >${key}</h1>
                            </div>
                            <div class="sfFixed sfCol_100 Dib TxAl-c mDib tDib" data-id="281" data-type="text">
                                <p style="color: rgb(157, 157, 157);" class ="LtrSpc-0 Mt-0 Mr-0 Mb-0 Ml-0 Pt-0 Pr-0 Pb-0 Pl-0 tFs-18 tMt-0 tMr-0 tMb-0 tMl-0 tPt-0 tPr-0 tPb-0 tPl-0 mFs-16 mMt-0 mMr-0 mMb-0 mMl-0 mPt-0 mPr-0 mPb-0 mPl-0 tLh-22 mLh-20  Lh-20 Fs-14">${componentlist[key].description}</p>
                            </div>
                        </div>`;
                    imageList += DOMCreate('li', ' <img src="' + screen + '" />' + text, 'itemWrapper', '', ['data-type="' + key + '"']);
                }
            });
            $('.proLoaderArea').find('.ImageSliderWrapper .itemsWrapper').html(imageList);
            Slide();
        });

    }
    function Slide() {
        let $imageSlider = $('.proLoaderArea').find('.ImageSliderWrapper');
        $imageSlider.removeClass('binded');
        let carousel = new CarouselInit($imageSlider);
    }
    function IsOnline() {
        if ($('.proLoader').attr('data-online') === "false")
            return false;
        else
            return true;
    }
    function SetOnline() {
        $('.proLoader').attr('data-online', "true");
    }
    function SetOffline() {
        $('.proLoader').attr('data-online', "false");
    }

    function CalcFalseHeight() {
        let height = $('.editor-site-header').height();
        $('.editor-componentWrapper > div').each(function () {
            let $this = $(this);
            if ($this.hasClass('proLoader')) {
                return false;
            }
            height += $(this).height();
        });
        return height;
    }
    function CategoryEvents() {
        ProItemlistEvent();
        $('.proLoader').find('.cb-close').off('click').on('click', function () {
            $('.proLoader').addClass('Dn');
            $('.addPro.active').removeClass('active');
            $('body').removeClass('ofH');
        });
        $('.proLoader').find('#ApplyProComponent').off('click').on('click', function () {
            let activeDots = $('.proLoader').find('.pager-dot > .dots.active-dot');
            let dots = $('.proLoader').find('.pager-dot > .dots');
            let index = dots.index(activeDots);
            let compoType = $('.proLoaderArea').find('.ImageSliderWrapper .itemsWrapper .itemWrapper').eq(index).attr('data-type');
            if (IsOnline()) {
                if (EasyLibrary.IsDefined(component[compoType])) {
                    AppendComponentChange();
                }
                else {
                    if (EasyLibrary.IsDefined(onlinecomponentprolist[compoType])) {
                        let compo = onlinecomponentprolist[compoType];
                        let downLoadtype = "component";
                        let downLoadtypeID = compo.ComponentID;
                        function downloadSuccess(data) {
                            component[compoType] = compo;
                            //UpdateComponentDownloadCount(compo.ComponentID, downLoadtype);
                            AppendComponentChange();
                            SilentSave();
                            ReloadPageNone();
                            window.location.reload(true);
                        }
                        //function UpdateComponent(componentName, UniversalComponentID, version, downLoadtype, downLoadtypeID, callback)
                        //let success = UpdateComponent(compo.componentname, compo, compo.ComponentID, compo.category, compo.icon, '', compo.dependencies, 1.0, downLoadtype, downLoadtypeID, downloadSuccess);
                        let success = UpdateComponent(compo.componentname, compo.ComponentID, compo.version, downLoadtype, downLoadtypeID, downloadSuccess);
                    }
                }
            }
            else {
                AppendComponentChange();
            }
            function AppendComponentChange() {
                AppendComponent(compoType, undefined, undefined, function ($appendLayer) {
                    $appendLayer.insertAfter($('.proLoader'));
                    $('.proLoader').find('.cb-close').trigger('click');
                });
            }
        });
        $('#procomponentSearch').focus();
        $('#procomponentSearch').on('keyup', function () {
            let searchVal = $(this).val().trim();
            if (searchVal.length == 0) {
                RecycleSearch();
            }
            else {
                $('.comItemBlocks').each(function () {
                    let $this = $(this);
                    let name = $this.text().toLowerCase();
                    let pos = name.indexOf(searchVal.toLowerCase());
                    if (pos < 0) {
                        $this.addClass('Dn');
                    }
                    else {
                        $this.removeClass('Dn');
                    }
                });
            }
        });
        $('#refreshProSearch').on('click', function () {
            $('#procomponentSearch').val('');
            RecycleSearch();
        });
        function RecycleSearch() {
            $('.comItemBlocks').each(function () {
                $(this).removeClass('Dn');
            });
        }
        $('#getOnlCompo').off('click').on('click', function () {
            let $this = $(this);
            if (IsOnline()) {
                SetOffline();
                ReadProComponent();
                CategoryEvents();
                $this.text("online component");
                $('.proItemsList > .comItemBlocks').eq(0).trigger('click');
                $('.proLoader').find('#ApplyProComponent').show();
            }
            else {
                $this.text("installed component");
                GetOnlineComponents(0, 10, $('#procomponentSearch').val());
            }
        });
        function GetOnlineComponents(offset, limit, searchText) {
            $.ajax({
                isPostBack: false,
                async: false,
                crossOrigin: true,
                cache: false,
                type: 'POST',
                contentType: "application/json; charset=utf-8",
                data: JSON2.stringify({
                    offset: parseInt(offset * limit) + 1,
                    limit: limit,
                    searchText: searchText,
                    portalID: SageFramePortalID,
                    userModuleID: webBuilderUserModuleID,
                    userName: SageFrameUserName,
                    secureToken: SageFrameSecureToken,
                    version: '',
                    type: '',
                    category: 'pro',
                    applicationName: '',
                }),
                dataType: 'json',
                crossDomain: true,
                url: `${SageFrameHostURL}/Builder/GetRowOnlineComponents`,
                success: function (data) {
                    SetOnline();
                    BindOnlineComponents(data);
                },
                error: function () {
                },
            });
        }

        function BindOnlineComponents(data) {
            if (data !== null) {
                let prolist = JSONParse(data.d);
                $('.proItemsList').html('');
                $('.proLoaderArea').find('.ImageSliderWrapper .itemsWrapper').html('');
                $('.proLoader').find('#ApplyProComponent').hide();
                if (prolist != null) {
                    let newCompo = false;
                    $.each(prolist, function (i, $this) {
                        if (!$this.PackageType) {
                            let componentData = JSONParse($this.ComponentValue);
                            componentData.ComponentID = $this.ComponentID;
                            let category = componentData.componentname;
                            if (EasyLibrary.IsDefined(category) && EasyLibrary.IsUndefined(component[category])) {
                                if (EasyLibrary.IsDefined(componentData.type) && EasyLibrary.IsDefined(componentData.typeicon)) {
                                    onlinecomponentprolist[componentData.componentname] = componentData;
                                    let type = componentData.type;
                                    let icon = componentData.typeicon;
                                    BindProComponent(icon, type);
                                    newCompo = true;
                                }
                            }
                        }
                    });
                    if (newCompo) {
                        ProItemlistEvent();
                        $('.proItemsList > .comItemBlocks').eq(0).trigger('click');
                        $('.proLoader').find('#ApplyProComponent').show();
                    }
                    else {
                        let li = '<li class="noitemsin">Seems like you have all pro components installed in your site :) Come back to use more. </li>.';
                        $('.proLoaderArea').find('.ImageSliderWrapper .itemsWrapper').html(li);
                        Slide();
                    }
                }
            }
            else {

            }
        }
    }
    if (!$this.hasClass('active')) {
        let $parentRow;
        if (EasyLibrary.IsDefined($add))
            $parentRow = $add.closest('.cRow');
        //if ($this.hasClass('headeradd'))
        closeComponentPopup();
        $('.addPro').removeClass('active');
        $(this).addClass('active');
        let displayHeight = ScreenDimension().height - $('.main-top-row').height();
        //if (!$parentRow.next().hasClass('.proLoader')) {
        if ($('.proLoader').length == 0) {
            let div = staticDOMs.rowadd;
            if ($this.hasClass('startnew'))
                $('.editor-componentWrapper').prepend($(div));
            else
                $(div).insertAfter($parentRow);
            ReadProComponent();
        }
        else {
            $('.proLoader').css({
                'height': '0px',
                'overflow': 'hidden'
            });
            $('.proLoader >.proLoaderArea').height(displayHeight);
            if ($this.hasClass('startnew'))
                $('.editor-componentWrapper').prepend($('.proLoader'));
            else
                $('.proLoader').insertAfter($parentRow);
        }
        CategoryEvents();
        //let top = CalcFalseHeight();
        //let top = $('.proLoader').offset().top;
        //let scrollTop = $(window).scrollTop(),
        //    elementOffset = $('.proLoader').offset().top,
        //    top = (elementOffset - scrollTop);
        let delay = 400;
        let top = window.pageYOffset || document.documentElement.scrollTop;
        let diff = $('.proLoader').position().top - top;
        if (diff < 300)
            delay = 0;
        let toAnimate = true;
        $('html, body').animate({
            scrollTop: $('.proLoader').position().top
        }, 400, function () {
            if (toAnimate) {
                toAnimate = false;
                setTimeout(function () {
                    $('.proLoader').removeClass('Dn').animate({
                        'height': displayHeight
                    }, 400, function () {
                        if ($('.proItemsList > .comItemBlocks').length > 0) {
                            $('.proItemsList > .comItemBlocks').eq(0).trigger('click');
                        }
                        let toAnimate = true;
                        $('html, body').animate({
                            scrollTop: $('.proLoader').position().top
                        }, 400, function () {
                            if (toAnimate) {
                                toAnimate = false;
                                $('body').addClass('ofH');
                            }
                        });
                    });
                }, 100);
            }
        });
        //}
    }
}

function RowAddBindEvent($parent) {
    let $add = $parent.find('.addPro');
    $add.off('click').on('click', function () {
        let $this = $(this);
        proLoadingAppend($this, $add);
    });
}
let onlinecomponentprolist = {};
function AppendComponent(dataType, $this, ui, callback) {
    //drop: function (event, ui) {
    //var item = $(ui.draggable);
    //var dataType = item.attr('data-type');
    let rowDOM = '';
    if (typeof (dataType) !== 'undefined') {
        if (typeof (component[dataType].defaultdata !== 'undefined')) {
            rowDOM = component[dataType].defaultdata.trim();
        }
    }
    let $selectedRow = $(rowDOM);
    /*beforedrop callbackfunction*/
    let $parentWrapper = $('.editor-componentWrapper');
    if (EasyLibrary.IsDefined($this)) {
        let classes = $this.attr('class').split(' ');
        if (classes.indexOf('editor-site-header') > -1)
            $parentWrapper = $('.editor-site-header');
        else if (classes.indexOf('editor-site-footer') > -1)
            $parentWrapper = $('.editor-site-footer');
    }
    if (EasyLibrary.IsDefined(component[dataType].beforedrop)) {
        component[dataType].beforedrop($parentWrapper, $selectedRow, true);
    }
    $(".noElement").remove();
    $parentWrapper.removeClass('emptydata');
    if (EasyLibrary.IsDefined($this) && $this.find(".noElement").length > 0) /*add first element when cart is empty*/ {
        $('.rowBasic').removeClass('heartBeat');
        $parentWrapper.append($selectedRow);
    } else {
        if (EasyLibrary.IsDefined(ui)) {
            let i = 0;
            $this.find('.cRow').each(function () {
                if ($(this).offset().top >= ui.offset.top) {
                    $selectedRow.insertBefore($(this));
                    i = 1;
                    return false;
                }
            });
            if (i !== 1) {
                $parentWrapper.append($selectedRow);
            }
        }
        else {
            if (EasyLibrary.IsDefined(callback) && typeof callback === "function")
                callback($selectedRow);
        }
    }
    DraggableSortable();
    RowEvents();
    DeleteComponent($selectedRow);
    SettingEvents($selectedRow);
    MouseOverEffect($selectedRow);
    BindColumnEvents($selectedRow);
    RowAddBindEvent($selectedRow);
    EasyLibrary.GenerateAndAppendID($selectedRow, 'row');
    if (component[dataType].type != "Bucket" &&
        !(EasyLibrary.IsDefined(component[dataType].customComponent) && component[dataType].customComponent)) {
        dataType = EasyLibrary.GenerateAndAppendDataType($selectedRow, dataType);
    }
    if (typeof (component[dataType].afterdrop) !== 'undefined') {
        component[dataType].afterdrop($parentWrapper, $selectedRow, true);
    }
    if (typeof (component[dataType].dropstop) !== 'undefined') {
        component[dataType].dropstop($parentWrapper, $selectedRow, true);
    }
    AfterDropRecursive($selectedRow);
    ScrollToTop();
    function ScrollToTop() {
        let top = $selectedRow.offset().top - 100;
        $('body, html').animate({
            scrollTop: top + 'px'
        }, 1000, function () {
            //$selectedRow.addClass('focuscompo');
            //setTimeout(function () {
            //    $selectedRow.removeClass('focuscompo');
            //}, 1000);
        });
    }
}
function closeComponentPopup() {
    $('.collapse.heademarControls > .icClose').trigger('click');
}//function Scroller() {
//    $('.scroll__parent').each(function () {
//        let $this = $(this);
//        let scrollers = new ScrollJS({
//            container: $this,
//            scrollbar: $this.find('> .scrollbar'),
//            content: $this.find('> .scrollable__child')
//        });
//    });
//}
//String.prototype.WrapScroller = function WrapScroller() {
//    return "<div class='scrollable__child'>" + this + "</div>";
//};
//function ScrollBarDOM() {
//    return "<div class='scrollbar'></div>";
//}

function DeviceAlpha() {
    return $('#viewPorts').find('.active').attr('data-shorthand');
}
//returns a space for device
function DeviceAlphaSpace() {
    let shortHand = $('#viewPorts').find('.active').attr('data-shorthand');
    shortHand = shortHand.length === 0 ? " " : shortHand;
    return shortHand;
}
function ReloadPage() {
    window.onbeforeunload = function (e) {
        return easyMessageList.reloadpage;
    };
}
function ReloadPageNone() {
    window.onbeforeunload = null;
}
function ConfirmLogout() {
    SageConfirmDialog(easyMessageList.logout, 'Logout').done(function () {
        $('.logoutConfirm')[0].click();
    });
}
function CopyPlaneText() {
    //let contenteditable = document.querySelector("[contenteditable]");
    //if (contenteditable !== null) {
    //    contenteditable.removeEventListener('paste').addEventListener("paste", onkeydown);
    //    contenteditable.removeEventListener('keydown').addEventListener("keydown", function (e) {
    //        if (event.ctrlKey === true && e.key==="c") {
    //            onkeydown(e);
    //        }
    //    });
    //}
}
function onkeydown(e) {
    // cancel paste
    e.preventDefault();
    // get text representation of clipboard
    var text = e.clipboardData.getData("text/plain");
    // insert text manually
    document.execCommand("insertHTML", false, text);
}

function GetValueByClassName($par, regexPattern, replacePattern) {
    let parentClasses = $par.attr('class');
    let dAlpha = DeviceAlpha();
    let regex = new RegExp('\\b' + dAlpha + regexPattern + '\\b', 'g');
    let classes = parentClasses.match(regex);
    let val = 0;
    if (classes !== null) {
        val = classes[0].replace(dAlpha + replacePattern, '');
    }
    return val;
}
function ReplaceClassByPattern($par, regexPattern, replaceClass) {
    let parentClasses = [];
    let dAlpha = DeviceAlpha();
    let regex = new RegExp('\\b' + dAlpha + regexPattern + '\\b', 'g');
    $par.each(function (i, o) {
        let classes = $(o).attr('class').match(regex);
        if (classes !== null) {
            classes.forEach(function (v, i) {
                parentClasses.push(v);
            });
        }
    });
    parentClasses.forEach(function (v, i) {
        $par.removeClass(v);
    });
    $par.addClass(dAlpha + replaceClass);
}
function RemoveClassByPattern($par, regexPattern) {
    let parentClasses = [];
    let dAlpha = DeviceAlpha();
    let regex = new RegExp('\\b' + dAlpha + regexPattern + '\\b', 'g');
    $par.each(function (i, o) {
        let classes = $(o).attr('class').match(regex);
        if (classes !== null) {
            parentClasses.push(classes.join(' '));
        }
    });
    $par.removeClass(parentClasses.join(' '));
}

function GetDemoComponent() {
    let democomponent = {};
    let keys = Object.keys(component);
    let length = keys.length;
    for (var i = 0; i < length; i++) {
        democomponent = $.extend(democomponent, component[keys[0]]);
    }
    console.log(democomponent);
}

function SilentSave() {
    $('#SaveWebhidden').trigger('click');
}
function SavePromtPublish() {
    $('#SaveWeb').trigger('click');
}

function FullPageLoading(message) {
    $('body').addClass('actvLoader');
    $('.WebBuilderWrapper').addClass('loading').attr('title', message);
}
function RemoveFullPageLoading() {
    $('body').addClass('actvLoader');
    $('.WebBuilderWrapper').removeClass('loading').removeAttr('title');
}
$(function () {
    $.fn.hideElement = function () {
        let $this = $(this);
        let DAlfa = DeviceAlpha();
        $this.removeClass(DAlfa + 'Db');
        $this.removeClass(DAlfa + 'Dib');
        $this.addClass(DAlfa + 'Dn');
    };
    $.fn.showElement = function (isBlock) {
        let $this = $(this);
        let DAlfa = DeviceAlpha();
        $this.removeClass(DAlfa + 'Dn');
        if (isBlock)
            DAlfa = DAlfa + 'Db';
        else
            DAlfa = DAlfa + 'Dib';
        $this.addClass(DAlfa);
    };
});
function MenuDropEvents() {
    HammenuEvent();
}
function DeviceList(parentClasses, regexTPattern, regexMPattern) {
    let devices = [];
    devices.push("");
    let regex = new RegExp(regexTPattern, 'g');
    let paddingClass = parentClasses.match(regex);
    if (paddingClass === null) {
        devices.push("t");
    }
    regex = new RegExp(regexMPattern, 'g');
    paddingClass = parentClasses.match(regex);
    if (paddingClass === null) {
        devices.push("m");
    }
    return devices;
}


function SetFakeImage($this) {
    let src = $this.attr('src');
    $this.attr('src', FakeImageURL);
    $this.attr('data-cimage', src);
}
function SetFakeBGImage($this) {
    let parentBgImage = $this.css('background-image');
    if (typeof (parentBgImage) !== 'undefined' && parentBgImage !== 'none') {
        $this.attr('data-cimage', parentBgImage.replace(SageFrameHostURL, '').trim());
        $this.css('background-image', '').css('background-image', "url('" + FakeImageURL + "')");
    }
}
function GetTargetsClasses($targets) {
    let clsArr = [];
    $targets.each(function (i, v) {
        let $tar = $(v);
        let cls = $tar.attr('class').split(" ");
        $.each(cls, function (i, v) {
            if (clsArr.indexOf(v) < 0)
                clsArr.push(v);
        });
    });
    return clsArr.join(" ");
}
/**
 * dependencies:
 * functions.js
 * dom.js
 */
//$(window).resize(function () {
//    $imageSlider.removeClass('binded');
//    ImageSlider();
//});
String.prototype.replaceAll = function (search, replacement) {
    return this.replace(new RegExp(search, 'g'), replacement);
};
String.prototype.removeScript = function () {
    return this.replaceAll('<[^>]*>', '');
};

$(window).resize(function () {
    FixMenuOnResize();
    screenSize = ScreenDimension();
});

window.addEventListener("orientationchange", function () {
    let removeCompo = [];
    $('.editor-component, .cRow').each(function () {
        let $me = $(this);
        let dataType = $me.attr('data-type');
        if (typeof (dataType) === 'undefined') {
            dataType = $me.find('> .SetHdlr > .com-settings').attr('data-type');
        }
        if (typeof (dataType) !== 'undefined') {
            let index = removeCompo.indexOf(dataType);
            if (index == -1) {
                if (typeof (component[dataType]) !== 'undefined' && typeof (component[dataType].resize) === 'function') {
                    try {
                        setTimeout(function () {
                            component[dataType].resize();
                        }, 200);
                    }
                    catch (error) {
                        WriteLog(error);
                    }
                    removeCompo.push(dataType);
                }
            }
        }
    });
}, false);

$('.fullpagebanner').resize(function () {
    let $this = $(this);
    $this.find('.ImageSliderWrapper').removeClass('binded');
    InitCarouselSlider($this.find('.ImageSliderWrapper'));
    AdjustSize($this);
});
window.addEventListener("scroll", ScrollToTop);
window.addEventListener("scroll", function () {
    if ($('.edit-area.site-body').hasClass('hdr-stky')) {
        StickyHeader();
    }
});
window.addEventListener("scroll", ScrollTopVisible);
window.addEventListener("scroll", ScrollOnePageMenu);
//$(window).on("scroll", function (e) {
//    let top = GetScrollTop();
//    //FixMenuOnScroll();
//    ScrollToTop(top);

//    if ($('.edit-area.site-body').hasClass('hdr-stky')) {
//        StickyHeader();
//    }
//    ScrollTopVisible(top);
//    ScrollOnePageMenu(top);
//});
//AdjustSize of full page slider
//AdjustSizeFullpage();
$(function () {
    AdjustSizeFullpage();
    MenuColor();
    MenuURL();
    // HamMenu();
    //HeaderTopPadding();
    OnePageMenuScrollEvent();
    $('.onepagemenu > li > .pagelink.onepage.active-page').removeClass('active-page');
    $('.onepagemenu').find('.pagelink.onepage').eq(0).addClass('active-page');
    //change  primary color in menu
    let style = '';
    let tempSettings = $('.site-body').attr('data-settings');
    if (typeof tempSettings !== "undefined" && tempSettings.length > 0) {
        tempSettings = JSON.parse(tempSettings);
    } else {
        tempSettings = webBuilderSettings;
    }
    $('body').attr('data-count', tempSettings.idcount);
    let navStyleClasses = $('.editor-com-nav:visible').attr('class');
    if (navStyleClasses != undefined) {
        navStyleClasses = navStyleClasses.match(/nav-style-[a-z]{1,20}/g);
        if (navStyleClasses != null) {
            style = navStyleClasses[0];
        }
        if (typeof (tempSettings) !== 'undefined' && tempSettings.length > 0) {
            MenuChangeInstant($('.editor-com-nav:visible > .onepagemenu'), tempSettings.primaryColor, tempSettings.secondaryColor, style);
        }
    }
    ParallexEffect();
});
var CommonLibrary = {
    AjaxCall: function (config) {
        let auth = {
            UserModuleID: webBuilderUserModuleID,
            UserName: SageFrameUserName,
            PortalID: SageFramePortalID,
            SecureToken: SageFrameSecureToken,
            CultureCode: SageFrameCurrentCulture,
        };
        config = $.extend({
            async: false,
            cache: false,
            type: 'POST',
            contentType: "application/json; charset=utf-8",
            data: {},
            method: '',
            dataType: 'json',
            url: '',
            ajaxSuccess: '',
            ajaxFailure: function () {
                alert("Server Error.", "Error");
            }
        }, config);
        config.data = $.extend({ auth: auth }, config.data);
        config.data = JSON2.stringify(config.data);
        $.ajax({
            type: config.type,
            contentType: config.contentType,
            cache: config.cache,
            async: config.async,
            url: `${config.url}/${config.method}`,
            data: config.data,
            dataType: config.dataType,
            success: config.ajaxSuccess,
            error: config.ajaxFailure,
        });
    },
};
(function ($) {
    // Attrs
    $.fn.attrs = function (attrs) {
        let t = $(this);
        if (attrs) {
            // Set attributes
            t.each(function (i, e) {
                let j = $(e);
                for (var attr in attrs) {
                    j.attr(attr, attrs[attr]);
                }
            });
            return t;
        } else {
            // Get attributes
            let a = {},
                r = t.get(0);
            if (r) {
                r = r.attributes;
                for (var i in r) {
                    let p = r[i];
                    if (typeof p.nodeValue !== 'undefined') a[p.nodeName] = p.nodeValue;
                }
            }
            return a;
        }
    };
})(jQuery);
var ScrollJS = /** @class */ (function () {
    function ScrollJS(objScroller) {
        this.scroller = {
            container: null,
            scrollbar: null,
            content: null
        };
        this.doc = $(document);
        this.scroller = $.extend(this.scroller, objScroller);
        this.InitScroll();
    }
    ScrollJS.prototype.InitScroll = function () {
        let _scroller = this.scroller;
        let _doc = this.doc;
        //console.log(_scroller.content.height(), _scroller.container.height())
        _scroller.content.off('scroll').on('scroll', function (e) {
            let height = Math.pow(_scroller.container.height(), 2) / _scroller.content[0].scrollHeight;
            let top = _scroller.content.height() * _scroller.content[0].scrollTop / _scroller.content[0].scrollHeight + 5;
            _scroller.scrollbar.stop(true).css({
                opacity: 0.7,
                height: height,
                top: top
            }); //.delay(2000).animate({opacity: 0});
            window.pageYOffset = top;
            window.height = height;
            $(window).trigger('scroll');
        });
        // $(window).off('resize').on('resize', _scroller.container.trigger.bind(_scroller.container, 'scroll'));
        _scroller.content.trigger('scroll');
        _scroller.scrollbar.off('mousedown').on('mousedown', function (e) {
            e.preventDefault();
            let y = _scroller.scrollbar[0].offsetTop;
            let y1 = e.originalEvent.pageY;
            _doc.off('mousemove').on('mousemove', function (e) {
                let y2 = e.originalEvent.pageY;
                _scroller.scrollbar.css('top', Math.min(_scroller.content.height() - _scroller.scrollbar.height() + 5, Math.max(5, y + y2 - y1)));
                _scroller.content[0].scrollTop = (_scroller.content[0].scrollHeight * _scroller.scrollbar[0].offsetTop / _scroller.content.height());
            });
            _doc.off('mouseup').on('mouseup', function () {
                _doc.off('mousemove');
            });
        });
    };
    return ScrollJS;
}());

//$(function () {
//    $('.hasChild').on('mouseover', function () {
//        $(this).find('> ul').slideDown(200);
//    });
//    $('.hasChild').on('mouseout', function () {
//        $(this).find('> ul').slideUp(200);
//    });
//});

function ChangeRangeSliderValue($slider, minVal, maxVal) {
    $slider.slider({
        values: [minVal, maxVal]
    });
    $slider.slider('option', 'slide');
    $slider.find('.minHndl').text(minVal);
    $slider.find('.maxHndl').text(maxVal);
    $slider.slider("enable");
}
(function ($) {
    $.fn.createRangeSlider = function rangeSlider(min, max, initMinVal, initMaxVal, callbackFunction, $parent) {
        let $slider = $(this);
        $slider.css('position', 'relative');
        $slider.find('.ui-slider-range').remove();
        if (!$slider.hasClass('cb-view-slider')) {
            $slider.addClass('cb-rng-slider cb-view-slider');
            $slider.html('<span class="minHndl ui-slider-handle"></span><span class="maxHndl ui-slider-handle"></span>');
        }
        let $minHandler = $slider.find('.minHndl');
        let $maxHandler = $slider.find('.maxHndl');
        return $slider.slider({
            range: true,
            min: min,
            max: max,
            values: [initMinVal, initMaxVal],
            create: function () {
                $minHandler.text($(this).slider("values")[0]);
                $maxHandler.text($(this).slider("values")[1]);
            },
            slide: function (event, ui) {
                $minHandler.text(ui.values[0]);
                $maxHandler.text(ui.values[1]);
                if (typeof (callbackFunction) === 'function') {
                    callbackFunction(ui.values[0], ui.values[1], $parent);
                }
                else if (typeof (callbackFunction) === 'string') {
                    window[callbackFunction](ui.values[0], ui.values[1], $parent);
                }
            }
        });
    };
})(jQuery);

(function ($) {
    "use strict";
    $.fn.AdvanceHoverOverlay = function (o) {
        if (typeof o === 'undefined') {
            console.error("AdvanceHoverOverlay => missing options");
            return;
        }
        if (typeof o.targetElem === 'undefined') {
            console.error("AdvanceHoverOverlay => missing option: targetElem");
            return;
        }
        if (typeof o.overlayElem === 'undefined') {
            console.error("AdvanceHoverOverlay => missing option: overlayElem");
            return;
        }
        if (!(o.targetElem instanceof jQuery)) {
            console.error("AdvanceHoverOverlay => targetElem should be a jQuery object");
            return;
        }
        if (!(o.overlayElem instanceof jQuery)) {
            console.error("AdvanceHoverOverlay => overlayElem should be a jQuery object");
            return;
        }
        let $self = this,
            $settingsElem = false,
            forceActivate = false,
            responsiveSettings = false,
            $targetElem = o.targetElem,
            $overlayElem = o.overlayElem;
        if (typeof o.settingsElem !== 'undefined') {
            if (!(o.settingsElem instanceof jQuery)) {
                console.error("AdvanceHoverOverlay => settingsElem should be a jQuery object");
                return;
            } else {
                $settingsElem = o.settingsElem;
            }
        }
        if (typeof o.forceActivate !== 'undefined') {
            forceActivate = o.forceActivate;
        }
        if (typeof o.responsiveSettings !== 'undefined') {
            responsiveSettings = o.responsiveSettings;
        }
        //let clickDOM = `<div class="lhTrigger Dn Fs-20"><i class="fa fa-expand"></i></div>`;
        let settingsDOM = `<div class ="l-h-basic-set">
    <div class ="field-row stElWrap col50-50">
        <label class ="fCol">Enable hover effect</label>
        <div class ="fCol TxAl-r">
            <span class ="toggle_btn">
                <input type="checkbox" id="enableHoverEffect" name="toggleButton">
                <label for="toggleButton" class ="tgl_slider"></label>
            </span>
        </div>
    </div>
    <div class ="field-row">
        <div class ="field-row stElWrap col40-60">
            <label class ="fCol">Animation</label>
            <span class ="fCol TxAl-r select__box">
                <select id="lhAnimation">
                    <option value="fade">Fade</option>
                    <option value="zoom">Zoom</option>
                    <option value="slide-left">Slide from left</option>
                    <option value="slide-right">Slide from right</option>
                    <option value="slide-top">Slide from top</option>
                    <option value="slide-bottom">Slide from bottom</option>
                </select>
            </span>
        </div>
    </div>
    <div class ="field-row stElWrap col50-50">
        <label class ="fCol">Inverse effect</label>
        <div class ="fCol TxAl-r">
            <span class ="toggle_btn">
                <input type="checkbox" id="enableInverseEffect" name="toggleButton">
                <label for="toggleButton" class ="tgl_slider"></label>
            </span>
        </div>
    </div>
    <div class ="field-row stElWrap col100">
        <label class ="fCol">Before editing layer, please disable hover effect.</label>
    </div>
    <div id="lhLayerEditor">
        <div class ="field-row">
            <div class ="field-row stElWrap col40-60">
                <label class ="fCol">Edit Layer</label>
                <span class ="fCol TxAl-r select__box">
                    <select id="lhEditLayer">
                        <option value="lhFront" data-editcls="lh-front-edit">Front Layer</option>
                        <option value="lhOver" data-editcls="lh-over-edit">Hover Layer</option>
                    </select>
                </span>
            </div>
        </div>
        <div class ="field-row stElWrap col100" id="lhFrontLayerHeightHld">
            <span class ="range__slider fCol">
                <div id="lhFrontLayerHeight">
                    <div title="Height" id="lhFrontLayerHeightHandle" class ="ui-slider-handle">100</div>
                </div>
            </span>
        </div>
        <div class ="field-row stElWrap col100" id="lhFrontLayerWidthHld">
            <span class ="range__slider fCol">
                <div id="lhFrontLayerWidth">
                    <div title="Width" id="lhFrontLayerWidthHandle" class ="ui-slider-handle">100</div>
                </div>
            </span>
        </div>
        <div class ="field-row stElWrap col100" id="lhOverLayerHeightHld">
            <span class ="range__slider fCol">
                <div id="lhOverLayerHeight">
                    <div title="Height" id="lhOverLayerHeightHandle" class ="ui-slider-handle">100</div>
                </div>
            </span>
        </div>
        <div class ="field-row stElWrap col100" id="lhOverLayerWidthHld">
            <span class ="range__slider fCol">
                <div id="lhOverLayerWidth">
                    <div title="Width" id="lhOverLayerWidthHandle" class ="ui-slider-handle">100</div>
                </div>
            </span>
        </div>
        <div class ="field-row stElWrap col50-50" id="lhOverFHHld">
            <label class ="fCol">Full Height</label>
            <div class ="fCol TxAl-r">
                <span class ="toggle_btn">
                    <input type="checkbox" id="lhOverFH" name="toggleButton">
                    <label for="toggleButton" class ="tgl_slider"></label>
                </span>
            </div>
        </div>
    </div>
</div>`;

        let responsiveDOM = `<div class ="l-h-basic-set">
    <div class ="field-row">
        <div class ="field-row stElWrap col40-60">
            <label class ="fCol">Edit Layer</label>
            <span class ="fCol TxAl-r select__box">
                <select id="lhEditLayer">
                    <option value="lhFront" data-editcls="lh-front-edit">Front Layer</option>
                    <option value="lhOver" data-editcls="lh-over-edit">Hover Layer</option>
                </select>
            </span>
        </div>
    </div>
    <div class ="field-row stElWrap col100" id="lhFrontLayerHeightHld">
        <span class ="range__slider fCol">
            <div id="lhFrontLayerHeight">
                <div title="Height" id="lhFrontLayerHeightHandle" class ="ui-slider-handle">100</div>
            </div>
        </span>
    </div>
    <div class ="field-row stElWrap col100" id="lhFrontLayerWidthHld">
        <span class ="range__slider fCol">
            <div id="lhFrontLayerWidth">
                <div title="Width" id="lhFrontLayerWidthHandle" class ="ui-slider-handle">100</div>
            </div>
        </span>
    </div>
    <div class ="field-row stElWrap col100" id="lhOverLayerHeightHld">
        <span class ="range__slider fCol">
            <div id="lhOverLayerHeight">
                <div title="Height" id="lhOverLayerHeightHandle" class ="ui-slider-handle">100</div>
            </div>
        </span>
    </div>
    <div class ="field-row stElWrap col100" id="lhOverLayerWidthHld">
        <span class ="range__slider fCol">
            <div id="lhOverLayerWidth">
                <div title="Width" id="lhOverLayerWidthHandle" class ="ui-slider-handle">100</div>
            </div>
        </span>
    </div>
    <div class ="field-row stElWrap col50-50" id="lhOverFHHld">
        <label class ="fCol">Full Height</label>
        <div class ="fCol TxAl-r">
            <span class ="toggle_btn">
                <input type="checkbox" id="lhOverFH" name="toggleButton">
                <label for="toggleButton" class ="tgl_slider"></label>
            </span>
        </div>
    </div>

</div>`;

        let AdvanceHoverOverlay = {
            init: function () {
                let activated = $self.attr('data-activated');
                if ((activated == 1 || forceActivate) && $settingsElem === false) {
                    this.prepareDOMs();
                    this.addOverlayEvents();
                } else if ($settingsElem !== false) {
                    if (!$self.hasClass('lh-is-edit')) {
                        $self.addClass('lh-is-edit lh-front-edit');
                    }
                    if (responsiveSettings) {
                        this.responsive.appendSettingsDOM();
                    } else {
                        this.appendSettingsDOM();

                    }
                    this.setupLayerDimension();
                    this.addSettingsEvents();
                    this.removeOverlayEvents();
                    this.loadSettings();
                }
            },
            appendSettingsDOM: function () {
                if (!$settingsElem) {
                    return;
                }
                $settingsElem.html(settingsDOM);
            },
            setupLayerDimension: function () {
                let d = ViewDeviceAlpha();
                //front height
                function FrontHeightChange(space) {
                    ReplaceClassByPattern($targetElem, 'H-(([0-9]{1,4})|a)', 'H-' + space);
                }
                let fh = GetValueByClassName($targetElem, 'H-(([0-9]{1,4})|a)', 'H-');
                fh = (fh == 0 || fh == "a") ? $targetElem.height() : fh;
                AdvanceSageSlider($('#lhFrontLayerHeight'), $('#lhFrontLayerHeightHandle'), 1, 1080, fh, FrontHeightChange, $targetElem, 'px');
                //over height
                function OverHeightChange(space) {
                    ReplaceClassByPattern($overlayElem, 'H-(([0-9]{1,4})|a)', 'H-' + space);
                }
                let oh = GetValueByClassName($overlayElem, 'H-(([0-9]{1,4})|a)', 'H-');
                oh = (oh == 0 || oh == "a") ? $overlayElem.height() : oh;
                AdvanceSageSlider($('#lhOverLayerHeight'), $('#lhOverLayerHeightHandle'), 1, 1080, oh, OverHeightChange, $overlayElem, 'px');
                //front width
                function FrontWidthChange(space) {
                    ReplaceClassByPattern($targetElem, 'sfCol_[0-9]{1,3}', 'sfCol_' + space);
                }
                AdvanceSageSlider($('#lhFrontLayerWidth'), $('#lhFrontLayerWidthHandle'), 1, 100, GetValueByClassName($targetElem, 'sfCol_[0-9]{1,3}', 'sfCol_'), FrontWidthChange, $targetElem, '%');
                //over width
                function OverWidthChange(space) {
                    ReplaceClassByPattern($overlayElem, 'sfCol_[0-9]{1,3}', 'sfCol_' + space);
                }
                AdvanceSageSlider($('#lhOverLayerWidth'), $('#lhOverLayerWidthHandle'), 1, 100, GetValueByClassName($overlayElem, 'sfCol_[0-9]{1,3}', 'sfCol_'), OverWidthChange, $overlayElem, '%');

                //over full height
                $('#lhOverFH').off('click').on('click', function () {
                    if ($(this).is(':checked')) {
                        $('#lhOverLayerHeightHld').addClass('Dn');
                        let regex = new RegExp('\\b' + d + 'H-(([0-9]{1,4})|a)' + '\\b', 'g');
                        $overlayElem.addClass(d + 'H-f').removeClass(function (index, className) {
                            return (className.match(regex) || []).join(' ');
                        });
                    } else {
                        $overlayElem.removeClass(d + 'H-f').removeClass('H-a');
                        $('#lhOverLayerHeightHld').removeClass('Dn');
                    }
                });
            },
            addSettingsEvents: function () {
                $('#lhEditLayer').off('change').on('change', function () {
                    let activated = $self.attr('data-activated');
                    if (activated == 1) {
                        SageAlertDialog('Please disable hover effect before editing.');
                        return;
                    }
                    let v = $(this).val();
                    let d = ViewDeviceAlpha();
                    let cls = $(this).find(':selected').attr('data-editcls');
                    //$self.find('.lh_layer').removeClass('lh-front-edit lh-over-edit');
                    //$self.find('.' + v).addClass(cls);
                    $self.removeClass('lh-front-edit lh-over-edit');
                    $self.addClass(cls);
                    $('#lhFrontLayerWidthHld, #lhFrontLayerHeightHld, #lhOverLayerWidthHld, #lhOverLayerHeightHld, #lhOverFHHld').addClass('Dn');

                    if (v == 'lhOver') {
                        $('#' + v + 'LayerWidthHld').removeClass('Dn');
                        $('#' + v + 'FHHld').removeClass('Dn');
                        if ($overlayElem.hasClass(d + 'H-f')) {
                            $('#lhOverFH').prop("checked", true);
                            $('#lhOverLayerHeightHld').addClass('Dn');
                        } else {
                            $('#lhOverFH').prop("checked", false);
                            $('#lhOverLayerHeightHld').removeClass('Dn');
                        }
                    } else {
                        $('#' + v + 'LayerWidthHld').removeClass('Dn');
                        $('#' + v + 'LayerHeightHld').removeClass('Dn');
                    }
                });
                $('#enableHoverEffect').off('click').on('click', function () {
                    if ($(this).is(':checked')) {
                        $self.attr('data-activated', 1);
                        AdvanceHoverOverlay.prepareDOMs();
                        AdvanceHoverOverlay.addOverlayEvents();
                        $('#lhLayerEditor').addClass('Dn');
                    } else {
                        AdvanceHoverOverlay.removeOverlayEvents($activeDOM);
                        $('#lhLayerEditor').removeClass('Dn');
                    }
                });
                $('#lhAnimation').off('change').on('change', function () {
                    let animation = $(this).val();
                    $self.attr('data-animation', animation);
                    let activated = $self.attr('data-activated');
                    if (activated == 1) {
                        AdvanceHoverOverlay.prepareDOMs();
                        AdvanceHoverOverlay.addOverlayEvents();
                    }
                });
                $('#enableInverseEffect').off('click').on('click', function () {
                    if ($(this).is(':checked')) {
                        $self.attr('data-inverse', 1);
                        $self.addClass('lh-anim-inverse');
                    } else {
                        $self.attr('data-inverse', 0);
                        $self.removeClass('lh-anim-inverse');
                    }
                    let activated = $self.attr('data-activated');
                    if (activated == 1) {
                        $self.removeClass('lh_animating');
                        AdvanceHoverOverlay.prepareDOMs();
                    }
                });
            },
            loadSettings: function () {
                let activated = $self.attr('data-activated');
                if (activated == 1) {
                    $('#enableHoverEffect').prop("checked", true);
                } else {
                    $('#enableHoverEffect').prop("checked", false);
                }
                let animation = $self.attr('data-animation');
                $('#lhAnimation').val(animation).trigger('change');
                let inverse = $self.attr('data-inverse');
                if (inverse == 1) {
                    $('#enableInverseEffect').prop("checked", true);
                } else {
                    $('#enableInverseEffect').prop("checked", false);
                }
            },
            removeOverlayEvents: function () {
                //$self.addClass('lh-is-edit');
                $self.off('mouseenter mouseleave');
                $self.attr('data-activated', 0);
                $overlayElem.removeClass(function (index, className) {
                    return (className.match(/\blh-anim-([a-zA-Z0-9\-]+)\b/g) || []).join(' ');
                });
                let currentEdit = 'lhFront';
                if ($self.hasClass('lh-over-edit')) {
                    currentEdit = 'lhOver';
                }
                $('#lhEditLayer').val(currentEdit).trigger('change');
            },
            getAnimation: function () {
                let animation = $self.attr('data-animation');
                if (typeof animation === 'undefined') {
                    animation = 'slide-right';
                }
                return animation;
            },
            isInverse: function () {
                let inverse = $self.attr('data-inverse');
                return (typeof inverse !== 'undefined' && inverse == 1);
            },
            prepareDOMs: function () {
                $targetElem.removeClass('Dn');
                $overlayElem.removeClass('Dn');
            },
            addOverlayEvents: function () {
                $self.removeClass('lh-is-edit lh-over-edit').addClass('lh-front-edit');
                $targetElem.removeClass('lh-front-edit');
                let animation = AdvanceHoverOverlay.getAnimation();
                $overlayElem.removeClass('Dn').removeClass(function (index, className) {
                    return (className.match(/\blh-anim-([a-zA-Z0-9\-]+)\b/g) || []).join(' ');
                }).addClass('lh-anim-' + animation);
            },
            responsive: {
                appendSettingsDOM: function () {
                    if (!$settingsElem) {
                        return;
                    }
                    $settingsElem.html(responsiveDOM);
                }
            }
        };
        AdvanceHoverOverlay.init();
    };
}(jQuery));

(function ($) {
    "use strict";
    function WordRotator(instance, opt) {
        this.instance = instance;
        let defaults = {
            words: [],
            delay: 3000,
            holder: '.word'
        };
        this.uTimer = null;
        this.iTimer = null;
        this.rTimer = null;
        this.options = $.extend({}, defaults, opt);
        this.$el = $(this.instance);
        this.$holder = this.$el.find(this.options.holder);
        this.animate();
    }

    WordRotator.prototype = {
        animate: function () {
            let self = this;
            if (self.uTimer) {
                clearTimeout(self.uTimer);
                self.uTimer = null;
            }
            self.uTimer = setTimeout(function () {
                self.update(0);
            }, this.options.delay);
        },
        update: function (f) {
            let self = this;
            //console.log("utimer", self.uTimer);
            if (self.uTimer) {
                clearTimeout(self.uTimer);
                self.uTimer = null;
            }
            self.remove(self.$holder.html().length, function () {
                self.insert(self.options.words[f], 0, function () {
                    self.update((f + 1) % self.options.words.length);
                });
            });
        },
        remove: function (t, i) {
            let self = this;
            //console.log("rtimer", self.rTimer);
            if (self.rTimer) {
                clearTimeout(self.rTimer);
                self.rTimer = null;
            }
            if (t > 0) {
                self.$holder.html(self.$holder.html().substring(0, t - 1));
                self.rTimer = setTimeout(function () {
                    self.remove(t - 1, i);
                }, 100);
            } else {
                typeof i === 'function' && (self.iTimer = setTimeout(i, 100));
            }
        },
        insert: function (t, r, u) {
            let self = this;
            //console.log("itimer", self.iTimer);
            if (self.iTimer) {
                clearTimeout(self.iTimer);
                self.iTimer = null;
            }
            if (r < t.length) {
                self.$holder.html(t.substring(0, r + 1));
                self.iTimer = setTimeout(function () {
                    self.insert(t, r + 1, u);
                }, 100);
            } else {
                typeof u == "function" && (self.uTimer = setTimeout(u, self.options.delay));
            }
        },
        clearTimers: function () {
            let self = this;
            //console.log("clear ", self.iTimer, self.uTimer, self.rTimer);
            if (self.iTimer) {
                clearTimeout(self.iTimer);
            }
            if (self.uTimer) {
                clearTimeout(self.uTimer);
            }
            if (self.rTimer) {
                clearTimeout(self.rTimer);
            }
            self.uTimer = null;
            self.iTimer = null;
            self.rTimer = null;
        },
        destroy: function () {
            let self = this;
            self.clearTimers();
            //self.$el.removeData('wordrotator');
            self.$el.removeData();
            self.$el = null;
            self.$holder = null;
            self.options = {};
        },
        setDelay: function (delay) {
            this.options.delay = delay;
        }
    };
    $.fn.wordRotator = function (options) {
        let args = Array.prototype.slice.call(arguments, 1);
        return this.each(function () {
            let $el = $(this);
            if (typeof $el.data('wordrotator') === 'undefined') {
                if (typeof options == 'string' || options instanceof String) {
                    throw "invalid option '" + options + "' passed while creating new instance.";
                }
                let p = new WordRotator(this, options);
                $el.data('wordrotator', p);
            } else if (typeof options !== 'undefined') {
                let currentInstance = $(this).data('wordrotator');
                //console.log("wr inst", currentInstance);
                if (typeof currentInstance[options] === 'function') {
                    currentInstance[options].apply(currentInstance, args);
                } else {
                    //throw "Unrecognized option " + options;
                }
            }
        });
    };
}(jQuery));
!function (a, b) { "function" == typeof define && define.amd ? define(["jquery"], b) : "object" == typeof exports ? module.exports = b(require("jquery")) : a.lightbox = b(a.jQuery) }(this, function (a) { function b(b) { this.album = [], this.currentImageIndex = void 0, this.init(), this.options = a.extend({}, this.constructor.defaults), this.option(b) } return b.defaults = { albumLabel: "Image %1 of %2", alwaysShowNavOnTouchDevices: !1, fadeDuration: 600, fitImagesInViewport: !0, imageFadeDuration: 600, positionFromTop: 50, resizeDuration: 700, showImageNumberLabel: !0, wrapAround: !1, disableScrolling: !1, sanitizeTitle: !1 }, b.prototype.option = function (b) { a.extend(this.options, b) }, b.prototype.imageCountLabel = function (a, b) { return this.options.albumLabel.replace(/%1/g, a).replace(/%2/g, b) }, b.prototype.init = function () { var b = this; a(document).ready(function () { b.enable(), b.build() }) }, b.prototype.enable = function () { var b = this; a("body").on("click", "a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]", function (c) { return b.start(a(c.currentTarget)), !1 }) }, b.prototype.build = function () { if (!(a("#lightbox").length > 0)) { var b = this; a('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" ></a><a class="lb-next" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(a("body")), this.$lightbox = a("#lightbox"), this.$overlay = a("#lightboxOverlay"), this.$outerContainer = this.$lightbox.find(".lb-outerContainer"), this.$container = this.$lightbox.find(".lb-container"), this.$image = this.$lightbox.find(".lb-image"), this.$nav = this.$lightbox.find(".lb-nav"), this.containerPadding = { top: parseInt(this.$container.css("padding-top"), 10), right: parseInt(this.$container.css("padding-right"), 10), bottom: parseInt(this.$container.css("padding-bottom"), 10), left: parseInt(this.$container.css("padding-left"), 10) }, this.imageBorderWidth = { top: parseInt(this.$image.css("border-top-width"), 10), right: parseInt(this.$image.css("border-right-width"), 10), bottom: parseInt(this.$image.css("border-bottom-width"), 10), left: parseInt(this.$image.css("border-left-width"), 10) }, this.$overlay.hide().on("click", function () { return b.end(), !1 }), this.$lightbox.hide().on("click", function (c) { return "lightbox" === a(c.target).attr("id") && b.end(), !1 }), this.$outerContainer.on("click", function (c) { return "lightbox" === a(c.target).attr("id") && b.end(), !1 }), this.$lightbox.find(".lb-prev").on("click", function () { return 0 === b.currentImageIndex ? b.changeImage(b.album.length - 1) : b.changeImage(b.currentImageIndex - 1), !1 }), this.$lightbox.find(".lb-next").on("click", function () { return b.currentImageIndex === b.album.length - 1 ? b.changeImage(0) : b.changeImage(b.currentImageIndex + 1), !1 }), this.$nav.on("mousedown", function (a) { 3 === a.which && (b.$nav.css("pointer-events", "none"), b.$lightbox.one("contextmenu", function () { setTimeout(function () { this.$nav.css("pointer-events", "auto") }.bind(b), 0) })) }), this.$lightbox.find(".lb-loader, .lb-close").on("click", function () { return b.end(), !1 }) } }, b.prototype.start = function (b) { function c(a) { d.album.push({ alt: a.attr("data-alt"), link: a.attr("href"), title: a.attr("data-title") || a.attr("title") }) } var d = this, e = a(window); e.on("resize", a.proxy(this.sizeOverlay, this)), a("select, object, embed").css({ visibility: "hidden" }), this.sizeOverlay(), this.album = []; var f, g = 0, h = b.attr("data-lightbox"); if (h) { f = a(b.prop("tagName") + '[data-lightbox="' + h + '"]'); for (var i = 0; i < f.length; i = ++i)c(a(f[i])), f[i] === b[0] && (g = i) } else if ("lightbox" === b.attr("rel")) c(b); else { f = a(b.prop("tagName") + '[rel="' + b.attr("rel") + '"]'); for (var j = 0; j < f.length; j = ++j)c(a(f[j])), f[j] === b[0] && (g = j) } var k = e.scrollTop() + this.options.positionFromTop, l = e.scrollLeft(); this.$lightbox.css({ top: k + "px", left: l + "px" }).fadeIn(this.options.fadeDuration), this.options.disableScrolling && a("html").addClass("lb-disable-scrolling"), this.changeImage(g) }, b.prototype.changeImage = function (b) { var c = this; this.disableKeyboardNav(); var d = this.$lightbox.find(".lb-image"); this.$overlay.fadeIn(this.options.fadeDuration), a(".lb-loader").fadeIn("slow"), this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(), this.$outerContainer.addClass("animating"); var e = new Image; e.onload = function () { var f, g, h, i, j, k; d.attr({ alt: c.album[b].alt, src: c.album[b].link }), a(e), d.width(e.width), d.height(e.height), c.options.fitImagesInViewport && (k = a(window).width(), j = a(window).height(), i = k - c.containerPadding.left - c.containerPadding.right - c.imageBorderWidth.left - c.imageBorderWidth.right - 20, h = j - c.containerPadding.top - c.containerPadding.bottom - c.imageBorderWidth.top - c.imageBorderWidth.bottom - 120, c.options.maxWidth && c.options.maxWidth < i && (i = c.options.maxWidth), c.options.maxHeight && c.options.maxHeight < i && (h = c.options.maxHeight), (e.width > i || e.height > h) && (e.width / i > e.height / h ? (g = i, f = parseInt(e.height / (e.width / g), 10), d.width(g), d.height(f)) : (f = h, g = parseInt(e.width / (e.height / f), 10), d.width(g), d.height(f)))), c.sizeContainer(d.width(), d.height()) }, e.src = this.album[b].link, this.currentImageIndex = b }, b.prototype.sizeOverlay = function () { this.$overlay.width(a(document).width()).height(a(document).height()) }, b.prototype.sizeContainer = function (a, b) { function c() { d.$lightbox.find(".lb-dataContainer").width(g), d.$lightbox.find(".lb-prevLink").height(h), d.$lightbox.find(".lb-nextLink").height(h), d.showImage() } var d = this, e = this.$outerContainer.outerWidth(), f = this.$outerContainer.outerHeight(), g = a + this.containerPadding.left + this.containerPadding.right + this.imageBorderWidth.left + this.imageBorderWidth.right, h = b + this.containerPadding.top + this.containerPadding.bottom + this.imageBorderWidth.top + this.imageBorderWidth.bottom; e !== g || f !== h ? this.$outerContainer.animate({ width: g, height: h }, this.options.resizeDuration, "swing", function () { c() }) : c() }, b.prototype.showImage = function () { this.$lightbox.find(".lb-loader").stop(!0).hide(), this.$lightbox.find(".lb-image").fadeIn(this.options.imageFadeDuration), this.updateNav(), this.updateDetails(), this.preloadNeighboringImages(), this.enableKeyboardNav() }, b.prototype.updateNav = function () { var a = !1; try { document.createEvent("TouchEvent"), a = !!this.options.alwaysShowNavOnTouchDevices } catch (a) { } this.$lightbox.find(".lb-nav").show(), this.album.length > 1 && (this.options.wrapAround ? (a && this.$lightbox.find(".lb-prev, .lb-next").css("opacity", "1"), this.$lightbox.find(".lb-prev, .lb-next").show()) : (this.currentImageIndex > 0 && (this.$lightbox.find(".lb-prev").show(), a && this.$lightbox.find(".lb-prev").css("opacity", "1")), this.currentImageIndex < this.album.length - 1 && (this.$lightbox.find(".lb-next").show(), a && this.$lightbox.find(".lb-next").css("opacity", "1")))) }, b.prototype.updateDetails = function () { var b = this; if (void 0 !== this.album[this.currentImageIndex].title && "" !== this.album[this.currentImageIndex].title) { var c = this.$lightbox.find(".lb-caption"); this.options.sanitizeTitle ? c.text(this.album[this.currentImageIndex].title) : c.html(this.album[this.currentImageIndex].title), c.fadeIn("fast").find("a").on("click", function (b) { void 0 !== a(this).attr("target") ? window.open(a(this).attr("href"), a(this).attr("target")) : location.href = a(this).attr("href") }) } if (this.album.length > 1 && this.options.showImageNumberLabel) { var d = this.imageCountLabel(this.currentImageIndex + 1, this.album.length); this.$lightbox.find(".lb-number").text(d).fadeIn("fast") } else this.$lightbox.find(".lb-number").hide(); this.$outerContainer.removeClass("animating"), this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration, function () { return b.sizeOverlay() }) }, b.prototype.preloadNeighboringImages = function () { if (this.album.length > this.currentImageIndex + 1) { (new Image).src = this.album[this.currentImageIndex + 1].link } if (this.currentImageIndex > 0) { (new Image).src = this.album[this.currentImageIndex - 1].link } }, b.prototype.enableKeyboardNav = function () { a(document).on("keyup.keyboard", a.proxy(this.keyboardAction, this)) }, b.prototype.disableKeyboardNav = function () { a(document).off(".keyboard") }, b.prototype.keyboardAction = function (a) { var b = a.keyCode, c = String.fromCharCode(b).toLowerCase(); 27 === b || c.match(/x|o|c/) ? this.end() : "p" === c || 37 === b ? 0 !== this.currentImageIndex ? this.changeImage(this.currentImageIndex - 1) : this.options.wrapAround && this.album.length > 1 && this.changeImage(this.album.length - 1) : "n" !== c && 39 !== b || (this.currentImageIndex !== this.album.length - 1 ? this.changeImage(this.currentImageIndex + 1) : this.options.wrapAround && this.album.length > 1 && this.changeImage(0)) }, b.prototype.end = function () { this.disableKeyboardNav(), a(window).off("resize", this.sizeOverlay), this.$lightbox.fadeOut(this.options.fadeDuration), this.$overlay.fadeOut(this.options.fadeDuration), a("select, object, embed").css({ visibility: "visible" }), this.options.disableScrolling && a("html").removeClass("lb-disable-scrolling") }, new b });
/**
 * Slick carousel
 * https://github.com/kenwheeler/slick/
 */
(function (i) {
    "use strict";
    "function" == typeof define && define.amd ? define(["jquery"], i) : "undefined" != typeof exports ? module.exports = i(require("jquery")) : i(jQuery)
})(function (i) {
    "use strict";
    var e = window.Slick || {};
    e = function () {
        function e(e, o) {
            var s, n = this;
            n.defaults = {
                accessibility: !0,
                adaptiveHeight: !1,
                appendArrows: i(e),
                appendDots: i(e),
                arrows: !0,
                asNavFor: null,
                prevArrow: '<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',
                nextArrow: '<button class="slick-next" aria-label="Next" type="button">Next</button>',
                autoplay: !1,
                autoplaySpeed: 3e3,
                centerMode: !1,
                centerPadding: "50px",
                cssEase: "ease",
                customPaging: function (e, t) {
                    return i('<button type="button" />').text(t + 1)
                },
                dots: !1,
                dotsClass: "slick-dots",
                draggable: !0,
                easing: "linear",
                edgeFriction: .35,
                fade: !1,
                focusOnSelect: !1,
                focusOnChange: !1,
                infinite: !0,
                initialSlide: 0,
                lazyLoad: "ondemand",
                mobileFirst: !1,
                pauseOnHover: !0,
                pauseOnFocus: !0,
                pauseOnDotsHover: !1,
                respondTo: "window",
                responsive: null,
                rows: 1,
                rtl: !1,
                slide: "",
                slidesPerRow: 1,
                slidesToShow: 1,
                slidesToScroll: 1,
                speed: 500,
                swipe: !0,
                swipeToSlide: !1,
                touchMove: !0,
                touchThreshold: 5,
                useCSS: !0,
                useTransform: !0,
                variableWidth: !1,
                vertical: !1,
                verticalSwiping: !1,
                waitForAnimate: !0,
                zIndex: 1e3,
                customOnChange: null
            }, n.initials = {
                animating: !1,
                dragging: !1,
                autoPlayTimer: null,
                currentDirection: 0,
                currentLeft: null,
                currentSlide: 0,
                direction: 1,
                $dots: null,
                listWidth: null,
                listHeight: null,
                loadIndex: 0,
                $nextArrow: null,
                $prevArrow: null,
                scrolling: !1,
                slideCount: null,
                slideWidth: null,
                $slideTrack: null,
                $slides: null,
                sliding: !1,
                slideOffset: 0,
                swipeLeft: null,
                swiping: !1,
                $list: null,
                touchObject: {},
                transformsEnabled: !1,
                unslicked: !1
            }, i.extend(n, n.initials), n.activeBreakpoint = null, n.animType = null, n.animProp = null, n.breakpoints = [], n.breakpointSettings = [], n.cssTransitions = !1, n.focussed = !1, n.interrupted = !1, n.hidden = "hidden", n.paused = !0, n.positionProp = null, n.respondTo = null, n.rowCount = 1, n.shouldClick = !0, n.$slider = i(e), n.$slidesCache = null, n.transformType = null, n.transitionType = null, n.visibilityChange = "visibilitychange", n.windowWidth = 0, n.windowTimer = null, s = i(e).data("slick") || {}, n.options = i.extend({}, n.defaults, o, s), n.currentSlide = n.options.initialSlide, n.originalSettings = n.options, "undefined" != typeof document.mozHidden ? (n.hidden = "mozHidden", n.visibilityChange = "mozvisibilitychange") : "undefined" != typeof document.webkitHidden && (n.hidden = "webkitHidden", n.visibilityChange = "webkitvisibilitychange"), n.autoPlay = i.proxy(n.autoPlay, n), n.autoPlayClear = i.proxy(n.autoPlayClear, n), n.autoPlayIterator = i.proxy(n.autoPlayIterator, n), n.changeSlide = i.proxy(n.changeSlide, n), n.clickHandler = i.proxy(n.clickHandler, n), n.selectHandler = i.proxy(n.selectHandler, n), n.setPosition = i.proxy(n.setPosition, n), n.swipeHandler = i.proxy(n.swipeHandler, n), n.dragHandler = i.proxy(n.dragHandler, n), n.keyHandler = i.proxy(n.keyHandler, n), n.instanceUid = t++, n.htmlExpr = /^(?:\s*(<[\w\W]+>)[^>]*)$/, n.registerBreakpoints(), n.init(!0)
        }
        var t = 0;
        return e
    }(), e.prototype.activateADA = function () {
        var i = this;
        i.$slideTrack.find(".slick-active").attr({
            "aria-hidden": "false"
        }).find("a, input, button, select").attr({
            tabindex: "0"
        })
    }, e.prototype.addSlide = e.prototype.slickAdd = function (e, t, o) {
        var s = this;
        if ("boolean" == typeof t) o = t, t = null;
        else if (t < 0 || t >= s.slideCount) return !1;
        s.unload(), "number" == typeof t ? 0 === t && 0 === s.$slides.length ? i(e).appendTo(s.$slideTrack) : o ? i(e).insertBefore(s.$slides.eq(t)) : i(e).insertAfter(s.$slides.eq(t)) : o === !0 ? i(e).prependTo(s.$slideTrack) : i(e).appendTo(s.$slideTrack), s.$slides = s.$slideTrack.children(this.options.slide), s.$slideTrack.children(this.options.slide).detach(), s.$slideTrack.append(s.$slides), s.$slides.each(function (e, t) {
            i(t).attr("data-slick-index", e)
        }), s.$slidesCache = s.$slides, s.reinit()
    }, e.prototype.animateHeight = function () {
        var i = this;
        if (1 === i.options.slidesToShow && i.options.adaptiveHeight === !0 && i.options.vertical === !1) {
            var e = i.$slides.eq(i.currentSlide).outerHeight(!0);
            i.$list.animate({
                height: e
            }, i.options.speed)
        }
    }, e.prototype.animateSlide = function (e, t) {
        var o = {},
            s = this;
        s.animateHeight(), s.options.rtl === !0 && s.options.vertical === !1 && (e = -e), s.transformsEnabled === !1 ? s.options.vertical === !1 ? s.$slideTrack.animate({
            left: e
        }, s.options.speed, s.options.easing, t) : s.$slideTrack.animate({
            top: e
        }, s.options.speed, s.options.easing, t) : s.cssTransitions === !1 ? (s.options.rtl === !0 && (s.currentLeft = -s.currentLeft), i({
            animStart: s.currentLeft
        }).animate({
            animStart: e
        }, {
            duration: s.options.speed,
            easing: s.options.easing,
            step: function (i) {
                i = Math.ceil(i), s.options.vertical === !1 ? (o[s.animType] = "translate(" + i + "px, 0px)", s.$slideTrack.css(o)) : (o[s.animType] = "translate(0px," + i + "px)", s.$slideTrack.css(o))
            },
            complete: function () {
                t && t.call()
            }
        })) : (s.applyTransition(), e = Math.ceil(e), s.options.vertical === !1 ? o[s.animType] = "translate3d(" + e + "px, 0px, 0px)" : o[s.animType] = "translate3d(0px," + e + "px, 0px)", s.$slideTrack.css(o), t && setTimeout(function () {
            s.disableTransition(), t.call()
        }, s.options.speed))
    }, e.prototype.getNavTarget = function () {
        var e = this,
            t = e.options.asNavFor;
        return t && null !== t && (t = i(t).not(e.$slider)), t
    }, e.prototype.asNavFor = function (e) {
        var t = this,
            o = t.getNavTarget();
        null !== o && "object" == typeof o && o.each(function () {
            var t = i(this).slick("getSlick");
            t.unslicked || t.slideHandler(e, !0)
        })
    }, e.prototype.applyTransition = function (i) {
        var e = this,
            t = {};
        e.options.fade === !1 ? t[e.transitionType] = e.transformType + " " + e.options.speed + "ms " + e.options.cssEase : t[e.transitionType] = "opacity " + e.options.speed + "ms " + e.options.cssEase, e.options.fade === !1 ? e.$slideTrack.css(t) : e.$slides.eq(i).css(t)
    }, e.prototype.autoPlay = function () {
        var i = this;
        i.autoPlayClear(), i.slideCount > i.options.slidesToShow && (i.autoPlayTimer = setInterval(i.autoPlayIterator, i.options.autoplaySpeed))
    }, e.prototype.autoPlayClear = function () {
        var i = this;
        i.autoPlayTimer && clearInterval(i.autoPlayTimer)
    }, e.prototype.autoPlayIterator = function () {
        var i = this,
            e = i.currentSlide + i.options.slidesToScroll;
        i.paused || i.interrupted || i.focussed || (i.options.infinite === !1 && (1 === i.direction && i.currentSlide + 1 === i.slideCount - 1 ? i.direction = 0 : 0 === i.direction && (e = i.currentSlide - i.options.slidesToScroll, i.currentSlide - 1 === 0 && (i.direction = 1))), i.slideHandler(e))
    }, e.prototype.buildArrows = function () {
        var e = this;
        e.options.arrows === !0 && (e.$prevArrow = i(e.options.prevArrow).addClass("slick-arrow"), e.$nextArrow = i(e.options.nextArrow).addClass("slick-arrow"), e.slideCount > e.options.slidesToShow ? (e.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"), e.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"), e.htmlExpr.test(e.options.prevArrow) && e.$prevArrow.prependTo(e.options.appendArrows), e.htmlExpr.test(e.options.nextArrow) && e.$nextArrow.appendTo(e.options.appendArrows), e.options.infinite !== !0 && e.$prevArrow.addClass("slick-disabled").attr("aria-disabled", "true")) : e.$prevArrow.add(e.$nextArrow).addClass("slick-hidden").attr({
            "aria-disabled": "true",
            tabindex: "-1"
        }))
    }, e.prototype.buildDots = function () {
        var e, t, o = this;
        if (o.options.dots === !0 && o.slideCount > o.options.slidesToShow) {
            for (o.$slider.addClass("slick-dotted"), t = i("<ul />").addClass(o.options.dotsClass), e = 0; e <= o.getDotCount(); e += 1) t.append(i("<li />").append(o.options.customPaging.call(this, o, e)));
            o.$dots = t.appendTo(o.options.appendDots), o.$dots.find("li").first().addClass("slick-active")
        }
    }, e.prototype.buildOut = function () {
        var e = this;
        e.$slides = e.$slider.children(e.options.slide + ":not(.slick-cloned)").addClass("slick-slide"), e.slideCount = e.$slides.length, e.$slides.each(function (e, t) {
            i(t).attr("data-slick-index", e).data("originalStyling", i(t).attr("style") || "")
        }), e.$slider.addClass("slick-slider"), e.$slideTrack = 0 === e.slideCount ? i('<div class="slick-track"/>').appendTo(e.$slider) : e.$slides.wrapAll('<div class="slick-track"/>').parent(), e.$list = e.$slideTrack.wrap('<div class="slick-list"/>').parent(), e.$slideTrack.css("opacity", 0), e.options.centerMode !== !0 && e.options.swipeToSlide !== !0 || (e.options.slidesToScroll = 1), i("img[data-lazy]", e.$slider).not("[src]").addClass("slick-loading"), e.setupInfinite(), e.buildArrows(), e.buildDots(), e.updateDots(), e.setSlideClasses("number" == typeof e.currentSlide ? e.currentSlide : 0), e.options.draggable === !0 && e.$list.addClass("draggable")
    }, e.prototype.buildRows = function () {
        var i, e, t, o, s, n, r, l = this;
        if (o = document.createDocumentFragment(), n = l.$slider.children(), l.options.rows > 0) {
            for (r = l.options.slidesPerRow * l.options.rows, s = Math.ceil(n.length / r), i = 0; i < s; i++) {
                var d = document.createElement("div");
                for (e = 0; e < l.options.rows; e++) {
                    var a = document.createElement("div");
                    for (t = 0; t < l.options.slidesPerRow; t++) {
                        var c = i * r + (e * l.options.slidesPerRow + t);
                        n.get(c) && a.appendChild(n.get(c))
                    }
                    d.appendChild(a)
                }
                o.appendChild(d)
            }
            l.$slider.empty().append(o), l.$slider.children().children().children().css({
                width: 100 / l.options.slidesPerRow + "%",
                display: "inline-block"
            })
        }
    }, e.prototype.checkResponsive = function (e, t) {
        var o, s, n, r = this,
            l = !1,
            d = r.$slider.width(),
            a = window.innerWidth || i(window).width();
        if ("window" === r.respondTo ? n = a : "slider" === r.respondTo ? n = d : "min" === r.respondTo && (n = Math.min(a, d)), r.options.responsive && r.options.responsive.length && null !== r.options.responsive) {
            s = null;
            for (o in r.breakpoints) r.breakpoints.hasOwnProperty(o) && (r.originalSettings.mobileFirst === !1 ? n < r.breakpoints[o] && (s = r.breakpoints[o]) : n > r.breakpoints[o] && (s = r.breakpoints[o]));
            null !== s ? null !== r.activeBreakpoint ? (s !== r.activeBreakpoint || t) && (r.activeBreakpoint = s, "unslick" === r.breakpointSettings[s] ? r.unslick(s) : (r.options = i.extend({}, r.originalSettings, r.breakpointSettings[s]), e === !0 && (r.currentSlide = r.options.initialSlide), r.refresh(e)), l = s) : (r.activeBreakpoint = s, "unslick" === r.breakpointSettings[s] ? r.unslick(s) : (r.options = i.extend({}, r.originalSettings, r.breakpointSettings[s]), e === !0 && (r.currentSlide = r.options.initialSlide), r.refresh(e)), l = s) : null !== r.activeBreakpoint && (r.activeBreakpoint = null, r.options = r.originalSettings, e === !0 && (r.currentSlide = r.options.initialSlide), r.refresh(e), l = s), e || l === !1 || r.$slider.trigger("breakpoint", [r, l])
        }
    }, e.prototype.changeSlide = function (e, t) {
        var o, s, n, r = this,
            l = i(e.currentTarget);
        switch (l.is("a") && e.preventDefault(), l.is("li") || (l = l.closest("li")), n = r.slideCount % r.options.slidesToScroll !== 0, o = n ? 0 : (r.slideCount - r.currentSlide) % r.options.slidesToScroll, e.data.message) {
            case "previous":
                s = 0 === o ? r.options.slidesToScroll : r.options.slidesToShow - o, r.slideCount > r.options.slidesToShow && r.slideHandler(r.currentSlide - s, !1, t);
                break;
            case "next":
                s = 0 === o ? r.options.slidesToScroll : o, r.slideCount > r.options.slidesToShow && r.slideHandler(r.currentSlide + s, !1, t);
                break;
            case "index":
                var d = 0 === e.data.index ? 0 : e.data.index || l.index() * r.options.slidesToScroll;
                r.slideHandler(r.checkNavigable(d), !1, t), l.children().trigger("focus");
                break;
            default:
                return
        }
    }, e.prototype.checkNavigable = function (i) {
        var e, t, o = this;
        if (e = o.getNavigableIndexes(), t = 0, i > e[e.length - 1]) i = e[e.length - 1];
        else
            for (var s in e) {
                if (i < e[s]) {
                    i = t;
                    break
                }
                t = e[s]
            }
        return i
    }, e.prototype.cleanUpEvents = function () {
        var e = this;
        e.options.dots && null !== e.$dots && (i("li", e.$dots).off("click.slick", e.changeSlide).off("mouseenter.slick", i.proxy(e.interrupt, e, !0)).off("mouseleave.slick", i.proxy(e.interrupt, e, !1)), e.options.accessibility === !0 && e.$dots.off("keydown.slick", e.keyHandler)), e.$slider.off("focus.slick blur.slick"), e.options.arrows === !0 && e.slideCount > e.options.slidesToShow && (e.$prevArrow && e.$prevArrow.off("click.slick", e.changeSlide), e.$nextArrow && e.$nextArrow.off("click.slick", e.changeSlide), e.options.accessibility === !0 && (e.$prevArrow && e.$prevArrow.off("keydown.slick", e.keyHandler), e.$nextArrow && e.$nextArrow.off("keydown.slick", e.keyHandler))), e.$list.off("touchstart.slick mousedown.slick", e.swipeHandler), e.$list.off("touchmove.slick mousemove.slick", e.swipeHandler), e.$list.off("touchend.slick mouseup.slick", e.swipeHandler), e.$list.off("touchcancel.slick mouseleave.slick", e.swipeHandler), e.$list.off("click.slick", e.clickHandler), i(document).off(e.visibilityChange, e.visibility), e.cleanUpSlideEvents(), e.options.accessibility === !0 && e.$list.off("keydown.slick", e.keyHandler), e.options.focusOnSelect === !0 && i(e.$slideTrack).children().off("click.slick", e.selectHandler), i(window).off("orientationchange.slick.slick-" + e.instanceUid, e.orientationChange), i(window).off("resize.slick.slick-" + e.instanceUid, e.resize), i("[draggable!=true]", e.$slideTrack).off("dragstart", e.preventDefault), i(window).off("load.slick.slick-" + e.instanceUid, e.setPosition)
    }, e.prototype.cleanUpSlideEvents = function () {
        var e = this;
        e.$list.off("mouseenter.slick", i.proxy(e.interrupt, e, !0)), e.$list.off("mouseleave.slick", i.proxy(e.interrupt, e, !1))
    }, e.prototype.cleanUpRows = function () {
        var i, e = this;
        e.options.rows > 0 && (i = e.$slides.children().children(), i.removeAttr("style"), e.$slider.empty().append(i))
    }, e.prototype.clickHandler = function (i) {
        var e = this;
        e.shouldClick === !1 && (i.stopImmediatePropagation(), i.stopPropagation(), i.preventDefault())
    }, e.prototype.destroy = function (e) {
        var t = this;
        t.autoPlayClear(), t.touchObject = {}, t.cleanUpEvents(), i(".slick-cloned", t.$slider).detach(), t.$dots && t.$dots.remove(), t.$prevArrow && t.$prevArrow.length && (t.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display", ""), t.htmlExpr.test(t.options.prevArrow) && t.$prevArrow.remove()), t.$nextArrow && t.$nextArrow.length && (t.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display", ""), t.htmlExpr.test(t.options.nextArrow) && t.$nextArrow.remove()), t.$slides && (t.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function () {
            i(this).attr("style", i(this).data("originalStyling"))
        }), t.$slideTrack.children(this.options.slide).detach(), t.$slideTrack.detach(), t.$list.detach(), t.$slider.append(t.$slides)), t.cleanUpRows(), t.$slider.removeClass("slick-slider"), t.$slider.removeClass("slick-initialized"), t.$slider.removeClass("slick-dotted"), t.unslicked = !0, e || t.$slider.trigger("destroy", [t])
    }, e.prototype.disableTransition = function (i) {
        var e = this,
            t = {};
        t[e.transitionType] = "", e.options.fade === !1 ? e.$slideTrack.css(t) : e.$slides.eq(i).css(t)
    }, e.prototype.fadeSlide = function (i, e) {
        var t = this;
        t.cssTransitions === !1 ? (t.$slides.eq(i).css({
            zIndex: t.options.zIndex
        }), t.$slides.eq(i).animate({
            opacity: 1
        }, t.options.speed, t.options.easing, e)) : (t.applyTransition(i), t.$slides.eq(i).css({
            opacity: 1,
            zIndex: t.options.zIndex
        }), e && setTimeout(function () {
            t.disableTransition(i), e.call()
        }, t.options.speed))
    }, e.prototype.fadeSlideOut = function (i) {
        var e = this;
        e.cssTransitions === !1 ? e.$slides.eq(i).animate({
            opacity: 0,
            zIndex: e.options.zIndex - 2
        }, e.options.speed, e.options.easing) : (e.applyTransition(i), e.$slides.eq(i).css({
            opacity: 0,
            zIndex: e.options.zIndex - 2
        }))
    }, e.prototype.filterSlides = e.prototype.slickFilter = function (i) {
        var e = this;
        null !== i && (e.$slidesCache = e.$slides, e.unload(), e.$slideTrack.children(this.options.slide).detach(), e.$slidesCache.filter(i).appendTo(e.$slideTrack), e.reinit())
    }, e.prototype.focusHandler = function () {
        var e = this;
        e.$slider.off("focus.slick blur.slick").on("focus.slick", "*", function (t) {
            var o = i(this);
            setTimeout(function () {
                e.options.pauseOnFocus && o.is(":focus") && (e.focussed = !0, e.autoPlay())
            }, 0)
        }).on("blur.slick", "*", function (t) {
            i(this);
            e.options.pauseOnFocus && (e.focussed = !1, e.autoPlay())
        })
    }, e.prototype.getCurrent = e.prototype.slickCurrentSlide = function () {
        var i = this;
        return i.currentSlide
    }, e.prototype.getDotCount = function () {
        var i = this,
            e = 0,
            t = 0,
            o = 0;
        if (i.options.infinite === !0)
            if (i.slideCount <= i.options.slidesToShow) ++o;
            else
                for (; e < i.slideCount;)++o, e = t + i.options.slidesToScroll, t += i.options.slidesToScroll <= i.options.slidesToShow ? i.options.slidesToScroll : i.options.slidesToShow;
        else if (i.options.centerMode === !0) o = i.slideCount;
        else if (i.options.asNavFor)
            for (; e < i.slideCount;)++o, e = t + i.options.slidesToScroll, t += i.options.slidesToScroll <= i.options.slidesToShow ? i.options.slidesToScroll : i.options.slidesToShow;
        else o = 1 + Math.ceil((i.slideCount - i.options.slidesToShow) / i.options.slidesToScroll);
        return o - 1
    }, e.prototype.getLeft = function (i) {
        var e, t, o, s, n = this,
            r = 0;
        return n.slideOffset = 0, t = n.$slides.first().outerHeight(!0), n.options.infinite === !0 ? (n.slideCount > n.options.slidesToShow && (n.slideOffset = n.slideWidth * n.options.slidesToShow * -1, s = -1, n.options.vertical === !0 && n.options.centerMode === !0 && (2 === n.options.slidesToShow ? s = -1.5 : 1 === n.options.slidesToShow && (s = -2)), r = t * n.options.slidesToShow * s), n.slideCount % n.options.slidesToScroll !== 0 && i + n.options.slidesToScroll > n.slideCount && n.slideCount > n.options.slidesToShow && (i > n.slideCount ? (n.slideOffset = (n.options.slidesToShow - (i - n.slideCount)) * n.slideWidth * -1, r = (n.options.slidesToShow - (i - n.slideCount)) * t * -1) : (n.slideOffset = n.slideCount % n.options.slidesToScroll * n.slideWidth * -1, r = n.slideCount % n.options.slidesToScroll * t * -1))) : i + n.options.slidesToShow > n.slideCount && (n.slideOffset = (i + n.options.slidesToShow - n.slideCount) * n.slideWidth, r = (i + n.options.slidesToShow - n.slideCount) * t), n.slideCount <= n.options.slidesToShow && (n.slideOffset = 0, r = 0), n.options.centerMode === !0 && n.slideCount <= n.options.slidesToShow ? n.slideOffset = n.slideWidth * Math.floor(n.options.slidesToShow) / 2 - n.slideWidth * n.slideCount / 2 : n.options.centerMode === !0 && n.options.infinite === !0 ? n.slideOffset += n.slideWidth * Math.floor(n.options.slidesToShow / 2) - n.slideWidth : n.options.centerMode === !0 && (n.slideOffset = 0, n.slideOffset += n.slideWidth * Math.floor(n.options.slidesToShow / 2)), e = n.options.vertical === !1 ? i * n.slideWidth * -1 + n.slideOffset : i * t * -1 + r, n.options.variableWidth === !0 && (o = n.slideCount <= n.options.slidesToShow || n.options.infinite === !1 ? n.$slideTrack.children(".slick-slide").eq(i) : n.$slideTrack.children(".slick-slide").eq(i + n.options.slidesToShow), e = n.options.rtl === !0 ? o[0] ? (n.$slideTrack.width() - o[0].offsetLeft - o.width()) * -1 : 0 : o[0] ? o[0].offsetLeft * -1 : 0, n.options.centerMode === !0 && (o = n.slideCount <= n.options.slidesToShow || n.options.infinite === !1 ? n.$slideTrack.children(".slick-slide").eq(i) : n.$slideTrack.children(".slick-slide").eq(i + n.options.slidesToShow + 1), e = n.options.rtl === !0 ? o[0] ? (n.$slideTrack.width() - o[0].offsetLeft - o.width()) * -1 : 0 : o[0] ? o[0].offsetLeft * -1 : 0, e += (n.$list.width() - o.outerWidth()) / 2)), e
    }, e.prototype.getOption = e.prototype.slickGetOption = function (i) {
        var e = this;
        return e.options[i]
    }, e.prototype.getNavigableIndexes = function () {
        var i, e = this,
            t = 0,
            o = 0,
            s = [];
        for (e.options.infinite === !1 ? i = e.slideCount : (t = e.options.slidesToScroll * -1, o = e.options.slidesToScroll * -1, i = 2 * e.slideCount); t < i;) s.push(t), t = o + e.options.slidesToScroll, o += e.options.slidesToScroll <= e.options.slidesToShow ? e.options.slidesToScroll : e.options.slidesToShow;
        return s
    }, e.prototype.getSlick = function () {
        return this
    }, e.prototype.getSlideCount = function () {
        var e, t, o, s, n = this;
        return s = n.options.centerMode === !0 ? Math.floor(n.$list.width() / 2) : 0, o = n.swipeLeft * -1 + s, n.options.swipeToSlide === !0 ? (n.$slideTrack.find(".slick-slide").each(function (e, s) {
            var r, l, d;
            if (r = i(s).outerWidth(), l = s.offsetLeft, n.options.centerMode !== !0 && (l += r / 2), d = l + r, o < d) return t = s, !1
        }), e = Math.abs(i(t).attr("data-slick-index") - n.currentSlide) || 1) : n.options.slidesToScroll
    }, e.prototype.goTo = e.prototype.slickGoTo = function (i, e) {
        var t = this;
        t.changeSlide({
            data: {
                message: "index",
                index: parseInt(i)
            }
        }, e)
    }, e.prototype.init = function (e) {
        var t = this;
        i(t.$slider).hasClass("slick-initialized") || (i(t.$slider).addClass("slick-initialized"), t.buildRows(), t.buildOut(), t.setProps(), t.startLoad(), t.loadSlider(), t.initializeEvents(), t.updateArrows(), t.updateDots(), t.checkResponsive(!0), t.focusHandler()), e && t.$slider.trigger("init", [t]), t.options.accessibility === !0 && t.initADA(), t.options.autoplay && (t.paused = !1, t.autoPlay())
    }, e.prototype.initADA = function () {
        var e = this,
            t = Math.ceil(e.slideCount / e.options.slidesToShow),
            o = e.getNavigableIndexes().filter(function (i) {
                return i >= 0 && i < e.slideCount
            });
        e.$slides.add(e.$slideTrack.find(".slick-cloned")).attr({
            "aria-hidden": "true",
            tabindex: "-1"
        }).find("a, input, button, select").attr({
            tabindex: "-1"
        }), null !== e.$dots && (e.$slides.not(e.$slideTrack.find(".slick-cloned")).each(function (t) {
            var s = o.indexOf(t);
            if (i(this).attr({
                role: "tabpanel",
                id: "slick-slide" + e.instanceUid + t,
                tabindex: -1
            }), s !== -1) {
                var n = "slick-slide-control" + e.instanceUid + s;
                i("#" + n).length && i(this).attr({
                    "aria-describedby": n
                })
            }
        }), e.$dots.attr("role", "tablist").find("li").each(function (s) {
            var n = o[s];
            i(this).attr({
                role: "presentation"
            }), i(this).find("button").first().attr({
                role: "tab",
                id: "slick-slide-control" + e.instanceUid + s,
                "aria-controls": "slick-slide" + e.instanceUid + n,
                "aria-label": s + 1 + " of " + t,
                "aria-selected": null,
                tabindex: "-1"
            })
        }).eq(e.currentSlide).find("button").attr({
            "aria-selected": "true",
            tabindex: "0"
        }).end());
        for (var s = e.currentSlide, n = s + e.options.slidesToShow; s < n; s++) e.options.focusOnChange ? e.$slides.eq(s).attr({
            tabindex: "0"
        }) : e.$slides.eq(s).removeAttr("tabindex");
        e.activateADA()
    }, e.prototype.initArrowEvents = function () {
        var i = this;
        i.options.arrows === !0 && i.slideCount > i.options.slidesToShow && (i.$prevArrow.off("click.slick").on("click.slick", {
            message: "previous"
        }, i.changeSlide), i.$nextArrow.off("click.slick").on("click.slick", {
            message: "next"
        }, i.changeSlide), i.options.accessibility === !0 && (i.$prevArrow.on("keydown.slick", i.keyHandler), i.$nextArrow.on("keydown.slick", i.keyHandler)))
    }, e.prototype.initDotEvents = function () {
        var e = this;
        e.options.dots === !0 && e.slideCount > e.options.slidesToShow && (i("li", e.$dots).on("click.slick", {
            message: "index"
        }, e.changeSlide), e.options.accessibility === !0 && e.$dots.on("keydown.slick", e.keyHandler)), e.options.dots === !0 && e.options.pauseOnDotsHover === !0 && e.slideCount > e.options.slidesToShow && i("li", e.$dots).on("mouseenter.slick", i.proxy(e.interrupt, e, !0)).on("mouseleave.slick", i.proxy(e.interrupt, e, !1))
    }, e.prototype.initSlideEvents = function () {
        var e = this;
        e.options.pauseOnHover && (e.$list.on("mouseenter.slick", i.proxy(e.interrupt, e, !0)), e.$list.on("mouseleave.slick", i.proxy(e.interrupt, e, !1)))
    }, e.prototype.initializeEvents = function () {
        var e = this;
        e.initArrowEvents(), e.initDotEvents(), e.initSlideEvents(), e.$list.on("touchstart.slick mousedown.slick", {
            action: "start"
        }, e.swipeHandler), e.$list.on("touchmove.slick mousemove.slick", {
            action: "move"
        }, e.swipeHandler), e.$list.on("touchend.slick mouseup.slick", {
            action: "end"
        }, e.swipeHandler), e.$list.on("touchcancel.slick mouseleave.slick", {
            action: "end"
        }, e.swipeHandler), e.$list.on("click.slick", e.clickHandler), i(document).on(e.visibilityChange, i.proxy(e.visibility, e)), e.options.accessibility === !0 && e.$list.on("keydown.slick", e.keyHandler), e.options.focusOnSelect === !0 && i(e.$slideTrack).children().on("click.slick", e.selectHandler), i(window).on("orientationchange.slick.slick-" + e.instanceUid, i.proxy(e.orientationChange, e)), i(window).on("resize.slick.slick-" + e.instanceUid, i.proxy(e.resize, e)), i("[draggable!=true]", e.$slideTrack).on("dragstart", e.preventDefault), i(window).on("load.slick.slick-" + e.instanceUid, e.setPosition), i(e.setPosition)
    }, e.prototype.initUI = function () {
        var i = this;
        i.options.arrows === !0 && i.slideCount > i.options.slidesToShow && (i.$prevArrow.show(), i.$nextArrow.show()), i.options.dots === !0 && i.slideCount > i.options.slidesToShow && i.$dots.show()
    }, e.prototype.keyHandler = function (i) {
        var e = this;
        i.target.tagName.match("TEXTAREA|INPUT|SELECT") || (37 === i.keyCode && e.options.accessibility === !0 ? e.changeSlide({
            data: {
                message: e.options.rtl === !0 ? "next" : "previous"
            }
        }) : 39 === i.keyCode && e.options.accessibility === !0 && e.changeSlide({
            data: {
                message: e.options.rtl === !0 ? "previous" : "next"
            }
        }))
    }, e.prototype.lazyLoad = function () {
        function e(e) {
            i("img[data-lazy]", e).each(function () {
                var e = i(this),
                    t = i(this).attr("data-lazy"),
                    o = i(this).attr("data-srcset"),
                    s = i(this).attr("data-sizes") || r.$slider.attr("data-sizes"),
                    n = document.createElement("img");
                n.onload = function () {
                    e.animate({
                        opacity: 0
                    }, 100, function () {
                        o && (e.attr("srcset", o), s && e.attr("sizes", s)), e.attr("src", t).animate({
                            opacity: 1
                        }, 200, function () {
                            e.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")
                        }), r.$slider.trigger("lazyLoaded", [r, e, t])
                    })
                }, n.onerror = function () {
                    e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"), r.$slider.trigger("lazyLoadError", [r, e, t])
                }, n.src = t
            })
        }
        var t, o, s, n, r = this;
        if (r.options.centerMode === !0 ? r.options.infinite === !0 ? (s = r.currentSlide + (r.options.slidesToShow / 2 + 1), n = s + r.options.slidesToShow + 2) : (s = Math.max(0, r.currentSlide - (r.options.slidesToShow / 2 + 1)), n = 2 + (r.options.slidesToShow / 2 + 1) + r.currentSlide) : (s = r.options.infinite ? r.options.slidesToShow + r.currentSlide : r.currentSlide, n = Math.ceil(s + r.options.slidesToShow), r.options.fade === !0 && (s > 0 && s--, n <= r.slideCount && n++)), t = r.$slider.find(".slick-slide").slice(s, n), "anticipated" === r.options.lazyLoad)
            for (var l = s - 1, d = n, a = r.$slider.find(".slick-slide"), c = 0; c < r.options.slidesToScroll; c++) l < 0 && (l = r.slideCount - 1), t = t.add(a.eq(l)), t = t.add(a.eq(d)), l--, d++;
        e(t), r.slideCount <= r.options.slidesToShow ? (o = r.$slider.find(".slick-slide"), e(o)) : r.currentSlide >= r.slideCount - r.options.slidesToShow ? (o = r.$slider.find(".slick-cloned").slice(0, r.options.slidesToShow), e(o)) : 0 === r.currentSlide && (o = r.$slider.find(".slick-cloned").slice(r.options.slidesToShow * -1), e(o))
    }, e.prototype.loadSlider = function () {
        var i = this;
        i.setPosition(), i.$slideTrack.css({
            opacity: 1
        }), i.$slider.removeClass("slick-loading"), i.initUI(), "progressive" === i.options.lazyLoad && i.progressiveLazyLoad()
    }, e.prototype.next = e.prototype.slickNext = function () {
        var i = this;
        i.changeSlide({
            data: {
                message: "next"
            }
        })
    }, e.prototype.orientationChange = function () {
        var i = this;
        i.checkResponsive(), i.setPosition()
    }, e.prototype.pause = e.prototype.slickPause = function () {
        var i = this;
        i.autoPlayClear(), i.paused = !0
    }, e.prototype.play = e.prototype.slickPlay = function () {
        var i = this;
        i.autoPlay(), i.options.autoplay = !0, i.paused = !1, i.focussed = !1, i.interrupted = !1
    }, e.prototype.postSlide = function (e) {
        var t = this;
        if (!t.unslicked && (t.$slider.trigger("afterChange", [t, e]), t.animating = !1, t.slideCount > t.options.slidesToShow && t.setPosition(), t.swipeLeft = null, t.options.autoplay && t.autoPlay(), t.options.accessibility === !0 && (t.initADA(), t.options.focusOnChange))) {
            var o = i(t.$slides.get(t.currentSlide));
            o.attr("tabindex", 0).focus()
        }
    }, e.prototype.prev = e.prototype.slickPrev = function () {
        var i = this;
        i.changeSlide({
            data: {
                message: "previous"
            }
        })
    }, e.prototype.preventDefault = function (i) {
        i.preventDefault()
    }, e.prototype.progressiveLazyLoad = function (e) {
        e = e || 1;
        var t, o, s, n, r, l = this,
            d = i("img[data-lazy]", l.$slider);
        d.length ? (t = d.first(), o = t.attr("data-lazy"), s = t.attr("data-srcset"), n = t.attr("data-sizes") || l.$slider.attr("data-sizes"), r = document.createElement("img"), r.onload = function () {
            s && (t.attr("srcset", s), n && t.attr("sizes", n)), t.attr("src", o).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"), l.options.adaptiveHeight === !0 && l.setPosition(), l.$slider.trigger("lazyLoaded", [l, t, o]), l.progressiveLazyLoad()
        }, r.onerror = function () {
            e < 3 ? setTimeout(function () {
                l.progressiveLazyLoad(e + 1)
            }, 500) : (t.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"), l.$slider.trigger("lazyLoadError", [l, t, o]), l.progressiveLazyLoad())
        }, r.src = o) : l.$slider.trigger("allImagesLoaded", [l])
    }, e.prototype.refresh = function (e) {
        var t, o, s = this;
        o = s.slideCount - s.options.slidesToShow, !s.options.infinite && s.currentSlide > o && (s.currentSlide = o), s.slideCount <= s.options.slidesToShow && (s.currentSlide = 0), t = s.currentSlide, s.destroy(!0), i.extend(s, s.initials, {
            currentSlide: t
        }), s.init(), e || s.changeSlide({
            data: {
                message: "index",
                index: t
            }
        }, !1)
    }, e.prototype.registerBreakpoints = function () {
        var e, t, o, s = this,
            n = s.options.responsive || null;
        if ("array" === i.type(n) && n.length) {
            s.respondTo = s.options.respondTo || "window";
            for (e in n)
                if (o = s.breakpoints.length - 1, n.hasOwnProperty(e)) {
                    for (t = n[e].breakpoint; o >= 0;) s.breakpoints[o] && s.breakpoints[o] === t && s.breakpoints.splice(o, 1), o--;
                    s.breakpoints.push(t), s.breakpointSettings[t] = n[e].settings
                } s.breakpoints.sort(function (i, e) {
                    return s.options.mobileFirst ? i - e : e - i
                })
        }
    }, e.prototype.reinit = function () {
        var e = this;
        e.$slides = e.$slideTrack.children(e.options.slide).addClass("slick-slide"), e.slideCount = e.$slides.length, e.currentSlide >= e.slideCount && 0 !== e.currentSlide && (e.currentSlide = e.currentSlide - e.options.slidesToScroll), e.slideCount <= e.options.slidesToShow && (e.currentSlide = 0), e.registerBreakpoints(), e.setProps(), e.setupInfinite(), e.buildArrows(), e.updateArrows(), e.initArrowEvents(), e.buildDots(), e.updateDots(), e.initDotEvents(), e.cleanUpSlideEvents(), e.initSlideEvents(), e.checkResponsive(!1, !0), e.options.focusOnSelect === !0 && i(e.$slideTrack).children().on("click.slick", e.selectHandler), e.setSlideClasses("number" == typeof e.currentSlide ? e.currentSlide : 0), e.setPosition(), e.focusHandler(), e.paused = !e.options.autoplay, e.autoPlay(), e.$slider.trigger("reInit", [e])
    }, e.prototype.resize = function () {
        var e = this;
        i(window).width() !== e.windowWidth && (clearTimeout(e.windowDelay), e.windowDelay = window.setTimeout(function () {
            e.windowWidth = i(window).width(), e.checkResponsive(), e.unslicked || e.setPosition()
        }, 50))
    }, e.prototype.removeSlide = e.prototype.slickRemove = function (i, e, t) {
        var o = this;
        return "boolean" == typeof i ? (e = i, i = e === !0 ? 0 : o.slideCount - 1) : i = e === !0 ? --i : i, !(o.slideCount < 1 || i < 0 || i > o.slideCount - 1) && (o.unload(), t === !0 ? o.$slideTrack.children().remove() : o.$slideTrack.children(this.options.slide).eq(i).remove(), o.$slides = o.$slideTrack.children(this.options.slide), o.$slideTrack.children(this.options.slide).detach(), o.$slideTrack.append(o.$slides), o.$slidesCache = o.$slides, void o.reinit())
    }, e.prototype.setCSS = function (i) {
        var e, t, o = this,
            s = {};
        o.options.rtl === !0 && (i = -i), e = "left" == o.positionProp ? Math.ceil(i) + "px" : "0px", t = "top" == o.positionProp ? Math.ceil(i) + "px" : "0px", s[o.positionProp] = i, o.transformsEnabled === !1 ? o.$slideTrack.css(s) : (s = {}, o.cssTransitions === !1 ? (s[o.animType] = "translate(" + e + ", " + t + ")", o.$slideTrack.css(s)) : (s[o.animType] = "translate3d(" + e + ", " + t + ", 0px)", o.$slideTrack.css(s)))
    }, e.prototype.setDimensions = function () {
        var i = this;
        i.options.vertical === !1 ? i.options.centerMode === !0 && i.$list.css({
            padding: "0px " + i.options.centerPadding
        }) : (i.$list.height(i.$slides.first().outerHeight(!0) * i.options.slidesToShow), i.options.centerMode === !0 && i.$list.css({
            padding: i.options.centerPadding + " 0px"
        })), i.listWidth = i.$list.width(), i.listHeight = i.$list.height(), i.options.vertical === !1 && i.options.variableWidth === !1 ? (i.slideWidth = Math.ceil(i.listWidth / i.options.slidesToShow), i.$slideTrack.width(Math.ceil(i.slideWidth * i.$slideTrack.children(".slick-slide").length))) : i.options.variableWidth === !0 ? i.$slideTrack.width(5e3 * i.slideCount) : (i.slideWidth = Math.ceil(i.listWidth), i.$slideTrack.height(Math.ceil(i.$slides.first().outerHeight(!0) * i.$slideTrack.children(".slick-slide").length)));
        var e = i.$slides.first().outerWidth(!0) - i.$slides.first().width();
        i.options.variableWidth === !1 && i.$slideTrack.children(".slick-slide").width(i.slideWidth - e)
    }, e.prototype.setFade = function () {
        var e, t = this;
        t.$slides.each(function (o, s) {
            e = t.slideWidth * o * -1, t.options.rtl === !0 ? i(s).css({
                position: "relative",
                right: e,
                top: 0,
                zIndex: t.options.zIndex - 2,
                opacity: 0
            }) : i(s).css({
                position: "relative",
                left: e,
                top: 0,
                zIndex: t.options.zIndex - 2,
                opacity: 0
            })
        }), t.$slides.eq(t.currentSlide).css({
            zIndex: t.options.zIndex - 1,
            opacity: 1
        })
    }, e.prototype.setHeight = function () {
        var i = this;
        if (1 === i.options.slidesToShow && i.options.adaptiveHeight === !0 && i.options.vertical === !1) {
            var e = i.$slides.eq(i.currentSlide).outerHeight(!0);
            i.$list.css("height", e)
        }
    }, e.prototype.setOption = e.prototype.slickSetOption = function () {
        var e, t, o, s, n, r = this,
            l = !1;
        if ("object" === i.type(arguments[0]) ? (o = arguments[0], l = arguments[1], n = "multiple") : "string" === i.type(arguments[0]) && (o = arguments[0], s = arguments[1], l = arguments[2], "responsive" === arguments[0] && "array" === i.type(arguments[1]) ? n = "responsive" : "undefined" != typeof arguments[1] && (n = "single")), "single" === n) r.options[o] = s;
        else if ("multiple" === n) i.each(o, function (i, e) {
            r.options[i] = e
        });
        else if ("responsive" === n)
            for (t in s)
                if ("array" !== i.type(r.options.responsive)) r.options.responsive = [s[t]];
                else {
                    for (e = r.options.responsive.length - 1; e >= 0;) r.options.responsive[e].breakpoint === s[t].breakpoint && r.options.responsive.splice(e, 1), e--;
                    r.options.responsive.push(s[t])
                } l && (r.unload(), r.reinit())
    }, e.prototype.setPosition = function () {
        var i = this;
        i.setDimensions(), i.setHeight(), i.options.fade === !1 ? i.setCSS(i.getLeft(i.currentSlide)) : i.setFade(), i.$slider.trigger("setPosition", [i])
    }, e.prototype.setProps = function () {
        var i = this,
            e = document.body.style;
        i.positionProp = i.options.vertical === !0 ? "top" : "left",
            "top" === i.positionProp ? i.$slider.addClass("slick-vertical") : i.$slider.removeClass("slick-vertical"), void 0 === e.WebkitTransition && void 0 === e.MozTransition && void 0 === e.msTransition || i.options.useCSS === !0 && (i.cssTransitions = !0), i.options.fade && ("number" == typeof i.options.zIndex ? i.options.zIndex < 3 && (i.options.zIndex = 3) : i.options.zIndex = i.defaults.zIndex), void 0 !== e.OTransform && (i.animType = "OTransform", i.transformType = "-o-transform", i.transitionType = "OTransition", void 0 === e.perspectiveProperty && void 0 === e.webkitPerspective && (i.animType = !1)), void 0 !== e.MozTransform && (i.animType = "MozTransform", i.transformType = "-moz-transform", i.transitionType = "MozTransition", void 0 === e.perspectiveProperty && void 0 === e.MozPerspective && (i.animType = !1)), void 0 !== e.webkitTransform && (i.animType = "webkitTransform", i.transformType = "-webkit-transform", i.transitionType = "webkitTransition", void 0 === e.perspectiveProperty && void 0 === e.webkitPerspective && (i.animType = !1)), void 0 !== e.msTransform && (i.animType = "msTransform", i.transformType = "-ms-transform", i.transitionType = "msTransition", void 0 === e.msTransform && (i.animType = !1)), void 0 !== e.transform && i.animType !== !1 && (i.animType = "transform", i.transformType = "transform", i.transitionType = "transition"), i.transformsEnabled = i.options.useTransform && null !== i.animType && i.animType !== !1
    }, e.prototype.setSlideClasses = function (i) {
        var e, t, o, s, n = this;
        if (t = n.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden", "true"), n.$slides.eq(i).addClass("slick-current"), n.options.centerMode === !0) {
            var r = n.options.slidesToShow % 2 === 0 ? 1 : 0;
            e = Math.floor(n.options.slidesToShow / 2), n.options.infinite === !0 && (i >= e && i <= n.slideCount - 1 - e ? n.$slides.slice(i - e + r, i + e + 1).addClass("slick-active").attr("aria-hidden", "false") : (o = n.options.slidesToShow + i, t.slice(o - e + 1 + r, o + e + 2).addClass("slick-active").attr("aria-hidden", "false")), 0 === i ? t.eq(t.length - 1 - n.options.slidesToShow).addClass("slick-center") : i === n.slideCount - 1 && t.eq(n.options.slidesToShow).addClass("slick-center")), n.$slides.eq(i).addClass("slick-center")
        } else i >= 0 && i <= n.slideCount - n.options.slidesToShow ? n.$slides.slice(i, i + n.options.slidesToShow).addClass("slick-active").attr("aria-hidden", "false") : t.length <= n.options.slidesToShow ? t.addClass("slick-active").attr("aria-hidden", "false") : (s = n.slideCount % n.options.slidesToShow, o = n.options.infinite === !0 ? n.options.slidesToShow + i : i, n.options.slidesToShow == n.options.slidesToScroll && n.slideCount - i < n.options.slidesToShow ? t.slice(o - (n.options.slidesToShow - s), o + s).addClass("slick-active").attr("aria-hidden", "false") : t.slice(o, o + n.options.slidesToShow).addClass("slick-active").attr("aria-hidden", "false"));
        "ondemand" !== n.options.lazyLoad && "anticipated" !== n.options.lazyLoad || n.lazyLoad()
    }, e.prototype.setupInfinite = function () {
        var e, t, o, s = this;
        if (s.options.fade === !0 && (s.options.centerMode = !1), s.options.infinite === !0 && s.options.fade === !1 && (t = null, s.slideCount > s.options.slidesToShow)) {
            for (o = s.options.centerMode === !0 ? s.options.slidesToShow + 1 : s.options.slidesToShow, e = s.slideCount; e > s.slideCount - o; e -= 1) t = e - 1, i(s.$slides[t]).clone(!0).attr("id", "").attr("data-slick-index", t - s.slideCount).prependTo(s.$slideTrack).addClass("slick-cloned");
            for (e = 0; e < o + s.slideCount; e += 1) t = e, i(s.$slides[t]).clone(!0).attr("id", "").attr("data-slick-index", t + s.slideCount).appendTo(s.$slideTrack).addClass("slick-cloned");
            s.$slideTrack.find(".slick-cloned").find("[id]").each(function () {
                i(this).attr("id", "")
            })
        }
    }, e.prototype.interrupt = function (i) {
        var e = this;
        i || e.autoPlay(), e.interrupted = i
    }, e.prototype.selectHandler = function (e) {
        var t = this,
            o = i(e.target).is(".slick-slide") ? i(e.target) : i(e.target).parents(".slick-slide"),
            s = parseInt(o.attr("data-slick-index"));
        return s || (s = 0), t.slideCount <= t.options.slidesToShow ? void t.slideHandler(s, !1, !0) : void t.slideHandler(s)
    }, e.prototype.slideHandler = function (i, e, t) {
        var o, s, n, r, l, d = null,
            a = this;
        if (e = e || !1, !(a.animating === !0 && a.options.waitForAnimate === !0 || a.options.fade === !0 && a.currentSlide === i)) return e === !1 && a.asNavFor(i), o = i, d = a.getLeft(o), r = a.getLeft(a.currentSlide), a.currentLeft = null === a.swipeLeft ? r : a.swipeLeft, a.options.infinite === !1 && a.options.centerMode === !1 && (i < 0 || i > a.getDotCount() * a.options.slidesToScroll) ? void (a.options.fade === !1 && (o = a.currentSlide, t !== !0 && a.slideCount > a.options.slidesToShow ? a.animateSlide(r, function () {
            a.postSlide(o)
        }) : a.postSlide(o))) : a.options.infinite === !1 && a.options.centerMode === !0 && (i < 0 || i > a.slideCount - a.options.slidesToScroll) ? void (a.options.fade === !1 && (o = a.currentSlide, t !== !0 && a.slideCount > a.options.slidesToShow ? a.animateSlide(r, function () {
            a.postSlide(o)
        }) : a.postSlide(o))) : (a.options.autoplay && clearInterval(a.autoPlayTimer), s = o < 0 ? a.slideCount % a.options.slidesToScroll !== 0 ? a.slideCount - a.slideCount % a.options.slidesToScroll : a.slideCount + o : o >= a.slideCount ? a.slideCount % a.options.slidesToScroll !== 0 ? 0 : o - a.slideCount : o, a.animating = !0, a.$slider.trigger("beforeChange", [a, a.currentSlide, s]), n = a.currentSlide, a.currentSlide = s, a.setSlideClasses(a.currentSlide), a.options.asNavFor && (l = a.getNavTarget(), l = l.slick("getSlick"), l.slideCount <= l.options.slidesToShow && l.setSlideClasses(a.currentSlide)), a.updateDots(), a.updateArrows(), a.options.fade === !0 ? (t !== !0 ? (a.fadeSlideOut(n), a.fadeSlide(s, function () {
            a.postSlide(s)
        })) : a.postSlide(s), void a.animateHeight()) : void (t !== !0 && a.slideCount > a.options.slidesToShow ? a.animateSlide(d, function () {
            a.postSlide(s)
        }) : a.postSlide(s)))
    }, e.prototype.startLoad = function () {
        var i = this;
        i.options.arrows === !0 && i.slideCount > i.options.slidesToShow && (i.$prevArrow.hide(), i.$nextArrow.hide()), i.options.dots === !0 && i.slideCount > i.options.slidesToShow && i.$dots.hide(), i.$slider.addClass("slick-loading")
    }, e.prototype.swipeDirection = function () {
        var i, e, t, o, s = this;
        return i = s.touchObject.startX - s.touchObject.curX, e = s.touchObject.startY - s.touchObject.curY, t = Math.atan2(e, i), o = Math.round(180 * t / Math.PI), o < 0 && (o = 360 - Math.abs(o)), o <= 45 && o >= 0 ? s.options.rtl === !1 ? "left" : "right" : o <= 360 && o >= 315 ? s.options.rtl === !1 ? "left" : "right" : o >= 135 && o <= 225 ? s.options.rtl === !1 ? "right" : "left" : s.options.verticalSwiping === !0 ? o >= 35 && o <= 135 ? "down" : "up" : "vertical"
    }, e.prototype.swipeEnd = function (i) {
        var e, t, o = this;
        if (o.dragging = !1, o.swiping = !1, o.scrolling) return o.scrolling = !1, !1;
        if (o.interrupted = !1, o.shouldClick = !(o.touchObject.swipeLength > 10), void 0 === o.touchObject.curX) return !1;
        if (o.touchObject.edgeHit === !0 && o.$slider.trigger("edge", [o, o.swipeDirection()]), o.touchObject.swipeLength >= o.touchObject.minSwipe) {
            switch (t = o.swipeDirection()) {
                case "left":
                case "down":
                    e = o.options.swipeToSlide ? o.checkNavigable(o.currentSlide + o.getSlideCount()) : o.currentSlide + o.getSlideCount(), o.currentDirection = 0;
                    break;
                case "right":
                case "up":
                    e = o.options.swipeToSlide ? o.checkNavigable(o.currentSlide - o.getSlideCount()) : o.currentSlide - o.getSlideCount(), o.currentDirection = 1
            }
            "vertical" != t && (o.slideHandler(e), o.touchObject = {}, o.$slider.trigger("swipe", [o, t]))
        } else o.touchObject.startX !== o.touchObject.curX && (o.slideHandler(o.currentSlide), o.touchObject = {})
    }, e.prototype.swipeHandler = function (i) {
        var e = this;
        if (!(e.options.swipe === !1 || "ontouchend" in document && e.options.swipe === !1 || e.options.draggable === !1 && i.type.indexOf("mouse") !== -1)) switch (e.touchObject.fingerCount = i.originalEvent && void 0 !== i.originalEvent.touches ? i.originalEvent.touches.length : 1, e.touchObject.minSwipe = e.listWidth / e.options.touchThreshold, e.options.verticalSwiping === !0 && (e.touchObject.minSwipe = e.listHeight / e.options.touchThreshold), i.data.action) {
            case "start":
                e.swipeStart(i);
                break;
            case "move":
                e.swipeMove(i);
                break;
            case "end":
                e.swipeEnd(i)
        }
    }, e.prototype.swipeMove = function (i) {
        var e, t, o, s, n, r, l = this;
        return n = void 0 !== i.originalEvent ? i.originalEvent.touches : null, !(!l.dragging || l.scrolling || n && 1 !== n.length) && (e = l.getLeft(l.currentSlide), l.touchObject.curX = void 0 !== n ? n[0].pageX : i.clientX, l.touchObject.curY = void 0 !== n ? n[0].pageY : i.clientY, l.touchObject.swipeLength = Math.round(Math.sqrt(Math.pow(l.touchObject.curX - l.touchObject.startX, 2))), r = Math.round(Math.sqrt(Math.pow(l.touchObject.curY - l.touchObject.startY, 2))), !l.options.verticalSwiping && !l.swiping && r > 4 ? (l.scrolling = !0, !1) : (l.options.verticalSwiping === !0 && (l.touchObject.swipeLength = r), t = l.swipeDirection(), void 0 !== i.originalEvent && l.touchObject.swipeLength > 4 && (l.swiping = !0, i.preventDefault()), s = (l.options.rtl === !1 ? 1 : -1) * (l.touchObject.curX > l.touchObject.startX ? 1 : -1), l.options.verticalSwiping === !0 && (s = l.touchObject.curY > l.touchObject.startY ? 1 : -1), o = l.touchObject.swipeLength, l.touchObject.edgeHit = !1, l.options.infinite === !1 && (0 === l.currentSlide && "right" === t || l.currentSlide >= l.getDotCount() && "left" === t) && (o = l.touchObject.swipeLength * l.options.edgeFriction, l.touchObject.edgeHit = !0), l.options.vertical === !1 ? l.swipeLeft = e + o * s : l.swipeLeft = e + o * (l.$list.height() / l.listWidth) * s, l.options.verticalSwiping === !0 && (l.swipeLeft = e + o * s), l.options.fade !== !0 && l.options.touchMove !== !1 && (l.animating === !0 ? (l.swipeLeft = null, !1) : void l.setCSS(l.swipeLeft))))
    }, e.prototype.swipeStart = function (i) {
        var e, t = this;
        return t.interrupted = !0, 1 !== t.touchObject.fingerCount || t.slideCount <= t.options.slidesToShow ? (t.touchObject = {}, !1) : (void 0 !== i.originalEvent && void 0 !== i.originalEvent.touches && (e = i.originalEvent.touches[0]), t.touchObject.startX = t.touchObject.curX = void 0 !== e ? e.pageX : i.clientX, t.touchObject.startY = t.touchObject.curY = void 0 !== e ? e.pageY : i.clientY, void (t.dragging = !0))
    }, e.prototype.unfilterSlides = e.prototype.slickUnfilter = function () {
        var i = this;
        null !== i.$slidesCache && (i.unload(), i.$slideTrack.children(this.options.slide).detach(), i.$slidesCache.appendTo(i.$slideTrack), i.reinit())
    }, e.prototype.unload = function () {
        var e = this;
        i(".slick-cloned", e.$slider).remove(), e.$dots && e.$dots.remove(), e.$prevArrow && e.htmlExpr.test(e.options.prevArrow) && e.$prevArrow.remove(), e.$nextArrow && e.htmlExpr.test(e.options.nextArrow) && e.$nextArrow.remove(), e.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden", "true").css("width", "")
    }, e.prototype.unslick = function (i) {
        var e = this;
        e.$slider.trigger("unslick", [e, i]), e.destroy()
    }, e.prototype.updateArrows = function () {
        var i, e = this;
        i = Math.floor(e.options.slidesToShow / 2), e.options.arrows === !0 && e.slideCount > e.options.slidesToShow && !e.options.infinite && (e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled", "false"), e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled", "false"), 0 === e.currentSlide ? (e.$prevArrow.addClass("slick-disabled").attr("aria-disabled", "true"), e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled", "false")) : e.currentSlide >= e.slideCount - e.options.slidesToShow && e.options.centerMode === !1 ? (e.$nextArrow.addClass("slick-disabled").attr("aria-disabled", "true"), e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled", "false")) : e.currentSlide >= e.slideCount - 1 && e.options.centerMode === !0 && (e.$nextArrow.addClass("slick-disabled").attr("aria-disabled", "true"), e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled", "false")))
    }, e.prototype.updateDots = function () {
        var i = this;
        null !== i.$dots && (i.$dots.find("li").removeClass("slick-active").end(), i.$dots.find("li").eq(Math.floor(i.currentSlide / i.options.slidesToScroll)).addClass("slick-active"));
        if (i.options.customOnChange !== null) {
            i.options.customOnChange.call();
        }
    }, e.prototype.visibility = function () {
        var i = this;
        i.options.autoplay && (document[i.hidden] ? i.interrupted = !0 : i.interrupted = !1)
    }, i.fn.slick = function () {
        var i, t, o = this,
            s = arguments[0],
            n = Array.prototype.slice.call(arguments, 1),
            r = o.length;
        for (i = 0; i < r; i++)
            if ("object" == typeof s || "undefined" == typeof s ? o[i].slick = new e(o[i], s) : t = o[i].slick[s].apply(o[i].slick, n), "undefined" != typeof t) return t;
        return o
    }
});
(function ($) {
    $.fn.LineBreakOverride = function () {
        $(this).on("keypress", function (e) {
            if (e.which == 13) {
                if (window.getSelection) {
                    var selection = window.getSelection(),
                        range = selection.getRangeAt(0),
                        br = document.createElement("br");
                    range.deleteContents();
                    range.insertNode(br);
                    range.setStartAfter(br);
                    range.setEndAfter(br);
                    range.collapse(false);
                    selection.removeAllRanges();
                    selection.addRange(range);
                    return false;
                }
            }
        });
    };
    $.TextEditor = function (op, $Parent) {
        var option = $.extend({
            isThemeColor: false,
        }, op);
        var EditorMgr = {
            init: function () {
                $Parent.each(function () {
                    try {
                        let $this = $(this);
                        EditorMgr.createToolBar($this);
                        EditorMgr.toolBarEvent($this);
                        EditorMgr.documentEvent($this);
                    } catch (ex) {
                        console.log(ex);
                    }
                });
            },
            createToolBar: function (parent) {
                var hasToolBar = parent.attr('data-texteditor');
                if (typeof fontCollectionBasics !== "undefined")
                    EditorMgr.fontCollectionBasics = $.extend(EditorMgr.fontCollectionBasics, fontCollectionBasics);
                if (typeof hasToolBar == 'undefined' || hasToolBar.toLowerCase() == 'false') {
                    let DocText = '';
                    let clases = '';
                    let styles = '';
                    if (parent.find('.documenttext').length > 0) {
                        let $DocText = parent.find('.documenttext');
                        DocText = $DocText.html();
                        clases = $DocText.attr('class');
                        styles = $DocText.attr('style');
                    }

                    parent.html(EditorMgr.toolBarDom());
                    let $DocText = parent.find('.documenttext');
                    $DocText.html(DocText);
                    $DocText.addClass(clases);
                    $DocText.attr('style', styles);

                }
                parent.find('.documenttext').focus();
                //parent.find('.documenttext').LineBreakOverride();

                var basicFontDOM = '';

                var keys = Object.keys(EditorMgr.fontCollectionBasics);
                var len = keys.length;
                for (var k = 0; k < len; k++) {
                    basicFontDOM += '<option class="f-weight-400" style="font-family:' + keys[k] + ';" value="' + keys[k].toLowerCase() + '" >' + EditorMgr.fontCollectionBasics[keys[k]].Text + '</option>';
                }
                parent.find('.cFontFamily').html(basicFontDOM);
                EditorMgr.setFontWeightDom(parent.find('.cFontFamily').val(), parent.find('.cFontWeight'));


                var colorPickerOption = {
                    customBG: '#222',
                    margin: '4px -2px 0',
                    doRender: 'div div',
                    buildCallback: function ($elm) {
                        EditorMgr.helper.buildColorPicker($elm, this);
                    },
                    renderCallback: function ($elm, toggled) {
                        EditorMgr.helper.restoreSelection(range);
                        var objColor = EditorMgr.helper.renderCallBackColor(this);
                        EditorMgr.changeTextColor(EditorMgr.helper.rgb2hex(objColor.bgColor));

                    },
                };
                parent.find('.doceditcolor').colorPicker(colorPickerOption);
                /*create slider*/
                var docEdit = parent.find('.documenttext');

                function lineHeightChange(space, $parEle) {
                    docEdit.css('line-height', '');
                    docEdit.find('*').css('line-height', '');
                    let dAlfa = EditorMgr.helper.deviceAlpha();
                    EditorMgr.helper.replaceClassByPattern(docEdit, 'Lh-[0-9]{1,3}', 'Lh-' + space);
                }
                var $slider = parent.find('.LineHeightSizeC');
                var $handler = $slider.find('.ui-slider-handle');

                $handler.text(EditorMgr.helper.getValueByClassName(docEdit, 'Lh-[0-9]{1,3}', 'Lh-'));
                EditorMgr.helper.createSlider($slider, $handler, 10, 100, $handler.text().replace('px', ''), lineHeightChange, parent);

                function letterSpaceChange(space, $parEle) {
                    if (space < 0)
                        space = 'n' + space;
                    docEdit.find('*').css('letter-spacing', '');
                    EditorMgr.helper.replaceClassByPattern(docEdit, 'LtrSpc-n-[0-9]{1,3}', '');
                    EditorMgr.helper.replaceClassByPattern(docEdit, 'LtrSpc-[0-9]{1,3}', 'LtrSpc-' + space);
                }
                $slider = parent.find('.LetterSpaceSizec');
                $handler = $slider.find('.ui-slider-handle');
                $handler.text(docEdit.css('letter-spacing'));
                EditorMgr.helper.createSlider($slider, $handler, -10, 10, $handler.text().replace('px', ''), letterSpaceChange, parent);
                parent.attr('data-texteditor', true);

            },
            toolBarEvent: function (parent) {
                $('.text-editor-toolsbar').hide();
                function hideDropChild() {
                    $('.has-drop-child').find('button').removeClass('active').attr('data-clicked', false);
                    $('.toobar-drop-element').css('display', 'none');
                }
                parent.find('.op-options').hide();
                parent.find('.text-editor-toolsbar').off('click').on('click', function () {
                    $('.text-editor-toolsbar').hide();
                    $(this).show();
                });
                parent.find('.alloptionC').off('click').on('click', function () {
                    var $this = $(this);
                    if ($this.hasClass('rotate')) {
                        $this.removeClass('rotate');
                        $this.attr('title', 'Expand Tools');
                        $('.op-options').hide();
                    }
                    else {
                        $this.addClass('rotate');
                        $('.op-options').show();
                        $this.attr('title', ' Shrink Tools');
                    }

                });
                parent.find('.has-drop-child').find('button').off('click').on('click', function () {
                    var $this = $(this);
                    if ($this.attr('data-clicked') == 'true') {
                        $this.attr('data-clicked', false);
                        $this.next('.toobar-drop-element').hide();
                    } else {
                        $this.attr('data-clicked', true);
                        $('.has-drop-child').find('button').removeClass('active');
                        $('.toobar-drop-element').hide();
                        $this.next('.toobar-drop-element').css('display', 'block');
                    }
                });
                if (typeof jQuery.ui !== 'undefined') {
                    parent.find('.text-editor-toolsbar').draggable(
                        {
                            handle: ' .dragbutton',
                            containment: '.WebBuilderWrapper',
                        }
                    );
                }

                parent.find('.createlinkC').off('focusout').on('focusout', function () {
                    EditorMgr.createLink(parent);
                });

                // Start of internal page section
                parent.find("#linkType").off("change").on("change", function () {
                    let isInternal = $(this).val() === "int";
                    $(".createlinkC").toggle(!isInternal);
                    $(".internalPagesCWrap").toggle(isInternal);
                    if (isInternal) {
                        $(".internalPagesC").trigger("change");
                    }
                });
                parent.find(".internalPagesC").off("change").on("change", function () {
                    range = EditorMgr.helper.saveSelection();
                    let url = SageFrameHostURL + '/' + $(this).find('option:selected').text().replaceAll(" ", "-");
                    parent.find('.createlinkC').val(url);
                    EditorMgr.createLink(parent);
                });
                // End of internatl page section

                parent.find('.createlinkC').off('keyup').on('keyup', function () {
                    if ($(this).val() == '')
                        EditorMgr.removeLink(range.endContainer.parentElement);
                });
                parent.find('.boldC').off('click').on('click', function () {
                    $(this).toggleClass('active');
                    hideDropChild();
                    EditorMgr.createBold(parent);
                });
                parent.find('.underlineC').off('click').on('click', function () {
                    $(this).toggleClass('active');
                    hideDropChild();
                    EditorMgr.createUnderline(parent);

                });
                parent.find('.btn-hline').off('click').on('click', function () {
                    hideDropChild();
                    range.insertNode(document.createElement('hr'));
                });

                parent.find('.italicC').off('click').on('click', function () {
                    $(this).toggleClass('active');
                    hideDropChild();
                    EditorMgr.createItalic(parent);
                });
                //parent.find('.fntIncDec').off().on('click', function () {
                //    $('.fontValueC').text($(window.getSelection().anchorNode).css('font-size'));
                //});
                parent.find('.minusC').off('click').on('click', function () {
                    EditorMgr.changeFontSize(parent, $(this));
                });
                parent.find('.plusC').off('click').on('click', function () {
                    EditorMgr.changeFontSize(parent, $(this));
                });
                parent.find('.ollistC').off('click').on('click', function () {
                    EditorMgr.createList('insertorderedlist', $(this));
                });
                parent.find('.ullistC').off('click').on('click', function () {
                    EditorMgr.createList('insertunorderedlist', $(this));
                });
                parent.find('.formatblockC').off('click').on('click', function () {
                    hideDropChild();
                    EditorMgr.createBlockQuote($(this));
                });
                parent.find('.tool-align').off('click').on('click', 'span', function () {
                    EditorMgr.changeAlignment($(this).attr('title'));
                });
                parent.find('.cFontFamily').off('click').on('change', function () {
                    //fontWeight($this.val());
                    EditorMgr.changeFontFace(parent, $(this).val());
                });
                parent.find('.cFontWeight').off('click').on('change', function () {
                    EditorMgr.changeFontWeight(parent, $(this).val());
                });
                parent.find('.cFontCase').off('click').on('change', function () {
                    EditorMgr.changeTextTransform(parent, $(this).val());
                });
                /*parent.find('.tindentC').off().on('click', function () {
                    EditorMgr.helper.restoreSelection(range);
                    document.execCommand('indent', false, null);
                });
                parent.find('.toutdentC').off().on('click', function () {
                    EditorMgr.helper.restoreSelection(range);
                    document.execCommand('outdent', false, null);
                });*/
                //parent.find('.has-drop-child').find('span').on('click', function () {
                //                      range = saveSelection();
                //    $(this).parent().css('display', 'block');
                //});
            },
            createLink: function (parentEle) {
                EditorMgr.helper.restoreSelection(range);
                if (!range.collapsed) {
                    var url = '';
                    url = parentEle.find('.createlinkC').val();
                    if (url.includes('http://')) {
                        url = url.replace(/http:\/\/http:\/\//, "http://");
                    }
                    else if (url.includes('https://')) {
                        url = url.replace(/https:\/\/https:\/\//, "https://");
                    }
                    else if (url == "http://" || url == "https://") {
                        url = '';
                    }
                    else {
                        url = "https://" + parentEle.find('.createlinkC').val();
                    }
                    if (url == "https://" || url == '') {
                        EditorMgr.removeLink(range.endContainer.parentElement);
                    } else {
                        document.execCommand('createlink', false, url);
                        var $targetvalue = parentEle.find('.targetTypeC  option:selected').attr('title');
                        let items = EditorMgr.getSelectedNode();
                        $.each(items, function () {
                            this.target = $targetvalue;
                            this.className = "rich-link";
                            this.dataset.linktype = parentEle.find("#linkType").val();
                            this.dataset.pageid = parentEle.find(".internalPagesC").val();
                        });
                        $('.createlinkC').val('');
                        $('.dropElement').hide();
                        parentEle.prev().removeClass('active');
                    }
                }
            },
            removeLink: function (ele) {
                if (ele.tagName == 'A') {
                    ele.replaceWith(ele.innerHTML);
                }
                if (ele.tagName != 'P' && ele.parentElement != null) {
                    EditorMgr.removeLink(ele.parentElement);
                }
            },
            createBold: function (parent) {
                document.execCommand('bold');
                range = EditorMgr.helper.saveSelection();
            },
            createItalic: function (parent) {
                document.execCommand('italic', false, null);
                //let items = EditorMgr.getSelectedNode();
                //$.each(items, function () {
                //    this.style.display = 'inline';
                //});
                range = EditorMgr.helper.saveSelection();
                //if (flagu == true) {
                //    selection.anchorNode.parentElement.style.textDecoration = 'underline';
                //}
            },
            createUnderline: function (parent) {
                document.execCommand('underline', false, null);
                range = EditorMgr.helper.saveSelection();
            },
            changeFontSize: function (parent, $this) {
                EditorMgr.helper.restoreSelection(range);

                var font = '';
                if ($this.hasClass('plusC')) {
                    font = $this.prev().text().split('px')[0];
                    if (font < 150)
                        font++;
                    $this.prev().text(font + "px");
                }
                else {
                    font = $this.next().text().split('px')[0];
                    if (font > 10)
                        font--;
                    $this.next().text(font + "px");
                }
                if (!range.collapsed)
                    EditorMgr.helper.applyfontStyle(parent, 'Fs-' + font, '', '');


            },
            changeFontFace: function (parent, font) {

                EditorMgr.setFontWeightDom(parent.find('.cFontFamily').val(), parent.find('.cFontWeight'));

                document.execCommand('fontName', false, font);

            },
            changeFontWeight: function (parent, weight) {
                if (!range.collapsed)
                    EditorMgr.helper.applyfontStyle(parent, '', weight, '');
            },
            changeTextColor: function (color) {
                document.execCommand('styleWithCSS', false, true);
                document.execCommand("forecolor", false, color);
                var ele = $(range.endContainer.parentElement).parents('ul').eq(0);
                if (ele.length == 0)
                    ele = $(range.endContainer.parentElement).parents('ol').eq(0);
                if (ele.length > 0)
                    ele.attr('style', ele.attr('data-style'));
                range = EditorMgr.helper.saveSelection();
            },
            changeTextTransform: function (parent, value) {
                if (!range.collapsed)
                    EditorMgr.helper.applyfontStyle(parent, '', '', value);
            },

            createList: function (type, $this) {
                EditorMgr.helper.restoreSelection(range);
                document.execCommand(type);
                var selection = document.getSelection();
                $this.parent().prev().removeClass('active');
                var crntTools = $this.parent().parent().parent().parent();
                var rcntTag = selection.anchorNode.parentElement.parentElement;
                if ($(rcntTag).parents('.documenttext').length > 0) {
                    rcntTag.style.fontSize = crntTools.find('.fontValueC').text();
                    rcntTag.style.fontWeight = crntTools.find('.cFontWeight').val();
                    rcntTag.style.color = crntTools.find('.DocEditorColorPicker').css('background-color');
                    $(rcntTag).css('font-family', crntTools.find('.cFontFamily').val());

                    if (rcntTag.tagName == 'UL' || rcntTag.tagName == 'OL') {
                        $(rcntTag).attr('data-style', $(rcntTag).attr('style'));
                        var parentP = rcntTag.parentElement;

                        EditorMgr.helper.changePtoDiv($(parentP));
                    }
                }
                range = EditorMgr.helper.saveSelection();

            },
            createBlockQuote: function ($this) {
                selection = document.getSelection();
                var selectquote = selection.anchorNode.parentElement;
                var qlen = $(selectquote).find('blockquote').children().length;
                if ($this.hasClass('active')) {
                    if (selectquote.tagName == 'LI' || $(selectquote).parents('li').length > 0) {
                        var blockquote = $(selectquote).parents('blockquote');
                        blockquote.replaceWith(blockquote.html());
                    } else {

                        if (qlen == 0) {
                            document.execCommand('formatBlock', false, 'p');
                            if (!$(selection.anchorNode.parentElement).hasClass('pClass')) {
                                $(selection.anchorNode.parentElement).addClass('pClass');

                            }
                            else {
                                document.execCommand('formatBlock', false, 'p');
                            }
                        }

                    }
                    $this.removeClass('active');
                }
                else {
                    document.execCommand('formatBlock', false, 'blockquote');
                    $this.addClass('active');
                }
            },
            changeAlignment: function (type) {
                EditorMgr.helper.restoreSelection(range);
                selection = document.getSelection();
                $(selection.anchorNode.parentElement).find('*').css('text-align', '');
                document.execCommand(type, false, null);
            },
            documentEvent: function (parent) {
                $(document).on('click', function (e) {
                    if (!$(e.target).parents().hasClass('documenteditorWrap') && document.getSelection().isCollapsed && !$(e.target).parents().hasClass('cp-color-picker') && !$(e.target).hasClass('cp-color-picker')) {
                        $('.text-editor-toolsbar').fadeOut(200);
                        $('.toobar-drop-element').css('display', 'none');
                        $('.has-drop-child button').attr('data-clicked', false);
                        if (!$(e.target).hasClass('color-picker-holder'))
                            $('.cp-color-picker').hide();
                    }
                });
                parent.find('.documenttext').off('click').on('click', function () {
                    range = EditorMgr.helper.saveSelection();
                    var currentToolBar = $(this).parent().find('.text-editor-toolsbar');
                    $('.text-editor-toolsbar').not(currentToolBar).hide();
                    $('.toobar-drop-element').hide();
                    $('.has-drop-child button').attr('data-clicked', false);
                    currentToolBar.css({
                        //'top': -currentToolBar.height() + 'px',
                        'top': '-40px',
                        'left': '0px'
                    });
                    currentToolBar.fadeIn(200, function () {
                        $(this).css({ 'display': 'flex' });
                    });
                    if (typeof EditorMode !== "undefined" && EditorMode === true) {
                        parent.find(".internalPagesC").html(EasyLibrary.GetPageOption());
                    }
                    EditorMgr.setToolSettingValue(range.endContainer.parentElement, true, parent.find('.text-editor-toolsbar'));
                });
                parent.find('.documenttext').off('keyup').on('keyup', function (event) {
                    range = EditorMgr.helper.saveSelection();
                    var $this = $(this);
                    var thisToolsBar = $this.parent().find('.text-editor-toolsbar');
                    $('.text-editor-toolsbar').hide();
                    $('.toobar-drop-element').hide();
                    thisToolsBar.show();
                    range = EditorMgr.helper.saveSelection();
                    if (event.keyCode == 8 || event.keyCode == 46) {
                        $this.find('blockquote span').css('background-color', '');
                        $this.find('span').css('background-color', '');
                    }
                    //if (range.startOffset == range.endOffset) {
                    //    EditorMgr.helper.applyfontStyle(parent, thisToolsBar.find('.fontValueC').text(), '', '');
                    //}
                    if (event.keyCode >= 37 && event.keyCode <= 40) {
                        EditorMgr.setToolSettingValue(range.endContainer.parentElement, true, parent.find('.text-editor-toolsbar'));
                    }
                });
                $('.cp-color-picker').on('click', function () {
                    EditorMgr.helper.restoreSelection(range);
                });
            },
            setFontWeightDom: function (fontName, slcFwt) {
                var fontWeightDOM = '';
                var weights = EditorMgr.fontCollectionBasics[fontName].weight;
                var len = weights.length;
                for (var k = 0; k < len; k++) {
                    fontWeightDOM += '<option value="' + weights[k] + '" >' + weights[k] + '</option>';
                }
                slcFwt.html(fontWeightDOM);
            },
            fontCollectionBasics: {
                "montserrat":
                {
                    "Text": "Montserrat",
                    "weight": [100, 200, 300, 400, 600, 700, 800]
                },
                "open sans":
                {
                    "Text": "Open Sans",
                    "weight": [300, 400, 600, 700, 800]
                },
                "rubik":
                {
                    "Text": "Rubik",
                    "weight": [300, 400, 500, 700, 900]
                },
                "quicksand":
                {
                    "Text": "Quick Sand",
                    "weight": [300, 400, 500, 700]
                },
                "roboto slab":
                {
                    "Text": "Roboto Slab",
                    "weight": [100, 200, 400, 700]
                },
                "kaushan script":
                {
                    "Text": "Kaushan",
                    "weight": [0]
                },
                "prata":
                {
                    "Text": "Prata",
                    "weight": [0]
                },
                "cookie":
                {
                    "Text": "Cookie",
                    "weight": [0]
                },
                "abril fatface":
                {
                    "Text": "Abril Fatface",
                    "weight": [0]
                },
                "lobster":
                {
                    "Text": "Lobster",
                    "weight": [0]
                },
                "satisfy":
                {
                    "Text": "Satisfy",
                    "weight": [0]
                },
                "poppins":
                {
                    "Text": "Poppins",
                    "weight": [100, 200, 300, 400, 500, 600, 700, 800, 900]
                },
                "raleway":
                {
                    "Text": "Raleway",
                    "weight": [100, 200, 300, 400, 500, 600, 700, 800, 900]
                },
                "oswald":
                {
                    "Text": "Oswald",
                    "weight": [200, 300, 400, 500, 600, 700]
                },
                "lato":
                {
                    "Text": "lato",
                    "weight": [100, 300, 500, 700, 900]
                },
                "playfair":
                {
                    "Text": "Playfair",
                    "weight": [400, 700, 900]
                },
                "sourcesans":
                {
                    "Text": "sourcesans",
                    "weight": [200, 300, 400, 600, 700, 900]
                },
                "merriweather":
                {
                    "Text": "Merriweather",
                    "weight": [300, 400, 700, 900]
                },
            },

            setToolSettingValue: function (ele, IsClear, activeToolbar) {
                if (ele != null) {
                    ele = $(ele);
                    if (IsClear) {

                        activeToolbar.find('.boldC,.underlineC,.italicC,.btnlinkC,.tCase,.btn-hline,.formatblockC,.ullistC,.ollistC').removeClass('active');
                        activeToolbar.find('.createlinkC').val('');
                        var style = ele.attr('style');
                        var font = ele.css('font-family').toLowerCase().replace(new RegExp('"', 'g'), '');
                        activeToolbar.find('.cFontFamily').val(font);
                        EditorMgr.setFontWeightDom(activeToolbar.find('.cFontFamily').val(), activeToolbar.find('.cFontWeight'));
                        activeToolbar.find('.cFontWeight').val($(ele).css('font-weight'));
                        if (ele.css('font-weight') == '700')
                            activeToolbar.find('.boldC').addClass('active');
                        if (ele.css('font-style') === 'italic')
                            activeToolbar.find('.italicC').addClass('active');
                        activeToolbar.find('.DocEditorColorPicker').css('background-color', $(ele).css('color'));
                        activeToolbar.find('.cFontCase').val($(ele).css('text-transform'));
                        activeToolbar.find('.fontValueC').text($(ele).css('font-size'));
                        if (ele.css('text-decoration-line') === 'underline')
                            activeToolbar.find('.underlineC').addClass('active');
                        if (typeof EditorMode !== "undefined" && EditorMode === true) {
                            $("#linkType").val("ext").trigger("change");
                        }
                    }

                    switch (ele.prop('tagName')) {
                        case 'B':
                            $('.boldC').addClass('active');
                            break;
                        case 'I':
                            $('.italicC').addClass('active');

                            break;
                        case 'U':
                            $('.underlineC').addClass('active');
                            break;
                        case 'A':
                            activeToolbar.find('.btnlinkC').addClass('active');
                            activeToolbar.find('.createlinkC').val(ele.attr('href'));
                            activeToolbar.find(".targetTypeC>option[title='" + ele.attr('target') + "']").prop("selected", true);
                            var linkType = ele.attr("data-linktype");
                            if (linkType === "int") {
                                activeToolbar.find(".createlinkC").hide();
                                activeToolbar.find(".internalPagesCWrap").show();
                            } else {
                                activeToolbar.find(".internalPagesCWrap").hide();
                                activeToolbar.find(".createlinkC").show();
                            }
                            activeToolbar.find("#linkType").val(linkType);
                            activeToolbar.find(".internalPagesC>option[value='" + ele.attr("data-pageid") + "']").prop("selected", true);
                            break;
                        //case 'P':
                        //    if ($(ele).next().hasClass('underline'))
                        //        $('.btn-hline').addClass('active');
                        //    break;
                        //case 'LI':
                        //    if ($(ele).next().hasClass('underline'))
                        //        $('.btn-hline').addClass('active');
                        //    break;
                        //case 'DIV':
                        //    if ($(ele).next().hasClass('underline'))
                        //        $('.btn-hline').addClass('active');
                        //    break;
                        case 'BLOCKQUOTE':
                            activeToolbar.find('.formatblockC').addClass('active');
                            break;
                        case 'UL':
                            EditorMgr.helper.changePtoDiv(ele.parent());
                            ele.attr('style', ele.attr('data-style'));
                            activeToolbar.find('.listC ').addClass('active');
                            break;
                        case 'OL':
                            EditorMgr.helper.changePtoDiv(ele.parent());
                            ele.attr('style', ele.attr('data-style'));
                            activeToolbar.find('.listC ').addClass('active');
                            break;

                    }

                    /*call recursivly all level of parent until p tag arrived*/
                    if (typeof ele.prop('tagName') != 'undefined' && ele.prop('tagName') != 'P' || ele.prop('tagName') == 'DIV') {
                        EditorMgr.setToolSettingValue(ele.parent(), false, activeToolbar);
                    }
                }
            },
            helper: {
                createSlider: function ($slider, $sliderHandler, min, max, initialValue, callbackFunction, $parent) {
                    $slider.slider({
                        range: "max",
                        min: min,
                        max: max,
                        value: initialValue,
                        create: function () {
                            $sliderHandler.text($(this).slider("value"));
                        },
                        slide: function (event, ui) {
                            var space = ui.value;
                            $sliderHandler.text(space);
                            if (typeof (callbackFunction) === 'function') {
                                callbackFunction(space, $parent);
                            }
                            else if (typeof (callbackFunction) === 'string') {
                                window[callbackFunction](space, $parent);
                            }
                        }
                    });
                },
                applyfontStyle: function (parent, fontsize, weight, texttransform) {
                    let thisLib = this;
                    document.execCommand('fontsize', null, 1);
                    range = EditorMgr.helper.saveSelection();
                    var activeEle = parent.find('font[size="1"]');
                    applyStyle(activeEle);
                    var affectParent = parent.find('.documenttext');
                    if (range.commonAncestorContainer.nodeName == "#text")
                        applyStyle($(range.commonAncestorContainer.parentElement));
                    affectParent.find('*').each(function () {
                        let $thisEle = $(this);
                        if ($thisEle.css('font-size') == '10px')
                            applyStyle($(this));
                        $thisEle.css('font-size', '');
                    });
                    //affectParent.find('*[data-fontrecover="1"]').each(function () {
                    //    if (fontsize == '' && typeof $(this).attr('data-fontsize') != 'undefined')
                    //        $(this).css('font-size', $(this).attr('data-fontsize'));
                    //});

                    function applyStyle(activeEle) {

                        if (activeEle.parents('.documenttext').length > 0) {
                            activeEle.removeAttr('size');
                            if (fontsize != '') {
                                thisLib.replaceClassByPattern(activeEle, 'Fs-[0-9]{1,4}', fontsize);
                                activeEle.css('font-size', '');
                                //activeEle.attr('data-fontsize', fontsize);
                                //activeEle.attr('data-fontrecover', 1);
                                activeEle.find('*').each(function () {
                                    thisLib.replaceClassByPattern($(this), 'Fs-[0-9]{1,4}', '');
                                    $(this).removeAttr('data-fontrecover');
                                    $(this).css('font-size', '');
                                    $(this).removeAttr('data-fontsize');
                                });
                            }
                            else {
                                if (typeof activeEle.attr('data-fontsize') != 'undefined') {
                                    thisLib.replaceClassByPattern(activeEle, 'Fs-[0-9]{1,4}', activeEle.attr('data-fontsize'));
                                    activeEle.css('font-size', '');
                                }
                                else
                                    activeEle.css('font-size', '');
                            }
                            if (weight !== '') {
                                activeEle.css('font-weight', weight);
                                activeEle.find('*').each(function () {
                                    $(this).css('font-weight', '');
                                });
                            }
                            if (texttransform !== '') {
                                activeEle.css('text-transform', texttransform);
                                activeEle.find('*').each(function () {
                                    $(this).css('text-transform', '');
                                });
                            }

                        }
                    }
                    //range = EditorMgr.helper.saveSelection();

                },
                changePtoDiv: function (ele) {
                    if (ele.prop('tagName') == "P") {
                        var newDiv = document.createElement("div");
                        // Copy the attributes
                        var attributes = $(ele).prop("attributes");
                        $.each(attributes, function () {
                            $(newDiv).attr(this.name, this.value);
                        });
                        newDiv.innerHTML = ele.html();
                        ele.replaceWith(newDiv);
                    }
                },
                wrapBySpan: function (ele) {
                    var selection = window.getSelection().getRangeAt(0);
                    var selectedText = selection.extractContents();
                    var span = document.createElement("span");
                    span.appendChild(selectedText);
                    selection.insertNode(span);
                    return span;
                },
                restoreSelection: function (range) {
                    if (range) {
                        if (window.getSelection) {
                            sel = window.getSelection();
                            sel.removeAllRanges();
                            sel.addRange(range);
                        } else if (document.selection && range.select) {
                            range.select();
                        }
                    }
                },
                saveSelection: function () {
                    var range = null;
                    if (window.getSelection) {
                        sel = window.getSelection();
                        if (sel.getRangeAt && sel.rangeCount) {
                            range = sel.getRangeAt(0);
                        }
                    } else if (document.selection && document.selection.createRange) {
                        range = document.selection.createRange();
                    }

                    return range;
                },
                buildColorPicker: function ($element, $thisElem) {
                    var colorInstance = $thisElem.color,
                        colorPicker = $thisElem;
                    /* original DOM
                    $element.prepend('<div class="cp-panel">' +
                        'R <input type="text" class="cp-r" /><br>' +
                        'G <input type="text" class="cp-g" /><br>' +
                        'B <input type="text" class="cp-b" /><hr>' +
                        'H <input type="text" class="cp-h" /><br>' +
                        'S <input type="text" class="cp-s" /><br>' +
                        'B <input type="text" class="cp-v" /><hr>' +
                        'Paste color code<br>' +
                        '<input type="text" class="cp-HEX" />' +
                        '</div>').on('change', 'input', function (e) {
                            var value = this.value,
                                className = this.className,
                                type = className.split('-')[1],
                                color = {};
                            color[type] = value;
                            colorInstance.setColor(type === 'HEX' ? value : color,
                                type === 'HEX' ? 'HEX' : /(?:r|g|b)/.test(type) ? 'rgb' : 'hsv');
                            colorPicker.render();
                            this.blur();
                        }); */
                    $element.append('<div class="cp-panel">' +
                        //' <input type="text" class="cp-r Dn" />' +
                        //' <input type="text" class="cp-g Dn" />' +
                        //' <input type="text" class="cp-b Dn" />' +
                        //' <input type="text" class="cp-h Dn" />' +
                        //' <input type="text" class="cp-s Dn" />' +
                        //' <input type="text" class="cp-v Dn" />' +
                        'Paste color code<br>' +
                        '<input type="text" class="cp-HEX" />' +
                        '</div>').on('change', 'input', function (e) {
                            var value = this.value,
                                className = this.className,
                                type = className.split('-')[1],
                                color = {};
                            color[type] = value;
                            colorInstance.setColor(type === 'HEX' ? value : color,
                                type === 'HEX' ? 'HEX' : /(?:r|g|b)/.test(type) ? 'rgb' : 'hsv');
                            colorPicker.render();
                            this.blur();
                        });
                    if (option.isThemeColor) {
                        $element.append(GetThemeColor());
                        $('.themeColorpicker').off().on('click', function () {
                            $('.cp-HEX').val($(this).css('background-color'));
                            $('.cp-HEX').trigger('change');
                        });
                    }

                },
                rgb2hex: function (rgb) {
                    rgb = rgb.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);
                    return (rgb && rgb.length === 4) ? "#" +
                        ("0" + parseInt(rgb[1], 10).toString(16)).slice(-2) +
                        ("0" + parseInt(rgb[2], 10).toString(16)).slice(-2) +
                        ("0" + parseInt(rgb[3], 10).toString(16)).slice(-2) : '';
                },
                renderCallBackColor: function ($thisElem) {
                    var colors = $thisElem.color.colors.RND,
                        modes = {
                            r: colors.rgb.r, g: colors.rgb.g, b: colors.rgb.b,
                            h: colors.hsv.h, s: colors.hsv.s, v: colors.hsv.v,
                            HEX: $thisElem.color.colors.HEX
                        };
                    $('input', '.cp-panel').each(function () {
                        this.value = modes[this.className.substr(3)];
                    });

                    colors = $thisElem.color.colors;
                    var colorsRGB = colors.RND.rgb;
                    var alpha = colors.alpha;
                    var textColor = '';
                    if (colors.RGBLuminance > 0.22) {
                        textColor = '#222';
                    }
                    else {
                        textColor = '#ddd';
                    }
                    var bgColor = 'rgba(' + colorsRGB.r + ', ' + colorsRGB.g + ', ' + colorsRGB.b + ',' + alpha + ')';
                    var colorObj = {
                        'bgColor': bgColor,
                        'textColor': textColor
                    };
                    return colorObj;
                },
                deviceAlpha: function () {
                    if (typeof DeviceAlpha !== 'undefined')
                        return DeviceAlpha();
                    else
                        return '';
                },
                getValueByClassName: function ($par, regexPattern, replacePattern) {

                    let parentClasses = $par.attr('class');
                    let dAlpha = this.deviceAlpha();
                    let regex = new RegExp('\\b' + dAlpha + regexPattern + '\\b', 'g');
                    let classes = null;
                    if (typeof parentClasses !== 'undefined')
                        classes = parentClasses.match(regex);
                    let val = 0;
                    if (classes !== null) {
                        val = classes[0].replace(dAlpha + replacePattern, '');
                    }
                    return val;
                },
                replaceClassByPattern: function ($par, regexPattern, replaceClass) {
                    let parentClasses = [];
                    let dAlpha = this.deviceAlpha();
                    let regex = new RegExp('\\b' + dAlpha + regexPattern + '\\b', 'g');
                    $par.each(function (i, o) {
                        if (typeof $(o).attr('class') != 'undefined') {
                            let classes = $(o).attr('class').match(regex);
                            if (classes !== null) {
                                $.each(classes, function (i, v) {
                                    parentClasses.push(v);
                                });
                            }
                        }
                    });

                    $par.removeClass(parentClasses.join(' '));
                    $par.addClass(dAlpha + replaceClass);
                }
                //makeInitialTextReadOnly: function (input) {
                //    var readOnlyLength = input.value.length;
                //    input.addEventListener('keydown', function (event) {
                //        var which = event.which;
                //        if (((which == 8) && (input.selectionStart <= readOnlyLength))
                //            || ((which == 46) && (input.selectionStart < readOnlyLength))) {
                //            event.preventDefault();
                //        }
                //    });
                //    input.addEventListener('keypress', function (event) {
                //        var which = event.which;
                //        if ((event.which != 0) && (input.selectionStart < readOnlyLength)) {
                //            event.preventDefault();
                //        }
                //    });
                //    input.addEventListener('cut', function (event) {
                //        if (input.selectionStart < readOnlyLength) {
                //            event.preventDefault();
                //        }
                //    });
                //    input.addEventListener('paste', function (event) {
                //        if (input.selectionStart < readOnlyLength) {
                //            event.preventDefault();
                //        }
                //    });
                //}

            },

            toolBarDom: function () {
                var html = `<div class="documenteditorWrap">
                   <div class="text-editor-toolsbar">
                      <span>
                      <span class="fa fa-arrows dragbutton" style="line-height:35px"></span>
                      </span>
                      <span class="tool-wrap mDn tDn">
                      <button type="button" class="fa fa-bold boldC" title="bold"></button>
                      </span>
                      <span class="tool-wrap mDn tDn">
                      <button type="button" class="fa fa-italic italicC" title="italic"></button>
                      </span>
                      <span class="tool-wrap mDn tDn">
                      <button type="button" class="fa fa-underline underlineC" title="Underline"></button>
                      </span>
                      <span class="tool-font-color tool-wrap">
                      <span class="color-picker-holder DocEditorColorPicker doceditcolor"></span>
                      </span>
                      <span class="tool-font-family slcwrap" style="width:110px">
                      <select class="cFontFamily">
                      </select>
                      </span>
                      <span class="tool-font-family slcwrap op-options mDn tDn">
                      <select class="cFontWeight"></select>
                      </span>
                      </span>
                      </span>
                      <span class="tool-wrap transform-text has-drop-child op-options mDn tDn">
                         <button type="button" class="tCase" title="Text cases">T<span>T</span></button>
                         <div class="toobar-drop-element  fontcase">
                           <span class="slcwrap"> <select class="cFontCase">
                               <option title="none">None</option>
                               <option title="uppercase">uppercase</option>
                               <option title="lowercase">lowercase</option>
                               <option title="capitalize">capitalize</option>
                            </select></span>
                         </div>
                      </span>
                      <span class="tool-wrap font-size-text has-drop-child">
                         <button type="button" class="fntIncDec" title="Font Sizes">A<span>a</span></button>
                         <div class="toobar-drop-element fontAddless">
                            <span class="fa fa-minus minusC" title="fontsize" style="border:none"></span>
                            <label id="fontValue" class="fontValueC">14px</label>
                            <span class="fa fa-plus plusC" title="fontsize"></span>
                         </div>
                      </span>
                      <span class="tool-wrap has-drop-child mDn tDn">
                         <button type="button" class="fa fa-align-left" title="Text Aligns"></button>
                         <div class="toobar-drop-element" style="min-width:112px">
                            <div class="tool-align">
                               <span class="fa fa-align-left leftalignC" title="justifyleft"></span>
                               <span class="fa fa-align-center centeralignC" title="justifycenter"></span>
                               <span class="fa fa-align-right rightalignC" title="justifyright"></span>
                               <span class="fa fa-align-justify fullalignC" title="justifyFull"></span>
                            </div>
                         </div>
                      </span>
                      <span class="tool-wrap line-height-text has-drop-child op-options">
                         <button type="button" class="fa fa-text-height" title="line Height Text"></button>
                         <div class="toobar-drop-element tool-slide">
                            <div class="LineHeightSizeC">
                               <div class="ui-slider-handle LineHeightSizeHandleC">0</div>
                            </div>
                         </div>
                      </span>
                      <span class="tool-wrap letter-space-text has-drop-child op-options mDn tDn">
                         <button type="button" class="fa fa-text-width" title="letter Space Text"></button>
                         <div class="toobar-drop-element tool-slide">
                            <div class="LetterSpaceSizec">
                               <div class="ui-slider-handle LetterSpaceSizeSizeHandleC">0</div>
                            </div>
                         </div>
                      </span>
                      <span class="tool-wrap has-drop-child mDn tDn">
                         <button type="button" class="fa fa-ellipsis-v listC" title="Listings"></button>
                         <div class="toobar-drop-element ul-li" style="min-width:65px">
                            <span class="fa fa-list-ul ullistC" title="Unorder list"></span>
                            <span class="fa fa-list-ol ollistC" title="Order list"></span>
                         </div>
                      </span>
                      <span class="tool-wrap  op-options mDn tDn">
                      <button type="button" class="fa fa-minus btn-hline" title="Insert horizontal line"></button>
                      </span>
                      <span class="tool-wrap">
                      <button type="button" class="fa fa-quote-left formatblockC" title="Block Quotes"></button>
                      </span>
                      <span class="tool-wrap has-drop-child">
                         <button type="button" class="fa fa-link btnlinkC" title="Create link"></button>
                         <div id="dropElement" class="toobar-drop-element">
                            ${this.pageOption()}
                            <input type="text" class="createlinkC" title="externalLink" required="">
                            <span class="slcwrap"> <select title="targetLink" class="targetTypeC">
                               <option title="_self">Same window</option>
                               <option title="_blank">New window tab</option>
                            </select></span>
                         </div>
                      </span>
                      <span class="tool-wrap show-all">
                      <button type="button" class="fa fa-plus alloptionC" title="Expand Tools"></button>
                      </span>
                   </div>
                   <div class="documenttext nobreak Lh-20 tLh-24 mLh-24" contenteditable="true" style="font-family:montserrat;" >
                      <p class="pClass">Your text </p>
                   </div>
                </div>`;
                return html;
            },
            dataHelper: {
                getData: function () {
                    var docEdit = ($Parent).find('.documenttext');
                    var docClass = docEdit.attr('class');
                    var html = '<div class="editor-data-extract ' + docClass + '">';
                    html += docEdit.html();
                    html += '</div>';
                    return html;
                },
                setData: function (data) {
                    var docEdit = $($Parent).find('.documenttext');
                    docEdit.html(data);
                    docEdit.html(docEdit.html());
                    var extractData = docEdit.find('.editor-data-extract');
                    if (extractData.length > 0) {
                        docEdit.addClass(extractData.attr('class'));
                        docEdit.attr('style', extractData.attr('style'));
                        docEdit.html(extractData.html());
                    }
                    if (docEdit.children().length === 0) {
                        docEdit.html('<p>' + docEdit.html() + '</p>');
                    }
                }
            },
            pageOption: function () {
                if (typeof EditorMode === "undefined" || EditorMode === false) {
                    return "";
                } else {
                    return `<span class="slcwrap">
                        <select id="linkType">
                            <option value="ext">External Link</option>
                            <option value="int">Internal Page</option>
                        </select>
                    </span>
                    <span class="slcwrap internalPagesCWrap" style="display:none; padding: 1px;">
                        <select title="InternalPagesLink" class="internalPagesC">
                        </select>
                    </span>`;
                }
            },
            getSelectedNode: function () {
                let selItem = [];
                let selection = window.getSelection();
                var linknode = "";
                for (var i = 0; i < selection.rangeCount; i++) {
                    let isSelectContain = false;
                    if (selection.getRangeAt(i).commonAncestorContainer.childNodes.length > 0) {
                        for (var j = 0; j < selection.getRangeAt(i).commonAncestorContainer.childNodes.length; j++) {
                            linknode = selection.getRangeAt(i).commonAncestorContainer.childNodes[j];
                            if (j === 0) {
                                selItem = [];
                            }
                            if (selection.containsNode(linknode, true)) {
                                selItem.push(linknode);
                                isSelectContain = true;
                            }
                        }
                        return selItem;
                    }
                    if (!isSelectContain) {
                        selItem.push(selection.getRangeAt(i).endContainer.parentNode);
                    }
                }
                return selItem;
            }
        };

        EditorMgr.init();
        return EditorMgr.dataHelper;
    };
    $.fn.LightTextEditor = function (op) {
        return $.TextEditor(op, this);
    };
})(jQuery); (function ($) {
    var bucketComponent = '';
    var bucketComponentDemo = {
        "componentname": "",
        "category": "",
        "type": "",
        "collection": false,
        "version": "",
        "dependencies": "",
        "icon": "",
        "row": true,
        "hidden": false,
        "defaultdata": '',
        "onDrop": function ($appendLayer) {
        },
        "beforeDrop": function ($this) {
        },
        "afterdrop": function ($appendedParent, $appendLayer, dropped) {
            if (dropped) {
                $appendedParent.parent().find('.editor-component').each(function (index, value) {
                    var $this = $(this);
                    var key = $this.find('.com-settings').attr('data-type');
                    var compo = component[key];
                    if (typeof compo !== "undefined" && typeof compo.afterdrop !== "undefined")
                        compo.afterdrop($this.parent(), $this, false, true);
                    ChangeIDWithParent($this);
                });
            }
        },
        "loadSetting": function ($item) {
        },
        "settingDOMs": {
        }
    };

    $.fn.addToBucket = function (options) {
        var settings = $.extend({
        }, options);
        let $this = $(this);
        //if ($(this).parents().hasClass('editor-componentWrapper')) {
        //    $(this).find('.add-to-bucket').remove();
        //    $(this).append(DOMCreate('i', '', 'cb-bucket add-to-bucket bucketCol', '', ['title="Add To Bucket"']));
        //}
        //else {
        //    $(this).find('.add-to-bucket').remove();
        //}
        BucketWebBuilder.InitializeAddButton($this);
    };
    var BucketWebBuilder = {
        InitializeAddButton: function ($this) {
            $this.off('click').on('click', function (e) {
                bucketComponent = bucketComponentDemo;
                // HidePopUpSetting();
                var $this = $(this);
                var $parent = $this.closest('.SetHdlr').parent();
                if ($parent.find('.column-data-empty').length > 0) {
                    SageAlertDialog("Please drop component in empty column");
                    return false;
                }
                if ($parent.find('.editor-component').length == 0) {
                    SageAlertDialog("Please drop component in empty column");
                    return false;
                }
                var title = $this.attr('title');
                $activeDOM.find('>.SetHdlr .setDrp').hide();
                var htmlContain = BucketWebBuilder.GenerateHtml();
                var $defaultData = $($this.closest('.SetHdlr').parent().get(0).outerHTML);
                var isaAllowed = true;
                var keyCom = [];
                $defaultData.find('.editor-component').each(function (index, value) {
                    var $this = $(this);
                    var key = $this.attr('data-type');//find(' > .SetHdlr > .com-settings').attr('data-type');
                    var compo = component[key];
                    if (typeof compo !== "undefined") {
                        if (typeof compo.bucket !== "undefined" && compo.bucket == false) {
                            keyCom.push(key);
                            isaAllowed = false;
                            return;
                        }
                    }
                });
                if (isaAllowed == false) {
                    let message = "" + keyCom.join(',') + " component cannot be added to bucket.Please remove component and add to bucket";
                    SageAlertDialog(message);
                    return false;
                }
                if ($(this).parent().parent().parent().parent().hasClass('cRow')) {
                    bucketComponent.row = true;
                    bucketComponent.defaultdata = $defaultData.get(0).outerHTML;
                }
                else {
                    bucketComponent.row = false;
                    $defaultData.find('div.SetHdlr').eq(0).remove();
                    // $defaultData.find('div.carries-options').eq(0).remove();
                    bucketComponent.defaultdata = $defaultData.html();
                }
                bucketComponent.category = 'bucket';
                bucketComponent.type = 'Bucket';
                FullPagePopup({
                    data: htmlContain,
                    heading: "Bucket",
                    showheading: true,
                    width: "40%",
                    height: "80%"
                });
                $('body').find("#fontIconbucket").html($("#fontIconCollection").html());
                $('body').on('keyup', '#searchIconbucket', function () {
                    var searchVal = $(this).val();
                    $('.fontIconCollection').find('li').each(function () {
                        var $this = $(this);
                        var dataClass = $this.find('i').attr('data-class');
                        var pos = dataClass.indexOf(searchVal);
                        if (pos < 0) {
                            $this.addClass('Dn');
                        }
                        else {
                            $this.removeClass('Dn');
                        }
                    });
                });
                $("body").find('.fontIconCollection').find('li').on('click', function () {
                    var chooseClass = $(this).find('i').attr('data-class');
                    $('.fontIconCollection').find('li').removeClass('selected');
                    $(this).addClass('selected');
                });
                $("#btnSavebucket").on("click", function () {
                    var name = $("#txtCompName").val().trim();
                    var componentIcon = $("body").find('.fontIconCollection').find('li.selected').find('i').attr('class');
                    if (name == "") {
                        SageAlertDialog("Please Enter Name");
                    }
                    else if (componentIcon == "" || componentIcon == null) {
                        SageAlertDialog("Please select icon");
                    }
                    else {
                        bucketComponent.componentname = name;
                        bucketComponent.icon = componentIcon;
                        bucketComponent.defaultdata = BucketWebBuilder.DefaultDataTitle(bucketComponent.defaultdata, name);
                        $.ajax({
                            isPostBack: false,
                            async: false,
                            crossOrigin: true,
                            cache: false,
                            type: 'POST',
                            contentType: "application/json; charset=utf-8",
                            data: JSON2.stringify({
                                componentValue: JSONStringify(bucketComponent),
                                bucketName: name,
                                portalID: SageFramePortalID,
                                userModuleID: webBuilderUserModuleID,
                                userName: SageFrameUserName,
                                secureToken: SageFrameSecureToken
                            }),
                            dataType: 'json',
                            crossDomain: true,
                            url: SageFrameHostURL + '/Builder/AddBucket',
                            success: function (data) {
                                if (data.d == 1) {
                                    SageAlertDialog("Bucket added successfully.");
                                    $('.fullpage-close-model').trigger('click');
                                    var $compo = bucketComponent;
                                    var comName = $compo['componentname'];
                                    var iconClass = $compo['icon'];
                                    var compo = DOMCreate('i', '', iconClass) + '<br />' + comName;
                                    var classes = 'comBasic comItemBlock ui-state-highlight';
                                    if ($compo['row'])
                                        classes = 'rowBasic heartBeat comItemBlock ui-state-highlight';
                                    compo = DOMCreate('span', compo, classes, '', ['draggable="true"', 'data-type="' + comName + '"']);
                                    var compoTab = $compo['category'];
                                    var $componentList = $('#componentCollection > .components-list-array');
                                    if ($componentList.find('> .' + compoTab).length == 0) {
                                        var comitems = DOMCreate('h4', compoTab + ' Components', '') + DOMCreate('div', '', 'comItems');
                                        comitems = DOMCreate('div', comitems, compoTab + ' components-list');
                                        $componentList.append(comitems);
                                    }
                                    $componentList.find('> .' + compoTab).find('.comItems').append(compo);
                                    var componentBuc = JSON2.stringify(bucketComponent);
                                    var value = JSONParse(componentBuc);
                                    var key = value.componentname;
                                    component[key] = value;
                                    DraggableSortable();
                                    var bucketcount = parseInt($("#btnMyBucket").find(".no-of-item").html()) + 1;
                                    $("#btnMyBucket").find(".no-of-item").html(bucketcount);
                                    $(".addComponent").trigger("click");
                                    $componentList.find('> .' + compoTab).find('h4').trigger('click');
                                    $(".my-bucket").show();
                                    ///
                                    $('.components-list-array h4').off('click').on('click', function () {
                                        let $this = $(this);
                                        if (!$this.parent().hasClass('activeAccordion')) {
                                            $('.components-list').removeClass('activeAccordion');
                                            $('.comItems').slideUp(400);
                                            $this.next().slideDown(400);
                                            $this.parent().addClass('activeAccordion');
                                        }
                                        else {
                                            $this.parent().removeClass('activeAccordion');
                                            $this.next().slideUp(400);
                                        }
                                    });
                                }
                                else if (data.d == -1) {
                                    SageAlertDialog("Duplicate Name.");
                                }
                            },
                            error: function () {
                            },
                        });
                    }
                });
                e.preventDefault();
            });
            $($this).trigger("click");
        },
        DefaultDataTitle: function (data, name) {
            let $tochange = $(data);
            $tochange.find('.SetHdlr').eq(0).find(' >.stng >.setDrp li').attr('data-title', name);
            return $tochange.get(0).outerHTML;
        },
        GenerateHtml: function () {
            var html = '';
            html += '<div class="bucketEditWrap" form="true" id="bucketEditWrap">';
            html += '<div class="field-row stElWrap col30-70">';
            html += '<label class="fCol">Name</label>';
            html += '<span class="fCol cb_input">';
            html += ' <input type="text" id="txtCompName" name="txtCompName" />';
            html += '</span></div> ';
            html += '<div class="field-row stElWrap col100">';
            html += '<h4>Select Icon</h4>';
            html += '  <div id="fontbucket">';
            html += '<div class="field-row stElWrap col40-60">';
            html += '<label class="fCol">Search Icons</label>';
            html += '<span class="fCol cb_input">';
            html += '<input type="text" id="searchIconbucket" />';
            html += '</span></div>';
            html += '       <div class="field-row stElWrap col80-20">';
            html += '           <ul id="fontIconbucket" class="fontIconCollection">';
            html += '           </ul>';
            html += '         </div>';
            html += '     </div>';
            html += '</div>';
            html += '<div class="sfCol_100 TxAl-r submitBtnRow">';
            html += '<input type="button" id="btnSavebucket" value="Save" class="stngSmallBtn" />';
            html += '</div> ';
            html += '</div> ';
            return html;
        },
        InitializeBucket: function () {
            var bucketcount = 0;
            if (typeof bucketComponents !== "undefined") {
                $.each(bucketComponents, function (i, v) {
                    v = v.ComponentValue;
                    var value = JSONParse(v);
                    var key = value.componentname;
                    component[key] = value;
                    bucketcount++;
                });
            }
            $("#btnMyBucket").find(".no-of-item").html(bucketcount);
            if (bucketcount > 0) {
                $(".my-bucket").show();
            }
            else {
                $(".my-bucket").hide();
            }
            $("#btnMyBucket").on("click", function () {
                var $componentList = $('#componentCollection > .components-list-array');
                $(".addComponent").trigger("click");
                $componentList.find('> .bucket').find('h4').trigger('click');
            });
        },
        init: function ($this) {
            BucketWebBuilder.InitializeBucket();
        }
    };

    //-----------------------------feedback---------------------------------------
    var Feedback = {
        InitializeFeedBackAddButton: function () {
            $('#Feedback').on('click', function (e) {
                var title = "Feedback";
                var htmlContain = Feedback.GenerateFeedBackhtml();
                FullPagePopup({
                    data: htmlContain,
                    heading: title,
                    showheading: true,
                    width: "40%",
                    height: "80%"
                });
                $('#btnResetFeedback').on("click", function () {
                    $("#ddcategory").prop('selectedIndex', 0);
                    $('#txttitle').val('');
                    $('#txtDiscription').val('');
                });
                $("#btnSaveFeedback").on("click", function () {
                    var Category = $("#ddcategory option:selected").text();
                    var Title = $("#txttitle").val();
                    var Description = $("#txtDiscription").val();
                    if (Title == "") {
                        SageAlertDialog("Please Enter Title", "Error");
                    }
                    else if (Description == "") {
                        SageAlertDialog("Please Enter Discription", "Error");
                    }
                    else {
                        var submit = {
                            Name: SageFrameUserName,
                            Category: Category,
                            Title: Title,
                            Description: Description,
                            Domain: SageFrameHostURL,
                            PortalID: SageFramePortalID,
                            UserModuleID: 1317,
                        };
                        $.ajax({
                            isPostBack: false,
                            async: false,
                            crossOrigin: true,
                            cache: false,
                            type: 'POST',
                            contentType: "application/json; charset=utf-8",
                            data: JSON2.stringify({
                                objFeedback: submit,
                                portalID: SageFramePortalID,
                                userModuleID: webBuilderUserModuleID,
                                userName: SageFrameUserName,
                                secureToken: SageFrameSecureToken,
                            }),
                            dataType: 'json',
                            crossDomain: true,
                            url: SageFrameHostURL + '/Builder/FeedBackFromClient',
                            success: function (data) {
                                if (data != null)
                                    var response = JSONParse(data.d);
                                if (response != null && response.Message === "Success") {
                                    CloseFullPagePopup();
                                    SageAlertDialog('Feedback Send Successfully !', "Success");
                                    $('#btnResetFeedback').trigger('click');
                                }
                            },
                            error: function () {
                                SageAlertDialog("Error !", "Error");
                            },
                        });
                    }
                });
                e.preventDefault();
            });
        },

        GenerateFeedBackhtml: function () {
            var html = '';
            html = `
                <div class="FeedbackWrap" form="true" id="feedbackwarp">
          <div class ="field-row stElWrap col30-70">
                   <label class ="fCol"> Category :</label>
                   <span class ="fCol TxAl-r select__box">
                       <select id="ddcategory">
                       <option data-type="sitefeedback" value="1">Like</option>
                          <option data-type="sitefeedback" value="2">Question</option>
                           <option data-type="sitefeedback" value="3">Suggestion</option>
                           <option data-type="sitefeedback" value="4">Problem</option>
                           <option data-type="sitefeedback" value="5">Complaint</option>
                       </select>
                   </span>
               </div>

           <div class="field-row stElWrap col30-70">
              <label class="fCol">Title :</label>
              <span class="fCol cb_input">
             <input type="text" id="txttitle" name="txttitle" />
            </span></div>
           <div class="field-row stElWrap col30-70">
           <label class="fCol">Description :</label>
           <div class="fCol TxAl-l text__area">
           <textarea id="txtDiscription"></textarea>
            </div>
            </div>
            <div class ="field-row clearfix">
                   <div class ="field-row stElWrap col100">
                       <span class ="cb-btn-green" id="btnSaveFeedback">Submit</span>
                       <span class ="cb-btn-red Ml-5" id="btnResetFeedback">Reset</span>
                   </div>
               </div>
             </div>`;
            return html;
        },
    };
    Feedback.InitializeFeedBackAddButton();
    //-----------------------------------end feedback------------------------------
    BucketWebBuilder.init();
}(jQuery));/**
 * jQuery.marquee - scrolling text like old marquee element
 * @author Aamir Afridi - aamirafridi(at)gmail(dot)com / http://aamirafridi.com/jquery/jquery-marquee-plugin
 */;
(function ($) {
    $.fn.marquee = function (options) {
        return this.each(function () {
            // Extend the options if any provided
            var o = $.extend({}, $.fn.marquee.defaults, options),
                $this = $(this),
                $marqueeWrapper, containerWidth, animationCss, verticalDir, elWidth,
                loopCount = 3,
                playState = 'animation-play-state',
                css3AnimationIsSupported = false,

                // Private methods
                _prefixedEvent = function (element, type, callback) {
                    var pfx = ["webkit", "moz", "MS", "o", ""];
                    for (var p = 0; p < pfx.length; p++) {
                        if (!pfx[p]) type = type.toLowerCase();
                        element.addEventListener(pfx[p] + type, callback, false);
                    }
                },

                _objToString = function (obj) {
                    var tabjson = [];
                    for (var p in obj) {
                        if (obj.hasOwnProperty(p)) {
                            tabjson.push(p + ':' + obj[p]);
                        }
                    }
                    tabjson.push();
                    return '{' + tabjson.join(',') + '}';
                },

                _startAnimationWithDelay = function () {
                    $this.timer = setTimeout(animate, o.delayBeforeStart);
                },

                // Public methods
                methods = {
                    pause: function () {
                        if (css3AnimationIsSupported && o.allowCss3Support) {
                            $marqueeWrapper.css(playState, 'paused');
                        } else {
                            // pause using pause plugin
                            if ($.fn.pause) {
                                $marqueeWrapper.pause();
                            }
                        }
                        // save the status
                        $this.data('runningStatus', 'paused');
                        // fire event
                        $this.trigger('paused');
                    },

                    resume: function () {
                        // resume using css3
                        if (css3AnimationIsSupported && o.allowCss3Support) {
                            $marqueeWrapper.css(playState, 'running');
                        } else {
                            // resume using pause plugin
                            if ($.fn.resume) {
                                $marqueeWrapper.resume();
                            }
                        }
                        // save the status
                        $this.data('runningStatus', 'resumed');
                        // fire event
                        $this.trigger('resumed');
                    },

                    toggle: function () {
                        methods[$this.data('runningStatus') == 'resumed' ? 'pause' : 'resume']();
                    },

                    destroy: function () {
                        // Clear timer
                        clearTimeout($this.timer);
                        // Unbind all events
                        $this.find("*").addBack().unbind();
                        // Just unwrap the elements that has been added using this plugin
                        $this.html($this.find('.js-marquee:first').html());
                    }
                };

            // Check for methods
            if (typeof options === 'string') {
                if ($.isFunction(methods[options])) {
                    // Following two IF statements to support public methods
                    if (!$marqueeWrapper) {
                        $marqueeWrapper = $this.find('.js-marquee-wrapper');
                    }
                    if ($this.data('css3AnimationIsSupported') === true) {
                        css3AnimationIsSupported = true;
                    }
                    methods[options]();
                }
                return;
            }

            /* Check if element has data attributes. They have top priority
               For details https://twitter.com/aamirafridi/status/403848044069679104 - Can't find a better solution :/
               jQuery 1.3.2 doesn't support $.data().KEY hence writting the following */
            var dataAttributes = {},
                attr;
            $.each(o, function (key, value) {
                // Check if element has this data attribute
                attr = $this.attr('data-' + key);
                if (typeof attr !== 'undefined') {
                    // Now check if value is boolean or not
                    switch (attr) {
                        case 'true':
                            attr = true;
                            break;
                        case 'false':
                            attr = false;
                            break;
                    }
                    o[key] = attr;
                }
            });

            // Reintroduce speed as an option. It calculates duration as a factor of the container width
            // measured in pixels per second.
            if (o.speed) {
                o.duration = parseInt($this.width(), 10) / o.speed * 1000;
            }

            // Shortcut to see if direction is upward or downward
            verticalDir = o.direction == 'up' || o.direction == 'down';

            // no gap if not duplicated
            o.gap = o.duplicated ? parseInt(o.gap) : 0;

            // wrap inner content into a div
            $this.wrapInner('<div class="js-marquee"></div>');

            // Make copy of the element
            var $el = $this.find('.js-marquee').css({
                'margin-right': o.gap,
                'float': 'left'
            });

            if (o.duplicated) {
                $el.clone(true).appendTo($this);
            }

            // wrap both inner elements into one div
            $this.wrapInner('<div style="width:100000px" class="js-marquee-wrapper"></div>');

            // Save the reference of the wrapper
            $marqueeWrapper = $this.find('.js-marquee-wrapper');

            // If direction is up or down, get the height of main element
            if (verticalDir) {
                var containerHeight = $this.height();
                $marqueeWrapper.removeAttr('style');
                $this.height(containerHeight);

                // Change the CSS for js-marquee element
                $this.find('.js-marquee').css({
                    'float': 'none',
                    'margin-bottom': o.gap,
                    'margin-right': 0
                });

                // Remove bottom margin from 2nd element if duplicated
                if (o.duplicated) $this.find('.js-marquee:last').css({
                    'margin-bottom': 0
                });

                var elHeight = $this.find('.js-marquee:first').height() + o.gap;

                // adjust the animation duration according to the text length
                if (o.startVisible && !o.duplicated) {
                    // Compute the complete animation duration and save it for later reference
                    // formula is to: (Height of the text node + height of the main container / Height of the main container) * duration;
                    o._completeDuration = ((parseInt(elHeight, 10) + parseInt(containerHeight, 10)) / parseInt(containerHeight, 10)) * o.duration;

                    // formula is to: (Height of the text node / height of the main container) * duration
                    o.duration = (parseInt(elHeight, 10) / parseInt(containerHeight, 10)) * o.duration;
                } else {
                    // formula is to: (Height of the text node + height of the main container / Height of the main container) * duration;
                    o.duration = ((parseInt(elHeight, 10) + parseInt(containerHeight, 10)) / parseInt(containerHeight, 10)) * o.duration;
                }

            } else {
                // Save the width of the each element so we can use it in animation
                elWidth = $this.find('.js-marquee:first').width() + o.gap;

                // container width
                containerWidth = $this.width();

                // adjust the animation duration according to the text length
                if (o.startVisible && !o.duplicated) {
                    // Compute the complete animation duration and save it for later reference
                    // formula is to: (Width of the text node + width of the main container / Width of the main container) * duration;
                    o._completeDuration = ((parseInt(elWidth, 10) + parseInt(containerWidth, 10)) / parseInt(containerWidth, 10)) * o.duration;

                    // (Width of the text node / width of the main container) * duration
                    o.duration = (parseInt(elWidth, 10) / parseInt(containerWidth, 10)) * o.duration;
                } else {
                    // formula is to: (Width of the text node + width of the main container / Width of the main container) * duration;
                    o.duration = ((parseInt(elWidth, 10) + parseInt(containerWidth, 10)) / parseInt(containerWidth, 10)) * o.duration;
                }
            }

            // if duplicated then reduce the duration
            if (o.duplicated) {
                o.duration = o.duration / 2;
            }

            if (o.allowCss3Support) {
                var
                    elm = document.body || document.createElement('div'),
                    animationName = 'marqueeAnimation-' + Math.floor(Math.random() * 10000000),
                    domPrefixes = 'Webkit Moz O ms Khtml'.split(' '),
                    animationString = 'animation',
                    animationCss3Str = '',
                    keyframeString = '';

                // Check css3 support
                if (elm.style.animation !== undefined) {
                    keyframeString = '@keyframes ' + animationName + ' ';
                    css3AnimationIsSupported = true;
                }

                if (css3AnimationIsSupported === false) {
                    for (var i = 0; i < domPrefixes.length; i++) {
                        if (elm.style[domPrefixes[i] + 'AnimationName'] !== undefined) {
                            var prefix = '-' + domPrefixes[i].toLowerCase() + '-';
                            animationString = prefix + animationString;
                            playState = prefix + playState;
                            keyframeString = '@' + prefix + 'keyframes ' + animationName + ' ';
                            css3AnimationIsSupported = true;
                            break;
                        }
                    }
                }

                if (css3AnimationIsSupported) {
                    animationCss3Str = animationName + ' ' + o.duration / 1000 + 's ' + o.delayBeforeStart / 1000 + 's infinite ' + o.css3easing;
                    $this.data('css3AnimationIsSupported', true);
                }
            }

            var _rePositionVertically = function () {
                $marqueeWrapper.css('transform', 'translateY(' + (o.direction == 'up' ? containerHeight + 'px' : '-' + elHeight + 'px') + ')');
            },
                _rePositionHorizontally = function () {
                    $marqueeWrapper.css('transform', 'translateX(' + (o.direction == 'left' ? containerWidth + 'px' : '-' + elWidth + 'px') + ')');
                };

            // if duplicated option is set to true than position the wrapper
            if (o.duplicated) {
                if (verticalDir) {
                    if (o.startVisible) {
                        $marqueeWrapper.css('transform', 'translateY(0)');
                    } else {
                        $marqueeWrapper.css('transform', 'translateY(' + (o.direction == 'up' ? containerHeight + 'px' : '-' + ((elHeight * 2) - o.gap) + 'px') + ')');
                    }
                } else {
                    if (o.startVisible) {
                        $marqueeWrapper.css('transform', 'translateX(0)');
                    } else {
                        $marqueeWrapper.css('transform', 'translateX(' + (o.direction == 'left' ? containerWidth + 'px' : '-' + ((elWidth * 2) - o.gap) + 'px') + ')');
                    }
                }

                // If the text starts out visible we can skip the two initial loops
                if (!o.startVisible) {
                    loopCount = 1;
                }
            } else if (o.startVisible) {
                // We only have two different loops if marquee is duplicated and starts visible
                loopCount = 2;
            } else {
                if (verticalDir) {
                    _rePositionVertically();
                } else {
                    _rePositionHorizontally();
                }
            }

            // Animate recursive method
            var animate = function () {
                if (o.duplicated) {
                    // When duplicated, the first loop will be scroll longer so double the duration
                    if (loopCount === 1) {
                        o._originalDuration = o.duration;
                        if (verticalDir) {
                            o.duration = o.direction == 'up' ? o.duration + (containerHeight / ((elHeight) / o.duration)) : o.duration * 2;
                        } else {
                            o.duration = o.direction == 'left' ? o.duration + (containerWidth / ((elWidth) / o.duration)) : o.duration * 2;
                        }
                        // Adjust the css3 animation as well
                        if (animationCss3Str) {
                            animationCss3Str = animationName + ' ' + o.duration / 1000 + 's ' + o.delayBeforeStart / 1000 + 's ' + o.css3easing;
                        }
                        loopCount++;
                    }
                    // On 2nd loop things back to normal, normal duration for the rest of animations
                    else if (loopCount === 2) {
                        o.duration = o._originalDuration;
                        // Adjust the css3 animation as well
                        if (animationCss3Str) {
                            animationName = animationName + '0';
                            keyframeString = $.trim(keyframeString) + '0 ';
                            animationCss3Str = animationName + ' ' + o.duration / 1000 + 's 0s infinite ' + o.css3easing;
                        }
                        loopCount++;
                    }
                }

                if (verticalDir) {
                    if (o.duplicated) {

                        // Adjust the starting point of animation only when first loops finishes
                        if (loopCount > 2) {
                            $marqueeWrapper.css('transform', 'translateY(' + (o.direction == 'up' ? 0 : '-' + elHeight + 'px') + ')');
                        }

                        animationCss = {
                            'transform': 'translateY(' + (o.direction == 'up' ? '-' + elHeight + 'px' : 0) + ')'
                        };
                    } else if (o.startVisible) {
                        // This loop moves the marquee out of the container
                        if (loopCount === 2) {
                            // Adjust the css3 animation as well
                            if (animationCss3Str) {
                                animationCss3Str = animationName + ' ' + o.duration / 1000 + 's ' + o.delayBeforeStart / 1000 + 's ' + o.css3easing;
                            }
                            animationCss = {
                                'transform': 'translateY(' + (o.direction == 'up' ? '-' + elHeight + 'px' : containerHeight + 'px') + ')'
                            };
                            loopCount++;
                        } else if (loopCount === 3) {
                            // Set the duration for the animation that will run forever
                            o.duration = o._completeDuration;
                            // Adjust the css3 animation as well
                            if (animationCss3Str) {
                                animationName = animationName + '0';
                                keyframeString = $.trim(keyframeString) + '0 ';
                                animationCss3Str = animationName + ' ' + o.duration / 1000 + 's 0s infinite ' + o.css3easing;
                            }
                            _rePositionVertically();
                        }
                    } else {
                        _rePositionVertically();
                        animationCss = {
                            'transform': 'translateY(' + (o.direction == 'up' ? '-' + ($marqueeWrapper.height()) + 'px' : containerHeight + 'px') + ')'
                        };
                    }
                } else {
                    if (o.duplicated) {

                        // Adjust the starting point of animation only when first loops finishes
                        if (loopCount > 2) {
                            $marqueeWrapper.css('transform', 'translateX(' + (o.direction == 'left' ? 0 : '-' + elWidth + 'px') + ')');
                        }

                        animationCss = {
                            'transform': 'translateX(' + (o.direction == 'left' ? '-' + elWidth + 'px' : 0) + ')'
                        };

                    } else if (o.startVisible) {
                        // This loop moves the marquee out of the container
                        if (loopCount === 2) {
                            // Adjust the css3 animation as well
                            if (animationCss3Str) {
                                animationCss3Str = animationName + ' ' + o.duration / 1000 + 's ' + o.delayBeforeStart / 1000 + 's ' + o.css3easing;
                            }
                            animationCss = {
                                'transform': 'translateX(' + (o.direction == 'left' ? '-' + elWidth + 'px' : containerWidth + 'px') + ')'
                            };
                            loopCount++;
                        } else if (loopCount === 3) {
                            // Set the duration for the animation that will run forever
                            o.duration = o._completeDuration;
                            // Adjust the css3 animation as well
                            if (animationCss3Str) {
                                animationName = animationName + '0';
                                keyframeString = $.trim(keyframeString) + '0 ';
                                animationCss3Str = animationName + ' ' + o.duration / 1000 + 's 0s infinite ' + o.css3easing;
                            }
                            _rePositionHorizontally();
                        }
                    } else {
                        _rePositionHorizontally();
                        animationCss = {
                            'transform': 'translateX(' + (o.direction == 'left' ? '-' + elWidth + 'px' : containerWidth + 'px') + ')'
                        };
                    }
                }

                // fire event
                $this.trigger('beforeStarting');

                // If css3 support is available than do it with css3, otherwise use jQuery as fallback
                if (css3AnimationIsSupported) {
                    // Add css3 animation to the element
                    $marqueeWrapper.css(animationString, animationCss3Str);
                    var keyframeCss = keyframeString + ' { 100%  ' + _objToString(animationCss) + '}',
                        $styles = $marqueeWrapper.find('style');

                    // Now add the keyframe animation to the marquee element
                    if ($styles.length !== 0) {
                        // Bug fixed for jQuery 1.3.x - Instead of using .last(), use following
                        $styles.filter(":last").html(keyframeCss);
                    } else {
                        $('head').append('<style>' + keyframeCss + '</style>');
                    }

                    // Animation iteration event
                    _prefixedEvent($marqueeWrapper[0], "AnimationIteration", function () {
                        $this.trigger('finished');
                    });
                    // Animation stopped
                    _prefixedEvent($marqueeWrapper[0], "AnimationEnd", function () {
                        animate();
                        $this.trigger('finished');
                    });

                } else {
                    // Start animating
                    $marqueeWrapper.animate(animationCss, o.duration, o.easing, function () {
                        // fire event
                        $this.trigger('finished');
                        // animate again
                        if (o.pauseOnCycle) {
                            _startAnimationWithDelay();
                        } else {
                            animate();
                        }
                    });
                }
                // save the status
                $this.data('runningStatus', 'resumed');
            };

            // bind pause and resume events
            $this.bind('pause', methods.pause);
            $this.bind('resume', methods.resume);

            if (o.pauseOnHover) {
                $this.bind('mouseenter', methods.pause);
                $this.bind('mouseleave', methods.resume);
            }

            // If css3 animation is supported than call animate method at once
            if (css3AnimationIsSupported && o.allowCss3Support) {
                animate();
            } else {
                // Starts the recursive method
                _startAnimationWithDelay();
            }

        });
    }; // End of Plugin
    // Public: plugin defaults options
    $.fn.marquee.defaults = {
        // If you wish to always animate using jQuery
        allowCss3Support: true,
        // works when allowCss3Support is set to true - for full list see http://www.w3.org/TR/2013/WD-css3-transitions-20131119/#transition-timing-function
        css3easing: 'linear',
        // requires jQuery easing plugin. Default is 'linear'
        easing: 'linear',
        // pause time before the next animation turn in milliseconds
        delayBeforeStart: 1000,
        // 'left', 'right', 'up' or 'down'
        direction: 'left',
        // true or false - should the marquee be duplicated to show an effect of continues flow
        duplicated: false,
        // duration in milliseconds of the marquee in milliseconds
        duration: 5000,
        // gap in pixels between the tickers
        gap: 20,
        // on cycle pause the marquee
        pauseOnCycle: false,
        // on hover pause the marquee - using jQuery plugin https://github.com/tobia/Pause
        pauseOnHover: false,
        // the marquee is visible initially positioned next to the border towards it will be moving
        startVisible: false
    };
})(jQuery);/*!
*  - v1.4.0
* Homepage: http://bqworks.com/slider-pro/
* Author: bqworks
* Author URL: http://bqworks.com/
*/
!function (a, b) { "use strict"; b.SliderPro = { modules: [], addModule: function (a, c) { this.modules.push(a), b.extend(d.prototype, c) } }; var c = b.SliderPro.namespace = "SliderPro", d = function (a, c) { this.instance = a, this.$slider = b(this.instance), this.$slides = null, this.$slidesMask = null, this.$slidesContainer = null, this.slides = [], this.slidesOrder = [], this.options = c, this.settings = {}, this.originalSettings = {}, this.originalGotoSlide = null, this.selectedSlideIndex = 0, this.previousSlideIndex = 0, this.middleSlidePosition = 0, this.supportedAnimation = null, this.vendorPrefix = null, this.transitionEvent = null, this.positionProperty = null, this.sizeProperty = null, this.isIE = null, this.slidesPosition = 0, this.slidesSize = 0, this.averageSlideSize = 0, this.slideWidth = 0, this.slideHeight = 0, this.previousSlideWidth = 0, this.previousSlideHeight = 0, this.previousWindowWidth = 0, this.previousWindowHeight = 0, this.allowResize = !0, this.uniqueId = (new Date).valueOf(), this.breakpoints = [], this.currentBreakpoint = -1, this.shuffledIndexes = [], this._init() }; d.prototype = { _init: function () { var d = this; this.supportedAnimation = f.getSupportedAnimation(), this.vendorPrefix = f.getVendorPrefix(), this.transitionEvent = f.getTransitionEvent(), this.isIE = f.checkIE(), this.$slider.removeClass("sp-no-js"), a.navigator.userAgent.match(/(iPad|iPhone|iPod)/g) && this.$slider.addClass("ios"); var e = /(msie) ([\w.]+)/, g = e.exec(a.navigator.userAgent.toLowerCase()); this.isIE && this.$slider.addClass("ie"), null !== g && this.$slider.addClass("ie" + parseInt(g[2], 10)), this.$slidesContainer = b('<div class="sp-slides-container"></div>').appendTo(this.$slider), this.$slidesMask = b('<div class="sp-mask"></div>').appendTo(this.$slidesContainer), this.$slides = this.$slider.find(".sp-slides").appendTo(this.$slidesMask), this.$slider.find(".sp-slide").appendTo(this.$slides); var h = b.SliderPro.modules; if ("undefined" != typeof h) for (var i = 0; i < h.length; i++) { var j = h[i].substring(0, 1).toLowerCase() + h[i].substring(1) + "Defaults"; "undefined" != typeof this[j] && b.extend(this.defaults, this[j]) } if (this.settings = b.extend({}, this.defaults, this.options), "undefined" != typeof h) for (var k = 0; k < h.length; k++) "undefined" != typeof this["init" + h[k]] && this["init" + h[k]](); if (this.originalSettings = b.extend({}, this.settings), this.originalGotoSlide = this.gotoSlide, null !== this.settings.breakpoints) { for (var l in this.settings.breakpoints) this.breakpoints.push({ size: parseInt(l, 10), properties: this.settings.breakpoints[l] }); this.breakpoints = this.breakpoints.sort(function (a, b) { return a.size >= b.size ? 1 : -1 }) } if (this.selectedSlideIndex = this.settings.startSlide, this.settings.shuffle === !0) { var m = this.$slides.find(".sp-slide"), n = []; m.each(function (a) { d.shuffledIndexes.push(a) }); for (var o = this.shuffledIndexes.length - 1; o > 0; o--) { var p = Math.floor(Math.random() * (o + 1)), q = this.shuffledIndexes[o]; this.shuffledIndexes[o] = this.shuffledIndexes[p], this.shuffledIndexes[p] = q } b.each(this.shuffledIndexes, function (a, b) { n.push(m[b]) }), this.$slides.empty().append(n) } b(a).on("resize." + this.uniqueId + "." + c, function () { var c = b(a).width(), e = b(a).height(); d.allowResize === !1 || d.previousWindowWidth === c && d.previousWindowHeight === e || (d.previousWindowWidth = c, d.previousWindowHeight = e, d.allowResize = !1, setTimeout(function () { d.resize(), d.allowResize = !0 }, 200)) }), this.on("update." + c, function () { d.previousSlideWidth = 0, d.resize() }), this.update(), this.$slides.find(".sp-slide").eq(this.selectedSlideIndex).addClass("sp-selected"), this.trigger({ type: "init" }), b.isFunction(this.settings.init) && this.settings.init.call(this, { type: "init" }) }, update: function () { var a = this; "horizontal" === this.settings.orientation ? (this.$slider.removeClass("sp-vertical").addClass("sp-horizontal"), this.$slider.css({ height: "", "max-height": "" }), this.$slides.find(".sp-slide").css("top", "")) : "vertical" === this.settings.orientation && (this.$slider.removeClass("sp-horizontal").addClass("sp-vertical"), this.$slides.find(".sp-slide").css("left", "")), this.settings.rightToLeft === !0 ? this.$slider.addClass("sp-rtl") : this.$slider.removeClass("sp-rtl"), this.positionProperty = "horizontal" === this.settings.orientation ? "left" : "top", this.sizeProperty = "horizontal" === this.settings.orientation ? "width" : "height", this.gotoSlide = this.originalGotoSlide; for (var d = this.slides.length - 1; d >= 0; d--) if (0 === this.$slider.find('.sp-slide[data-index="' + d + '"]').length) { var e = this.slides[d]; e.off("imagesLoaded." + c), e.destroy(), this.slides.splice(d, 1) } this.slidesOrder.length = 0, this.$slider.find(".sp-slide").each(function (c) { var d = b(this); "undefined" == typeof d.attr("data-init") ? a._createSlide(c, d) : a.slides[c].setIndex(c), a.slidesOrder.push(c) }), this.middleSlidePosition = parseInt((a.slidesOrder.length - 1) / 2, 10), this.settings.loop === !0 && this._updateSlidesOrder(), this.trigger({ type: "update" }), b.isFunction(this.settings.update) && this.settings.update.call(this, { type: "update" }) }, _createSlide: function (a, d) { var f = this, g = new e(b(d), a, this.settings); this.slides.splice(a, 0, g), g.on("imagesLoaded." + c, function (a) { f.settings.autoSlideSize === !0 && (f.$slides.hasClass("sp-animated") === !1 && f._resetSlidesPosition(), f._calculateSlidesSize()), f.settings.autoHeight === !0 && a.index === f.selectedSlideIndex && f._resizeHeightTo(g.getSize().height) }) }, _updateSlidesOrder: function () { var a, c, d = b.inArray(this.selectedSlideIndex, this.slidesOrder) - this.middleSlidePosition; if (0 > d) for (a = this.slidesOrder.splice(d, Math.abs(d)), c = a.length - 1; c >= 0; c--) this.slidesOrder.unshift(a[c]); else if (d > 0) for (a = this.slidesOrder.splice(0, d), c = 0; c <= a.length - 1; c++) this.slidesOrder.push(a[c]) }, _updateSlidesPosition: function () { var a, b, c, d, e, f = parseInt(this.$slides.find(".sp-slide").eq(this.selectedSlideIndex).css(this.positionProperty), 10), g = f; if (this.settings.autoSlideSize === !0) if (this.settings.rightToLeft === !0 && "horizontal" === this.settings.orientation) { for (c = this.middleSlidePosition; c >= 0; c--) a = this.getSlideAt(this.slidesOrder[c]), b = a.$slide, b.css(this.positionProperty, g), g = parseInt(b.css(this.positionProperty), 10) + a.getSize()[this.sizeProperty] + this.settings.slideDistance; for (g = f, c = this.middleSlidePosition + 1; c < this.slidesOrder.length; c++) a = this.getSlideAt(this.slidesOrder[c]), b = a.$slide, b.css(this.positionProperty, g - (a.getSize()[this.sizeProperty] + this.settings.slideDistance)), g = parseInt(b.css(this.positionProperty), 10) } else { for (c = this.middleSlidePosition - 1; c >= 0; c--) a = this.getSlideAt(this.slidesOrder[c]), b = a.$slide, b.css(this.positionProperty, g - (a.getSize()[this.sizeProperty] + this.settings.slideDistance)), g = parseInt(b.css(this.positionProperty), 10); for (g = f, c = this.middleSlidePosition; c < this.slidesOrder.length; c++) a = this.getSlideAt(this.slidesOrder[c]), b = a.$slide, b.css(this.positionProperty, g), g = parseInt(b.css(this.positionProperty), 10) + a.getSize()[this.sizeProperty] + this.settings.slideDistance } else for (d = this.settings.rightToLeft === !0 && "horizontal" === this.settings.orientation ? -1 : 1, e = "horizontal" === this.settings.orientation ? this.slideWidth : this.slideHeight, c = 0; c < this.slidesOrder.length; c++) b = this.$slides.find(".sp-slide").eq(this.slidesOrder[c]), b.css(this.positionProperty, f + d * (c - this.middleSlidePosition) * (e + this.settings.slideDistance)) }, _resetSlidesPosition: function () { var a, b, c, d, e, f, g = 0; if (this.settings.autoSlideSize === !0) { if (this.settings.rightToLeft === !0 && "horizontal" === this.settings.orientation) for (c = 0; c < this.slidesOrder.length; c++) a = this.getSlideAt(this.slidesOrder[c]), b = a.$slide, b.css(this.positionProperty, g - (a.getSize()[this.sizeProperty] + this.settings.slideDistance)), g = parseInt(b.css(this.positionProperty), 10); else for (c = 0; c < this.slidesOrder.length; c++) a = this.getSlideAt(this.slidesOrder[c]), b = a.$slide, b.css(this.positionProperty, g), g = parseInt(b.css(this.positionProperty), 10) + a.getSize()[this.sizeProperty] + this.settings.slideDistance; d = this.getSlideAt(this.selectedSlideIndex).getSize()[this.sizeProperty] } else { for (e = (this.settings.rightToLeft === !0 && "horizontal" === this.settings.orientation) == !0 ? -1 : 1, f = "horizontal" === this.settings.orientation ? this.slideWidth : this.slideHeight, c = 0; c < this.slidesOrder.length; c++) b = this.$slides.find(".sp-slide").eq(this.slidesOrder[c]), b.css(this.positionProperty, e * c * (f + this.settings.slideDistance)); d = f } var h = this.settings.centerSelectedSlide === !0 ? Math.round((parseInt(this.$slidesMask.css(this.sizeProperty), 10) - d) / 2) : 0, i = -parseInt(this.$slides.find(".sp-slide").eq(this.selectedSlideIndex).css(this.positionProperty), 10) + h; this._moveTo(i, !0) }, _calculateSlidesSize: function () { if (this.settings.autoSlideSize === !0) { var a = this.$slides.find(".sp-slide").eq(this.slidesOrder[0]), b = parseInt(a.css(this.positionProperty), 10), c = this.$slides.find(".sp-slide").eq(this.slidesOrder[this.slidesOrder.length - 1]), d = parseInt(c.css(this.positionProperty), 10) + (this.settings.rightToLeft === !0 && "horizontal" === this.settings.orientation ? -1 : 1) * parseInt(c.css(this.sizeProperty), 10); this.slidesSize = Math.abs(d - b), this.averageSlideSize = Math.round(this.slidesSize / this.slides.length) } else this.slidesSize = (("horizontal" === this.settings.orientation ? this.slideWidth : this.slideHeight) + this.settings.slideDistance) * this.slides.length - this.settings.slideDistance, this.averageSlideSize = "horizontal" === this.settings.orientation ? this.slideWidth : this.slideHeight }, resize: function () { var c = this; if (null !== this.settings.breakpoints && this.breakpoints.length > 0) if (b(a).width() > this.breakpoints[this.breakpoints.length - 1].size && -1 !== this.currentBreakpoint) this.currentBreakpoint = -1, this._setProperties(this.originalSettings, !1); else for (var d = 0, e = this.breakpoints.length; e > d; d++) if (b(a).width() <= this.breakpoints[d].size) { if (this.currentBreakpoint !== this.breakpoints[d].size) { var f = { type: "breakpointReach", size: this.breakpoints[d].size, settings: this.breakpoints[d].properties }; this.trigger(f), b.isFunction(this.settings.breakpointReach) && this.settings.breakpointReach.call(this, f), this.currentBreakpoint = this.breakpoints[d].size; var g = b.extend({}, this.originalSettings, this.breakpoints[d].properties); return void this._setProperties(g, !1) } break } this.settings.responsive === !0 ? "fullWidth" !== this.settings.forceSize && "fullWindow" !== this.settings.forceSize || "auto" !== this.settings.visibleSize && ("auto" === this.settings.visibleSize || "vertical" !== this.settings.orientation) ? this.$slider.css({ width: "100%", "max-width": this.settings.width, marginLeft: "" }) : (this.$slider.css("margin", 0), this.$slider.css({ width: b(a).width(), "max-width": "", marginLeft: -this.$slider.offset().left })) : this.$slider.css({ width: this.settings.width }), -1 === this.settings.aspectRatio && (this.settings.aspectRatio = this.settings.width / this.settings.height), this.slideWidth = this.$slider.width(), "fullWindow" === this.settings.forceSize ? this.slideHeight = b(a).height() : this.slideHeight = isNaN(this.settings.aspectRatio) ? this.settings.height : this.slideWidth / this.settings.aspectRatio, (this.previousSlideWidth !== this.slideWidth || this.previousSlideHeight !== this.slideHeight || "auto" !== this.settings.visibleSize || this.$slider.outerWidth() > this.$slider.parent().width() || this.$slider.width() !== this.$slidesMask.width()) && (this.previousSlideWidth = this.slideWidth, this.previousSlideHeight = this.slideHeight, this._resizeSlides(), this.$slidesMask.css({ width: this.slideWidth, height: this.slideHeight }), this.settings.autoHeight === !0 ? setTimeout(function () { c._resizeHeight() }, 1) : this.$slidesMask.css(this.vendorPrefix + "transition", ""), "auto" !== this.settings.visibleSize && ("horizontal" === this.settings.orientation ? ("fullWidth" === this.settings.forceSize || "fullWindow" === this.settings.forceSize ? (this.$slider.css("margin", 0), this.$slider.css({ width: b(a).width(), "max-width": "", marginLeft: -this.$slider.offset().left })) : this.$slider.css({ width: this.settings.visibleSize, "max-width": "100%", marginLeft: 0 }), this.$slidesMask.css("width", this.$slider.width())) : ("fullWindow" === this.settings.forceSize ? this.$slider.css({ height: b(a).height(), "max-height": "" }) : this.$slider.css({ height: this.settings.visibleSize, "max-height": "100%" }), this.$slidesMask.css("height", this.$slider.height()))), this._resetSlidesPosition(), this._calculateSlidesSize(), this.trigger({ type: "sliderResize" }), b.isFunction(this.settings.sliderResize) && this.settings.sliderResize.call(this, { type: "sliderResize" })) }, _resizeSlides: function () { var a = this.slideWidth, c = this.slideHeight; this.settings.autoSlideSize === !0 ? "horizontal" === this.settings.orientation ? a = "auto" : "vertical" === this.settings.orientation && (c = "auto") : this.settings.autoHeight === !0 && (c = "auto"), b.each(this.slides, function (b, d) { d.setSize(a, c) }) }, _resizeHeight: function () { var a = this.getSlideAt(this.selectedSlideIndex); this._resizeHeightTo(a.getSize().height) }, gotoSlide: function (a) { if (a !== this.selectedSlideIndex && "undefined" != typeof this.slides[a]) { var c = this; this.previousSlideIndex = this.selectedSlideIndex, this.selectedSlideIndex = a, this.$slides.find(".sp-selected").removeClass("sp-selected"), this.$slides.find(".sp-slide").eq(this.selectedSlideIndex).addClass("sp-selected"), this.settings.loop === !0 && (this._updateSlidesOrder(), this._updateSlidesPosition()), this.settings.autoHeight === !0 && this._resizeHeight(); var d = this.settings.centerSelectedSlide === !0 ? Math.round((parseInt(this.$slidesMask.css(this.sizeProperty), 10) - this.getSlideAt(this.selectedSlideIndex).getSize()[this.sizeProperty]) / 2) : 0, e = -parseInt(this.$slides.find(".sp-slide").eq(this.selectedSlideIndex).css(this.positionProperty), 10) + d; this._moveTo(e, !1, function () { c._resetSlidesPosition(), c.trigger({ type: "gotoSlideComplete", index: a, previousIndex: c.previousSlideIndex }), b.isFunction(c.settings.gotoSlideComplete) && c.settings.gotoSlideComplete.call(c, { type: "gotoSlideComplete", index: a, previousIndex: c.previousSlideIndex }) }), this.trigger({ type: "gotoSlide", index: a, previousIndex: this.previousSlideIndex }), b.isFunction(this.settings.gotoSlide) && this.settings.gotoSlide.call(this, { type: "gotoSlide", index: a, previousIndex: this.previousSlideIndex }) } }, nextSlide: function () { var a = this.selectedSlideIndex >= this.getTotalSlides() - 1 ? 0 : this.selectedSlideIndex + 1; this.gotoSlide(a) }, previousSlide: function () { var a = this.selectedSlideIndex <= 0 ? this.getTotalSlides() - 1 : this.selectedSlideIndex - 1; this.gotoSlide(a) }, _moveTo: function (a, b, c) { var d = this, e = {}; if (a !== this.slidesPosition) if (this.slidesPosition = a, "css-3d" !== this.supportedAnimation && "css-2d" !== this.supportedAnimation || this.isIE !== !1) e["margin-" + this.positionProperty] = a, "undefined" != typeof b && b === !0 ? this.$slides.css(e) : (this.$slides.addClass("sp-animated"), this.$slides.animate(e, this.settings.slideAnimationDuration, function () { d.$slides.removeClass("sp-animated"), "function" == typeof c && c() })); else { var f, g = "horizontal" === this.settings.orientation ? a : 0, h = "horizontal" === this.settings.orientation ? 0 : a; "css-3d" === this.supportedAnimation ? e[this.vendorPrefix + "transform"] = "translate3d(" + g + "px, " + h + "px, 0)" : e[this.vendorPrefix + "transform"] = "translate(" + g + "px, " + h + "px)", "undefined" != typeof b && b === !0 ? f = "" : (this.$slides.addClass("sp-animated"), f = this.vendorPrefix + "transform " + this.settings.slideAnimationDuration / 1e3 + "s", this.$slides.on(this.transitionEvent, function (a) { a.target === a.currentTarget && (d.$slides.off(d.transitionEvent), d.$slides.removeClass("sp-animated"), "function" == typeof c && c()) })), e[this.vendorPrefix + "transition"] = f, this.$slides.css(e) } }, _stopMovement: function () { var a = {}; if ("css-3d" !== this.supportedAnimation && "css-2d" !== this.supportedAnimation || this.isIE !== !1) this.$slides.stop(), this.slidesPosition = parseInt(this.$slides.css("margin-" + this.positionProperty), 10); else { var b = this.$slides.css(this.vendorPrefix + "transform"), c = -1 !== b.indexOf("matrix3d") ? "matrix3d" : "matrix", d = b.replace(c, "").match(/-?[0-9\.]+/g), e = "matrix3d" === c ? parseInt(d[12], 10) : parseInt(d[4], 10), f = "matrix3d" === c ? parseInt(d[13], 10) : parseInt(d[5], 10); "css-3d" === this.supportedAnimation ? a[this.vendorPrefix + "transform"] = "translate3d(" + e + "px, " + f + "px, 0)" : a[this.vendorPrefix + "transform"] = "translate(" + e + "px, " + f + "px)", a[this.vendorPrefix + "transition"] = "", this.$slides.css(a), this.$slides.off(this.transitionEvent), this.slidesPosition = "horizontal" === this.settings.orientation ? e : f } this.$slides.removeClass("sp-animated") }, _resizeHeightTo: function (a) { var c = this, d = { height: a }; "css-3d" === this.supportedAnimation || "css-2d" === this.supportedAnimation ? (d[this.vendorPrefix + "transition"] = "height " + this.settings.heightAnimationDuration / 1e3 + "s", this.$slidesMask.off(this.transitionEvent), this.$slidesMask.on(this.transitionEvent, function (a) { a.target === a.currentTarget && (c.$slidesMask.off(c.transitionEvent), c.trigger({ type: "resizeHeightComplete" }), b.isFunction(c.settings.resizeHeightComplete) && c.settings.resizeHeightComplete.call(c, { type: "resizeHeightComplete" })) }), this.$slidesMask.css(d)) : this.$slidesMask.stop().animate(d, this.settings.heightAnimationDuration, function (a) { c.trigger({ type: "resizeHeightComplete" }), b.isFunction(c.settings.resizeHeightComplete) && c.settings.resizeHeightComplete.call(c, { type: "resizeHeightComplete" }) }) }, destroy: function () { this.$slider.removeData("sliderPro"), this.$slider.removeAttr("style"), this.$slides.removeAttr("style"), this.off("update." + c), b(a).off("resize." + this.uniqueId + "." + c); var d = b.SliderPro.modules; if ("undefined" != typeof d) for (var e = 0; e < d.length; e++) "undefined" != typeof this["destroy" + d[e]] && this["destroy" + d[e]](); b.each(this.slides, function (a, b) { b.destroy() }), this.slides.length = 0, this.$slides.prependTo(this.$slider), this.$slidesContainer.remove() }, _setProperties: function (a, b) { for (var c in a) this.settings[c] = a[c], b !== !1 && (this.originalSettings[c] = a[c]); this.update() }, on: function (a, b) { return this.$slider.on(a, b) }, off: function (a) { return this.$slider.off(a) }, trigger: function (a) { return this.$slider.triggerHandler(a) }, getSlideAt: function (a) { return this.slides[a] }, getSelectedSlide: function () { return this.selectedSlideIndex }, getTotalSlides: function () { return this.slides.length }, defaults: { width: 500, height: 300, responsive: !0, aspectRatio: -1, imageScaleMode: "cover", centerImage: !0, allowScaleUp: !0, autoHeight: !1, autoSlideSize: !1, startSlide: 0, shuffle: !1, orientation: "horizontal", forceSize: "none", loop: !0, slideDistance: 10, slideAnimationDuration: 700, heightAnimationDuration: 700, visibleSize: "auto", centerSelectedSlide: !0, rightToLeft: !1, breakpoints: null, init: function () { }, update: function () { }, sliderResize: function () { }, gotoSlide: function () { }, gotoSlideComplete: function () { }, resizeHeightComplete: function () { }, breakpointReach: function () { } } }; var e = function (a, b, c) { this.$slide = a, this.$mainImage = null, this.$imageContainer = null, this.hasMainImage = !1, this.isMainImageLoaded = !1, this.isMainImageLoading = !1, this.hasImages = !1, this.areImagesLoaded = !1, this.areImagesLoading = !1, this.width = 0, this.height = 0, this.settings = c, this.setIndex(b), this._init() }; e.prototype = { _init: function () { this.$slide.attr("data-init", !0), this.$mainImage = 0 !== this.$slide.find(".sp-image").length ? this.$slide.find(".sp-image") : null, null !== this.$mainImage && (this.hasMainImage = !0, this.$imageContainer = b('<div class="sp-image-container"></div>').prependTo(this.$slide), 0 !== this.$mainImage.parent("a").length ? this.$mainImage.parent("a").appendTo(this.$imageContainer) : this.$mainImage.appendTo(this.$imageContainer)), this.hasImages = 0 !== this.$slide.find("img").length ? !0 : !1 }, setSize: function (a, b) { this.width = a, this.height = b, this.$slide.css({ width: this.width, height: this.height }), this.hasMainImage === !0 && (this.$imageContainer.css({ width: this.settings.width, height: this.settings.height }), "undefined" == typeof this.$mainImage.attr("data-src") && this.resizeMainImage()) }, getSize: function () { var a, b = this; if (this.hasImages === !0 && this.areImagesLoaded === !1 && this.areImagesLoading === !1) { this.areImagesLoading = !0; var d = f.checkImagesStatus(this.$slide); if ("complete" !== d) return f.checkImagesComplete(this.$slide, function () { b.areImagesLoaded = !0, b.areImagesLoading = !1, b.trigger({ type: "imagesLoaded." + c, index: b.index }) }), { width: this.settings.width, height: this.settings.height } } return a = this.calculateSize(), { width: a.width, height: a.height } }, calculateSize: function () { var a = this.$slide.width(), c = this.$slide.height(); return this.$slide.children().each(function (d, e) { var f = b(e); if (f.is(":hidden") !== !0) { var g = e.getBoundingClientRect(), h = f.position().top + (g.bottom - g.top), i = f.position().left + (g.right - g.left); h > c && (c = h), i > a && (a = i) } }), { width: a, height: c } }, resizeMainImage: function (a) { var b = this; return a === !0 && (this.isMainImageLoaded = !1, this.isMainImageLoading = !1), this.isMainImageLoaded === !1 && this.isMainImageLoading === !1 ? (this.isMainImageLoading = !0, void f.checkImagesComplete(this.$mainImage, function () { b.isMainImageLoaded = !0, b.isMainImageLoading = !1, b.resizeMainImage(), b.trigger({ type: "imagesLoaded." + c, index: b.index }) })) : (this.$imageContainer.css({ width: this.width, height: this.height }), this.settings.allowScaleUp === !1 && (this.$mainImage.css({ width: "", height: "", maxWidth: "", maxHeight: "" }), this.$mainImage.css({ maxWidth: this.$mainImage.width(), maxHeight: this.$mainImage.height() })), void (this.settings.autoSlideSize === !0 ? "horizontal" === this.settings.orientation ? (this.$mainImage.css({ width: "auto", height: "100%" }), this.$slide.css("width", this.$mainImage.width())) : "vertical" === this.settings.orientation && (this.$mainImage.css({ width: "100%", height: "auto" }), this.$slide.css("height", this.$mainImage.height())) : this.settings.autoHeight === !0 ? this.$mainImage.css({ width: "100%", height: "auto" }) : ("cover" === this.settings.imageScaleMode ? this.$mainImage.width() / this.$mainImage.height() <= this.width / this.height ? this.$mainImage.css({ width: "100%", height: "auto" }) : this.$mainImage.css({ width: "auto", height: "100%" }) : "contain" === this.settings.imageScaleMode ? this.$mainImage.width() / this.$mainImage.height() >= this.width / this.height ? this.$mainImage.css({ width: "100%", height: "auto" }) : this.$mainImage.css({ width: "auto", height: "100%" }) : "exact" === this.settings.imageScaleMode && this.$mainImage.css({ width: "100%", height: "100%" }), this.settings.centerImage === !0 && this.$mainImage.css({ marginLeft: .5 * (this.$imageContainer.width() - this.$mainImage.width()), marginTop: .5 * (this.$imageContainer.height() - this.$mainImage.height()) })))) }, destroy: function () { this.$slide.removeAttr("style"), this.$slide.removeAttr("data-init"), this.$slide.removeAttr("data-index"), this.$slide.removeAttr("data-loaded"), this.hasMainImage === !0 && (this.$slide.find(".sp-image").removeAttr("style").appendTo(this.$slide), this.$slide.find(".sp-image-container").remove()) }, getIndex: function () { return this.index }, setIndex: function (a) { this.index = a, this.$slide.attr("data-index", this.index) }, on: function (a, b) { return this.$slide.on(a, b) }, off: function (a) { return this.$slide.off(a) }, trigger: function (a) { return this.$slide.triggerHandler(a) } }, a.SliderPro = d, a.SliderProSlide = e, b.fn.sliderPro = function (a) { var c = Array.prototype.slice.call(arguments, 1); return this.each(function () { if ("undefined" == typeof b(this).data("sliderPro")) { var e = new d(this, a); b(this).data("sliderPro", e) } else if ("undefined" != typeof a) { var f = b(this).data("sliderPro"); if ("function" == typeof f[a]) f[a].apply(f, c); else if ("undefined" != typeof f.settings[a]) { var g = {}; g[a] = c[0], f._setProperties(g) } else "object" == typeof a ? f._setProperties(a) : b.error(a + " does not exist in sliderPro.") } }) }; var f = { supportedAnimation: null, vendorPrefix: null, transitionEvent: null, isIE: null, getSupportedAnimation: function () { if (null !== this.supportedAnimation) return this.supportedAnimation; var a = document.body || document.documentElement, b = a.style, c = "undefined" != typeof b.transition || "undefined" != typeof b.WebkitTransition || "undefined" != typeof b.MozTransition || "undefined" != typeof b.OTransition; if (c === !0) { var d = document.createElement("div"); if (("undefined" != typeof d.style.WebkitPerspective || "undefined" != typeof d.style.perspective) && (this.supportedAnimation = "css-3d"), "css-3d" === this.supportedAnimation && "undefined" != typeof d.styleWebkitPerspective) { var e = document.createElement("style"); e.textContent = "@media (transform-3d),(-webkit-transform-3d){#test-3d{left:9px;position:absolute;height:5px;margin:0;padding:0;border:0;}}", document.getElementsByTagName("head")[0].appendChild(e), d.id = "test-3d", document.body.appendChild(d), (9 !== d.offsetLeft || 5 !== d.offsetHeight) && (this.supportedAnimation = null), e.parentNode.removeChild(e), d.parentNode.removeChild(d) } null !== this.supportedAnimation || "undefined" == typeof d.style["-webkit-transform"] && "undefined" == typeof d.style.transform || (this.supportedAnimation = "css-2d") } else this.supportedAnimation = "javascript"; return this.supportedAnimation }, getVendorPrefix: function () { if (null !== this.vendorPrefix) return this.vendorPrefix; var a = document.createElement("div"), b = ["Webkit", "Moz", "ms", "O"]; if ("transform" in a.style) return this.vendorPrefix = "", this.vendorPrefix; for (var c = 0; c < b.length; c++) if (b[c] + "Transform" in a.style) { this.vendorPrefix = "-" + b[c].toLowerCase() + "-"; break } return this.vendorPrefix }, getTransitionEvent: function () { if (null !== this.transitionEvent) return this.transitionEvent; var a = document.createElement("div"), b = { transition: "transitionend", WebkitTransition: "webkitTransitionEnd", MozTransition: "transitionend", OTransition: "oTransitionEnd" }; for (var c in b) if (c in a.style) { this.transitionEvent = b[c]; break } return this.transitionEvent }, checkImagesComplete: function (a, b) { var c = this, d = this.checkImagesStatus(a); if ("loading" === d) var e = setInterval(function () { d = c.checkImagesStatus(a), "complete" === d && (clearInterval(e), "function" == typeof b && b()) }, 100); else "function" == typeof b && b(); return d }, checkImagesStatus: function (a) { var c = "complete"; return a.is("img") && a[0].complete === !1 ? c = "loading" : a.find("img").each(function (a) { var d = b(this)[0]; d.complete === !1 && (c = "loading") }), c }, checkIE: function () { if (null !== this.isIE) return this.isIE; var b = a.navigator.userAgent; b.indexOf("MSIE"); return -1 !== b.indexOf("MSIE") || b.match(/Trident.*rv\:11\./) ? this.isIE = !0 : this.isIE = !1, this.isIE } }; a.SliderProUtils = f }(window, jQuery), function (a, b) {
    "use strict"; var c = "Thumbnails." + b.SliderPro.namespace, d = {
        $thumbnails: null, $thumbnailsContainer: null, thumbnails: null, selectedThumbnailIndex: 0, thumbnailsSize: 0, thumbnailsContainerSize: 0, thumbnailsPosition: 0, thumbnailsOrientation: null, thumbnailsPositionProperty: null, isThumbnailScroller: !1, initThumbnails: function () { var a = this; this.thumbnails = [], this.on("update." + c, b.proxy(this._thumbnailsOnUpdate, this)), this.on("sliderResize." + c, b.proxy(this._thumbnailsOnResize, this)), this.on("gotoSlide." + c, function (b) { a._gotoThumbnail(b.index) }) }, _thumbnailsOnUpdate: function () { var a = this; if (0 === this.$slider.find(".sp-thumbnail").length && 0 === this.thumbnails.length) return void (this.isThumbnailScroller = !1); if (this.isThumbnailScroller = !0, null === this.$thumbnailsContainer && (this.$thumbnailsContainer = b('<div class="sp-thumbnails-container"></div>').insertAfter(this.$slidesContainer)), null === this.$thumbnails) if (0 !== this.$slider.find(".sp-thumbnails").length) { if (this.$thumbnails = this.$slider.find(".sp-thumbnails").appendTo(this.$thumbnailsContainer), this.settings.shuffle === !0) { var c = this.$thumbnails.find(".sp-thumbnail"), d = []; b.each(this.shuffledIndexes, function (a, e) { var f = b(c[e]); 0 !== f.parent("a").length && (f = f.parent("a")), d.push(f) }), this.$thumbnails.empty().append(d) } } else this.$thumbnails = b('<div class="sp-thumbnails"></div>').appendTo(this.$thumbnailsContainer); this.$slides.find(".sp-thumbnail").each(function (c) { var d = b(this), e = d.parents(".sp-slide").index(), f = a.$thumbnails.find(".sp-thumbnail").length - 1; 0 !== d.parent("a").length && (d = d.parent("a")), e > f ? d.appendTo(a.$thumbnails) : d.insertBefore(a.$thumbnails.find(".sp-thumbnail").eq(e)) }); for (var e = this.thumbnails.length - 1; e >= 0; e--) if (0 === this.$thumbnails.find('.sp-thumbnail[data-index="' + e + '"]').length) { var f = this.thumbnails[e]; f.destroy(), this.thumbnails.splice(e, 1) } this.$thumbnails.find(".sp-thumbnail").each(function (c) { var d = b(this); "undefined" == typeof d.attr("data-init") ? a._createThumbnail(d, c) : a.thumbnails[c].setIndex(c) }), this.$thumbnailsContainer.removeClass("sp-top-thumbnails sp-bottom-thumbnails sp-left-thumbnails sp-right-thumbnails"), "top" === this.settings.thumbnailsPosition ? (this.$thumbnailsContainer.addClass("sp-top-thumbnails"), this.thumbnailsOrientation = "horizontal") : "bottom" === this.settings.thumbnailsPosition ? (this.$thumbnailsContainer.addClass("sp-bottom-thumbnails"), this.thumbnailsOrientation = "horizontal") : "left" === this.settings.thumbnailsPosition ? (this.$thumbnailsContainer.addClass("sp-left-thumbnails"), this.thumbnailsOrientation = "vertical") : "right" === this.settings.thumbnailsPosition && (this.$thumbnailsContainer.addClass("sp-right-thumbnails"), this.thumbnailsOrientation = "vertical"), this.settings.thumbnailPointer === !0 ? this.$thumbnailsContainer.addClass("sp-has-pointer") : this.$thumbnailsContainer.removeClass("sp-has-pointer"), this.selectedThumbnailIndex = this.selectedSlideIndex, this.$thumbnails.find(".sp-thumbnail-container").eq(this.selectedThumbnailIndex).addClass("sp-selected-thumbnail"), this.thumbnailsSize = 0, b.each(this.thumbnails, function (b, c) { c.setSize(a.settings.thumbnailWidth, a.settings.thumbnailHeight), a.thumbnailsSize += "horizontal" === a.thumbnailsOrientation ? c.getSize().width : c.getSize().height }), "horizontal" === this.thumbnailsOrientation ? (this.$thumbnails.css({ width: this.thumbnailsSize, height: this.settings.thumbnailHeight }), this.$thumbnailsContainer.css("height", ""), this.thumbnailsPositionProperty = "left") : (this.$thumbnails.css({ width: this.settings.thumbnailWidth, height: this.thumbnailsSize }), this.$thumbnailsContainer.css("width", ""), this.thumbnailsPositionProperty = "top"), this.trigger({ type: "thumbnailsUpdate" }), b.isFunction(this.settings.thumbnailsUpdate) && this.settings.thumbnailsUpdate.call(this, { type: "thumbnailsUpdate" }) }, _createThumbnail: function (a, b) { var d = this, f = new e(a, this.$thumbnails, b); f.on("thumbnailClick." + c, function (a) { d.gotoSlide(a.index) }), this.thumbnails.splice(b, 0, f) }, _thumbnailsOnResize: function () { if (this.isThumbnailScroller !== !1) { var c; "horizontal" === this.thumbnailsOrientation ? (this.thumbnailsContainerSize = Math.min(this.$slidesMask.width(), this.thumbnailsSize), this.$thumbnailsContainer.css("width", this.thumbnailsContainerSize), "fullWindow" === this.settings.forceSize && (this.$slidesMask.css("height", this.$slidesMask.height() - this.$thumbnailsContainer.outerHeight(!0)), this.slideHeight = this.$slidesMask.height(), this._resizeSlides(), this._resetSlidesPosition())) : "vertical" === this.thumbnailsOrientation && (this.$slidesMask.width() + this.$thumbnailsContainer.outerWidth(!0) > this.$slider.parent().width() && ("fullWidth" === this.settings.forceSize || "fullWindow" === this.settings.forceSize ? this.$slider.css("max-width", b(a).width() - this.$thumbnailsContainer.outerWidth(!0)) : this.$slider.css("max-width", this.$slider.parent().width() - this.$thumbnailsContainer.outerWidth(!0)), this.$slidesMask.css("width", this.$slider.width()), "vertical" === this.settings.orientation && (this.slideWidth = this.$slider.width(), this._resizeSlides()), this._resetSlidesPosition()), this.thumbnailsContainerSize = Math.min(this.$slidesMask.height(), this.thumbnailsSize), this.$thumbnailsContainer.css("height", this.thumbnailsContainerSize)), c = this.thumbnailsSize <= this.thumbnailsContainerSize || 0 === this.$thumbnails.find(".sp-selected-thumbnail").length ? 0 : Math.max(-this.thumbnails[this.selectedThumbnailIndex].getPosition()[this.thumbnailsPositionProperty], this.thumbnailsContainerSize - this.thumbnailsSize), "top" === this.settings.thumbnailsPosition ? this.$slider.css({ paddingTop: this.$thumbnailsContainer.outerHeight(!0), paddingLeft: "", paddingRight: "" }) : "bottom" === this.settings.thumbnailsPosition ? this.$slider.css({ paddingTop: "", paddingLeft: "", paddingRight: "" }) : "left" === this.settings.thumbnailsPosition ? this.$slider.css({ paddingTop: "", paddingLeft: this.$thumbnailsContainer.outerWidth(!0), paddingRight: "" }) : "right" === this.settings.thumbnailsPosition && this.$slider.css({ paddingTop: "", paddingLeft: "", paddingRight: this.$thumbnailsContainer.outerWidth(!0) }), this._moveThumbnailsTo(c, !0) } }, _gotoThumbnail: function (a) {
            if (this.isThumbnailScroller !== !1 && "undefined" != typeof this.thumbnails[a]) {
                var c = this.selectedThumbnailIndex, d = this.thumbnailsPosition; if (this.selectedThumbnailIndex = a, this.$thumbnails.find(".sp-selected-thumbnail").removeClass("sp-selected-thumbnail"), this.$thumbnails.find(".sp-thumbnail-container").eq(this.selectedThumbnailIndex).addClass("sp-selected-thumbnail"), this.settings.rightToLeft === !0 && "horizontal" === this.thumbnailsOrientation) {
                    if (this.selectedThumbnailIndex >= c) {
                        var e = this.selectedThumbnailIndex === this.thumbnails.length - 1 ? this.selectedThumbnailIndex : this.selectedThumbnailIndex + 1, f = this.thumbnails[e];
                        f.getPosition().left < -this.thumbnailsPosition && (d = -f.getPosition().left)
                    } else if (this.selectedThumbnailIndex < c) { var g = 0 === this.selectedThumbnailIndex ? this.selectedThumbnailIndex : this.selectedThumbnailIndex - 1, h = this.thumbnails[g], i = -this.thumbnailsPosition + this.thumbnailsContainerSize; h.getPosition().right > i && (d = this.thumbnailsPosition - (h.getPosition().right - i)) }
                } else if (this.selectedThumbnailIndex >= c) { var j = this.selectedThumbnailIndex === this.thumbnails.length - 1 ? this.selectedThumbnailIndex : this.selectedThumbnailIndex + 1, k = this.thumbnails[j], l = "horizontal" === this.thumbnailsOrientation ? k.getPosition().right : k.getPosition().bottom, m = -this.thumbnailsPosition + this.thumbnailsContainerSize; l > m && (d = this.thumbnailsPosition - (l - m)) } else if (this.selectedThumbnailIndex < c) { var n = 0 === this.selectedThumbnailIndex ? this.selectedThumbnailIndex : this.selectedThumbnailIndex - 1, o = this.thumbnails[n], p = "horizontal" === this.thumbnailsOrientation ? o.getPosition().left : o.getPosition().top; p < -this.thumbnailsPosition && (d = -p) } this._moveThumbnailsTo(d), this.trigger({ type: "gotoThumbnail" }), b.isFunction(this.settings.gotoThumbnail) && this.settings.gotoThumbnail.call(this, { type: "gotoThumbnail" })
            }
        }, _moveThumbnailsTo: function (a, c, d) { var e = this, f = {}; if (a !== this.thumbnailsPosition) if (this.thumbnailsPosition = a, "css-3d" === this.supportedAnimation || "css-2d" === this.supportedAnimation) { var g, h = "horizontal" === this.thumbnailsOrientation ? a : 0, i = "horizontal" === this.thumbnailsOrientation ? 0 : a; "css-3d" === this.supportedAnimation ? f[this.vendorPrefix + "transform"] = "translate3d(" + h + "px, " + i + "px, 0)" : f[this.vendorPrefix + "transform"] = "translate(" + h + "px, " + i + "px)", "undefined" != typeof c && c === !0 ? g = "" : (this.$thumbnails.addClass("sp-animated"), g = this.vendorPrefix + "transform 0.7s", this.$thumbnails.on(this.transitionEvent, function (a) { a.target === a.currentTarget && (e.$thumbnails.off(e.transitionEvent), e.$thumbnails.removeClass("sp-animated"), "function" == typeof d && d(), e.trigger({ type: "thumbnailsMoveComplete" }), b.isFunction(e.settings.thumbnailsMoveComplete) && e.settings.thumbnailsMoveComplete.call(e, { type: "thumbnailsMoveComplete" })) })), f[this.vendorPrefix + "transition"] = g, this.$thumbnails.css(f) } else f["margin-" + this.thumbnailsPositionProperty] = a, "undefined" != typeof c && c === !0 ? this.$thumbnails.css(f) : this.$thumbnails.addClass("sp-animated").animate(f, 700, function () { e.$thumbnails.removeClass("sp-animated"), "function" == typeof d && d(), e.trigger({ type: "thumbnailsMoveComplete" }), b.isFunction(e.settings.thumbnailsMoveComplete) && e.settings.thumbnailsMoveComplete.call(e, { type: "thumbnailsMoveComplete" }) }) }, _stopThumbnailsMovement: function () { var a = {}; if ("css-3d" === this.supportedAnimation || "css-2d" === this.supportedAnimation) { var b = this.$thumbnails.css(this.vendorPrefix + "transform"), c = -1 !== b.indexOf("matrix3d") ? "matrix3d" : "matrix", d = b.replace(c, "").match(/-?[0-9\.]+/g), e = "matrix3d" === c ? parseInt(d[12], 10) : parseInt(d[4], 10), f = "matrix3d" === c ? parseInt(d[13], 10) : parseInt(d[5], 10); "css-3d" === this.supportedAnimation ? a[this.vendorPrefix + "transform"] = "translate3d(" + e + "px, " + f + "px, 0)" : a[this.vendorPrefix + "transform"] = "translate(" + e + "px, " + f + "px)", a[this.vendorPrefix + "transition"] = "", this.$thumbnails.css(a), this.$thumbnails.off(this.transitionEvent), this.thumbnailsPosition = "horizontal" === this.thumbnailsOrientation ? parseInt(d[4], 10) : parseInt(d[5], 10) } else this.$thumbnails.stop(), this.thumbnailsPosition = parseInt(this.$thumbnails.css("margin-" + this.thumbnailsPositionProperty), 10); this.$thumbnails.removeClass("sp-animated") }, destroyThumbnails: function () { var d = this; this.off("update." + c), this.isThumbnailScroller !== !1 && (this.off("sliderResize." + c), this.off("gotoSlide." + c), b(a).off("resize." + this.uniqueId + "." + c), this.$thumbnails.find(".sp-thumbnail").each(function () { var a = b(this), e = parseInt(a.attr("data-index"), 10), f = d.thumbnails[e]; f.off("thumbnailClick." + c), f.destroy() }), this.thumbnails.length = 0, this.$thumbnails.appendTo(this.$slider), this.$thumbnailsContainer.remove(), this.$slider.css({ paddingTop: "", paddingLeft: "", paddingRight: "" })) }, thumbnailsDefaults: { thumbnailWidth: 100, thumbnailHeight: 80, thumbnailsPosition: "bottom", thumbnailPointer: !1, thumbnailsUpdate: function () { }, gotoThumbnail: function () { }, thumbnailsMoveComplete: function () { } }
    }, e = function (a, b, c) { this.$thumbnail = a, this.$thumbnails = b, this.$thumbnailContainer = null, this.width = 0, this.height = 0, this.isImageLoaded = !1, this.setIndex(c), this._init() }; e.prototype = { _init: function () { var a = this; this.$thumbnail.attr("data-init", !0), this.$thumbnailContainer = b('<div class="sp-thumbnail-container"></div>').appendTo(this.$thumbnails), 0 !== this.$thumbnail.parent("a").length ? this.$thumbnail.parent("a").appendTo(this.$thumbnailContainer) : this.$thumbnail.appendTo(this.$thumbnailContainer), this.$thumbnailContainer.on("click." + c, function () { a.trigger({ type: "thumbnailClick." + c, index: a.index }) }) }, setSize: function (a, b) { this.width = a, this.height = b, this.$thumbnailContainer.css({ width: this.width, height: this.height }), this.$thumbnail.is("img") && "undefined" == typeof this.$thumbnail.attr("data-src") && this.resizeImage() }, getSize: function () { return { width: this.$thumbnailContainer.outerWidth(!0), height: this.$thumbnailContainer.outerHeight(!0) } }, getPosition: function () { return { left: this.$thumbnailContainer.position().left + parseInt(this.$thumbnailContainer.css("marginLeft"), 10), right: this.$thumbnailContainer.position().left + parseInt(this.$thumbnailContainer.css("marginLeft"), 10) + this.$thumbnailContainer.outerWidth(), top: this.$thumbnailContainer.position().top + parseInt(this.$thumbnailContainer.css("marginTop"), 10), bottom: this.$thumbnailContainer.position().top + parseInt(this.$thumbnailContainer.css("marginTop"), 10) + this.$thumbnailContainer.outerHeight() } }, setIndex: function (a) { this.index = a, this.$thumbnail.attr("data-index", this.index) }, resizeImage: function () { var a = this; if (this.isImageLoaded === !1) return void SliderProUtils.checkImagesComplete(this.$thumbnailContainer, function () { a.isImageLoaded = !0, a.resizeImage() }); this.$thumbnail = this.$thumbnailContainer.find(".sp-thumbnail"); var b = this.$thumbnail.width(), c = this.$thumbnail.height(); b / c <= this.width / this.height ? this.$thumbnail.css({ width: "100%", height: "auto" }) : this.$thumbnail.css({ width: "auto", height: "100%" }), this.$thumbnail.css({ marginLeft: .5 * (this.$thumbnailContainer.width() - this.$thumbnail.width()), marginTop: .5 * (this.$thumbnailContainer.height() - this.$thumbnail.height()) }) }, destroy: function () { this.$thumbnailContainer.off("click." + c), this.$thumbnail.removeAttr("data-init"), this.$thumbnail.removeAttr("data-index"), 0 !== this.$thumbnail.parent("a").length ? this.$thumbnail.parent("a").insertBefore(this.$thumbnailContainer) : this.$thumbnail.insertBefore(this.$thumbnailContainer), this.$thumbnailContainer.remove() }, on: function (a, b) { return this.$thumbnailContainer.on(a, b) }, off: function (a) { return this.$thumbnailContainer.off(a) }, trigger: function (a) { return this.$thumbnailContainer.triggerHandler(a) } }, b.SliderPro.addModule("Thumbnails", d)
}(window, jQuery), function (a, b) { "use strict"; var c = "ConditionalImages." + b.SliderPro.namespace, d = { previousImageSize: null, currentImageSize: null, isRetinaScreen: !1, initConditionalImages: function () { this.currentImageSize = this.previousImageSize = "default", this.isRetinaScreen = "undefined" != typeof this._isRetina && this._isRetina() === !0, this.on("update." + c, b.proxy(this._conditionalImagesOnUpdate, this)), this.on("sliderResize." + c, b.proxy(this._conditionalImagesOnResize, this)) }, _conditionalImagesOnUpdate: function () { b.each(this.slides, function (a, c) { var d = c.$slide; d.find("img:not([ data-default ])").each(function () { var a = b(this); "undefined" != typeof a.attr("data-src") ? a.attr("data-default", a.attr("data-src")) : a.attr("data-default", a.attr("src")) }) }) }, _conditionalImagesOnResize: function () { if (this.slideWidth <= this.settings.smallSize ? this.currentImageSize = "small" : this.slideWidth <= this.settings.mediumSize ? this.currentImageSize = "medium" : this.slideWidth <= this.settings.largeSize ? this.currentImageSize = "large" : this.currentImageSize = "default", this.previousImageSize !== this.currentImageSize) { var a = this; b.each(this.slides, function (c, d) { var e = d.$slide; e.find("img").each(function () { var c = b(this), e = ""; a.isRetinaScreen === !0 && "undefined" != typeof c.attr("data-retina" + a.currentImageSize) ? (e = c.attr("data-retina" + a.currentImageSize), "undefined" != typeof c.attr("data-retina") && c.attr("data-retina") !== e && c.attr("data-retina", e)) : (a.isRetinaScreen === !1 || a.isRetinaScreen === !0 && "undefined" == typeof c.attr("data-retina")) && "undefined" != typeof c.attr("data-" + a.currentImageSize) && (e = c.attr("data-" + a.currentImageSize), "undefined" != typeof c.attr("data-src") && c.attr("data-src") !== e && c.attr("data-src", e)), "" !== e && "undefined" == typeof c.attr("data-src") && c.attr("src") !== e && a._loadConditionalImage(c, e, function (a) { a.hasClass("sp-image") && (d.$mainImage = a, d.resizeMainImage(!0)) }) }) }), this.previousImageSize = this.currentImageSize } }, _loadConditionalImage: function (a, c, d) { var e = b(new Image); e.attr("class", a.attr("class")), e.attr("style", a.attr("style")), b.each(a.data(), function (a, b) { e.attr("data-" + a, b) }), "undefined" != typeof a.attr("width") && e.attr("width", a.attr("width")), "undefined" != typeof a.attr("height") && e.attr("height", a.attr("height")), "undefined" != typeof a.attr("alt") && e.attr("alt", a.attr("alt")), "undefined" != typeof a.attr("title") && e.attr("title", a.attr("title")), e.attr("src", c), e.insertAfter(a), a.remove(), a = null, "function" == typeof d && d(e) }, destroyConditionalImages: function () { this.off("update." + c), this.off("sliderResize." + c) }, conditionalImagesDefaults: { smallSize: 480, mediumSize: 768, largeSize: 1024 } }; b.SliderPro.addModule("ConditionalImages", d) }(window, jQuery), function (a, b) { "use strict"; var c = "Retina." + b.SliderPro.namespace, d = { initRetina: function () { this._isRetina() !== !1 && (this.on("sliderResize." + c, b.proxy(this._checkRetinaImages, this)), 0 !== this.$slider.find(".sp-thumbnail").length && this.on("update.Thumbnails." + c, b.proxy(this._checkRetinaThumbnailImages, this))) }, _isRetina: function () { return a.devicePixelRatio >= 2 ? !0 : a.matchMedia && a.matchMedia("(-webkit-min-device-pixel-ratio: 2),(min-resolution: 2dppx)").matches ? !0 : !1 }, _checkRetinaImages: function () { var a = this; b.each(this.slides, function (c, d) { var e = d.$slide; "undefined" == typeof e.attr("data-retina-loaded") && (e.attr("data-retina-loaded", !0), e.find("img[data-retina]").each(function () { var c = b(this); "undefined" != typeof c.attr("data-src") ? c.attr("data-src", c.attr("data-retina")) : a._loadRetinaImage(c, function (a) { a.hasClass("sp-image") && (d.$mainImage = a, d.resizeMainImage(!0)) }) })) }) }, _checkRetinaThumbnailImages: function () { var a = this; b.each(this.thumbnails, function (c, d) { var e = d.$thumbnailContainer; "undefined" == typeof e.attr("data-retina-loaded") && (e.attr("data-retina-loaded", !0), e.find("img[data-retina]").each(function () { var c = b(this); "undefined" != typeof c.attr("data-src") ? c.attr("data-src", c.attr("data-retina")) : a._loadRetinaImage(c, function (a) { a.hasClass("sp-thumbnail") && d.resizeImage() }) })) }) }, _loadRetinaImage: function (a, c) { var d = !1, e = ""; if ("undefined" != typeof a.attr("data-retina") && (d = !0, e = a.attr("data-retina")), "undefined" != typeof a.attr("data-src") && (d === !1 && (e = a.attr("data-src")), a.removeAttr("data-src")), "" !== e) { var f = b(new Image); f.attr("class", a.attr("class")), f.attr("style", a.attr("style")), b.each(a.data(), function (a, b) { f.attr("data-" + a, b) }), "undefined" != typeof a.attr("width") && f.attr("width", a.attr("width")), "undefined" != typeof a.attr("height") && f.attr("height", a.attr("height")), "undefined" != typeof a.attr("alt") && f.attr("alt", a.attr("alt")), "undefined" != typeof a.attr("title") && f.attr("title", a.attr("title")), f.insertAfter(a), a.remove(), a = null, f.attr("src", e), "function" == typeof c && c(f) } }, destroyRetina: function () { this.off("update." + c), this.off("update.Thumbnails." + c) } }; b.SliderPro.addModule("Retina", d) }(window, jQuery), function (a, b) { "use strict"; var c = "LazyLoading." + b.SliderPro.namespace, d = { allowLazyLoadingCheck: !0, initLazyLoading: function () { this.on("sliderResize." + c, b.proxy(this._lazyLoadingOnResize, this)), this.on("gotoSlide." + c, b.proxy(this._checkAndLoadVisibleImages, this)), this.on("thumbnailsUpdate." + c + " thumbnailsMoveComplete." + c, b.proxy(this._checkAndLoadVisibleThumbnailImages, this)) }, _lazyLoadingOnResize: function () { var a = this; this.allowLazyLoadingCheck !== !1 && (this.allowLazyLoadingCheck = !1, this._checkAndLoadVisibleImages(), 0 !== this.$slider.find(".sp-thumbnail").length && this._checkAndLoadVisibleThumbnailImages(), setTimeout(function () { a.allowLazyLoadingCheck = !0 }, 500)) }, _checkAndLoadVisibleImages: function () { if (0 !== this.$slider.find(".sp-slide:not([ data-loaded ])").length) { var a = this, c = this.settings.loop === !0 ? this.middleSlidePosition : this.selectedSlideIndex, d = Math.ceil((parseInt(this.$slidesMask.css(this.sizeProperty), 10) - this.averageSlideSize) / 2 / this.averageSlideSize), e = this.settings.centerSelectedSlide === !0 ? Math.max(c - d - 1, 0) : Math.max(c - 1, 0), f = this.settings.centerSelectedSlide === !0 ? Math.min(c + d + 1, this.getTotalSlides() - 1) : Math.min(c + 2 * d + 1, this.getTotalSlides() - 1), g = this.slidesOrder.slice(e, f + 1); b.each(g, function (c, d) { var e = a.slides[d], f = e.$slide; "undefined" == typeof f.attr("data-loaded") && (f.attr("data-loaded", !0), f.find("img[ data-src ]").each(function () { var c = b(this); a._loadImage(c, function (a) { a.hasClass("sp-image") && (e.$mainImage = a, e.resizeMainImage(!0)) }) })) }) } }, _checkAndLoadVisibleThumbnailImages: function () { if (0 !== this.$slider.find(".sp-thumbnail-container:not([ data-loaded ])").length) { var a = this, c = this.thumbnailsSize / this.thumbnails.length, d = Math.floor(Math.abs(this.thumbnailsPosition / c)), e = Math.floor((-this.thumbnailsPosition + this.thumbnailsContainerSize) / c), f = this.thumbnails.slice(d, e + 1); b.each(f, function (c, d) { var e = d.$thumbnailContainer; "undefined" == typeof e.attr("data-loaded") && (e.attr("data-loaded", !0), e.find("img[ data-src ]").each(function () { var c = b(this); a._loadImage(c, function () { d.resizeImage() }) })) }) } }, _loadImage: function (a, c) { var d = b(new Image); d.attr("class", a.attr("class")), d.attr("style", a.attr("style")), b.each(a.data(), function (a, b) { d.attr("data-" + a, b) }), "undefined" != typeof a.attr("width") && d.attr("width", a.attr("width")), "undefined" != typeof a.attr("height") && d.attr("height", a.attr("height")), "undefined" != typeof a.attr("alt") && d.attr("alt", a.attr("alt")), "undefined" != typeof a.attr("title") && d.attr("title", a.attr("title")), d.attr("src", a.attr("data-src")), d.removeAttr("data-src"), d.insertAfter(a), a.remove(), a = null, "function" == typeof c && c(d) }, destroyLazyLoading: function () { this.off("update." + c), this.off("gotoSlide." + c), this.off("sliderResize." + c), this.off("thumbnailsUpdate." + c), this.off("thumbnailsMoveComplete." + c) } }; b.SliderPro.addModule("LazyLoading", d) }(window, jQuery), function (a, b) { "use strict"; var c = "Layers." + b.SliderPro.namespace, d = { layersGotoSlideReference: null, waitForLayersTimer: null, initLayers: function () { this.on("update." + c, b.proxy(this._layersOnUpdate, this)), this.on("sliderResize." + c, b.proxy(this._layersOnResize, this)), this.on("gotoSlide." + c, b.proxy(this._layersOnGotoSlide, this)) }, _layersOnUpdate: function (a) { var c = this; b.each(this.slides, function (a, c) { c.$slide; this.$slide.find(".sp-layer:not([ data-layer-init ])").each(function () { var a = new f(b(this)); "undefined" == typeof c.layers && (c.layers = []), c.layers.push(a), b(this).hasClass("sp-static") === !1 && ("undefined" == typeof c.animatedLayers && (c.animatedLayers = []), c.animatedLayers.push(a)) }) }), this.settings.waitForLayers === !0 && (clearTimeout(this.waitForLayersTimer), this.waitForLayersTimer = setTimeout(function () { c.layersGotoSlideReference = c.gotoSlide, c.gotoSlide = c._layersGotoSlide }, 1)), setTimeout(function () { c.showLayers(c.selectedSlideIndex) }, 1) }, _layersOnResize: function () { var a, c, d = this, e = this.settings.autoScaleLayers; this.settings.autoScaleLayers !== !1 && (-1 === this.settings.autoScaleReference ? "string" == typeof this.settings.width && -1 !== this.settings.width.indexOf("%") ? e = !1 : a = parseInt(this.settings.width, 10) : a = this.settings.autoScaleReference, c = e === !0 && this.slideWidth < a ? d.slideWidth / a : 1, b.each(this.slides, function (a, d) { "undefined" != typeof d.layers && b.each(d.layers, function (a, b) { b.scale(c) }) })) }, _layersGotoSlide: function (a) { var b = this, d = this.slides[this.selectedSlideIndex].animatedLayers; this.$slider.hasClass("sp-swiping") || "undefined" == typeof d || 0 === d.length ? this.layersGotoSlideReference(a) : (this.on("hideLayersComplete." + c, function () { b.off("hideLayersComplete." + c), b.layersGotoSlideReference(a) }), this.hideLayers(this.selectedSlideIndex)) }, _layersOnGotoSlide: function (a) { this.previousSlideIndex !== this.selectedSlideIndex && this.hideLayers(this.previousSlideIndex), this.showLayers(this.selectedSlideIndex) }, showLayers: function (a) { var c = this, d = this.slides[a].animatedLayers, e = 0; "undefined" != typeof d && b.each(d, function (a, f) { f.isVisible() === !0 ? (e++, e === d.length && (c.trigger({ type: "showLayersComplete", index: a }), b.isFunction(c.settings.showLayersComplete) && c.settings.showLayersComplete.call(c, { type: "showLayersComplete", index: a }))) : f.show(function () { e++, e === d.length && (c.trigger({ type: "showLayersComplete", index: a }), b.isFunction(c.settings.showLayersComplete) && c.settings.showLayersComplete.call(c, { type: "showLayersComplete", index: a })) }) }) }, hideLayers: function (a) { var c = this, d = this.slides[a].animatedLayers, e = 0; "undefined" != typeof d && b.each(d, function (a, f) { f.isVisible() === !1 ? (e++, e === d.length && (c.trigger({ type: "hideLayersComplete", index: a }), b.isFunction(c.settings.hideLayersComplete) && c.settings.hideLayersComplete.call(c, { type: "hideLayersComplete", index: a }))) : f.hide(function () { e++, e === d.length && (c.trigger({ type: "hideLayersComplete", index: a }), b.isFunction(c.settings.hideLayersComplete) && c.settings.hideLayersComplete.call(c, { type: "hideLayersComplete", index: a })) }) }) }, destroyLayers: function () { this.off("update." + c), this.off("sliderResize." + c), this.off("gotoSlide." + c), this.off("hideLayersComplete." + c) }, layersDefaults: { waitForLayers: !1, autoScaleLayers: !0, autoScaleReference: -1, showLayersComplete: function () { }, hideLayersComplete: function () { } } }, e = a.SliderProSlide.prototype.destroy; a.SliderProSlide.prototype.destroy = function () { "undefined" != typeof this.layers && (b.each(this.layers, function (a, b) { b.destroy() }), this.layers.length = 0), "undefined" != typeof this.animatedLayers && (this.animatedLayers.length = 0), e.apply(this) }; var f = function (a) { this.$layer = a, this.visible = !1, this.styled = !1, this.data = null, this.position = null, this.horizontalProperty = null, this.verticalProperty = null, this.horizontalPosition = null, this.verticalPosition = null, this.scaleRatio = 1, this.supportedAnimation = SliderProUtils.getSupportedAnimation(), this.vendorPrefix = SliderProUtils.getVendorPrefix(), this.transitionEvent = SliderProUtils.getTransitionEvent(), this.delayTimer = null, this.stayTimer = null, this._init() }; f.prototype = { _init: function () { this.$layer.attr("data-layer-init", !0), this.$layer.hasClass("sp-static") ? this._setStyle() : this.$layer.css({ visibility: "hidden" }) }, _setStyle: function () { this.styled = !0, this.data = this.$layer.data(), "undefined" != typeof this.data.width && this.$layer.css("width", this.data.width), "undefined" != typeof this.data.height && this.$layer.css("height", this.data.height), "undefined" != typeof this.data.depth && this.$layer.css("z-index", this.data.depth), this.position = this.data.position ? this.data.position.toLowerCase() : "topleft", -1 !== this.position.indexOf("right") ? this.horizontalProperty = "right" : -1 !== this.position.indexOf("left") ? this.horizontalProperty = "left" : this.horizontalProperty = "center", -1 !== this.position.indexOf("bottom") ? this.verticalProperty = "bottom" : -1 !== this.position.indexOf("top") ? this.verticalProperty = "top" : this.verticalProperty = "center", this._setPosition(), this.scale(this.scaleRatio) }, _setPosition: function () { var a = this.$layer.attr("style"); this.horizontalPosition = "undefined" != typeof this.data.horizontal ? this.data.horizontal : 0, this.verticalPosition = "undefined" != typeof this.data.vertical ? this.data.vertical : 0, "center" === this.horizontalProperty ? (this.$layer.is("img") === !1 && ("undefined" == typeof a || "undefined" != typeof a && -1 === a.indexOf("width")) && (this.$layer.css("white-space", "nowrap"), this.$layer.css("width", this.$layer.outerWidth(!0))), this.$layer.css({ marginLeft: "auto", marginRight: "auto", left: this.horizontalPosition, right: 0 })) : this.$layer.css(this.horizontalProperty, this.horizontalPosition), "center" === this.verticalProperty ? (this.$layer.is("img") === !1 && ("undefined" == typeof a || "undefined" != typeof a && -1 === a.indexOf("height")) && (this.$layer.css("white-space", "nowrap"), this.$layer.css("height", this.$layer.outerHeight(!0))), this.$layer.css({ marginTop: "auto", marginBottom: "auto", top: this.verticalPosition, bottom: 0 })) : this.$layer.css(this.verticalProperty, this.verticalPosition) }, scale: function (a) { if (!this.$layer.hasClass("sp-no-scale") && (this.scaleRatio = a, this.styled !== !1)) { var b = "center" === this.horizontalProperty ? "left" : this.horizontalProperty, c = "center" === this.verticalProperty ? "top" : this.verticalProperty, d = {}; d[this.vendorPrefix + "transform-origin"] = this.horizontalProperty + " " + this.verticalProperty, d[this.vendorPrefix + "transform"] = "scale(" + this.scaleRatio + ")", "string" != typeof this.horizontalPosition && (d[b] = this.horizontalPosition * this.scaleRatio), "string" != typeof this.verticalPosition && (d[c] = this.verticalPosition * this.scaleRatio), "string" == typeof this.data.width && -1 !== this.data.width.indexOf("%") && (d.width = (parseInt(this.data.width, 10) / this.scaleRatio).toString() + "%"), "string" == typeof this.data.height && -1 !== this.data.height.indexOf("%") && (d.height = (parseInt(this.data.height, 10) / this.scaleRatio).toString() + "%"), this.$layer.css(d) } }, show: function (a) { if (this.visible !== !0) { this.visible = !0, this.styled === !1 && this._setStyle(); var b = this, c = "undefined" != typeof this.data.showOffset ? this.data.showOffset : 50, d = "undefined" != typeof this.data.showDuration ? this.data.showDuration / 1e3 : .4, e = "undefined" != typeof this.data.showDelay ? this.data.showDelay : 10, f = "undefined" != typeof b.data.stayDuration ? parseInt(b.data.stayDuration, 10) : -1; if ("javascript" === this.supportedAnimation) this.$layer.stop().delay(e).css({ opacity: 0, visibility: "visible" }).animate({ opacity: 1 }, 1e3 * d, function () { -1 !== f && (b.stayTimer = setTimeout(function () { b.hide(), b.stayTimer = null }, f)), "undefined" != typeof a && a() }); else { var g = { opacity: 0, visibility: "visible" }, h = { opacity: 1 }, i = ""; g[this.vendorPrefix + "transform"] = "scale(" + this.scaleRatio + ")", h[this.vendorPrefix + "transform"] = "scale(" + this.scaleRatio + ")", h[this.vendorPrefix + "transition"] = "opacity " + d + "s", "undefined" != typeof this.data.showTransition && ("left" === this.data.showTransition ? i = c + "px, 0" : "right" === this.data.showTransition ? i = "-" + c + "px, 0" : "up" === this.data.showTransition ? i = "0, " + c + "px" : "down" === this.data.showTransition && (i = "0, -" + c + "px"), g[this.vendorPrefix + "transform"] += "css-3d" === this.supportedAnimation ? " translate3d(" + i + ", 0)" : " translate(" + i + ")", h[this.vendorPrefix + "transform"] += "css-3d" === this.supportedAnimation ? " translate3d(0, 0, 0)" : " translate(0, 0)", h[this.vendorPrefix + "transition"] += ", " + this.vendorPrefix + "transform " + d + "s"), this.$layer.on(this.transitionEvent, function (c) { c.target === c.currentTarget && (b.$layer.off(b.transitionEvent).css(b.vendorPrefix + "transition", ""), -1 !== f && (b.stayTimer = setTimeout(function () { b.hide(), b.stayTimer = null }, f)), "undefined" != typeof a && a()) }), this.$layer.css(g), this.delayTimer = setTimeout(function () { b.$layer.css(h) }, e) } } }, hide: function (a) { if (this.visible !== !1) { var c = this, d = "undefined" != typeof this.data.hideOffset ? this.data.hideOffset : 50, e = "undefined" != typeof this.data.hideDuration ? this.data.hideDuration / 1e3 : .4, f = "undefined" != typeof this.data.hideDelay ? this.data.hideDelay : 10; if (this.visible = !1, null !== this.stayTimer && clearTimeout(this.stayTimer), "javascript" === this.supportedAnimation) this.$layer.stop().delay(f).animate({ opacity: 0 }, 1e3 * e, function () { b(this).css("visibility", "hidden"), "undefined" != typeof a && a() }); else { var g = "", h = { opacity: 0 }; h[this.vendorPrefix + "transform"] = "scale(" + this.scaleRatio + ")", h[this.vendorPrefix + "transition"] = "opacity " + e + "s", "undefined" != typeof this.data.hideTransition && ("left" === this.data.hideTransition ? g = "-" + d + "px, 0" : "right" === this.data.hideTransition ? g = d + "px, 0" : "up" === this.data.hideTransition ? g = "0, -" + d + "px" : "down" === this.data.hideTransition && (g = "0, " + d + "px"), h[this.vendorPrefix + "transform"] += "css-3d" === this.supportedAnimation ? " translate3d(" + g + ", 0)" : " translate(" + g + ")", h[this.vendorPrefix + "transition"] += ", " + this.vendorPrefix + "transform " + e + "s"), this.$layer.on(this.transitionEvent, function (b) { b.target === b.currentTarget && (c.$layer.off(c.transitionEvent).css(c.vendorPrefix + "transition", ""), c.visible === !1 && c.$layer.css("visibility", "hidden"), "undefined" != typeof a && a()) }), this.delayTimer = setTimeout(function () { c.$layer.css(h) }, f) } } }, isVisible: function () { return this.visible === !1 || this.$layer.is(":hidden") ? !1 : !0 }, destroy: function () { this.$layer.removeAttr("style"), this.$layer.removeAttr("data-layer-init"), clearTimeout(this.delayTimer), clearTimeout(this.stayTimer), this.delayTimer = null, this.stayTimer = null } }, b.SliderPro.addModule("Layers", d) }(window, jQuery), function (a, b) { "use strict"; var c = "Fade." + b.SliderPro.namespace, d = { fadeGotoSlideReference: null, initFade: function () { this.on("update." + c, b.proxy(this._fadeOnUpdate, this)) }, _fadeOnUpdate: function () { this.settings.fade === !0 && (this.fadeGotoSlideReference = this.gotoSlide, this.gotoSlide = this._fadeGotoSlide) }, _fadeGotoSlide: function (a) { if (a !== this.selectedSlideIndex) if (this.$slider.hasClass("sp-swiping")) this.fadeGotoSlideReference(a); else { var c, d, e = this, f = a; b.each(this.slides, function (a, b) { var g = b.getIndex(), h = b.$slide; g === f ? (h.css({ opacity: 0, left: 0, top: 0, "z-index": 20, visibility: "visible" }), c = h) : g === e.selectedSlideIndex ? (h.css({ opacity: 1, left: 0, top: 0, "z-index": 10, visibility: "visible" }), d = h) : h.css({ opacity: 1, visibility: "hidden", "z-index": "" }) }), this.previousSlideIndex = this.selectedSlideIndex, this.selectedSlideIndex = a, this.$slides.find(".sp-selected").removeClass("sp-selected"), this.$slides.find(".sp-slide").eq(this.selectedSlideIndex).addClass("sp-selected"), e.settings.loop === !0 && e._updateSlidesOrder(), this._moveTo(0, !0), this._fadeSlideTo(c, 1, function () { var c = !0; b.each(e.slides, function (a, b) { "undefined" != typeof b.$slide.attr("data-transitioning") && (c = !1) }), c === !0 && (b.each(e.slides, function (a, b) { var c = b.$slide; c.css({ visibility: "", opacity: "", "z-index": "" }) }), e._resetSlidesPosition()), e.trigger({ type: "gotoSlideComplete", index: a, previousIndex: e.previousSlideIndex }), b.isFunction(e.settings.gotoSlideComplete) && e.settings.gotoSlideComplete.call(e, { type: "gotoSlideComplete", index: a, previousIndex: e.previousSlideIndex }) }), this.settings.fadeOutPreviousSlide === !0 && this._fadeSlideTo(d, 0), this.settings.autoHeight === !0 && this._resizeHeight(), this.trigger({ type: "gotoSlide", index: a, previousIndex: this.previousSlideIndex }), b.isFunction(this.settings.gotoSlide) && this.settings.gotoSlide.call(this, { type: "gotoSlide", index: a, previousIndex: this.previousSlideIndex }) } }, _fadeSlideTo: function (a, b, c) { var d = this; 1 === b && a.attr("data-transitioning", !0), "css-3d" === this.supportedAnimation || "css-2d" === this.supportedAnimation ? (setTimeout(function () { var c = { opacity: b }; c[d.vendorPrefix + "transition"] = "opacity " + d.settings.fadeDuration / 1e3 + "s", a.css(c) }, 100), a.on(this.transitionEvent, function (b) { b.target === b.currentTarget && (a.off(d.transitionEvent), a.css(d.vendorPrefix + "transition", ""), a.removeAttr("data-transitioning"), "function" == typeof c && c()) })) : a.stop().animate({ opacity: b }, this.settings.fadeDuration, function () { a.removeAttr("data-transitioning"), "function" == typeof c && c() }) }, destroyFade: function () { this.off("update." + c), null !== this.fadeGotoSlideReference && (this.gotoSlide = this.fadeGotoSlideReference) }, fadeDefaults: { fade: !1, fadeOutPreviousSlide: !0, fadeDuration: 500 } }; b.SliderPro.addModule("Fade", d) }(window, jQuery), function (a, b) { "use strict"; var c = "TouchSwipe." + b.SliderPro.namespace, d = { touchStartPoint: { x: 0, y: 0 }, touchEndPoint: { x: 0, y: 0 }, touchDistance: { x: 0, y: 0 }, touchStartPosition: 0, isTouchMoving: !1, touchSwipeEvents: { startEvent: "", moveEvent: "", endEvent: "" }, allowOppositeScrolling: !0, initTouchSwipe: function () { var a = this; this.settings.touchSwipe !== !1 && (this.touchSwipeEvents.startEvent = "touchstart." + c + " mousedown." + c, this.touchSwipeEvents.moveEvent = "touchmove." + c + " mousemove." + c, this.touchSwipeEvents.endEvent = "touchend." + this.uniqueId + "." + c + " mouseup." + this.uniqueId + "." + c, this.$slidesMask.on(this.touchSwipeEvents.startEvent, b.proxy(this._onTouchStart, this)), this.$slidesMask.on("dragstart." + c, function (a) { a.preventDefault() }), this.$slidesMask.find("a").on("click." + c, function (b) { "undefined" == typeof b.originalEvent.touches && a.$slider.hasClass("sp-swiping") && b.preventDefault() }), this.$slidesMask.addClass("sp-grab")) }, _onTouchStart: function (a) { if (!(b(a.target).closest(".sp-selectable").length >= 1)) { var c = "undefined" != typeof a.originalEvent.touches ? a.originalEvent.touches[0] : a.originalEvent; this.touchStartPoint.x = c.pageX || c.clientX, this.touchStartPoint.y = c.pageY || c.clientY, this.touchStartPosition = this.slidesPosition, this.touchDistance.x = this.touchDistance.y = 0, this.$slides.hasClass("sp-animated") && (this.isTouchMoving = !0, this._stopMovement(), this.touchStartPosition = this.slidesPosition), b(document).on(this.touchSwipeEvents.moveEvent, b.proxy(this._onTouchMove, this)), b(document).on(this.touchSwipeEvents.endEvent, b.proxy(this._onTouchEnd, this)), this.$slidesMask.removeClass("sp-grab").addClass("sp-grabbing"), this.$slider.addClass("sp-swiping") } }, _onTouchMove: function (a) { var b = "undefined" != typeof a.originalEvent.touches ? a.originalEvent.touches[0] : a.originalEvent; this.isTouchMoving = !0, this.touchEndPoint.x = b.pageX || b.clientX, this.touchEndPoint.y = b.pageY || b.clientY, this.touchDistance.x = this.touchEndPoint.x - this.touchStartPoint.x, this.touchDistance.y = this.touchEndPoint.y - this.touchStartPoint.y; var c = "horizontal" === this.settings.orientation ? this.touchDistance.x : this.touchDistance.y, d = "horizontal" === this.settings.orientation ? this.touchDistance.y : this.touchDistance.x; Math.abs(c) > Math.abs(d) && (this.allowOppositeScrolling = !1), this.allowOppositeScrolling !== !0 && (a.preventDefault(), this.settings.loop === !1 && (this.slidesPosition > this.touchStartPosition && 0 === this.selectedSlideIndex || this.slidesPosition < this.touchStartPosition && this.selectedSlideIndex === this.getTotalSlides() - 1) && (c = .2 * c), this._moveTo(this.touchStartPosition + c, !0)) }, _onTouchEnd: function (a) { var c = this, d = "horizontal" === this.settings.orientation ? this.touchDistance.x : this.touchDistance.y; if (b(document).off(this.touchSwipeEvents.moveEvent), b(document).off(this.touchSwipeEvents.endEvent), this.allowOppositeScrolling = !0, this.$slidesMask.removeClass("sp-grabbing").addClass("sp-grab"), (this.isTouchMoving === !1 || this.isTouchMoving === !0 && Math.abs(this.touchDistance.x) < 10 && Math.abs(this.touchDistance.y) < 10) && this.$slider.removeClass("sp-swiping"), setTimeout(function () { c.$slider.removeClass("sp-swiping") }, 1), this.isTouchMoving !== !1) { this.isTouchMoving = !1; var e = this.settings.centerSelectedSlide === !0 ? Math.round((parseInt(this.$slidesMask.css(this.sizeProperty), 10) - this.getSlideAt(this.selectedSlideIndex).getSize()[this.sizeProperty]) / 2) : 0, f = -parseInt(this.$slides.find(".sp-slide").eq(this.selectedSlideIndex).css(this.positionProperty), 10) + e; if (Math.abs(d) < this.settings.touchSwipeThreshold) this._moveTo(f); else { var g = (this.settings.rightToLeft === !0 && "horizontal" === this.settings.orientation ? -1 : 1) * d / (this.averageSlideSize + this.settings.slideDistance); g = parseInt(g, 10) + (g > 0 ? 1 : -1); var h = this.slidesOrder[b.inArray(this.selectedSlideIndex, this.slidesOrder) - g]; this.settings.loop === !0 ? this.gotoSlide(h) : "undefined" != typeof h ? this.gotoSlide(h) : this._moveTo(f) } } }, destroyTouchSwipe: function () { this.$slidesMask.off("dragstart." + c), this.$slidesMask.find("a").off("click." + c), this.$slidesMask.off(this.touchSwipeEvents.startEvent), b(document).off(this.touchSwipeEvents.moveEvent), b(document).off(this.touchSwipeEvents.endEvent), this.$slidesMask.removeClass("sp-grab") }, touchSwipeDefaults: { touchSwipe: !0, touchSwipeThreshold: 50 } }; b.SliderPro.addModule("TouchSwipe", d) }(window, jQuery), function (a, b) {
    "use strict"; var c = "Caption." + b.SliderPro.namespace, d = {
        $captionContainer: null, captionContent: "", initCaption: function () { this.on("update." + c, b.proxy(this._captionOnUpdate, this)), this.on("gotoSlide." + c, b.proxy(this._updateCaptionContent, this)) }, _captionOnUpdate: function () {
            this.$captionContainer = this.$slider.find(".sp-caption-container"),
                this.$slider.find(".sp-caption").length && 0 === this.$captionContainer.length && (this.$captionContainer = b('<div class="sp-caption-container"></div>').appendTo(this.$slider), this._updateCaptionContent()), this.$slides.find(".sp-caption").each(function () { b(this).css("display", "none") })
        }, _updateCaptionContent: function () { var a = this, b = this.$slider.find(".sp-slide").eq(this.selectedSlideIndex).find(".sp-caption"), c = 0 !== b.length ? b.html() : ""; this.settings.fadeCaption === !0 ? "" !== this.captionContent ? (0 === parseFloat(this.$captionContainer.css("opacity"), 10) && (this.$captionContainer.css(this.vendorPrefix + "transition", ""), this.$captionContainer.css("opacity", 1)), this._fadeCaptionTo(0, function () { a.captionContent = c, "" !== c ? (a.$captionContainer.html(a.captionContent), a._fadeCaptionTo(1)) : a.$captionContainer.empty() })) : (this.captionContent = c, this.$captionContainer.html(this.captionContent), this.$captionContainer.css("opacity", 0), this._fadeCaptionTo(1)) : (this.captionContent = c, this.$captionContainer.html(this.captionContent)) }, _fadeCaptionTo: function (a, b) { var c = this; "css-3d" === this.supportedAnimation || "css-2d" === this.supportedAnimation ? (setTimeout(function () { var b = { opacity: a }; b[c.vendorPrefix + "transition"] = "opacity " + c.settings.captionFadeDuration / 1e3 + "s", c.$captionContainer.css(b) }, 1), this.$captionContainer.on(this.transitionEvent, function (a) { a.target === a.currentTarget && (c.$captionContainer.off(c.transitionEvent), c.$captionContainer.css(c.vendorPrefix + "transition", ""), "function" == typeof b && b()) })) : this.$captionContainer.stop().animate({ opacity: a }, this.settings.captionFadeDuration, function () { "function" == typeof b && b() }) }, destroyCaption: function () { this.off("update." + c), this.off("gotoSlide." + c), this.$captionContainer.remove(), this.$slider.find(".sp-caption").each(function () { b(this).css("display", "") }) }, captionDefaults: { fadeCaption: !0, captionFadeDuration: 500 }
    }; b.SliderPro.addModule("Caption", d)
}(window, jQuery), function (a, b) { "use strict"; var c = "DeepLinking." + b.SliderPro.namespace, d = { initDeepLinking: function () { var d = this; this.on("init." + c, function () { d._gotoHash(a.location.hash) }), this.on("gotoSlide." + c, function (b) { if (d.settings.updateHash === !0) { var c = d.$slider.find(".sp-slide").eq(b.index).attr("id"); "undefined" == typeof c && (c = b.index), a.location.hash = d.$slider.attr("id") + "/" + c } }), b(a).on("hashchange." + this.uniqueId + "." + c, function () { d._gotoHash(a.location.hash) }) }, _parseHash: function (a) { if ("" !== a) { a = a.substring(1); var b = a.split("/"), c = b.pop(), d = a.slice(0, -c.toString().length - 1); if (this.$slider.attr("id") === d) return { sliderID: d, slideId: c } } return !1 }, _gotoHash: function (a) { var b = this._parseHash(a); if (b !== !1) { var c = b.slideId, d = parseInt(c, 10); if (isNaN(d)) { var e = this.$slider.find(".sp-slide#" + c).index(); -1 !== e && e !== this.selectedSlideIndex && this.gotoSlide(e) } else d !== this.selectedSlideIndex && this.gotoSlide(d) } }, destroyDeepLinking: function () { this.off("init." + c), this.off("gotoSlide." + c), b(a).off("hashchange." + this.uniqueId + "." + c) }, deepLinkingDefaults: { updateHash: !1 } }; b.SliderPro.addModule("DeepLinking", d) }(window, jQuery), function (a, b) { "use strict"; var c = "Autoplay." + b.SliderPro.namespace, d = { autoplayTimer: null, isTimerRunning: !1, isTimerPaused: !1, initAutoplay: function () { this.on("update." + c, b.proxy(this._autoplayOnUpdate, this)) }, _autoplayOnUpdate: function (a) { this.settings.autoplay === !0 ? (this.on("gotoSlide." + c, b.proxy(this._autoplayOnGotoSlide, this)), this.on("mouseenter." + c, b.proxy(this._autoplayOnMouseEnter, this)), this.on("mouseleave." + c, b.proxy(this._autoplayOnMouseLeave, this)), this.startAutoplay()) : (this.off("gotoSlide." + c), this.off("mouseenter." + c), this.off("mouseleave." + c), this.stopAutoplay()) }, _autoplayOnGotoSlide: function (a) { this.isTimerRunning === !0 && this.stopAutoplay(), this.isTimerPaused === !1 && this.startAutoplay() }, _autoplayOnMouseEnter: function (a) { !this.isTimerRunning || "pause" !== this.settings.autoplayOnHover && "stop" !== this.settings.autoplayOnHover || (this.stopAutoplay(), this.isTimerPaused = !0) }, _autoplayOnMouseLeave: function (a) { this.settings.autoplay === !0 && this.isTimerRunning === !1 && "stop" !== this.settings.autoplayOnHover && (this.startAutoplay(), this.isTimerPaused = !1) }, startAutoplay: function () { var a = this; this.isTimerRunning = !0, this.autoplayTimer = setTimeout(function () { "normal" === a.settings.autoplayDirection ? a.nextSlide() : "backwards" === a.settings.autoplayDirection && a.previousSlide() }, this.settings.autoplayDelay) }, stopAutoplay: function () { this.isTimerRunning = !1, this.isTimerPaused = !1, clearTimeout(this.autoplayTimer) }, destroyAutoplay: function () { clearTimeout(this.autoplayTimer), this.off("update." + c), this.off("gotoSlide." + c), this.off("mouseenter." + c), this.off("mouseleave." + c) }, autoplayDefaults: { autoplay: !0, autoplayDelay: 5e3, autoplayDirection: "normal", autoplayOnHover: "pause" } }; b.SliderPro.addModule("Autoplay", d) }(window, jQuery), function (a, b) { "use strict"; var c = "Keyboard." + b.SliderPro.namespace, d = { initKeyboard: function () { var a = this, d = !1; this.settings.keyboard !== !1 && (this.$slider.on("focus." + c, function () { d = !0 }), this.$slider.on("blur." + c, function () { d = !1 }), b(document).on("keydown." + this.uniqueId + "." + c, function (b) { if (a.settings.keyboardOnlyOnFocus !== !0 || d !== !1) if (37 === b.which) a.previousSlide(); else if (39 === b.which) a.nextSlide(); else if (13 === b.which) { var c = a.$slider.find(".sp-slide").eq(a.selectedSlideIndex).find(".sp-image-container a"); 0 !== c.length && c[0].click() } })) }, destroyKeyboard: function () { this.$slider.off("focus." + c), this.$slider.off("blur." + c), b(document).off("keydown." + this.uniqueId + "." + c) }, keyboardDefaults: { keyboard: !0, keyboardOnlyOnFocus: !1 } }; b.SliderPro.addModule("Keyboard", d) }(window, jQuery), function (a, b) { "use strict"; var c = "FullScreen." + b.SliderPro.namespace, d = { isFullScreen: !1, $fullScreenButton: null, sizeBeforeFullScreen: {}, initFullScreen: function () { (document.fullscreenEnabled || document.webkitFullscreenEnabled || document.mozFullScreenEnabled || document.msFullscreenEnabled) && this.on("update." + c, b.proxy(this._fullScreenOnUpdate, this)) }, _fullScreenOnUpdate: function () { this.settings.fullScreen === !0 && null === this.$fullScreenButton ? this._addFullScreen() : this.settings.fullScreen === !1 && null !== this.$fullScreenButton && this._removeFullScreen(), this.settings.fullScreen === !0 && (this.settings.fadeFullScreen === !0 ? this.$fullScreenButton.addClass("sp-fade-full-screen") : this.settings.fadeFullScreen === !1 && this.$fullScreenButton.removeClass("sp-fade-full-screen")) }, _addFullScreen: function () { this.$fullScreenButton = b('<div class="sp-full-screen-button"></div>').appendTo(this.$slider), this.$fullScreenButton.on("click." + c, b.proxy(this._onFullScreenButtonClick, this)), document.addEventListener("fullscreenchange", b.proxy(this._onFullScreenChange, this)), document.addEventListener("mozfullscreenchange", b.proxy(this._onFullScreenChange, this)), document.addEventListener("webkitfullscreenchange", b.proxy(this._onFullScreenChange, this)), document.addEventListener("MSFullscreenChange", b.proxy(this._onFullScreenChange, this)) }, _removeFullScreen: function () { null !== this.$fullScreenButton && (this.$fullScreenButton.off("click." + c), this.$fullScreenButton.remove(), this.$fullScreenButton = null, document.removeEventListener("fullscreenchange", this._onFullScreenChange), document.removeEventListener("mozfullscreenchange", this._onFullScreenChange), document.removeEventListener("webkitfullscreenchange", this._onFullScreenChange), document.removeEventListener("MSFullscreenChange", this._onFullScreenChange)) }, _onFullScreenButtonClick: function () { this.isFullScreen === !1 ? this.instance.requestFullScreen ? this.instance.requestFullScreen() : this.instance.mozRequestFullScreen ? this.instance.mozRequestFullScreen() : this.instance.webkitRequestFullScreen ? this.instance.webkitRequestFullScreen() : this.instance.msRequestFullscreen && this.instance.msRequestFullscreen() : document.exitFullScreen ? document.exitFullScreen() : document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.webkitCancelFullScreen ? document.webkitCancelFullScreen() : document.msExitFullscreen && document.msExitFullscreen() }, _onFullScreenChange: function () { this.isFullScreen = document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement ? !0 : !1, this.isFullScreen === !0 ? (this.sizeBeforeFullScreen = { forceSize: this.settings.forceSize, autoHeight: this.settings.autoHeight }, this.$slider.addClass("sp-full-screen"), this.settings.forceSize = "fullWindow", this.settings.autoHeight = !1) : (this.$slider.css("margin", ""), this.$slider.removeClass("sp-full-screen"), this.settings.forceSize = this.sizeBeforeFullScreen.forceSize, this.settings.autoHeight = this.sizeBeforeFullScreen.autoHeight), this.resize() }, destroyFullScreen: function () { this.off("update." + c), this._removeFullScreen() }, fullScreenDefaults: { fullScreen: !1, fadeFullScreen: !0 } }; b.SliderPro.addModule("FullScreen", d) }(window, jQuery), function (a, b) { "use strict"; var c = "Buttons." + b.SliderPro.namespace, d = { $buttons: null, initButtons: function () { this.on("update." + c, b.proxy(this._buttonsOnUpdate, this)) }, _buttonsOnUpdate: function () { this.$buttons = this.$slider.find(".sp-buttons"), this.settings.buttons === !0 && this.getTotalSlides() > 1 && 0 === this.$buttons.length ? this._createButtons() : this.settings.buttons === !0 && this.getTotalSlides() !== this.$buttons.find(".sp-button").length && 0 !== this.$buttons.length ? this._adjustButtons() : (this.settings.buttons === !1 || this.getTotalSlides() <= 1 && 0 !== this.$buttons.length) && this._removeButtons() }, _createButtons: function () { var a = this; this.$buttons = b('<div class="sp-buttons"></div>').appendTo(this.$slider); for (var d = 0; d < this.getTotalSlides(); d++) b('<div class="sp-button"></div>').appendTo(this.$buttons); this.$buttons.on("click." + c, ".sp-button", function () { a.gotoSlide(b(this).index()) }), this.$buttons.find(".sp-button").eq(this.selectedSlideIndex).addClass("sp-selected-button"), this.on("gotoSlide." + c, function (b) { a.$buttons.find(".sp-selected-button").removeClass("sp-selected-button"), a.$buttons.find(".sp-button").eq(b.index).addClass("sp-selected-button") }), this.$slider.addClass("sp-has-buttons") }, _adjustButtons: function () { this.$buttons.empty(); for (var a = 0; a < this.getTotalSlides(); a++) b('<div class="sp-button"></div>').appendTo(this.$buttons); this.$buttons.find(".sp-selected-button").removeClass("sp-selected-button"), this.$buttons.find(".sp-button").eq(this.selectedSlideIndex).addClass("sp-selected-button") }, _removeButtons: function () { this.$buttons.off("click." + c, ".sp-button"), this.off("gotoSlide." + c), this.$buttons.remove(), this.$slider.removeClass("sp-has-buttons") }, destroyButtons: function () { this._removeButtons(), this.off("update." + c) }, buttonsDefaults: { buttons: !0 } }; b.SliderPro.addModule("Buttons", d) }(window, jQuery), function (a, b) { "use strict"; var c = "Arrows." + b.SliderPro.namespace, d = { $arrows: null, $previousArrow: null, $nextArrow: null, initArrows: function () { this.on("update." + c, b.proxy(this._arrowsOnUpdate, this)), this.on("gotoSlide." + c, b.proxy(this._checkArrowsVisibility, this)) }, _arrowsOnUpdate: function () { var a = this; this.settings.arrows === !0 && null === this.$arrows ? (this.$arrows = b('<div class="sp-arrows"></div>').appendTo(this.$slidesContainer), this.$previousArrow = b('<div class="sp-arrow sp-previous-arrow"></div>').appendTo(this.$arrows), this.$nextArrow = b('<div class="sp-arrow sp-next-arrow"></div>').appendTo(this.$arrows), this.$previousArrow.on("click." + c, function () { a.previousSlide() }), this.$nextArrow.on("click." + c, function () { a.nextSlide() }), this._checkArrowsVisibility()) : this.settings.arrows === !1 && null !== this.$arrows && this._removeArrows(), this.settings.arrows === !0 && (this.settings.fadeArrows === !0 ? this.$arrows.addClass("sp-fade-arrows") : this.settings.fadeArrows === !1 && this.$arrows.removeClass("sp-fade-arrows")) }, _checkArrowsVisibility: function () { this.settings.arrows !== !1 && this.settings.loop !== !0 && (0 === this.selectedSlideIndex ? this.$previousArrow.css("display", "none") : this.$previousArrow.css("display", "block"), this.selectedSlideIndex === this.getTotalSlides() - 1 ? this.$nextArrow.css("display", "none") : this.$nextArrow.css("display", "block")) }, _removeArrows: function () { null !== this.$arrows && (this.$previousArrow.off("click." + c), this.$nextArrow.off("click." + c), this.$arrows.remove(), this.$arrows = null) }, destroyArrows: function () { this._removeArrows(), this.off("update." + c), this.off("gotoSlide." + c) }, arrowsDefaults: { arrows: !1, fadeArrows: !0 } }; b.SliderPro.addModule("Arrows", d) }(window, jQuery), function (a, b) { "use strict"; var c = "ThumbnailTouchSwipe." + b.SliderPro.namespace, d = { thumbnailTouchStartPoint: { x: 0, y: 0 }, thumbnailTouchEndPoint: { x: 0, y: 0 }, thumbnailTouchDistance: { x: 0, y: 0 }, thumbnailTouchStartPosition: 0, isThumbnailTouchMoving: !1, isThumbnailTouchSwipe: !1, thumbnailTouchSwipeEvents: { startEvent: "", moveEvent: "", endEvent: "" }, initThumbnailTouchSwipe: function () { this.on("update." + c, b.proxy(this._thumbnailTouchSwipeOnUpdate, this)) }, _thumbnailTouchSwipeOnUpdate: function () { this.isThumbnailScroller !== !1 && (this.settings.thumbnailTouchSwipe === !0 && this.isThumbnailTouchSwipe === !1 && (this.isThumbnailTouchSwipe = !0, this.thumbnailTouchSwipeEvents.startEvent = "touchstart." + c + " mousedown." + c, this.thumbnailTouchSwipeEvents.moveEvent = "touchmove." + c + " mousemove." + c, this.thumbnailTouchSwipeEvents.endEvent = "touchend." + this.uniqueId + "." + c + " mouseup." + this.uniqueId + "." + c, this.$thumbnails.on(this.thumbnailTouchSwipeEvents.startEvent, b.proxy(this._onThumbnailTouchStart, this)), this.$thumbnails.on("dragstart." + c, function (a) { a.preventDefault() }), this.$thumbnails.addClass("sp-grab")), b.each(this.thumbnails, function (a, b) { b.off("thumbnailClick") })) }, _onThumbnailTouchStart: function (a) { if (!(b(a.target).closest(".sp-selectable").length >= 1)) { var d = "undefined" != typeof a.originalEvent.touches ? a.originalEvent.touches[0] : a.originalEvent; "undefined" == typeof a.originalEvent.touches && a.preventDefault(), b(a.target).parents(".sp-thumbnail-container").find("a").one("click." + c, function (a) { a.preventDefault() }), this.thumbnailTouchStartPoint.x = d.pageX || d.clientX, this.thumbnailTouchStartPoint.y = d.pageY || d.clientY, this.thumbnailTouchStartPosition = this.thumbnailsPosition, this.thumbnailTouchDistance.x = this.thumbnailTouchDistance.y = 0, this.$thumbnails.hasClass("sp-animated") && (this.isThumbnailTouchMoving = !0, this._stopThumbnailsMovement(), this.thumbnailTouchStartPosition = this.thumbnailsPosition), this.$thumbnails.on(this.thumbnailTouchSwipeEvents.moveEvent, b.proxy(this._onThumbnailTouchMove, this)), b(document).on(this.thumbnailTouchSwipeEvents.endEvent, b.proxy(this._onThumbnailTouchEnd, this)), this.$thumbnails.removeClass("sp-grab").addClass("sp-grabbing"), this.$thumbnailsContainer.addClass("sp-swiping") } }, _onThumbnailTouchMove: function (a) { var b = "undefined" != typeof a.originalEvent.touches ? a.originalEvent.touches[0] : a.originalEvent; this.isThumbnailTouchMoving = !0, this.thumbnailTouchEndPoint.x = b.pageX || b.clientX, this.thumbnailTouchEndPoint.y = b.pageY || b.clientY, this.thumbnailTouchDistance.x = this.thumbnailTouchEndPoint.x - this.thumbnailTouchStartPoint.x, this.thumbnailTouchDistance.y = this.thumbnailTouchEndPoint.y - this.thumbnailTouchStartPoint.y; var c = "horizontal" === this.thumbnailsOrientation ? this.thumbnailTouchDistance.x : this.thumbnailTouchDistance.y, d = "horizontal" === this.thumbnailsOrientation ? this.thumbnailTouchDistance.y : this.thumbnailTouchDistance.x; if (Math.abs(c) > Math.abs(d)) { if (a.preventDefault(), this.thumbnailsPosition >= 0) { var e = -this.thumbnailTouchStartPosition; c = e + .2 * (c - e) } else if (this.thumbnailsPosition <= -this.thumbnailsSize + this.thumbnailsContainerSize) { var f = this.thumbnailsSize - this.thumbnailsContainerSize + this.thumbnailTouchStartPosition; c = -f + .2 * (c + f) } this._moveThumbnailsTo(this.thumbnailTouchStartPosition + c, !0) } }, _onThumbnailTouchEnd: function (a) { var d = this; "horizontal" === this.thumbnailsOrientation ? this.thumbnailTouchDistance.x : this.thumbnailTouchDistance.y; if (this.$thumbnails.off(this.thumbnailTouchSwipeEvents.moveEvent), b(document).off(this.thumbnailTouchSwipeEvents.endEvent), this.$thumbnails.removeClass("sp-grabbing").addClass("sp-grab"), this.isThumbnailTouchMoving === !1 || this.isThumbnailTouchMoving === !0 && Math.abs(this.thumbnailTouchDistance.x) < 10 && Math.abs(this.thumbnailTouchDistance.y) < 10) { var e = b(a.target).hasClass("sp-thumbnail-container") ? b(a.target) : b(a.target).parents(".sp-thumbnail-container"), f = e.index(); return void (0 !== b(a.target).parents("a").length ? (b(a.target).parents("a").off("click." + c), this.$thumbnailsContainer.removeClass("sp-swiping")) : f !== this.selectedThumbnailIndex && -1 !== f && this.gotoSlide(f)) } this.isThumbnailTouchMoving = !1, b(a.target).parents(".sp-thumbnail").one("click", function (a) { a.preventDefault() }), setTimeout(function () { d.$thumbnailsContainer.removeClass("sp-swiping") }, 1), this.thumbnailsPosition > 0 ? this._moveThumbnailsTo(0) : this.thumbnailsPosition < this.thumbnailsContainerSize - this.thumbnailsSize && this._moveThumbnailsTo(this.thumbnailsContainerSize - this.thumbnailsSize), this.trigger({ type: "thumbnailsMoveComplete" }), b.isFunction(this.settings.thumbnailsMoveComplete) && this.settings.thumbnailsMoveComplete.call(this, { type: "thumbnailsMoveComplete" }) }, destroyThumbnailTouchSwipe: function () { this.off("update." + c), this.isThumbnailScroller !== !1 && (this.$thumbnails.off(this.thumbnailTouchSwipeEvents.startEvent), this.$thumbnails.off(this.thumbnailTouchSwipeEvents.moveEvent), this.$thumbnails.off("dragstart." + c), b(document).off(this.thumbnailTouchSwipeEvents.endEvent), this.$thumbnails.removeClass("sp-grab")) }, thumbnailTouchSwipeDefaults: { thumbnailTouchSwipe: !0 } }; b.SliderPro.addModule("ThumbnailTouchSwipe", d) }(window, jQuery), function (a, b) { "use strict"; var c = "ThumbnailArrows." + b.SliderPro.namespace, d = { $thumbnailArrows: null, $previousThumbnailArrow: null, $nextThumbnailArrow: null, initThumbnailArrows: function () { var a = this; this.on("update." + c, b.proxy(this._thumbnailArrowsOnUpdate, this)), this.on("sliderResize." + c + " thumbnailsMoveComplete." + c, function () { a.isThumbnailScroller === !0 && a.settings.thumbnailArrows === !0 && a._checkThumbnailArrowsVisibility() }) }, _thumbnailArrowsOnUpdate: function () { var a = this; this.isThumbnailScroller !== !1 && (this.settings.thumbnailArrows === !0 && null === this.$thumbnailArrows ? (this.$thumbnailArrows = b('<div class="sp-thumbnail-arrows"></div>').appendTo(this.$thumbnailsContainer), this.$previousThumbnailArrow = b('<div class="sp-thumbnail-arrow sp-previous-thumbnail-arrow"></div>').appendTo(this.$thumbnailArrows), this.$nextThumbnailArrow = b('<div class="sp-thumbnail-arrow sp-next-thumbnail-arrow"></div>').appendTo(this.$thumbnailArrows), this.$previousThumbnailArrow.on("click." + c, function () { var b = Math.min(0, a.thumbnailsPosition + a.thumbnailsContainerSize); a._moveThumbnailsTo(b) }), this.$nextThumbnailArrow.on("click." + c, function () { var b = Math.max(a.thumbnailsContainerSize - a.thumbnailsSize, a.thumbnailsPosition - a.thumbnailsContainerSize); a._moveThumbnailsTo(b) })) : this.settings.thumbnailArrows === !1 && null !== this.$thumbnailArrows && this._removeThumbnailArrows(), this.settings.thumbnailArrows === !0 && (this.settings.fadeThumbnailArrows === !0 ? this.$thumbnailArrows.addClass("sp-fade-thumbnail-arrows") : this.settings.fadeThumbnailArrows === !1 && this.$thumbnailArrows.removeClass("sp-fade-thumbnail-arrows"), this._checkThumbnailArrowsVisibility())) }, _checkThumbnailArrowsVisibility: function () { 0 === this.thumbnailsPosition ? this.$previousThumbnailArrow.css("display", "none") : this.$previousThumbnailArrow.css("display", "block"), this.thumbnailsPosition === this.thumbnailsContainerSize - this.thumbnailsSize ? this.$nextThumbnailArrow.css("display", "none") : this.$nextThumbnailArrow.css("display", "block") }, _removeThumbnailArrows: function () { null !== this.$thumbnailArrows && (this.$previousThumbnailArrow.off("click." + c), this.$nextThumbnailArrow.off("click." + c), this.$thumbnailArrows.remove(), this.$thumbnailArrows = null) }, destroyThumbnailArrows: function () { this._removeThumbnailArrows(), this.off("update." + c), this.off("sliderResize." + c), this.off("thumbnailsMoveComplete." + c) }, thumbnailArrowsDefaults: { thumbnailArrows: !1, fadeThumbnailArrows: !0 } }; b.SliderPro.addModule("ThumbnailArrows", d) }(window, jQuery), function (a, b) { "use strict"; var c = "Video." + b.SliderPro.namespace, d = { firstInit: !1, initVideo: function () { this.on("update." + c, b.proxy(this._videoOnUpdate, this)), this.on("gotoSlideComplete." + c, b.proxy(this._videoOnGotoSlideComplete, this)) }, _videoOnUpdate: function () { var a = this; this.$slider.find(".sp-video").not("a, [data-video-init]").each(function () { var c = b(this); a._initVideo(c) }), this.$slider.find("a.sp-video").not("[data-video-preinit]").each(function () { var c = b(this); a._preinitVideo(c) }), this.firstInit === !1 && (this.firstInit = !0, this._videoOnGotoSlideComplete({ index: this.selectedSlideIndex, previousIndex: -1 })) }, _initVideo: function (a) { var d = this; a.attr("data-video-init", !0).videoController(), a.on("videoPlay." + c, function () { "stopAutoplay" === d.settings.playVideoAction && "undefined" != typeof d.stopAutoplay && (d.stopAutoplay(), d.settings.autoplay = !1); var c = { type: "videoPlay", video: a }; d.trigger(c), b.isFunction(d.settings.videoPlay) && d.settings.videoPlay.call(d, c) }), a.on("videoPause." + c, function () { "startAutoplay" === d.settings.pauseVideoAction && "undefined" != typeof d.startAutoplay && (d.startAutoplay(), d.settings.autoplay = !0); var c = { type: "videoPause", video: a }; d.trigger(c), b.isFunction(d.settings.videoPause) && d.settings.videoPause.call(d, c) }), a.on("videoEnded." + c, function () { "startAutoplay" === d.settings.endVideoAction && "undefined" != typeof d.startAutoplay ? (d.startAutoplay(), d.settings.autoplay = !0) : "nextSlide" === d.settings.endVideoAction ? d.nextSlide() : "replayVideo" === d.settings.endVideoAction && a.videoController("replay"); var c = { type: "videoEnd", video: a }; d.trigger(c), b.isFunction(d.settings.videoEnd) && d.settings.videoEnd.call(d, c) }) }, _preinitVideo: function (a) { var d = this; a.attr("data-video-preinit", !0), a.on("click." + c, function (c) { if (!d.$slider.hasClass("sp-swiping")) { c.preventDefault(); var e, f, g, h, i, j, k, l = a.attr("href"), m = a.children("img").attr("width") || a.children("img").width(), n = a.children("img").attr("height") || a.children("img").height(); -1 !== l.indexOf("youtube") || -1 !== l.indexOf("youtu.be") ? f = "youtube" : -1 !== l.indexOf("vimeo") && (f = "vimeo"), g = "youtube" === f ? /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/ : /http:\/\/(www\.)?vimeo.com\/(\d+)/, h = l.match(g), i = h[2], j = "youtube" === f ? "//www.youtube.com/embed/" + i + "?enablejsapi=1&wmode=opaque" : "//player.vimeo.com/video/" + i + "?api=1", k = l.split("?")[1], "undefined" != typeof k && (k = k.split("&"), b.each(k, function (a, b) { -1 === b.indexOf(i) && (j += "&" + b) })), e = b("<iframe></iframe>").attr({ src: j, width: m, height: n, "class": a.attr("class"), frameborder: 0, allowfullscreen: "allowfullscreen" }).insertBefore(a), d._initVideo(e), e.videoController("play"), a.css("display", "none") } }) }, _videoOnGotoSlideComplete: function (a) { var b = this.$slides.find(".sp-slide").eq(a.previousIndex).find(".sp-video[data-video-init]"); if (-1 !== a.previousIndex && 0 !== b.length && ("stopVideo" === this.settings.leaveVideoAction ? b.videoController("stop") : "pauseVideo" === this.settings.leaveVideoAction ? b.videoController("pause") : "removeVideo" === this.settings.leaveVideoAction && (0 !== b.siblings("a.sp-video").length ? (b.siblings("a.sp-video").css("display", ""), b.videoController("destroy"), b.remove()) : b.videoController("stop"))), "playVideo" === this.settings.reachVideoAction) { var d = this.$slides.find(".sp-slide").eq(a.index).find(".sp-video[data-video-init]"), e = this.$slides.find(".sp-slide").eq(a.index).find(".sp-video[data-video-preinit]"); 0 !== d.length ? d.videoController("play") : 0 !== e.length && e.trigger("click." + c) } }, destroyVideo: function () { this.$slider.find(".sp-video[ data-video-preinit ]").each(function () { var a = b(this); a.removeAttr("data-video-preinit"), a.off("click." + c) }), this.$slider.find(".sp-video[ data-video-init ]").each(function () { var a = b(this); a.removeAttr("data-video-init"), a.off("Video"), a.videoController("destroy") }), this.off("update." + c), this.off("gotoSlideComplete." + c) }, videoDefaults: { reachVideoAction: "none", leaveVideoAction: "pauseVideo", playVideoAction: "stopAutoplay", pauseVideoAction: "none", endVideoAction: "none", videoPlay: function () { }, videoPause: function () { }, videoEnd: function () { } } }; b.SliderPro.addModule("Video", d) }(window, jQuery), function (a) {
    "use strict"; var b = window.navigator.userAgent.match(/(iPad|iPhone|iPod)/g) ? !0 : !1, c = function (b, c) { this.$video = a(b), this.options = c, this.settings = {}, this.player = null, this._init() }; c.prototype = { _init: function () { this.settings = a.extend({}, this.defaults, this.options); var b = this, c = a.VideoController.players, d = this.$video.attr("id"); for (var e in c) if ("undefined" != typeof c[e] && c[e].isType(this.$video)) { this.player = new c[e](this.$video); break } if (null !== this.player) { var f = ["ready", "start", "play", "pause", "ended"]; a.each(f, function (c, e) { var f = "video" + e.charAt(0).toUpperCase() + e.slice(1); b.player.on(e, function () { b.trigger({ type: f, video: d }), a.isFunction(b.settings[f]) && b.settings[f].call(b, { type: f, video: d }) }) }) } }, play: function () { b === !0 && this.player.isStarted() === !1 || "playing" === this.player.getState() || this.player.play() }, stop: function () { b === !0 && this.player.isStarted() === !1 || "stopped" === this.player.getState() || this.player.stop() }, pause: function () { b === !0 && this.player.isStarted() === !1 || "paused" === this.player.getState() || this.player.pause() }, replay: function () { (b !== !0 || this.player.isStarted() !== !1) && this.player.replay() }, on: function (a, b) { return this.$video.on(a, b) }, off: function (a) { return this.$video.off(a) }, trigger: function (a) { return this.$video.triggerHandler(a) }, destroy: function () { this.player.isStarted() === !0 && this.stop(), this.player.off("ready"), this.player.off("start"), this.player.off("play"), this.player.off("pause"), this.player.off("ended"), this.$video.removeData("videoController") }, defaults: { videoReady: function () { }, videoStart: function () { }, videoPlay: function () { }, videoPause: function () { }, videoEnded: function () { } } }, a.VideoController = { players: {}, addPlayer: function (a, b) { this.players[a] = b } }, a.fn.videoController = function (b) { var d = Array.prototype.slice.call(arguments, 1); return this.each(function () { if ("undefined" == typeof a(this).data("videoController")) { var e = new c(this, b); a(this).data("videoController", e) } else if ("undefined" != typeof b) { var f = a(this).data("videoController"); "function" == typeof f[b] ? f[b].apply(f, d) : a.error(b + " does not exist in videoController.") } }) }; var d = function (b) { this.$video = b, this.player = null, this.ready = !1, this.started = !1, this.state = "", this.events = a({}), this._init() }; d.prototype = { _init: function () { }, play: function () { }, pause: function () { }, stop: function () { }, replay: function () { }, isType: function () { }, isReady: function () { return this.ready }, isStarted: function () { return this.started }, getState: function () { return this.state }, on: function (a, b) { return this.events.on(a, b) }, off: function (a) { return this.events.off(a) }, trigger: function (a) { return this.events.triggerHandler(a) } }; var e = { youtubeAPIAdded: !1, youtubeVideos: [] }, f = function (b) { this.init = !1; var c = window.YT && window.YT.Player; if ("undefined" != typeof c) d.call(this, b); else if (e.youtubeVideos.push({ video: b, scope: this }), e.youtubeAPIAdded === !1) { e.youtubeAPIAdded = !0; var f = document.createElement("script"); f.src = "//www.youtube.com/player_api"; var g = document.getElementsByTagName("script")[0]; g.parentNode.insertBefore(f, g), window.onYouTubePlayerAPIReady = function () { a.each(e.youtubeVideos, function (a, b) { d.call(b.scope, b.video) }) } } }; f.prototype = new d, f.prototype.constructor = f, a.VideoController.addPlayer("YoutubeVideo", f), f.isType = function (a) { if (a.is("iframe")) { var b = a.attr("src"); if (-1 !== b.indexOf("youtube.com") || -1 !== b.indexOf("youtu.be")) return !0 } return !1 }, f.prototype._init = function () { this.init = !0, this._setup() }, f.prototype._setup = function () { var a = this; this.player = new YT.Player(this.$video[0], { events: { onReady: function () { a.trigger({ type: "ready" }), a.ready = !0 }, onStateChange: function (b) { switch (b.data) { case YT.PlayerState.PLAYING: a.started === !1 && (a.started = !0, a.trigger({ type: "start" })), a.state = "playing", a.trigger({ type: "play" }); break; case YT.PlayerState.PAUSED: a.state = "paused", a.trigger({ type: "pause" }); break; case YT.PlayerState.ENDED: a.state = "ended", a.trigger({ type: "ended" }) } } } }) }, f.prototype.play = function () { var a = this; if (this.ready === !0) this.player.playVideo(); else var b = setInterval(function () { a.ready === !0 && (clearInterval(b), a.player.playVideo()) }, 100) }, f.prototype.pause = function () { b === !0 ? this.stop() : this.player.pauseVideo() }, f.prototype.stop = function () { this.player.seekTo(1), this.player.stopVideo(), this.state = "stopped" }, f.prototype.replay = function () { this.player.seekTo(1), this.player.playVideo() }, f.prototype.on = function (a, b) { var c = this; if (this.init === !0) d.prototype.on.call(this, a, b); else var e = setInterval(function () { c.init === !0 && (clearInterval(e), d.prototype.on.call(c, a, b)) }, 100) }; var g = { vimeoAPIAdded: !1, vimeoVideos: [] }, h = function (b) { if (this.init = !1, "undefined" != typeof window.Froogaloop) d.call(this, b); else if (g.vimeoVideos.push({ video: b, scope: this }), g.vimeoAPIAdded === !1) { g.vimeoAPIAdded = !0; var c = document.createElement("script"); c.src = "//a.vimeocdn.com/js/froogaloop2.min.js"; var e = document.getElementsByTagName("script")[0]; e.parentNode.insertBefore(c, e); var f = setInterval(function () { "undefined" != typeof window.Froogaloop && (clearInterval(f), a.each(g.vimeoVideos, function (a, b) { d.call(b.scope, b.video) })) }, 100) } }; h.prototype = new d, h.prototype.constructor = h, a.VideoController.addPlayer("VimeoVideo", h), h.isType = function (a) { if (a.is("iframe")) { var b = a.attr("src"); if (-1 !== b.indexOf("vimeo.com")) return !0 } return !1 }, h.prototype._init = function () { this.init = !0, this._setup() }, h.prototype._setup = function () { var a = this; this.player = $f(this.$video[0]), this.player.addEvent("ready", function () { a.ready = !0, a.trigger({ type: "ready" }), a.player.addEvent("play", function () { a.started === !1 && (a.started = !0, a.trigger({ type: "start" })), a.state = "playing", a.trigger({ type: "play" }) }), a.player.addEvent("pause", function () { a.state = "paused", a.trigger({ type: "pause" }) }), a.player.addEvent("finish", function () { a.state = "ended", a.trigger({ type: "ended" }) }) }) }, h.prototype.play = function () { var a = this; if (this.ready === !0) this.player.api("play"); else var b = setInterval(function () { a.ready === !0 && (clearInterval(b), a.player.api("play")) }, 100) }, h.prototype.pause = function () { this.player.api("pause") }, h.prototype.stop = function () { this.player.api("seekTo", 0), this.player.api("pause"), this.state = "stopped" }, h.prototype.replay = function () { this.player.api("seekTo", 0), this.player.api("play") }, h.prototype.on = function (a, b) { var c = this; if (this.init === !0) d.prototype.on.call(this, a, b); else var e = setInterval(function () { c.init === !0 && (clearInterval(e), d.prototype.on.call(c, a, b)) }, 100) }; var i = function (a) { d.call(this, a) }; i.prototype = new d, i.prototype.constructor = i, a.VideoController.addPlayer("HTML5Video", i), i.isType = function (a) { return a.is("video") && a.hasClass("video-js") === !1 && a.hasClass("sublime") === !1 ? !0 : !1 }, i.prototype._init = function () { var a = this; this.player = this.$video[0]; var b = setInterval(function () { 4 === a.player.readyState && (clearInterval(b), a.ready = !0, a.trigger({ type: "ready" }), a.player.addEventListener("play", function () { a.started === !1 && (a.started = !0, a.trigger({ type: "start" })), a.state = "playing", a.trigger({ type: "play" }) }), a.player.addEventListener("pause", function () { a.state = "paused", a.trigger({ type: "pause" }) }), a.player.addEventListener("ended", function () { a.state = "ended", a.trigger({ type: "ended" }) })) }, 100) }, i.prototype.play = function () { var a = this; if (this.ready === !0) this.player.play(); else var b = setInterval(function () { a.ready === !0 && (clearInterval(b), a.player.play()) }, 100) }, i.prototype.pause = function () { this.player.pause() }, i.prototype.stop = function () { this.player.currentTime = 0, this.player.pause(), this.state = "stopped" }, i.prototype.replay = function () { this.player.currentTime = 0, this.player.play() }; var j = function (a) { d.call(this, a) }; j.prototype = new d, j.prototype.constructor = j, a.VideoController.addPlayer("VideoJSVideo", j), j.isType = function (a) { return "undefined" == typeof a.attr("data-videojs-id") && !a.hasClass("video-js") || "undefined" == typeof videojs ? !1 : !0 }, j.prototype._init = function () {
        var a = this, b = this.$video.hasClass("video-js") ? this.$video.attr("id") : this.$video.attr("data-videojs-id"); this.player = videojs(b), this.player.ready(function () {
            a.ready = !0, a.trigger({ type: "ready" }), a.player.on("play", function () { a.started === !1 && (a.started = !0, a.trigger({ type: "start" })), a.state = "playing", a.trigger({ type: "play" }) }), a.player.on("pause", function () { a.state = "paused", a.trigger({ type: "pause" }) }), a.player.on("ended", function () {
                a.state = "ended", a.trigger({ type: "ended" })
            })
        })
    }, j.prototype.play = function () { this.player.play() }, j.prototype.pause = function () { this.player.pause() }, j.prototype.stop = function () { this.player.currentTime(0), this.player.pause(), this.state = "stopped" }, j.prototype.replay = function () { this.player.currentTime(0), this.player.play() }; var k = function (a) { d.call(this, a) }; k.prototype = new d, k.prototype.constructor = k, a.VideoController.addPlayer("SublimeVideo", k), k.isType = function (a) { return a.hasClass("sublime") && "undefined" != typeof sublime ? !0 : !1 }, k.prototype._init = function () { var a = this; sublime.ready(function () { a.player = sublime.player(a.$video.attr("id")), a.ready = !0, a.trigger({ type: "ready" }), a.player.on("play", function () { a.started === !1 && (a.started = !0, a.trigger({ type: "start" })), a.state = "playing", a.trigger({ type: "play" }) }), a.player.on("pause", function () { a.state = "paused", a.trigger({ type: "pause" }) }), a.player.on("stop", function () { a.state = "stopped", a.trigger({ type: "stop" }) }), a.player.on("end", function () { a.state = "ended", a.trigger({ type: "ended" }) }) }) }, k.prototype.play = function () { this.player.play() }, k.prototype.pause = function () { this.player.pause() }, k.prototype.stop = function () { this.player.stop() }, k.prototype.replay = function () { this.player.stop(), this.player.play() }; var l = function (a) { d.call(this, a) }; l.prototype = new d, l.prototype.constructor = l, a.VideoController.addPlayer("JWPlayerVideo", l), l.isType = function (a) { return "undefined" == typeof a.attr("data-jwplayer-id") && !a.hasClass("jwplayer") && 0 === a.find("object[data*='jwplayer']").length || "undefined" == typeof jwplayer ? !1 : !0 }, l.prototype._init = function () { var a, b = this; this.$video.hasClass("jwplayer") ? a = this.$video.attr("id") : "undefined" != typeof this.$video.attr("data-jwplayer-id") ? a = this.$video.attr("data-jwplayer-id") : 0 !== this.$video.find("object[data*='jwplayer']").length && (a = this.$video.find("object").attr("id")), this.player = jwplayer(a), this.player.onReady(function () { b.ready = !0, b.trigger({ type: "ready" }), b.player.onPlay(function () { b.started === !1 && (b.started = !0, b.trigger({ type: "start" })), b.state = "playing", b.trigger({ type: "play" }) }), b.player.onPause(function () { b.state = "paused", b.trigger({ type: "pause" }) }), b.player.onComplete(function () { b.state = "ended", b.trigger({ type: "ended" }) }) }) }, l.prototype.play = function () { this.player.play(!0) }, l.prototype.pause = function () { this.player.pause(!0) }, l.prototype.stop = function () { this.player.stop(), this.state = "stopped" }, l.prototype.replay = function () { this.player.seek(0), this.player.play(!0) }
}(jQuery);/***********DOM Creation Generic methods END************/
var EasyLibrary = {
    ReadDOM: function (fileName, Cache) {
        var oRequest = new XMLHttpRequest();
        try {
            var URL = '';
            if (typeof Cache == 'undefined' || Cache)
                URL = `${SageFrameHostURL}/cbuilderassets/js/html/${fileName}.html`;
            else
                URL = `${SageFrameHostURL}/cbuilderassets/js/html/${fileName}.html?t=` + Math.random();
            oRequest.open("GET", URL, false);
            //oRequest.setRequestHeader("User-Agent", navigator.userAgent);
            oRequest.send(null);
        } catch (message) { }
        if (oRequest.status == 200)
            return this.RemoveSpaceFromDOM(oRequest.responseText);
        else
            console.error("Error executing XMLHttpRequest call!");
    },
    GetAdminURL: function () {
        return "https://easybuilder.contentder.com/";
    },
    PageListDOM: function () {
        return this.RemoveSpaceFromDOM($('#innerPageList').html());
    },
    RemoveSpaceFromDOM: function (data) {
        if (data != null) {
            return data.replace(/\>\s+\</g, '><').trim(); //.replace(/(\r\n|\n|\r)/gm, "").trim();
        }
    },
    FontCollectionList: function () {
        return this.RemoveSpaceFromDOM($('ul#fontIconCollection').html());
    },
    /*
    
    */
    DefaultImage1: function () {
        return `<img  src="${webbuildermodulepath}/img/def1.jpg" />`;
    },
    DefaultImages: function () {
        return ["def1.jpg", "def2.jpg", "def3.jpg", "def4jpg", "def5.jpg",];
    },
    NoScreenshot: function () {
        return `<img  src="${webbuildermodulepath}/img/def1.jpg" />`;
    },
    NoScreenshotImagePath: function () {
        return `${webbuildermodulepath}/img/noscreenshot.jpg`;
    },
    IsDefined: function (data) {
        if (typeof data === "undefined")
            return false;
        else
            return true;
    },
    IsUndefined: function (data) {
        if (typeof data === "undefined")
            return true;
        else
            return false;
    },
    GetPageArray: function () {
        var pages = [];
        $('#innerPageList li').each(function () {
            var $this = $(this);
            pages.push({
                'id': $this.attr('data-pageid'),
                'name': $this.find('span').text().trim()
            });
        });
        return pages;
    },
    GetDashboardPageArray: function () {
        var pages = [];
        $('#dashboardPageList li').each(function () {
            var $this = $(this);
            pages.push({
                'id': $this.attr('data-pageid'),
                'name': $this.find('span').text().trim()
            });
        });
        return pages;
    },
    GetPageOption: function () {
        var option = '';
        $('#innerPageList li').each(function () {
            var $this = $(this);
            option += '<option value="' + $this.attr('data-pageid') + '">' + $this.find('span').text().trim() + '</option>';
        });
        return option;
    },
    GetDasboardPageOption: function () {
        var option = '';
        $('#dashboardPageList li').each(function () {
            var $this = $(this);
            option += '<option data-dashboard="true" value="' + $this.attr('data-pageid') + '">' + $this.find('span').text().trim() + '</option>';
        });
        return option;
    },
    NumberCounter: function (itemCounter, minValue, maxValue, stepSize, defaultCount, callBackContainer, callBack) {
        let counter = `<i data-min=${minValue} id="numCounterReducer" class="fa fa-chevron-left"></i>
                           <span id="numCounterTotal" class ="f-weight-600 editor-com-innerSpacing-left-5 editor-com-innerSpacing-right-5">${defaultCount}</span>
                        <i data-max=${maxValue} id="numCounterIncreaser" class ="fa fa-chevron-right"></i>`;
        itemCounter.append(counter);
        var reducer = itemCounter.find('#numCounterReducer');
        var increaser = itemCounter.find('#numCounterIncreaser');
        var totalCounter = itemCounter.find('#numCounterTotal');

        totalCounter.text(defaultCount);

        reducer.on('click', function () {
            var minValue = $(this).attr('data-min');
            var currentTotal = totalCounter.text();
            var count = parseInt(currentTotal);
            var newCount = count - stepSize;
            if (newCount >= parseInt(minValue)) {
                ReflectCounter(newCount);
            }
        });


        increaser.on('click', function () {
            var maxValue = $(this).attr('data-max');
            var currentTotal = totalCounter.text();
            var count = parseInt(currentTotal);
            var newCount = count + stepSize;
            if (newCount <= parseInt(maxValue)) {
                ReflectCounter(newCount);
            }
        });

        function ReflectCounter(newCount) {
            totalCounter.text(newCount);
            callBack(newCount, callBackContainer);
        }
    },
    GetSettings: function () {
        var $body = $('.site-body');
        var tempSettings = $body.attr('data-settings');
        if (typeof (tempSettings) !== 'undefined' && tempSettings.length > 0) {
            tempSettings = JSON.parse(tempSettings);
            //set the settings
            $body.addClass(tempSettings.defaultLayout);
            $body.addClass('ff-' + tempSettings.defaultFontFamily);
            $body.addClass('f-weight-400');
            $body.addClass(tempSettings.SiteHeaderEffect);
            $('.editor-box').attr('style', tempSettings.body.style);
            $body.addClass(tempSettings.temporaryWidth);
            $('.editor-box').attrs(tempSettings.body);
            $('.editor-box').addClass('main-container');
            if (typeof (tempSettings.shadedLayer) !== "undefined" && tempSettings.shadedLayer !== null) {
                var shadedDiv = divStart('editor-row-shaded-layer') + divEnd;
                var appendElem = $('.editor-box').children();
                $('.editor-box').append(shadedDiv);
                $('.editor-box').find(' > .editor-row-shaded-layer').append(appendElem).attrs(tempSettings.shadedLayer);
            }
            //initialize the settings
            $('#primaryColor').css('background-color', tempSettings.primaryColor);
            $('#secondaryColor').css('background-color', tempSettings.secondaryColor);
            $('#optionalColor').css('background-color', tempSettings.optionalColor);
            $('.layoutChange[data-layout="' + tempSettings.defaultLayout + '"]').prop('checked', true);
            $('#basicFonts').val(tempSettings.defaultFontFamily);

            //overriding the setting
            webBuilderSettings = tempSettings;
        }
        if (webBuilderSettings.scrolltotop) {
            $('#chkScrollToTopBox').prop('checked', true);
            var scroll = '<div class="scrolltotop" id="ScroolToTop"><div class="ScrollToTop editor-component"><div class="scrollDOM"><i class="fa fa-arrow-up" aria-hidden="true"></i></div></div></div>';
            $('.site-body').append(scroll);
            $('#ScroolToTop').on('click', function () {
                $('body,html').animate({
                    scrollTop: '0px'
                }, 1000);
            });
        }

    },
    GenerateID: function ($elem, type) {
        var _this = this;
        var rows = 0;
        if (_this.IsDefined($('body').attr('data-count'))) {
            rows = parseInt($('body').attr('data-count'));
        }
        var id = rows + 1;
        $('body').attr('data-count', id);
        webBuilderSettings.idcount = id;
        return id;
    },
    GenerateAndAppendID: function ($elem, type) {
        $elem.attr('data-id', this.GenerateID($elem, type));
    },
    GenerateAndAppendDataType: function ($elem, type) {
        let dataType = $elem.attr('data-type');
        if (this.IsUndefined($elem.attr('data-customtype'))) {
            $elem.attr('data-type', type);
            dataType = type;
        }
        return dataType;
    },
    GetComponenetID: function ($elem) {
        var ID = 0;
        if (this.IsDefined($elem.attr('data-id'))) {
            ID = parseInt($elem.attr('data-id'));
        }
        return ID;
    },
    Alert: function (alertdata) {
        alert(alertdata);
    },
    SetAPI: function (APICntrl) {
        if (this.IsDefined(APICntrl)) {
            APICntrl.PageName = this.GetCurrentPageName;
            var componentname = APICntrl.ComponentName;
            //have to check if the key exists ??
            if (this.IsDefined(component[componentname]["package"])) {
                if (this.IsDefined(component[componentname]["package"]["API"])) {
                    component[componentname]["package"]["API"].push(APICntrl);
                }
            } else {
                component[componentname].package = {
                    "API": []
                };
                component[componentname]["package"]["API"].push(APICntrl);
            }
        }
    },
    APICollector: function (objAPIController) {
        var packageXML = '';
        if (this.IsDefined(objAPIController)) {
            let staticPara = "";
            if (objAPIController.Type.toLowerCase() === "url") {
                staticPara = (objAPIController.StaticParameters.trim().length == 0 ? "" : "#" + objAPIController.StaticParameters);
            }
            packageXML += '<apilist>';
            packageXML += '<namespace>';
            packageXML += objAPIController.NameSpace;
            packageXML += '</namespace>';
            packageXML += '<classnames>';
            packageXML += objAPIController.ClassNames;
            packageXML += '</classnames>';
            packageXML += '<methodnames>';
            packageXML += objAPIController.MethodNames;
            packageXML += '</methodnames>';
            packageXML += '<parameters>';
            packageXML += objAPIController.Parameters + staticPara;
            packageXML += '</parameters>';
            packageXML += '<componentid>';
            packageXML += objAPIController.ComponentID;
            packageXML += '</componentid>';
            packageXML += '<componentname>';
            packageXML += objAPIController.ComponentName;
            packageXML += '</componentname>';
            packageXML += '<type>';
            packageXML += objAPIController.Type;
            packageXML += '</type>';
            packageXML += '<pagename>';
            packageXML += objAPIController.PageName;
            packageXML += '</pagename>';
            packageXML += '</apilist>';
        }
        return packageXML;
    },
    GetSingleAPI: function (key) {
        if (this.IsDefined(apiResultString) && this.IsDefined(apiResultString[key]))
            return apiResultString[key];
        else
            return null;
    },
    GetSingleAPIResult: function (key) {
        if (this.IsDefined(apiResultString) && this.IsDefined(apiResultString[key]))
            return apiResultString[key].Result;
        else
            return null;
    },
    GetCurrentPageName: function () {
        return currentpageName;
    },
    EnableLoader: function ($this) {
        $this.addClass('sLdng');
    },
    RemoveLoader: function ($this) {
        $this.removeClass('sLdng');
    },
    RandomColor: function () {
        return '#' + Math.random().toString(16).substr(2, 6);
    },
    Pinned: function () {
        return $('#popupModel .right_actions >.pin__right').hasClass('pinned');
    },
    ComponentTemplate: function ($parent, dropped) {
        let thatComp = component[$parent.attr('data-type')];
        var option = {
            heading: "Choose " + thatComp.componentname + " Templates",
            data: `<div class="fullpage-popup-model-search" id="divCompTempFltr">
                    <div class="temp-top-search Pa-20  Dfx flxWrp TxAl-m">
                        <div class="temp-search PosR">
                            <input type="text" id="txtCompTempSearch" placeholder="Search Template">
                            <button id="btnSearchCompTemp" class="search-btn-temp">
                                <i class="fa fa-search"></i>
                            </button>
                        </div>
                        <div class="temp-filter Dfx">
                            <span id="btnTagsFlterOpn" class="filter-btn cPointer">Filter</span>
                            <span id="btnResetTempSearch" class="cPointer  clear-btn">Clear All</span>
                        </div>
                    </div>
                    <div id="divCompTagsFltr" style="display: none" class="temp-sug sfCol_100 Pa-25 ">
                        <div id="divCompTempTags" class="flx flxWrp"></div>
                    </div>
                </div>
                <div id="divCompChooseTempLst" data-offset="0" data-limit="10" class="tempItem-wrp lay-wrp Dfx flxWrp TxAl-c"></div>
                <div class="Dfx TxAl-c">
                    <span class="stngSmallBtn" id="btnLoadMoreCompTemp">Load More</span>
                </div>`,
            showheading: true,
            width: "75%",
            height: "80%",
            advance: false,
            onappend: function ($wrap) {
                $wrap.find(".fullpagepopup").css("height", "80%");
                $wrap.find('#fullpagePopup').after($wrap.find('#divCompTempFltr'));
                $wrap.find(".fullpage-popup-model-body").addClass("Pa-0");
                GetLayout(false);
                GetTags();
            },
            onclose: function () {
                if (EasyLibrary.IsDefined(WbGlobal.CompTempManager))
                    WbGlobal.CompTempManager.compEvent($parent);
            }
        };
        FullPagePopup(option);

        function eventLister() {
            var $cont = $('#divCompChooseTempLst');
            $(".useThisTemp").off("click").on("click", function () {
                var html = EasyLibrary.RemoveSpaceFromDOM($(this).closest('.tempItem').find('.hdnTemp').html());
                var $temp = $(html);
                if (dropped) {
                    applyTemplate($temp);
                } else {
                    SageConfirmDialog("Are you sure to use this template?").done(function () {
                        applyTemplate($temp);
                    });
                }
            });
            $('#btnSearchCompTemp').off().on('click', function () {
                GetLayout(false);
            });
            $('#txtCompTempSearch').off().on('keyup', function (e) {
                if (e.keyCode === 13 || $(this).val() === '')
                    GetLayout(false);
            });
            $('#divCompTempTags .tempTags').off().on('click', function () {
                $(this).toggleClass('active');
                GetLayout(false);
            });
            $('#btnTagsFlterOpn').off('click').on('click', function () {
                $('#divCompTagsFltr').toggle(300);
            });
            $('#btnLoadMoreCompTemp').off().on('click', function () {
                $cont.attr('data-offset', parseInt($cont.attr('data-offset') + parseInt($cont.attr('data-limit'))));
                GetLayout(true);
            });
            $('#btnResetTempSearch').off().on('click', function () {
                $('#divCompTagsFltr .active').removeClass('active');
                $('#txtCompTempSearch').val('');
                GetLayout(false);
            });
        }

        function applyTemplate($temp) {
            thatComp.applyTemplate($parent, $temp, dropped);
            CloseFullPagePopup();
            SettingEvents($parent);
            $parent.find(".editor-component").each(function () {
                SettingEvents($(this));
            });
        }

        function GetLayout(IsAppend) {
            var url = SageFrameAppPath + '/Builder';
            if (EasyLibrary.IsDefined(WbGlobal.CompTempManager))
                url = WbGlobal.CompTempManager.TemplatePath;
            var itmscls = 'sfCol_33 tsfCol_50 msfCol_100 Pa-15';
            if (EasyLibrary.IsDefined(thatComp.tempItemsClass))
                itmscls = thatComp.tempItemsClass;
            var $cont = $('#divCompChooseTempLst');
            var config = {
                method: "GetComponentTemplate",
                url: url,
                data: "",
                ajaxSuccess: ""
            };
            if (!IsAppend) {
                $cont.attr('data-offset', 0);
                $cont.attr('data-limit', 9);
                if (EasyLibrary.IsDefined(thatComp.tempItemLimit))
                    $cont.attr('data-limit', thatComp.tempItemLimit);
            }
            config.data = {
                componentName: thatComp.componentname,
                offset: $cont.attr('data-offset'),
                limit: $cont.attr('data-limit'),
                searchKey: $('#txtCompTempSearch').val(),
                tagIDs: $('#divCompTempTags .active').map(function () {
                    return $(this).attr('data-id');
                }).get().join(',')
            };
            config.ajaxSuccess = function (data) {
                if (data !== null) {
                    var html = '';
                    data = data.d;
                    if (typeof data === "string")
                        data = JSONParse(data);
                    if (data.length >= parseInt(config.data.limit))
                        $('#btnLoadMoreCompTemp').show();
                    else
                        $('#btnLoadMoreCompTemp').hide();
                    $.each(data, function (i, v) {
                        html += '<div class="' + itmscls + '">';
                        html += '<div class="tempItem Dfx TxAl-m TxAl-c PosR"><div class="hdnTemp Dn mDn tDn">' + v.LayoutDOM + '</div>';
                        html += '<div class="imgWrp">';
                        html += '<img src="' + v.Screenshot + '"/>';
                        html += '</div><div class="desc Dfx TxAl-c TxAl-m flxWrp">';
                        html += '<span class="tit">' + v.LayoutName + '</span>';
                        html += '<button type="button" class="btn-ui useThisTemp">Use This</button>';
                        html += '</div></div></div>';
                    });
                    if (IsAppend) {
                        $cont.append(html);
                    } else if (html !== '')
                        $cont.html(html);
                    else
                        $cont.html('<div class="emptyData"><p>Sorry template not found.</p></div>');
                    eventLister();

                }
            };
            CommonLibrary.AjaxCall(config);
        }

        function GetTags() {
            var config = {
                method: "GetCompTemplateTags",
                url: SageFrameAppPath + '/Builder',
                data: {
                    componentName: thatComp.componentname,
                },
                async: true,
                ajaxSuccess: function (data) {
                    if (data !== null) {
                        data = data.d;
                        if (typeof data === "string")
                            data = JSONParse(data);
                        var html = '';
                        $.each(data, function (i, v) {
                            html += '<span class="tempTags" data-id="' + v.Key + '">' + v.Value + '</span>';
                        });
                        $('#divCompTempTags').html(html);
                    }
                    eventLister();
                }
            };
            CommonLibrary.AjaxCall(config);
        }
    }
};
//initialize the body settings
EasyLibrary.GetSettings();

function GetLibrary(dataType) {
    return component[dataType]["view"]["library"];
}
//implementation
//var scroller = new ScrollJS({
//    container: $('#container'),
//    scrollbar: $('#scrollbar'),
//    content: $('#content')
//});
//store external html DOMs in a variable for re-use without repetitive call
const ExternalFileDoms = {
    divbackcolorchoose: staticDOMs.divbackcolorchoose,
    divbackimagechoose: staticDOMs.divbackimagechoose,
    backgroundtab: staticDOMs.backgroundtab,
    txtbasictab: staticDOMs.txtbasictab
};

function SetDefaultFont(o) {
    if (typeof (o) === "undefined" || typeof (o.targetParent) === 'undefined') {
        console.log("DefaultFontFamily=> targetparent: missing or invalid");
        return;
    }
    if (typeof (o) === "undefined" || typeof (o.targetElem) === 'undefined') {
        console.log("DefaultFontFamily=> targetElem: missing or invalid");
        return;
    }
    if (!(o.targetParent instanceof jQuery)) {
        console.error("DefaultFontFamily=> targetParent should be a jQuery object");
        return;
    }
    let targetParent = o.targetParent;
    let target = o.targetElem;
    let defaultFont = {
        setupFont: function () {
            let defaultFontFamily = $(`#basicFonts`).val();
            $(target).each(function (i, val) {
                if (!targetParent.find(val).length > 0) {
                    console.log("DefaultFontFamily=> targetElem: invalid");
                    return;
                }
                let fontClasses = targetParent.find(val).attr('class').match(/ff-(\w+)/g);
                if (fontClasses !== null)
                    targetParent.find(val).removeClass(fontClasses[0]);
                targetParent.find(val).addClass('ff-' + defaultFontFamily);
            });
        }
    }
    defaultFont.setupFont();

}
//function SelectedItem(o) {
//    if (typeof (o) === "undefined" || typeof (o.targetParent) === 'undefined') {
//        console.log("SelectedItem=> targetparent: missing or invalid");
//        return;
//    }
//    if (typeof (o) === "undefined" || typeof (o.targetElem) === 'undefined') {
//        console.log("SelectedItem=> targetElem: missing or invalid");
//        return;
//    }
//    if (!(o.targetParent instanceof jQuery)) {
//        console.error("SelectedItem=> targetParent should be a jQuery object");
//        return;
//    }
//    if (typeof (o.itemsPerRow) === "undefined") {
//        console.log('ItemEvent=> itemsPerRow is missing');
//        return;
//    }
//    let types = ['fItem', 'lItem', 'fRow', 'lRow', 'fCol', 'lCol'];
//    let targetParent = o.targetParent,
//        target = o.targetElem,
//        type = o.type,
//        itemsPerRow = o.itemsPerRow,
//        totalItem = $(targetParent).find(target).length;
//    targetItem = {};

//}
(function ($) {
    "use strict";
    $.fn.nthItemEvent = function (o) {
        if (typeof (o) === "undefined" || typeof (o.targetParent) === 'undefined') {
            console.log("ItemEvent=> targetparent: missing or invalid");
            return;
        }
        if (typeof (o) === "undefined" || typeof (o.targetElem) === 'undefined') {
            console.log("ItemEvent=> targetElem: missing or invalid");
            return;
        }
        if (!(o.targetParent instanceof jQuery)) {
            console.error("ItemEvent=> targetParent should be a jQuery object");
            return;
        }
        if (typeof (o.type) == "undefined") {
            console.log('ItemEvent=> type is missing');
            return;
        }
        if (o.type == "row" && typeof (o.itemsPerRow) === "undefined") {
            console.log('ItemEvent=> itemsPerRow is missing');
            return;
        }
        let types = ['item', 'row'];
        let targetParent = o.targetParent,
            self = this,
            target = o.targetElem,
            type = o.type,
            itemsPerRow = o.itemsPerRow,
            totalItem = $(targetParent).find(target).length,
            column = o.column && itemsPerRow > 1 ? true : false,
            lastRowItems = type == types[1] ? parseInt(totalItem % itemsPerRow) : 0,
            selectOptionClass = 'item',
            idSuffix = '_' + Math.floor((Math.random() * 1000) + 100);

        let objEle = {};
        function updateEvent(type) {
            switch (type) {
                case types[0]:
                    objEle.firstEleClass = 'itemFirst';
                    objEle.lastEleClass = 'itemLast';
                    break;
                case types[1]:
                    objEle.firstEleClass = 'itemFirst';
                    objEle.lastEleClass = 'itemLast';
                    objEle.firstColClass = 'columnFirst';
                    objEle.lastColClass = 'columnLast';
                    break;
                default:
                    break;
            }
        }
        let ItemEvent = {
            initEvent: function () {
                let self = this;
                updateEvent(type);
                $(targetParent).find(target).removeClass(objEle.firstColClass).removeClass(objEle.lastColClass);
                $(targetParent).find(target).removeClass(objEle.firstEleClass).removeClass(objEle.lastEleClass);
                if (type == types[0])
                    self.setItemEvent()
                else self.setRowEvent();
            },
            setItemEvent: function () {
                targetParent.find(target).eq(0).addClass(objEle.firstEleClass);
                targetParent.find(target + ':last').addClass(objEle.lastEleClass);
                this.appendDOM(types[0]);
            },
            appendDOM: function (type) {
                let _this = this;
                self.find('[class^="' + types[0] + '"]').remove();
                let optionDOM = type == types[0] ? _this.createItemSelectDOM() : _this.createRowSelectDOM();
                self.append(optionDOM);
            },
            createItemSelectDOM: function () {
                return DOMCreate('option', 'First Item', selectOptionClass + objEle.firstEleClass + idSuffix, '', ['value=".' + objEle.firstEleClass + '"']) + DOMCreate('option', 'Last Item', selectOptionClass + objEle.lastEleClass + idSuffix, '', ['value=".' + objEle.lastEleClass + '"']);
            },
            createRowSelectDOM: function () {
                let optionDOMs = DOMCreate('option', 'First Row', selectOptionClass + objEle.firstEleClass + idSuffix, '', ['value=".' + objEle.firstEleClass + '"']) + DOMCreate('option', 'Last Row', selectOptionClass + objEle.lastEleClass + idSuffix, '', ['value=".' + objEle.lastEleClass + '"']);
                if (column) {
                    optionDOMs += DOMCreate('option', 'First Column', selectOptionClass + objEle.firstColClass + idSuffix, '', ['value=".' + objEle.firstColClass + '"']) + DOMCreate('option', 'Last Column', 'item' + objEle.lastColClass + idSuffix, '', ['value=".' + objEle.lastColClass + '"']);
                }
                return optionDOMs;
            },
            setRowEvent: function () {
                let _this = this;
                _this.appendDOM(types[1]);
                if (totalItem < itemsPerRow)
                    $(targetParent).find(target).addClass(objEle.firstEleClass);
                else if (totalItem > itemsPerRow) {
                    this.setFirstRow(0, parseInt(itemsPerRow))
                    if (lastRowItems == 0)
                        _this.setLastRow(totalItem - 1, parseInt(totalItem - itemsPerRow - 1))
                    else
                        _this.setLastRow(totalItem - 1, parseInt(totalItem - lastRowItems - 1))
                }
            },
            setFirstRow: function (init, condition) {
                if (init !== undefined && condition !== undefined)
                    for (let i = init; i < condition; i++)
                        $(targetParent).find(target).eq(i).addClass(objEle.firstEleClass);
                else
                    $(targetParent).find(target).first().addClass(objEle.firstEleClass);
                if (column)
                    while (init < totalItem) {
                        $(targetParent).find(target).eq(init).addClass(objEle.firstColClass);
                        init += parseInt(itemsPerRow);
                    }
            },
            setLastRow: function (init, condition) {
                if (init !== undefined && condition !== undefined)
                    for (let i = init; i > condition; i--)
                        $(targetParent).find(target).eq(i).addClass(objEle.lastEleClass);
                else $(targetParent).find(target).last().addClass(objEle.lastEleClass);
                if (column) {
                    let condn = lastRowItems;
                    while ((totalItem - condn) >= itemsPerRow) {
                        let index = totalItem - condn - 1;
                        $(targetParent).find(target).eq(index).addClass(objEle.lastColClass);
                        condn += parseInt(itemsPerRow);
                    }
                }
            }
        }
        ItemEvent.initEvent();
    };
}(jQuery));


(function ($) {
    "use strict";
    $.fn.AdvanceBackground = function (o) {
        if (typeof o === 'undefined' || typeof o.targetParent === 'undefined') {
            console.error("AdvanceBackground => missing option: targetParent");
            return;
        }
        if (!(o.targetParent instanceof jQuery)) {
            console.error("AdvanceBackground => targetParent should be a jQuery object");
            return;
        }
        if (typeof o === 'undefined' || typeof o.targetElem === 'undefined') {
            console.error("AdvanceBackground => missing option: targetElem");
            return;
        }
        let $self = this,
            targetParent = o.targetParent,
            targetElem = o.targetElem,
            targets = $(targetParent).find(targetElem),
            idSuffix = '_' + Math.floor((Math.random() * 1000) + 100),
            options = ["image", "color"];
        if (typeof o.options !== 'undefined' && o.options && o.options instanceof Array) {
            options = o.options;
        }
        let AdvanceBackground = {
            updateTargets: function () {
                let tar = UpdateTargets(targetParent, targetElem, 'AdvanceBackground');
                targets = tar.target;
                return tar.exists;
            },
            appendBGChangerDOM: function () {
                let bgChDom = this.GeneralBackgroundDOM();
                bgChDom = this.fixDomId(bgChDom);
                $self.html(bgChDom);
            },
            GeneralBackgroundDOM: function () {
                let backGroundDOM = '';
                let optionLen = options.length;
                if (optionLen > 0) {
                    if (optionLen == 1) {
                        if (optionLen > 1)
                            backGroundDOM += DOMCreate('h4', 'Background');
                        let optionValue = options[0];
                        switch (optionValue) {
                            case 'color':
                                backGroundDOM += ExternalFileDoms.divbackcolorchoose;
                                break;
                            case 'image':
                                backGroundDOM += ExternalFileDoms.divbackimagechoose;
                                break;
                        }
                        backGroundDOM = FieldRowDOMCreate(backGroundDOM);
                    } else {
                        backGroundDOM += ExternalFileDoms.backgroundtab;
                    }
                }
                return backGroundDOM;
            },
            setupData: function () {
                this.setupBGImage();
                this.setupBGImageEffect();
                this.setupShades();
            },
            setupBGImage: function () {
                if (!this.updateTargets()) {
                    return;
                }
                let parentBgImage = $(targets[0]).css('background-image');
                if (typeof (parentBgImage) === 'undefined' || parentBgImage === 'none') {
                    parentBgImage = `${webbuildermodulepath}/img/tiger.jpg`;
                }
                parentBgImage = parentBgImage.replace('url(', '').replace(')', '').replace(/\"/gi, "");
                $self.find(`#RowBGImageSrc${idSuffix}`).attr('src', parentBgImage);
            },
            setupBGImageEffect: function () {
                if (!this.updateTargets()) {
                    return;
                }
                let effectClass = 'background-effect-size-contain';
                let sfEffect = $(targets[0]).attr('class').match(/background-effect-[a-z]{1,10}-[a-z]{1,10}/g);
                if (sfEffect !== null) {
                    effectClass = sfEffect[0];
                }
                $self.find(`#bgImageEffect${idSuffix}`).val(effectClass);
            },
            setupShades: function () {
                if (!this.updateTargets()) {
                    return;
                }
                let $shadedlayer = $(targets[0]).find(' > .editor-row-shaded-layer');
                if ($shadedlayer.length > 0) {
                    $self.find(`#shadedLayerActive${idSuffix}`).prop('checked', true);
                    //let conClass = $shadedlayer.attr('class').replace('editor-row-container', '').trim();
                    //$('#selContainerWidth').val(conClass);
                    $self.find(`#divPickShaded${idSuffix}`).fadeIn(400);
                    $self.find(`#chooseColorShadedCol${idSuffix}`).css({
                        'background-color': $shadedlayer.css('background-color')
                    });
                } else {
                    $self.find(`#shadedLayerActive${idSuffix}`).prop('checked', false);
                }
            },
            setupColorPicker: function () {
                let self = this;
                let colorPickerOption = ColorPickerOption({
                    renderCallback: function ($elm, toggled) {
                        let objColor = RenderCallBackColor(this);
                        if (typeof o.colorCallBack == 'function')
                            o.colorCallBack(objColor);
                        let colorPickerID = $elm.attr('id');
                        self.updateTargets();
                        switch (colorPickerID) {
                            case 'chooseColorShadedCol' + idSuffix:
                                $.each(targets, function (i, target) {
                                    $(target).find(' > .editor-row-shaded-layer').css({
                                        'background-color': objColor.bgColor,
                                        //'color': objColor.textColor
                                    });
                                });
                                break;
                            case 'chooseColorColBG' + idSuffix:
                                $.each(targets, function (i, target) {
                                    $(target).css({
                                        'background-color': objColor.bgColor,
                                        //'color': objColor.textColor
                                    });
                                });
                                break;
                        }
                    }
                });
                $self.find('.chooseBGColors').colorPicker(colorPickerOption);
            },
            addEventListeners: function () {
                if (!this.updateTargets()) {
                    return;
                }
                let self = this;
                let bgColor = $(targets[0]).css('background-color');
                let txtColor = $(targets[0]).css('color');
                if (typeof ($(targets[0]).attr('style')) === 'undefined' || typeof (bgColor) === "undefined") {
                    bgColor = "rgba(255, 255, 255, 0)";
                }
                if (typeof ($(targets[0]).attr('style')) === 'undefined' || typeof (txtColor) === "undefined") {
                    txtColor = "rgba(0, 0, 0, 0)";
                }
                let prevhovereffect = $(targets[0]).attr('data-prevhovereffect');
                if (typeof prevhovereffect !== 'undefined') {
                    let tmpEff = JSON.parse(prevhovereffect);
                    if (tmpEff.bg) {
                        bgColor = tmpEff.bg;
                    }
                    if (tmpEff.font) {
                        txtColor = tmpEff.font;
                    }
                }
                //background type
                $self.find(`#selBackround${idSuffix}`).off().on('change', function () {
                    self.updateTargets();
                    let select = $(this).val();
                    let backgroundColor = '';
                    let backgroundImage = '';
                    switch (select) {
                        case 'none':
                            $self.find(`#divBackColorChoose${idSuffix}`).hide();
                            $self.find(`#divBackImageChoose${idSuffix}`).hide();
                            backgroundColor = '';
                            backgroundImage = '';
                            self.removeBGImage();
                            self.removeBGColor(bgColor, txtColor);
                            break;
                        case 'image':
                            $self.find(`#divBackColorChoose${idSuffix}`).hide();
                            $self.find(`#divBackImageChoose${idSuffix}`).show();
                            backgroundColor = '';
                            backgroundImage = 'image';
                            self.removeBGColor(bgColor, txtColor);
                            break;
                        case 'color':
                            $self.find(`#divBackColorChoose${idSuffix}`).show();
                            $self.find(`#divBackImageChoose${idSuffix}`).hide();
                            backgroundColor = 'color';
                            backgroundImage = '';
                            self.removeBGImage();
                            break;
                    }
                    if (typeof o.backgroundType == 'function')
                        o.backgroundType(select);
                    $.each(targets, function (i, target) {
                        $(target).attr('data-backgroundColor', backgroundColor);
                        $(target).attr('data-backgroundImage', backgroundImage);
                    });
                });
                //image change event
                $self.find(`#RowBGImage${idSuffix}`).off().on('click', function () {
                    self.updateTargets();
                    let $this = $(this);
                    let media = $this.SageMedia({
                        onSelect: function (src, response, type, filename, extension) {
                            src = src.replace(/\\/g, '/');
                            if (typeof o.sageMediaCallBack == 'function')
                                o.sageMediaCallBack(src);
                            //$this.attr('src', src);
                            $self.find(`#RowBGImageSrc${idSuffix}`).attr('src', src);
                            $.each(targets, function (i, target) {
                                $(target).css({
                                    'background-image': 'url("' + src + '")'
                                });
                            });
                        },
                        success: function (resposne) {

                        },
                        mediaType: 'image',
                        extension: 'png,jpeg,jpg,ico,svg,gif,webp'
                    });
                    media.Show();
                });
                //image effects
                $self.find(`#bgImageEffect${idSuffix}`).off().on('change', function () {
                    self.updateTargets();
                    let newEffectClass = $(this).val();
                    let effectClass = 'background-effect-size-contain';
                    $.each(targets, function (i, target) {
                        $(target).css({
                            'background-position-y': "0px"
                        });
                        let sfEffect = $(target).attr('class').match(/background-effect-[a-z]{1,10}-[a-z]{1,10}/g);
                        if (sfEffect !== null) {
                            effectClass = sfEffect[0];
                        }
                        $(target).removeClass(effectClass).addClass(newEffectClass);

                        let sfPosition = $(target).attr('class').match(/bgp-c-[a-z]{1,10}-[a-z]{1,10}/g);
                        if (sfPosition !== null) {
                            $(target).removeClass(sfPosition[0]);
                        }
                        let sfParallex = $(target).attr('class').match(/bgp-p-[a-z]{1,10}/g);
                        if (sfParallex !== null) {
                            $(target).removeClass(sfParallex[0]);
                        }
                    });
                    switch (newEffectClass) {
                        case 'background-effect-size-contain':
                            $self.find(`#divBackgroundPositionTab${idSuffix}`).hide();
                            $self.find(`#divBackgroundPositionCover${idSuffix}`).hide();
                            break;
                        case 'background-effect-image-parallax':
                            $self.find(`#divBackgroundPositionTab${idSuffix}`).show();
                            $self.find(`#divBackgroundPositionCover${idSuffix}`).hide();
                            $(targets).addClass($self.find(`#bgImagePosition${idSuffix}`).val());
                            break;
                        case 'background-effect-size-cover':
                            $self.find(`#divBackgroundPositionTab${idSuffix}`).hide();
                            $self.find(`#divBackgroundPositionCover${idSuffix}`).show();
                            $(targets).addClass($self.find(`#bgImageCoverPosition${idSuffix}`).val());
                            break;
                        default:

                    }
                });
                $self.find(`#bgImagePosition${idSuffix}`).off().on('change', function () {
                    self.updateTargets();
                    let newPositionClass = $(this).val();
                    $.each(targets, function (i, target) {
                        let sfPosition = $(target).attr('class').match(/bgp-p-[a-z]{1,10}/g);
                        if (sfPosition !== null) {
                            $(target).removeClass(sfPosition[0]);
                        }
                        $(target).addClass(newPositionClass);
                    });
                });
                $self.find(`#bgImageCoverPosition${idSuffix}`).off().on('change', function () {
                    self.updateTargets();
                    let newPositionClass = $(this).val();
                    $.each(targets, function (i, target) {
                        let sfPosition = $(target).attr('class').match(/bgp-c-[a-z]{1,10}-[a-z]{1,10}/g);
                        if (sfPosition !== null) {
                            $(target).removeClass(sfPosition[0]);
                        }
                        $(target).addClass(newPositionClass);
                    });
                });
                //shaded layer
                $self.find(`#shadedLayerActive${idSuffix}`).off().on('click', function () {
                    if ($(this).is(':checked')) {
                        self.shadeAdd();
                    } else {
                        self.shadeRemove();
                    }
                });
                //final
                $self.find(`#chooseColorColBG${idSuffix}`).css({
                    'background-color': bgColor,
                    'color': txtColor
                });
                let backgroundColor = $(targets[0]).attr('data-backgroundColor');
                let backgroundImage = $(targets[0]).attr('data-backgroundImage');
                let selected = 'none';
                if (typeof (backgroundColor) !== 'undefined' && backgroundColor.length > 0) {
                    selected = 'color';
                } else if (typeof (backgroundImage) !== 'undefined' && backgroundImage.length > 0) {
                    selected = 'image';
                    self.setupBGImageEffect();
                }
                $self.find(`#selBackround${idSuffix}`).val(selected);
                $self.find(`#selBackround${idSuffix}`).trigger('change');

                let sfPosition = $(targets[0]).attr('class').match(/bgp-c-[a-z]{1,10}-[a-z]{1,10}/g);
                if (sfPosition !== null) {
                    $self.find(`#divBackgroundPositionCover${idSuffix}`).show();
                    $self.find(`#bgImageCoverPosition${idSuffix}`).val(sfPosition);
                }

                let sfParallex = $(targets[0]).attr('class').match(/bgp-p-[a-z]{1,10}/g);
                if (sfParallex !== null) {
                    $self.find(`#divBackgroundPositionTab${idSuffix}`).show();
                    $self.find(`#bgImagePosition${idSuffix}`).val(sfParallex);
                }

            },
            shadeAdd: function () {
                if (!this.updateTargets()) {
                    return;
                }
                let shadedDiv = '<div class="editor-row-shaded-layer" style="height:100%;"></div>';
                $self.find(`#divPickShaded${idSuffix}`).fadeIn(400);
                let c = $self.find(`#chooseColorShadedCol${idSuffix}`).css('background-color');
                $.each(targets, function (i, target) {
                    $(target).children().not(".SetHdlr, .addPro").wrapAll(shadedDiv);
                    //let appendElem = $(target).contents();
                    //$(target).append(shadedDiv);
                    //$(target).find(' > .editor-row-shaded-layer').append(appendElem).css({ 'background-color': c });
                    $(target).find(' > .editor-row-shaded-layer').css({
                        'background-color': c
                    });
                    let parentClasses = $(target).attr('class');
                    let paddingClass = parentClasses.match(/([a-z]?)P[a-z]{0,1}-[0-9]{1,3}/g);
                    if (paddingClass !== null) {
                        $(paddingClass).each(function (i, v) {
                            $(target).find(' > .editor-row-shaded-layer').addClass(v);
                            $(target).removeClass(v);
                        });
                    }
                });
            },
            shadeRemove: function () {
                if (!this.updateTargets()) {
                    return;
                }
                $.each(targets, function (i, target) {
                    let parentClasses = $(target).find('.editor-row-shaded-layer').attr('class');
                    if (typeof parentClasses !== 'undefined') {
                        let paddingClass = parentClasses.match(/([a-z]?)P[a-z]{0,1}-[0-9]{1,3}/g);
                        if (paddingClass !== null) {
                            $(paddingClass).each(function (i, v) {
                                $(target).find('.editor-row-shaded-layer').removeClass(v);
                                $(target).addClass(v);
                            });
                        }
                    }
                });
                this.removeShadedLayer();
            },
            removeBGImage: function () {
                if (!this.updateTargets()) {
                    return;
                }
                this.removeShadedLayer();
                $.each(targets, function (i, target) {
                    $(target).removeClass('editor-row-bg-image-parallax');
                    $(target).css({
                        'background-image': ''
                    });
                });
            },
            removeBGColor: function (bgColor, txtColor) {
                if (!this.updateTargets()) {
                    return;
                }
                $.each(targets, function (i, target) {
                    $(target).css({
                        'background-color': '',
                        'color': ''
                    });
                });
                $self.find(`#chooseColorColBG${idSuffix}`).css({
                    'background-color': bgColor,
                    'color': txtColor
                });
            },
            removeShadedLayer: function () {
                if (!this.updateTargets()) {
                    return;
                }
                $.each(targets, function (i, target) {
                    $(target).find(' > .editor-row-shaded-layer').children().unwrap();
                    //let appendElem = $(target).find(' > .editor-row-shaded-layer').contents();
                    //$(target).append(appendElem);
                    //$(target).find(' > .editor-row-shaded-layer').remove();
                });
                $self.find(`#divPickShaded${idSuffix}`).fadeOut(100);
                $self.find(`#shadedLayerActive${idSuffix}`).prop('checked', false);
            },
            fixDomId: function (dom) {
                let ids = ['selBackround', 'divBackColorChoose', 'chooseColorColBG', 'divBackImageChoose', 'RowBGImage', 'bgImageEffect', 'shadedLayerActive', 'divPickShaded', 'chooseColorShadedCol', 'RowBGImageSrc',
                    'divBackgroundPositionTab', 'bgImagePosition', 'divBackgroundPositionCover', 'bgImageCoverPosition'
                ];
                let $dom = $(dom);
                for (let i = 0, j = ids.length; i < j; i++) {
                    $dom.find('#' + ids[i]).removeAttr('id').attr('id', ids[i] + idSuffix);
                }
                $dom.find("label[for='shadedLayerActive']").attr('for', 'shadedLayerActive' + idSuffix);
                return $dom[0];
            },
            init: function () {
                this.appendBGChangerDOM();
                this.setupData();
                this.addEventListeners();
                this.setupColorPicker();
            }
        };
        AdvanceBackground.init();
    };
}(jQuery));
(function ($) {
    "use strict";
    $.fn.AdvanceSpacing = function (o) {
        if (typeof o === 'undefined' || typeof o.targetParent === 'undefined') {
            console.error("AdvanceSpacing => missing option: targetParent");
            return;
        }
        if (!(o.targetParent instanceof jQuery)) {
            console.error("AdvanceSpacing => targetParent should be a jQuery object");
            return;
        }
        if (typeof o === 'undefined' || typeof o.targetElem === 'undefined') {
            console.error("AdvanceSpacing => missing option: targetElem");
            return;
        }
        let $self = this,
            targetParent = o.targetParent,
            targetElem = o.targetElem,
            targets = $(targetParent).find(targetElem),
            saveClasses = false,
            idSuffix = '_' + Math.floor((Math.random() * 1000) + 100),
            options = {
                "margin": {
                    "max": 80,
                    "min": -80,
                    "times": 5,
                    "position": ["all", "top", "left", "bottom", "right"]
                },
                "padding": {
                    "max": 80,
                    "min": 0,
                    "times": 5,
                    "position": ["all", "top", "left", "bottom", "right"]
                }
            };
        if (typeof o.saveClasses !== 'undefined' && o.saveClasses === true) {
            saveClasses = true;
        }
        if (typeof o.options !== 'undefined' && o.options) {
            options = o.options;
        }
        if (options.margin && Object.keys(options.margin).indexOf("label") == -1) {
            options.margin.label = 'Outer Spacing/Margin';
        }
        if (options.padding && Object.keys(options.padding).indexOf("label") == -1) {
            options.padding.label = 'Inner Spacing/Padding';
        }
        let marginSliderListLocal = [];
        let paddingSliderListLocal = [];
        let _ResetBulkMarginSliderValue = function () {
            $self.find(`#${marginSliderListLocal[0][0]}${idSuffix}`).slider('value', 0);
            $self.find(`#${marginSliderListLocal[0][1]}${idSuffix}`).text(0);
        };
        let _ResetBulkPaddingSliderValue = function () {
            $self.find(`#${paddingSliderListLocal[0][0]}${idSuffix}`).slider('value', 0);
            $self.find(`#${paddingSliderListLocal[0][1]}${idSuffix}`).text(0);
        };
        if ($(targets).hasClass('editor-row-shaded-layer')) {
            targets = $(targets).parent();
        }
        let dAlpha = DeviceAlpha();
        let AdvanceSpacing = {
            saveClasses: function () {
                if (!saveClasses) {
                    return;
                }
                if (targets.length > 0) {
                    let $cls = $(targets[0]).attr('class');
                    let $padCls = $cls.match(/([a-z]?)P[a-z]-[0-9]{1,3}/g);
                    if ($padCls && $padCls.length > 0) {
                        $(targetParent).attr('data-padclasses', $padCls.join(' '));
                    }
                } else {
                    $(targetParent).attr('data-padclasses', '');
                }
            },
            updateTargets: function () {
                let tar = UpdateTargets(targetParent, targetElem, 'AdvanceSpacing');
                targets = tar.target;
                return tar.exists;
            },
            appendSpacingDom: function () {
                let dom = this.GeneralSpacingDOM(options);
                dom = this.fixDomId(dom);
                $self.html(dom);
            },
            fixDomId: function (dom) {
                let ids = ['OuterSpacingWrap', 'InnerSpacingWrap',
                    'bulkMarginSlider', 'marginTopSlider', 'marginRightSlider', 'marginBottomSlider', 'marginLeftSlider',
                    'bulkMarginHandler', 'marginTopHandler', 'marginRightHandler', 'marginBottomHandler', 'marginLeftHandler',
                    'bulkPaddingSlider', 'paddingTopSlider', 'paddingRightSlider', 'paddingBottomSlider', 'paddingLeftSlider',
                    'bulkPaddingHandler', 'paddingTopHandler', 'paddingRightHandler', 'paddingBottomHandler', 'paddingLeftHandler'
                ];
                let $dom = $(dom);
                for (let i = 0, j = ids.length; i < j; i++) {
                    $dom.find('#' + ids[i]).removeAttr('id').attr('id', ids[i] + idSuffix);
                }
                return $dom;
            },
            GeneralSpacingDOM: function ($options) {
                let outerDOM = '';
                let innerDOM = '';
                if (typeof ($options) !== 'undefined') {
                    let spaceOption = Object.keys($options);
                    let spaceOptionLength = spaceOption.length;
                    for (let j = 0; j < spaceOptionLength; j++) {
                        let $sp = spaceOption[j];
                        switch ($sp) {
                            case 'margin':
                                outerDOM += DOMCreate('label', $options.margin.label, '', 'OuterSpacingWrap', ['data-min="' + $options['margin']['min'] + '"', 'data-max="' + $options['margin']['max'] + '"', 'data-times="' + $options['margin']['times'] + '"']);
                                outerDOM = `<div class="field-row stElWrap col100">${outerDOM}</div>`;
                                if (typeof ($options['margin']['position'] !== 'undefined')) {
                                    let positionList = $options['margin']['position'];
                                    let positionListLen = positionList.length;
                                    for (let i = 0; i < positionListLen; i++) {
                                        switch (positionList[i].toLowerCase()) {
                                            case 'all':
                                                outerDOM += CreateSliderDOM(marginSliderListLocal[0][0], marginSliderListLocal[0][1], 'Bulk');
                                                marginSliderListLocal[0][2] = true;
                                                break;
                                            case 'top':
                                                outerDOM += CreateSliderDOM(marginSliderListLocal[1][0], marginSliderListLocal[1][1], 'Top');
                                                marginSliderListLocal[1][2] = true;
                                                break;
                                            case 'right':
                                                outerDOM += CreateSliderDOM(marginSliderListLocal[2][0], marginSliderListLocal[2][1], 'Right');
                                                marginSliderListLocal[2][2] = true;
                                                break;
                                            case 'bottom':
                                                outerDOM += CreateSliderDOM(marginSliderListLocal[3][0], marginSliderListLocal[3][1], 'Bottom');
                                                marginSliderListLocal[3][2] = true;
                                                break;
                                            case 'left':
                                                outerDOM += CreateSliderDOM(marginSliderListLocal[4][0], marginSliderListLocal[4][1], 'Left');
                                                marginSliderListLocal[4][2] = true;
                                                break;
                                        }
                                    }
                                }
                                outerDOM = FieldRowDOMCreate(outerDOM);
                                break;
                            case 'padding':
                                innerDOM += DOMCreate('label', $options.padding.label, '', 'InnerSpacingWrap', ['data-min="' + $options['padding']['min'] + '"', 'data-max="' + $options['padding']['max'] + '"', 'data-times="' + $options['padding']['times'] + '"']);
                                innerDOM = `<div class="field-row stElWrap col100">${innerDOM}</div>`;
                                if (typeof ($options['padding']['position'] !== 'undefined')) {
                                    let positionList = $options['padding']['position'];
                                    let positionListLen = positionList.length;
                                    for (let i = 0; i < positionListLen; i++) {
                                        switch (positionList[i].toLowerCase()) {
                                            case 'all':
                                                innerDOM += CreateSliderDOM(paddingSliderListLocal[0][0], paddingSliderListLocal[0][1], 'Bulk');
                                                paddingSliderListLocal[0][2] = true;
                                                break;
                                            case 'top':
                                                innerDOM += CreateSliderDOM(paddingSliderListLocal[1][0], paddingSliderListLocal[1][1], 'Top');
                                                paddingSliderListLocal[1][2] = true;
                                                break;
                                            case 'right':
                                                innerDOM += CreateSliderDOM(paddingSliderListLocal[2][0], paddingSliderListLocal[2][1], 'Right');
                                                paddingSliderListLocal[2][2] = true;
                                                break;
                                            case 'bottom':
                                                innerDOM += CreateSliderDOM(paddingSliderListLocal[3][0], paddingSliderListLocal[3][1], 'Bottom');
                                                paddingSliderListLocal[3][2] = true;
                                                break;
                                            case 'left':
                                                innerDOM += CreateSliderDOM(paddingSliderListLocal[4][0], paddingSliderListLocal[4][1], 'Left');
                                                paddingSliderListLocal[4][2] = true;
                                                break;
                                        }
                                    }
                                }
                                innerDOM = FieldRowDOMCreate(innerDOM);
                                break;
                        }
                    }
                }
                return outerDOM + innerDOM;
            },
            BulkMargin: function (space, $parent, ref) {
                if (ref && typeof ref['updateTargets'] === 'function') {
                    ref['updateTargets']();
                    $parent = targets;
                }
                if (space !== 'undefined' && typeof (space) !== 'undefined') {
                    let times = 1;
                    if (typeof ($self.find(`#OuterSpacingWrap${idSuffix}`).attr('data-times')) !== 'undefined')
                        times = parseInt($self.find(`#OuterSpacingWrap${idSuffix}`).attr('data-times'));
                    if (times == 0)
                        times = 1;
                    let parentClasses = GetTargetsClasses($parent);
                    if (typeof (parentClasses) !== "undefined") {
                        let regex = new RegExp('\\b' + dAlpha + 'M[a-z](N){0,1}-[0-9]{1,3}\\b', 'g');
                        let marginClass = parentClasses.match(regex);
                        if (marginClass !== null) {
                            $.each(marginClass, function (i, v) {
                                $parent.removeClass(v.trim());
                            });
                        }
                    }
                    for (let i = 1; i < 5; i++) {
                        if (marginSliderListLocal[i][2]) {
                            $self.find(`#${marginSliderListLocal[i][0]}${idSuffix}`).slider('value', space);
                            $self.find(`#${marginSliderListLocal[i][1]}${idSuffix}`).text(space);
                        }
                    }
                    if (dAlpha === "") {
                        let devices = DeviceList(parentClasses, '\\btM[a-z](N){0,1}-[0-9]{1,3}\\b', '\\bmM[a-z](N){0,1}-[0-9]{1,3}\\b');
                        let deviceLength = devices.length;
                        for (var i = 0; i < deviceLength; i++) {
                            ApplySpace(space, devices[i]);
                        }
                    } else {
                        ApplySpace(space, dAlpha);
                    }

                    function ApplySpace(space_, dAlpha_) {
                        if (space_ >= 0) {
                            space_ = space_ * times;
                            if (marginSliderListLocal[1][2])
                                $parent.addClass(dAlpha_ + 'Mt-' + space_);
                            if (marginSliderListLocal[2][2])
                                $parent.addClass(dAlpha_ + 'Mr-' + space_);
                            if (marginSliderListLocal[3][2])
                                $parent.addClass(dAlpha_ + 'Mb-' + space_);
                            if (marginSliderListLocal[4][2])
                                $parent.addClass(dAlpha_ + 'Ml-' + space_);
                            if (!marginSliderListLocal[1][2] && !marginSliderListLocal[2][2] && !marginSliderListLocal[3][2] && !marginSliderListLocal[4][2]) {
                                $parent.addClass(dAlpha_ + 'Mt-' + space_);
                                $parent.addClass(dAlpha_ + 'Mr-' + space_);
                                $parent.addClass(dAlpha_ + 'Mb-' + space_);
                                $parent.addClass(dAlpha_ + 'Ml-' + space_);
                            }
                        } else {
                            space_ = Math.abs(space_);
                            space_ = space_ * times;
                            if (marginSliderListLocal[1][2])
                                $parent.addClass(dAlpha_ + 'MtN-' + space_);
                            if (marginSliderListLocal[2][2])
                                $parent.addClass(dAlpha_ + 'MrN-' + space_);
                            if (marginSliderListLocal[3][2])
                                $parent.addClass(dAlpha_ + 'MbN-' + space_);
                            if (marginSliderListLocal[4][2])
                                $parent.addClass(dAlpha_ + 'MlN-' + space_);
                            if (!marginSliderListLocal[1][2] && !marginSliderListLocal[2][2] && !marginSliderListLocal[3][2] && !marginSliderListLocal[4][2]) {
                                $parent.addClass(dAlpha_ + 'MtN-' + space_);
                                $parent.addClass(dAlpha_ + 'MrN-' + space_);
                                $parent.addClass(dAlpha_ + 'MbN-' + space_);
                                $parent.addClass(dAlpha_ + 'MlN-' + space_);
                            }
                        }
                    }
                }
            },
            MarginTop: function (space, $parent, ref) {
                if (ref && typeof ref['updateTargets'] === 'function') {
                    ref['updateTargets']();
                    $parent = targets;
                }
                if (space !== 'undefined' && typeof (space) !== 'undefined') {
                    let times = 1;
                    if (typeof ($self.find(`#OuterSpacingWrap${idSuffix}`).attr('data-times')) !== 'undefined')
                        times = parseInt($self.find(`#OuterSpacingWrap${idSuffix}`).attr('data-times'));
                    if (times == 0)
                        times = 1;
                    let parentClasses = GetTargetsClasses($parent);
                    let dAlpha = DeviceAlpha();
                    let regex = new RegExp('\\b' + dAlpha + 'Mt(N){0,1}-[0-9]{1,3}\\b', 'g');
                    let marginClass = parentClasses.match(regex);
                    if (marginClass !== null) {
                        $.each(marginClass, function (i, v) {
                            $parent.removeClass(v.trim());
                        });
                    }
                    if (dAlpha === "") {
                        let devices = DeviceList(parentClasses, '\\btMt(N){0,1}-[0-9]{1,3}\\b', '\\bmMt(N){0,1}-[0-9]{1,3}\\b');
                        let deviceLength = devices.length;
                        for (var i = 0; i < deviceLength; i++) {
                            ApplySpace(space, devices[i]);
                        }
                    } else {
                        ApplySpace(space, dAlpha);
                    }

                    function ApplySpace(space_, dAlpha_) {
                        if (space_ >= 0) {
                            $parent.addClass(dAlpha_ + 'Mt-' + space_ * times);
                        } else {
                            space_ = Math.abs(space_);
                            $parent.addClass(dAlpha_ + 'MtN-' + space_ * times);
                        }
                    }
                    _ResetBulkMarginSliderValue();
                }
            },
            MarginRight: function (space, $parent, ref) {
                if (ref && typeof ref['updateTargets'] === 'function') {
                    ref['updateTargets']();
                    $parent = targets;
                }
                if (space !== 'undefined' && typeof (space) !== 'undefined') {
                    let times = 1;
                    if (typeof ($self.find(`#OuterSpacingWrap${idSuffix}`).attr('data-times')) !== 'undefined')
                        times = parseInt($self.find(`#OuterSpacingWrap${idSuffix}`).attr('data-times'));
                    if (times == 0)
                        times = 1;
                    let parentClasses = GetTargetsClasses($parent);
                    let dAlpha = DeviceAlpha();
                    let regex = new RegExp('\\b' + dAlpha + 'Mr(N){0,1}-[0-9]{1,3}\\b', 'g');
                    let marginClass = parentClasses.match(regex);
                    if (marginClass !== null) {
                        $.each(marginClass, function (i, v) {
                            $parent.removeClass(v.trim());
                        });
                    }
                    if (dAlpha === "") {
                        let devices = DeviceList(parentClasses, '\\btMr(N){0,1}-[0-9]{1,3}\\b', '\\bmMr(N){0,1}-[0-9]{1,3}\\b');
                        let deviceLength = devices.length;
                        for (var i = 0; i < deviceLength; i++) {
                            ApplySpace(space, devices[i]);
                        }
                    } else {
                        ApplySpace(space, dAlpha);
                    }

                    function ApplySpace(space_, dAlpha_) {
                        if (space_ >= 0) {
                            $parent.addClass(dAlpha_ + 'Mr-' + space_ * times);
                        } else {
                            space_ = Math.abs(space_);
                            $parent.addClass(dAlpha_ + 'MrN-' + space_ * times);
                        }
                    }
                    _ResetBulkMarginSliderValue();
                }
            },
            MarginBottom: function (space, $parent, ref) {
                if (ref && typeof ref['updateTargets'] === 'function') {
                    ref['updateTargets']();
                    $parent = targets;
                }
                if (space !== 'undefined' && typeof (space) !== 'undefined') {
                    let times = 1;
                    if (typeof ($self.find(`#OuterSpacingWrap${idSuffix}`).attr('data-times')) !== 'undefined')
                        times = parseInt($self.find(`#OuterSpacingWrap${idSuffix}`).attr('data-times'));
                    if (times == 0)
                        times = 1;
                    let parentClasses = GetTargetsClasses($parent);
                    let dAlpha = DeviceAlpha();
                    let regex = new RegExp('\\b' + dAlpha + 'Mb(N){0,1}-[0-9]{1,3}\\b', 'g');
                    let marginClass = parentClasses.match(regex);
                    if (marginClass !== null) {
                        $.each(marginClass, function (i, v) {
                            $parent.removeClass(v.trim());
                        });
                    }
                    if (dAlpha === "") {
                        let devices = DeviceList(parentClasses, '\\btMb(N){0,1}-[0-9]{1,3}\\b', '\\bmMb(N){0,1}-[0-9]{1,3}\\b');
                        let deviceLength = devices.length;
                        for (var i = 0; i < deviceLength; i++) {
                            ApplySpace(space, devices[i]);
                        }
                    } else {
                        ApplySpace(space, dAlpha);
                    }

                    function ApplySpace(space_, dAlpha_) {
                        if (space_ >= 0) {
                            $parent.addClass(dAlpha_ + 'Mb-' + space_ * times);
                        } else {
                            space_ = Math.abs(space_);
                            $parent.addClass(dAlpha_ + 'MbN-' + space_ * times);
                        }
                    }
                    _ResetBulkMarginSliderValue();
                }
            },
            MarginLeft: function (space, $parent, ref) {
                if (ref && typeof ref['updateTargets'] === 'function') {
                    ref['updateTargets']();
                    $parent = targets;
                }
                if (space !== 'undefined' && typeof (space) !== 'undefined') {
                    let times = 1;
                    if (typeof ($self.find(`#OuterSpacingWrap${idSuffix}`).attr('data-times')) !== 'undefined')
                        times = parseInt($self.find(`#OuterSpacingWrap${idSuffix}`).attr('data-times'));
                    if (times == 0)
                        times = 1;
                    let parentClasses = GetTargetsClasses($parent);
                    let dAlpha = DeviceAlpha();
                    let regex = new RegExp('\\b' + dAlpha + 'Ml(N){0,1}-[0-9]{1,3}\\b', 'g');
                    let marginClass = parentClasses.match(regex);
                    if (marginClass !== null) {
                        $.each(marginClass, function (i, v) {
                            $parent.removeClass(v.trim());
                        });
                    }

                    if (dAlpha === "") {
                        let devices = DeviceList(parentClasses, '\\btMl(N){0,1}-[0-9]{1,3}\\b', '\\bmMl(N){0,1}-[0-9]{1,3}\\b');
                        let deviceLength = devices.length;
                        for (var i = 0; i < deviceLength; i++) {
                            ApplySpace(space, devices[i]);
                        }
                    } else {
                        ApplySpace(space, dAlpha);
                    }

                    function ApplySpace(space_, dAlpha_) {
                        if (space_ >= 0) {
                            $parent.addClass(dAlpha_ + 'Ml-' + space_ * times);
                        } else {
                            space_ = Math.abs(space_);
                            $parent.addClass(dAlpha_ + 'MlN-' + space_ * times);
                        }
                    }
                    _ResetBulkMarginSliderValue();
                }
            },
            LoadMarginSliderInitValue: function () {
                let times = 1;
                if (typeof ($self.find(`#OuterSpacingWrap${idSuffix}`).attr('data-times')) !== 'undefined')
                    times = parseInt($self.find(`#OuterSpacingWrap${idSuffix}`).attr('data-times'));
                if (times == 0)
                    times = 1;
                let parentClasses = $(targets[0]).attr('class');
                let $shadedLayer = targets.find('> .editor-row-shaded-layer');
                if ($shadedLayer.length > 0) {
                    parentClasses += " " + $shadedLayer.attr('class');
                } else {
                    //parentClasses = $(targets[0]).attr('class');
                }
                let dAlpha = DeviceAlpha();
                let regex = new RegExp('\\b' + dAlpha + 'Mt-[0-9]{1,3}\\b', 'g');
                let marginClass = parentClasses.match(regex);
                let margin = 0;
                if (marginClass !== null) {
                    margin = parseInt(marginClass[0].trim().replace(dAlpha + 'Mt-', ''));
                } else {
                    regex = new RegExp('\\b' + dAlpha + 'MtN-[0-9]{1,3}\\b', 'g');
                    marginClass = parentClasses.match(regex);
                    if (marginClass !== null) {
                        margin = -parseInt(marginClass[0].trim().replace(dAlpha + 'MtN-', ''));
                    }
                }
                margin = margin / times;
                marginSliderListLocal[1][4] = margin;
                regex = new RegExp('\\b' + dAlpha + 'Mr-[0-9]{1,3}\\b', 'g');
                marginClass = parentClasses.match(regex);
                margin = 0;
                if (marginClass !== null) {
                    margin = parseInt(marginClass[0].trim().replace(dAlpha + 'Mr-', ''));
                } else {
                    regex = new RegExp('\\b' + dAlpha + 'MrN-[0-9]{1,3}\\b', 'g');
                    marginClass = parentClasses.match(regex);
                    if (marginClass !== null) {
                        margin = -parseInt(marginClass[0].trim().replace(dAlpha + 'MrN-', ''));
                    }
                }
                margin = margin / times;
                marginSliderListLocal[2][4] = margin;
                regex = new RegExp('\\b' + dAlpha + 'Mb-[0-9]{1,3}\\b', 'g');
                marginClass = parentClasses.match(regex);
                margin = 0;
                if (marginClass !== null) {
                    margin = parseInt(marginClass[0].trim().replace(dAlpha + 'Mb-', ''));
                } else {
                    regex = new RegExp('\\b' + dAlpha + 'MbN-[0-9]{1,3}\\b', 'g');
                    marginClass = parentClasses.match(regex);
                    if (marginClass !== null) {
                        margin = -parseInt(marginClass[0].trim().replace(dAlpha + 'MbN-', ''));
                    }
                }
                margin = margin / times;
                marginSliderListLocal[3][4] = margin;
                regex = new RegExp('\\b' + dAlpha + 'Ml-[0-9]{1,3}\\b', 'g');
                marginClass = parentClasses.match(regex);
                margin = 0;
                if (marginClass !== null) {
                    margin = parseInt(marginClass[0].trim().replace(dAlpha + 'Ml-', ''));
                } else {
                    regex = new RegExp('\\b' + dAlpha + 'MlN-[0-9]{1,3}\\b', 'g');
                    marginClass = parentClasses.match(regex);
                    if (marginClass !== null) {
                        margin = -parseInt(marginClass[0].trim().replace(dAlpha + 'MlN-', ''));
                    }
                }
                margin = margin / times;
                marginSliderListLocal[4][4] = margin;
                let bulkMargin = false;
                let bulkMarginEnable = true;
                for (let i = 1; i < 5; i++) {
                    if (marginSliderListLocal[i][2]) {
                        if (bulkMargin === false)
                            bulkMargin = marginSliderListLocal[i][4];
                        else if (bulkMargin != marginSliderListLocal[i][4]) {
                            bulkMarginEnable = false;
                            break;
                        }
                    }
                }
                if (bulkMarginEnable) {
                    marginSliderListLocal[0][4] = bulkMargin;
                }
            },
            InitMarginEvents: function () {
                let self = this;
                this.LoadMarginSliderInitValue();
                let $outerSpaceWrap = $self.find(`#OuterSpacingWrap${idSuffix}`);
                if (typeof ($outerSpaceWrap.attr('data-max')) !== 'undefined' && typeof ($outerSpaceWrap.attr('data-min')) !== 'undefined') {
                    let maxValue = parseInt($outerSpaceWrap.attr('data-max'));
                    let minValue = parseInt($outerSpaceWrap.attr('data-min'));
                    for (let i = 0; i < 5; i++) {
                        if (marginSliderListLocal[i][2]) {
                            AdvanceSageSlider($self.find(`#${marginSliderListLocal[i][0]}${idSuffix}`), $self.find(`#${marginSliderListLocal[i][1]}${idSuffix}`), minValue, maxValue, marginSliderListLocal[i][4], self[marginSliderListLocal[i][3]], targets, 'px', self);
                        }
                    }
                }
            },
            BulkPadding: function (space, $parent, ref) {

                if (ref && typeof ref['updateTargets'] === 'function') {
                    ref['updateTargets']();
                    $parent = targets;
                }
                if (space !== 'undefined' && typeof (space) !== 'undefined') {
                    let times = 5;
                    if (typeof ($self.find(`#InnerSpacingWrap${idSuffix}`).attr('data-times')) !== 'undefined')
                        times = parseInt($self.find(`#InnerSpacingWrap${idSuffix}`).attr('data-times'));
                    if (times == 0)
                        times = 5;
                    let $shadedLayer = $parent.find('> .editor-row-shaded-layer');

                    if ($shadedLayer.length > 0) {
                        $parent = $shadedLayer;
                    }
                    let parentClasses = GetTargetsClasses($parent);
                    let dAlpha = DeviceAlpha();
                    let regex = new RegExp('\\b' + dAlpha + 'P[a-z]{0,1}-[0-9]{1,3}\\b', 'g');
                    let paddingClass = parentClasses.match(regex);
                    if (paddingClass !== null) {
                        $.each(paddingClass, function (i, v) {
                            $parent.removeClass(v.trim());
                        });
                    }

                    for (let i = 1; i < 5; i++) {
                        if (paddingSliderListLocal[i][2]) {
                            $self.find(`#${paddingSliderListLocal[i][0]}${idSuffix}`).slider('value', space);
                            $self.find(`#${paddingSliderListLocal[i][1]}${idSuffix}`).text(space);
                        }
                    }
                    if (dAlpha === "") {
                        let devices = [];
                        devices.push("");
                        let regex = new RegExp('\\btP[a-z]{0,1}-[0-9]{1,3}\\b', 'g');
                        let paddingClass = parentClasses.match(regex);
                        if (paddingClass === null) {
                            devices.push("t");
                        }
                        regex = new RegExp('\\bmP[a-z]{0,1}-[0-9]{1,3}\\b', 'g');
                        paddingClass = parentClasses.match(regex);
                        if (paddingClass === null) {
                            devices.push("m");
                        }
                        let deviceLength = devices.length;
                        for (var i = 0; i < deviceLength; i++) {
                            AddClass(devices[i], space);
                        }
                    } else {
                        AddClass(dAlpha, space);
                    }

                    function AddClass(device, space_) {
                        if (space_ >= 0) {
                            space_ = space_ * times;
                            if (paddingSliderListLocal[1][2])
                                $parent.addClass(device + 'Pt-' + space_);
                            if (paddingSliderListLocal[2][2])
                                $parent.addClass(device + 'Pr-' + space_);
                            if (paddingSliderListLocal[3][2])
                                $parent.addClass(device + 'Pb-' + space_);
                            if (paddingSliderListLocal[4][2])
                                $parent.addClass(device + 'Pl-' + space_);
                            if (!paddingSliderListLocal[1][2] && !paddingSliderListLocal[2][2] && !paddingSliderListLocal[3][2] && !paddingSliderListLocal[4][2]) {
                                $parent.addClass(device + 'Pt-' + space_);
                                $parent.addClass(device + 'Pr-' + space_);
                                $parent.addClass(device + 'Pb-' + space_);
                                $parent.addClass(device + 'Pl-' + space_);
                            }
                        }
                    }
                    if (ref && typeof ref['saveClasses'] === 'function') {
                        ref['saveClasses']();
                    }
                }
            },
            PaddingTop: function (space, $parent, ref) {
                if (ref && typeof ref['updateTargets'] === 'function') {
                    ref['updateTargets']();
                    $parent = targets;
                }
                if (space !== 'undefined' && typeof (space) !== 'undefined') {
                    let times = 1;
                    if (typeof ($self.find(`#InnerSpacingWrap${idSuffix}`).attr('data-times')) !== 'undefined')
                        times = parseInt($self.find(`#InnerSpacingWrap${idSuffix}`).attr('data-times'));
                    if (times == 0)
                        times = 1;
                    let $shadedLayer = $parent.find('> .editor-row-shaded-layer');
                    if ($shadedLayer.length > 0) {
                        $parent = $shadedLayer;
                    }
                    let parentClasses = GetTargetsClasses($parent);
                    let dAlpha = DeviceAlpha();
                    let regex = new RegExp('\\b' + dAlpha + 'Pt-[0-9]{1,3}\\b', 'g');
                    let paddingClass = parentClasses.match(regex);
                    if (paddingClass !== null) {
                        $.each(paddingClass, function (i, v) {
                            $parent.removeClass(v.trim());
                        });
                    }
                    if (dAlpha === "") {
                        let devices = DeviceList(parentClasses, '\\btPt-[0-9]{1,3}\\b', '\\bmPt-[0-9]{1,3}\\b');
                        let deviceLength = devices.length;
                        for (var i = 0; i < deviceLength; i++) {
                            $parent.addClass(devices[i] + 'Pt-' + space * times);
                        }
                    } else {
                        $parent.addClass(dAlpha + 'Pt-' + space * times);
                    }
                    if (ref && typeof ref['saveClasses'] === 'function') {
                        ref['saveClasses']();
                    }

                    _ResetBulkPaddingSliderValue();
                }
            },
            PaddingRight: function (space, $parent, ref) {
                if (ref && typeof ref['updateTargets'] === 'function') {
                    ref['updateTargets']();
                    $parent = targets;
                }
                if (space !== 'undefined' && typeof (space) !== 'undefined') {
                    let times = 1;
                    if (typeof ($self.find(`#InnerSpacingWrap${idSuffix}`).attr('data-times')) !== 'undefined')
                        times = parseInt($self.find(`#InnerSpacingWrap${idSuffix}`).attr('data-times'));
                    if (times == 0)
                        times = 1;
                    let $shadedLayer = $parent.find('> .editor-row-shaded-layer');
                    if ($shadedLayer.length > 0) {
                        $parent = $shadedLayer;
                    }
                    let parentClasses = GetTargetsClasses($parent);
                    let dAlpha = DeviceAlpha();
                    let regex = new RegExp('\\b' + dAlpha + 'Pr-[0-9]{1,3}\\b', 'g');
                    let paddingClass = parentClasses.match(regex);
                    if (paddingClass !== null) {
                        $.each(paddingClass, function (i, v) {
                            $parent.removeClass(v.trim());
                        });
                    }
                    if (dAlpha === "") {
                        let devices = DeviceList(parentClasses, '\\btPr-[0-9]{1,3}\\b', '\\bmPr-[0-9]{1,3}\\b');
                        let deviceLength = devices.length;
                        for (var i = 0; i < deviceLength; i++) {
                            $parent.addClass(devices[i] + 'Pr-' + space * times);
                        }
                    } else {
                        $parent.addClass(dAlpha + 'Pr-' + space * times);
                    }
                    if (ref && typeof ref['saveClasses'] === 'function') {
                        ref['saveClasses']();
                    }
                    _ResetBulkPaddingSliderValue();
                }
            },
            PaddingBottom: function (space, $parent, ref) {
                if (ref && typeof ref['updateTargets'] === 'function') {
                    ref['updateTargets']();
                    $parent = targets;
                }
                if (space !== 'undefined' && typeof (space) !== 'undefined') {
                    let times = 1;
                    if (typeof ($self.find(`#InnerSpacingWrap${idSuffix}`).attr('data-times')) !== 'undefined')
                        times = parseInt($self.find(`#InnerSpacingWrap${idSuffix}`).attr('data-times'));
                    if (times == 0)
                        times = 1;
                    let $shadedLayer = $parent.find('> .editor-row-shaded-layer');
                    if ($shadedLayer.length > 0) {
                        $parent = $shadedLayer;
                    }
                    let parentClasses = GetTargetsClasses($parent);
                    let dAlpha = DeviceAlpha();
                    let regex = new RegExp('\\b' + dAlpha + 'Pb-[0-9]{1,3}\\b', 'g');
                    let paddingClass = parentClasses.match(regex);
                    if (paddingClass !== null) {
                        $.each(paddingClass, function (i, v) {
                            $parent.removeClass(v.trim());
                        });
                    }
                    if (dAlpha === "") {
                        let devices = DeviceList(parentClasses, '\\btPb-[0-9]{1,3}\\b', '\\bmPb-[0-9]{1,3}\\b');
                        let deviceLength = devices.length;
                        for (var i = 0; i < deviceLength; i++) {
                            $parent.addClass(devices[i] + 'Pb-' + space * times);
                        }
                    } else {
                        $parent.addClass(dAlpha + 'Pb-' + space * times);
                    }
                    if (ref && typeof ref['saveClasses'] === 'function') {
                        ref['saveClasses']();
                    }
                    _ResetBulkPaddingSliderValue();
                }
            },
            PaddingLeft: function (space, $parent, ref) {
                if (ref && typeof ref['updateTargets'] === 'function') {
                    ref['updateTargets']();
                    $parent = targets;
                }
                if (space !== 'undefined' && typeof (space) !== 'undefined') {
                    let times = 1;
                    if (typeof ($self.find(`#InnerSpacingWrap${idSuffix}`).attr('data-times')) !== 'undefined')
                        times = parseInt($self.find(`#InnerSpacingWrap${idSuffix}`).attr('data-times'));
                    if (times == 0)
                        times = 1;
                    let $shadedLayer = $parent.find('> .editor-row-shaded-layer');
                    if ($shadedLayer.length > 0) {
                        $parent = $shadedLayer;
                    }
                    let parentClasses = GetTargetsClasses($parent);
                    let dAlpha = DeviceAlpha();
                    let regex = new RegExp('\\b' + dAlpha + 'Pl-[0-9]{1,3}\\b', 'g');
                    let paddingClass = parentClasses.match(regex);
                    if (paddingClass !== null) {
                        $.each(paddingClass, function (i, v) {
                            $parent.removeClass(v.trim());
                        });
                    }
                    if (dAlpha === "") {
                        let devices = DeviceList(parentClasses, '\\btPl-[0-9]{1,3}\\b', '\\bmPl-[0-9]{1,3}\\b');
                        let deviceLength = devices.length;
                        for (var i = 0; i < deviceLength; i++) {
                            $parent.addClass(devices[i] + 'Pl-' + space * times);
                        }
                    } else {
                        $parent.addClass(dAlpha + 'Pl-' + space * times);
                    }
                    if (ref && typeof ref['saveClasses'] === 'function') {
                        ref['saveClasses']();
                    }
                    _ResetBulkPaddingSliderValue();
                }
            },
            LoadPaddingSliderInitValue: function () {
                let times = 1;
                if (typeof ($self.find(`#InnerSpacingWrap${idSuffix}`).attr('data-times')) !== 'undefined')
                    times = parseInt($self.find(`#InnerSpacingWrap${idSuffix}`).attr('data-times'));
                if (times == 0)
                    times = 1;
                let padding = 0;
                let parentClasses = $(targets[0]).attr('class');
                let $shadedLayer = targets.find('> .editor-row-shaded-layer');
                if ($shadedLayer.length > 0) {
                    parentClasses += " " + $shadedLayer.attr('class');
                } else {
                    //parentClasses = $(targets[0]).attr('class');
                }
                let dAlpha = DeviceAlpha();
                let regex = new RegExp('\\b' + dAlpha + 'Pt-[0-9]{1,3}\\b', 'g');
                let paddingClass = '';
                if (typeof (parentClasses) !== "undefined") {
                    paddingClass = parentClasses.match(regex);
                    if (paddingClass !== null) {
                        padding = parseInt(paddingClass[0].trim().replace(dAlpha + 'Pt-', ''));
                    }
                }

                padding = padding / times;
                paddingSliderListLocal[1][4] = padding;
                if (typeof (parentClasses) !== "undefined") {
                    regex = new RegExp('\\b' + dAlpha + 'Pr-[0-9]{1,3}\\b', 'g');
                    paddingClass = parentClasses.match(regex);
                    padding = 0;
                    if (paddingClass !== null) {
                        padding = parseInt(paddingClass[0].trim().replace(dAlpha + 'Pr-', ''));
                    }
                }
                padding = padding / times;
                paddingSliderListLocal[2][4] = padding;
                if (typeof (parentClasses) !== "undefined") {
                    regex = new RegExp('\\b' + dAlpha + 'Pb-[0-9]{1,3}\\b', 'g');
                    paddingClass = parentClasses.match(regex);
                    padding = 0;
                    if (paddingClass !== null) {
                        padding = parseInt(paddingClass[0].trim().replace(dAlpha + 'Pb-', ''));
                    }
                }
                if (typeof (parentClasses) !== "undefined") {
                    padding = padding / times;
                    paddingSliderListLocal[3][4] = padding;
                    regex = new RegExp('\\b' + dAlpha + 'Pl-[0-9]{1,3}\\b', 'g');
                    paddingClass = parentClasses.match(regex);
                    padding = 0;
                    if (paddingClass !== null) {
                        padding = parseInt(paddingClass[0].trim().replace(dAlpha + 'Pl-', ''));
                    }
                }
                padding = padding / times;
                paddingSliderListLocal[4][4] = padding;
                let bulkPadding = false;
                let bulkPaddingEnable = true;
                for (let i = 1; i < 5; i++) {
                    if (paddingSliderListLocal[i][2]) {
                        if (bulkPadding === false)
                            bulkPadding = paddingSliderListLocal[i][4];
                        if (bulkPadding != paddingSliderListLocal[i][4]) {
                            bulkPaddingEnable = false;
                            break;
                        }
                    }
                }
                if (bulkPaddingEnable) {
                    paddingSliderListLocal[0][4] = bulkPadding;
                }
            },
            InitPaddingEvents: function () {
                let self = this;
                this.LoadPaddingSliderInitValue();
                let $outerSpaceWrap = $self.find(`#InnerSpacingWrap${idSuffix}`);
                if (typeof $outerSpaceWrap.attr('data-times') === 'undefined') {

                }
                if (typeof ($outerSpaceWrap.attr('data-max')) !== 'undefined' && typeof ($outerSpaceWrap.attr('data-min')) !== 'undefined') {
                    let maxValue = parseInt($outerSpaceWrap.attr('data-max'));
                    let minValue = parseInt($outerSpaceWrap.attr('data-min'));
                    for (let i = 0; i < 5; i++) {
                        if (paddingSliderListLocal[i][2]) {
                            AdvanceSageSlider($self.find(`#${paddingSliderListLocal[i][0]}${idSuffix}`), $self.find(`#${paddingSliderListLocal[i][1]}${idSuffix}`), minValue, maxValue, paddingSliderListLocal[i][4], self[paddingSliderListLocal[i][3]], targets, 'px', self);
                        }
                    }
                }
            },
            init: function () {
                let opts = Object.keys(options);
                let marginSet = false;
                let paddingSet = false;
                if (opts.indexOf("margin") > -1) {
                    marginSliderListLocal = [
                        ['bulkMarginSlider', 'bulkMarginHandler', false, 'BulkMargin', 0],
                        ['marginTopSlider', 'marginTopHandler', false, 'MarginTop', 0],
                        ['marginRightSlider', 'marginRightHandler', false, 'MarginRight', 0],
                        ['marginBottomSlider', 'marginBottomHandler', false, 'MarginBottom', 0],
                        ['marginLeftSlider', 'marginLeftHandler', false, 'MarginLeft', 0]
                    ];
                    marginSet = true;
                }
                if (opts.indexOf("padding") > -1) {
                    paddingSliderListLocal = [
                        ['bulkPaddingSlider', 'bulkPaddingHandler', false, 'BulkPadding', 0],
                        ['paddingTopSlider', 'paddingTopHandler', false, 'PaddingTop', 0],
                        ['paddingRightSlider', 'paddingRightHandler', false, 'PaddingRight', 0],
                        ['paddingBottomSlider', 'paddingBottomHandler', false, 'PaddingBottom', 0],
                        ['paddingLeftSlider', 'paddingLeftHandler', false, 'PaddingLeft', 0]
                    ];
                    paddingSet = true;
                }
                this.updateTargets();
                if (targets.length == 0) {
                    console.error("AdvanceSpacing => target does not exist");
                    return false;
                }
                this.appendSpacingDom();
                if (marginSet) {
                    this.InitMarginEvents();
                }
                if (paddingSet) {
                    this.InitPaddingEvents();
                }
            }
        };
        AdvanceSpacing.init();
    };
}(jQuery));
(function ($) {
    "use strict";
    $.fn.AdvanceTextSetting = function (o) {
        if (typeof o === 'undefined' || typeof o.targetParent === 'undefined') {
            console.error("AdvanceTextSetting => missing option: targetParent");
            return;
        }
        if (!(o.targetParent instanceof jQuery)) {
            console.error("AdvanceTextSetting => targetParent should be a jQuery object");
            return;
        }
        if (typeof o === 'undefined' || typeof o.targetElem === 'undefined') {
            console.error("AdvanceTextSetting => missing option: targetElem");
            return;
        }
        let $self = this,
            maxFontSize = maxFontsize,
            targetParent = o.targetParent,
            targetElem = o.targetElem,
            targets = $(targetParent).find(targetElem),
            fontWidthTarget = false,
            $textChange = $(targets[0]),
            idSuffix = '_' + Math.floor((Math.random() * 1000) + 100),
            options = {
                size: true,
                lineheight: true,
                width: true,
                spacing: true,
                transform: true,
                family: true,
                weight: true,
                color: true,
                style: true,
                heading: false
            },
            callback = {

            };
        if (typeof o.fontWidthTarget !== 'undefined' && o.fontWidthTarget) {
            fontWidthTarget = o.fontWidthTarget;
        }
        if (typeof o.options !== 'undefined' && o.options) {
            options = $.extend(options, o.options);
        }
        if (typeof o.callback != "undefined") {
            callback = o.callback;
        }
        if (options.size && typeof (options.maxFontSize) === 'number')
            maxFontSize = options.maxFontSize > 1080 ? 1080 : options.maxFontSize;
        if (options.heading && targetParent.hasClass('heading'))
            options.heading = true;
        else options.heading = false;
        if (DeviceAlpha() !== '') {
            $.extend(options, {
                transform: false,
                family: false,
                weight: false,
                color: false,
                heading: false,
                style: false
            });
        }
        let AdvanceTextSetting = {
            updateTargets: function () {
                targets = $(targetParent).find(targetElem);
                if (targets.length == 0) {
                    console.error("AdvanceTextSetting => target does not exists");
                    return false;
                }
                return true;
            },
            appendSettingDom: function () {
                let dom = ExternalFileDoms.txtbasictab;
                dom = this.fixDomId(dom);
                dom = this.fixOptions(dom);
                $self.html(dom);
            },
            fixOptions: function (dom) {
                let $dom = $(dom);
                Object.keys(options).forEach((k) => {
                    if (!options[k]) {
                        $dom.find('#textSet_' + k).addClass('Dn');
                    }
                });
                return $dom;
            },
            fixDomId: function (dom) {
                let ids = ['fontsizeSlider', 'fontsizeHandle', 'fontWidthSlider', 'fontWidthHandle', 'lineheightslider', 'lineheighthandle', 'letterSpacingSlider', 'letterSpacingHandle',
                    'textTransform', 'textStyle', 'textHeading', 'fontfamily', 'fontWeight', 'chooseFontColor'
                ];
                let $dom = $(dom);
                for (let i = 0, j = ids.length; i < j; i++) {
                    $dom.find('#' + ids[i]).removeAttr('id').attr('id', ids[i] + idSuffix);
                }
                return $dom;
            },
            setupFontSize: function () {
                let self = this;
                let parentClasses = $(targets[0]).attr('class');
                let dAlpha = DeviceAlpha();
                let regex = new RegExp('\\b' + dAlpha + 'Fs-[0-9]{1,4}\\b', 'g');
                let fontSizeClass = parentClasses.match(regex);
                let fontSize = 0;
                if (fontSizeClass !== null) {
                    fontSize = fontSizeClass[0].replace(dAlpha + 'Fs-', '');
                }
                //fontsize = parseInt(fontsize.replace('px', ''));
                AdvanceSageSlider($self.find(`#fontsizeSlider${idSuffix}`), $self.find(`#fontsizeHandle${idSuffix}`), minFontSize, maxFontSize, fontSize, self['FontSizeChange'], targets, 'px', self);
            },
            FontSizeChange: function (space, $parent, ref) {
                if (ref && typeof ref['updateTargets'] === 'function') {
                    ref['updateTargets']();
                    $parent = targets;
                }
                let dAlpha = DeviceAlpha();
                let regex = new RegExp('\\b' + dAlpha + 'Fs-[0-9]{1,4}\\b', 'g');
                let fontClass = GetTargetsClasses($parent);;
                fontClass = fontClass.match(regex);
                if (fontClass !== null) {
                    $.each(fontClass, function (i, v) {
                        $parent.removeClass(v.trim());
                    });
                }
                let newClass = dAlpha + 'Fs-' + space;
                if (dAlpha === "") {
                    let devices = DeviceList($parent.attr('class'), '\\btFs-[0-9]{1,4}\\b', '\\bmFs-[0-9]{1,4}\\b');
                    let deviceLength = devices.length;
                    for (var i = 0; i < deviceLength; i++) {
                        $parent.addClass(devices[i] + 'Fs-' + space);
                    }
                } else {
                    $parent.addClass(newClass);
                }
                CallFunction(callback, {
                    size: [newClass, space]
                });
            },
            setupLineHeight: function () {
                let self = this;
                let $parent = $(targets[0]);
                AdvanceSageSlider($self.find(`#lineheightslider${idSuffix}`), $self.find(`#lineheighthandle${idSuffix}`), 5, 200,
                    GetValueByClassName($parent, 'Lh-[0-9]{1,4}', 'Lh-'), self['LineHeightChange'], targets, 'px', self);
            },
            LineHeightChange: function (space, $parent, ref) {
                if (ref && typeof ref['updateTargets'] === 'function') {
                    ref['updateTargets']();
                    $parent = targets;
                }
                ReplaceClassByPattern($parent, 'Lh-[0-9]{1,4}', 'Lh-' + space);
                let newClass = DeviceAlpha() + 'Lh-' + space;
                CallFunction(callback, {
                    lineheight: [newClass, space]
                });
            },
            setupLetterSpacing: function () {
                let self = this;
                let dAlpha = ViewDeviceAlpha();
                let letterSpace = 0;
                let removeClass = '';
                //let $textChange = $(targets[0]);
                if (typeof ($textChange.attr('class')) !== 'undefined') {
                    let regexNeg = new RegExp('\\b' + dAlpha + 'LtrSpc-n-[0-9]{1,2}\\b', 'g');
                    let letterSpacingNegClass = $textChange.attr('class').match(regexNeg);
                    if (letterSpacingNegClass !== null) {
                        removeClass = letterSpacingNegClass[0].trim();
                        letterSpace = -parseInt(removeClass.replace(dAlpha + 'LtrSpc-n-', ''));
                    } else {
                        let regexPos = new RegExp('\\b' + dAlpha + 'LtrSpc-[0-9]{1,2}\\b', 'g');
                        let letterSpacingPosClass = $textChange.attr('class').match(regexPos);
                        if (letterSpacingPosClass !== null) {
                            removeClass = letterSpacingPosClass[0].trim();
                            letterSpace = parseInt(removeClass.replace(dAlpha + 'LtrSpc-', ''));
                        }
                    }
                }
                AdvanceSageSlider($self.find(`#letterSpacingSlider${idSuffix}`), $self.find(`#letterSpacingHandle${idSuffix}`), -20, 20, letterSpace, self['LetterSpaceChange'], targetParent, 'px', self);
            },
            LetterSpaceChange: function (space, $parent, ref) {
                if (ref && typeof ref['updateTargets'] === 'function') {
                    ref['updateTargets']();
                    $parent = targets;
                }
                let dAlpha = DeviceAlpha();
                let addClass = '';
                let removeClass = '';
                let spacingClasses = [];
                let negClass = '';
                let posClass = '';
                $parent.each(function (i, o) {
                    let regexn = new RegExp('\\b' + dAlpha + 'LtrSpc-n-[0-9]{1,2}\\b', 'g');
                    negClass = $(o).attr('class').match(regexn);
                    if (negClass !== null) {
                        spacingClasses.push(negClass[0]);
                    } else {
                        let regex = new RegExp('\\b' + dAlpha + 'LtrSpc-[0-9]{1,2}\\b', 'g');
                        posClass = $textChange.attr('class').match(regex);
                        if (posClass !== null) {
                            spacingClasses.push(posClass[0]);
                        }
                    }
                });
                if (space >= 0) {
                    addClass = dAlpha + 'LtrSpc-' + space;
                } else {
                    space = Math.abs(space);
                    addClass = dAlpha + 'LtrSpc-n-' + space;
                }
                $parent.removeClass(spacingClasses.join(' ')).addClass(addClass);

                CallFunction(callback, {
                    spacing: [addClass, space]
                });
            },
            setupTransformation: function () {
                let self = this;
                let trasformValue = '';
                if ($textChange.hasClass('txU')) {
                    trasformValue = 'txU';
                } else if ($textChange.hasClass('txL')) {
                    trasformValue = 'txL';
                } else if ($textChange.hasClass('txC')) {
                    trasformValue = 'txC';
                }
                $self.find(`#textTransform${idSuffix}`).val(trasformValue);
                $self.find(`#textTransform${idSuffix}`).off().on('change', function () {
                    let tranformCase = $(this).val();
                    let addClass = '';
                    switch (tranformCase) {
                        case 'txU':
                            addClass = 'txU';
                            targets.removeClass('txC').removeClass('txL');
                            break;
                        case 'txL':
                            addClass = 'txL';
                            targets.removeClass('txC').removeClass('txU');
                            break;
                        case 'txC':
                            addClass = 'txC';
                            targets.removeClass('txL').removeClass('txU');
                            break;
                        case '':
                            targets.removeClass('txC').removeClass('txL').removeClass('txU');
                            break;

                    }
                    targets.addClass(addClass);
                    CallFunction(callback, {
                        transform: [addClass]
                    });
                });
            },
            setupFontStyle: function () {
                //loadStyleSetting('FwB');
                //loadStyleSetting('FsI');
                //loadStyleSetting('TdU');
                //loadStyleSetting('TdS');
                let fontStyleArray = ['FsI', 'TdU', 'TdS'];
                let removeFontStyle = ['FsN', 'TdN', 'TdN'];
                $.each(fontStyleArray, function (index, value) {
                    loadStyleSetting(value);
                });

                function loadStyleSetting(styleName) {
                    if ($textChange.hasClass(styleName))
                        $self.find(`#textStyle${idSuffix} [data-name="${styleName}"]`).addClass("selected");
                    else
                        $self.find(`#textStyle${idSuffix} [data-name="${styleName}"]`).removeClass("selected");
                }

                $self.find(`#textStyle${idSuffix} i`).off("click").on("click", function () {
                    let _this = $(this);
                    let fontStyleType = _this.attr("data-name");
                    checkExistingEle(fontStyleType);
                    _this.toggleClass("selected");
                    let indexOfStyle = fontStyleArray.indexOf(fontStyleType);
                    if (_this.hasClass("selected"))
                        targets.removeClass(removeFontStyle[indexOfStyle]).addClass(fontStyleArray[indexOfStyle]);
                    else targets.removeClass(fontStyleArray[indexOfStyle]).addClass(removeFontStyle[indexOfStyle]);
                    //targets.toggleClass(fontStyleType);
                    let addClass = '';
                    CallFunction(callback, {
                        textStyle: [addClass]
                    });
                });

                function checkExistingEle(dataClass) {
                    if (dataClass !== 'TdU' && dataClass !== 'TdS')
                        return;
                    let removeElement = '';
                    if (dataClass === 'TdU')
                        removeElement = 'TdS';
                    else if (dataClass === 'TdS')
                        removeElement = 'TdU';
                    targets.removeClass(removeElement);
                    $self.find(`#textStyle${idSuffix} [data-name=${removeElement}]`).removeClass('selected');
                }
            },
            setupHeadingTag: function () {
                let self = this;
                let dAlpha = ViewDeviceAlpha();
                let headingOption = o.options.headingEle;
                let headingTagColl = ["h1", "h2", "h3", "h4", "h5", "h6"];
                let fontSize = ["32", "24", "18", "16", "13", "12"];
                let tFontSize = ["24", "18", "13", "12", "10", "9"];
                let mFontSize = ["16", "12", "9", "8", "7", "6"];
                if (typeof (headingOption) !== "undefined" && headingOption.target !== undefined && $(targetParent).find(headingOption.target).length > 0) {
                    let headingTag = headingOption.tag;
                    let $targetEle = $(targetParent).find(headingOption.target);
                    let selectOptions = "";
                    if (headingTag !== undefined) {
                        selectOptions = self.createHeadingOption(headingTag, headingTagColl)
                    } else selectOptions = self.createHeadingOption(headingTagColl);
                    $(`#textHeading${idSuffix}`).html(selectOptions);

                    let currentHeading = $targetEle[0].nodeName.toLowerCase();
                    $(`#textHeading${idSuffix}`).val(currentHeading);

                    $(`#textHeading${idSuffix}`).off('change').on('change', function () {
                        let newHeading = $(this).val();
                        let addClass = '';
                        let indexOfNewTag = $.inArray(newHeading.toLowerCase(), headingTagColl);
                        if (indexOfNewTag > -1) {
                            let prevEle = $(targetParent).find(headingOption.target);
                            if (prevEle !== undefined)
                                $.each(prevEle, function (i, eleName) {
                                    let regex = new RegExp('\\b[a-z]{0,1}Fs-[0-9]{1,4}\\b', 'g');
                                    let fontSizeRegex = new RegExp('\\b' + dAlpha + 'Fs-[0-9]{1,4}\\b', 'g');
                                    let classes = $(eleName).attr("class").match(regex);
                                    if (classes !== null)
                                        $.each(classes, function (i, o) {
                                            $(eleName).removeClass(o);
                                        });
                                    addClass = `Fs-${fontSize[indexOfNewTag]} tFs-${tFontSize[indexOfNewTag]} mFs-${mFontSize[indexOfNewTag]}`
                                    let attributes = [];
                                    $.each(eleName.attributes, function (index, node) {
                                        attributes.push(`${node.nodeName}="${node.nodeValue}"`);
                                    });
                                    let html = $(targetParent).find(eleName).html();
                                    $(eleName).replaceWith(`<${newHeading} ${attributes.join(" ")}>${html}</${newHeading}>`);
                                    targets = $(targetParent).find(targetElem)
                                    targets.addClass(addClass);
                                    $('#textSet_size .manualSize').remove();
                                    self.setupFontSize();
                                    $(`#fontsizeHandle${idSuffix}`).text(parseInt(addClass.match(fontSizeRegex)[0].replace(dAlpha + 'Fs-', '')));
                                });
                        } else console.log("AdvanceTextSetting=> Heading=> target doesnot match");
                    });
                } else {
                    console.log("AdvanceTextSetting => Heading target doesn't exist");
                    return false;
                }

            },
            createHeadingOption: function (tegEle, tagList) {
                let DOM = "";
                $.each(tegEle, function (i, value) {
                    let tagName = value.toUpperCase();
                    if (typeof (tagList) !== "undefined") {
                        if ($.inArray(value.toLowerCase(), tagList) > -1)
                            DOM += `<option value="${value}">${tagName}</option>`;
                    } else
                        DOM += `<option value="${value}">${tagName}</option>`;
                });
                return DOM;
            },
            setupFontWidth: function () {
                let self = this;
                let fontWidth = 100;
                let $parent = $(targets[0]).parent();
                let dAlpha = DeviceAlpha();
                let reg = new RegExp('\\b' + dAlpha + 'sfCol_[0-9]{1,3}\\b', 'g');
                let $parentWidthClass = $parent.attr('class').match(reg);
                if ($parentWidthClass !== null) {
                    fontWidth = parseInt($parentWidthClass[0].replace(dAlpha + 'sfCol_', ''));
                    $self.find(`#fontWidthSlider${idSuffix}`).closest('.field-row').show();
                } else {
                    fontWidth = 100;
                    //$self.find(`#fontWidthSlider${idSuffix}`).closest('.field-row').hide();
                }
                AdvanceSageSlider($self.find(`#fontWidthSlider${idSuffix}`), $self.find(`#fontWidthHandle${idSuffix}`), 1, 100, fontWidth, self['FontWidthChange'], targets, '%', self);
            },
            FontWidthChange: function (space, $parent, ref) {
                if (ref && typeof ref['updateTargets'] === 'function') {
                    ref['updateTargets']();
                    $parent = targets;
                }
                let $widthTargets = $parent;
                if (fontWidthTarget) {
                    $widthTargets = $(fontWidthTarget);
                } else {
                    $widthTargets = $parent.parent();
                }
                let widthClasses = [];
                let $parentWidth = '';
                let dAlpha = DeviceAlpha();
                let reg = new RegExp('\\b' + dAlpha + 'sfCol_[0-9]{1,3}\\b', 'g');
                $widthTargets.each(function (i, o) {
                    $parentWidth = $(o).attr('class').match(reg);
                    if ($parentWidth !== null) {
                        widthClasses.push($parentWidth[0]);
                    }
                });
                $widthTargets.removeClass(widthClasses.join(' '));

                let newClass = DeviceAlpha() + 'sfCol_' + space;
                $widthTargets.addClass(newClass);

                CallFunction(callback, {
                    width: [newClass, space]
                });
            },
            setupFontFamilyWeight: function () {
                let self = this;
                let $fontFamily = $self.find(`#fontfamily${idSuffix}`);
                let $fontWeight = $self.find(`#fontWeight${idSuffix}`);

                $fontFamily.html(DOMFontAdvanceCollection());
                let defaultFontFamily = 'montserrat';
                let classesList = $textChange.attr('class');
                if (typeof (classesList) !== "undefined") {
                    //fonts
                    let fontClasses = classesList.match(/ff-(\w+)/g);
                    if (fontClasses !== null) {
                        defaultFontFamily = fontClasses[0].toLowerCase().replace('ff-', '');
                        if (defaultFontFamily === 'null') {
                            defaultFontFamily = 'montserrat';
                        }
                    }
                }
                $fontFamily.val(defaultFontFamily);
                self.fontWeight(defaultFontFamily);

                if (typeof (classesList) !== "undefined") {
                    //weight
                    let weightClasses = classesList.match(/f-weight-[0-9]{0,3}/g);
                    if (weightClasses !== null) {
                        $fontWeight.val(weightClasses[0].replace('f-weight-', ''));
                    }
                }
                $fontWeight.off().on('change', function () {
                    self.updateTargets();
                    let weightClasses = [];
                    targets.each(function (i, o) {
                        let weightClass = $(o).attr('class').match(/f-weight-[0-9]{0,3}/g);
                        if (weightClass !== null) {
                            weightClasses.push(weightClass[0]);
                        }
                    });
                    let wt = 'f-weight-' + $(this).val();
                    targets.removeClass(weightClasses.join(' ')).addClass(wt);

                    CallFunction(callback, {
                        weight: [wt]
                    });

                });
                $fontFamily.off().on('change', function () {
                    self.updateTargets();
                    //let classList = $textChange.attr('class');
                    //if (typeof (classesList) !== "undefined") {
                    //    let fontClass = classList.match(/ff-(\w+)/g);
                    //    if (fontClass !== null) {
                    //        targets.removeClass(fontClass[0]);
                    //    }
                    //}

                    //fix to apply font when target has own font setting
                    targets.each(function (i, t) {
                        let fontClass = $(t).attr('class').match(/ff-(\w+)/g);
                        if (fontClass !== null) {
                            $(t).removeClass(fontClass[0].toLowerCase());
                        }
                    });
                    let fam = 'ff-' + $(this).val().toLowerCase();
                    targets.addClass(fam);
                    self.fontWeight($(this).val());
                    $self.find(`#fontWeight${idSuffix}`).trigger('change');

                    CallFunction(callback, {
                        family: [fam]
                    })
                });
            },
            fontWeight: function (fontName) {
                let fontDOM = DOMFontWeight(fontName);
                if (fontDOM.length > 0) {
                    $self.find(`#fontWeight${idSuffix}`).html(fontDOM);
                }
            },
            setupColor: function () {
                let self = this;
                let $color = $self.find(`#chooseFontColor${idSuffix}`);
                $color.css('background-color', $textChange.css('color'));
                let colorPickerOption = ColorPickerOption({
                    renderCallback: function ($elm, toggled) {
                        let objColor = RenderCallBackColor(this);
                        if (typeof o.colorCallBack == 'function')
                            o.colorCallBack(objColor);
                        self.updateTargets();
                        targets.css({
                            'color': objColor.bgColor
                        });

                        CallFunction(callback, {
                            color: [objColor.bgColor]
                        })
                    }
                });
                $color.colorPicker(colorPickerOption);
            },
            init: function () {
                if (targets.length == 0) {
                    console.error("AdvanceTextSetting => target does not exist");
                    return false;
                }
                this.appendSettingDom();
                if (options.size)
                    this.setupFontSize();
                if (options.lineheight)
                    this.setupLineHeight();
                if (options.spacing)
                    this.setupLetterSpacing();
                if (options.transform)
                    this.setupTransformation();
                if (options.width)
                    this.setupFontWidth();
                if (options.weight)
                    this.setupFontFamilyWeight();
                if (options.color)
                    this.setupColor();
                if (options.style)
                    this.setupFontStyle();
                if (options.heading)
                    this.setupHeadingTag();
            }
        };
        AdvanceTextSetting.init();
    };
}(jQuery));
(function ($) {
    "use strict";
    $.fn.AdvanceAlignment = function (o) {
        if (typeof o === 'undefined' || typeof o.targetParent === 'undefined') {
            console.error("AdvanceAlignment => missing option: targetParent");
            return;
        }
        if (!(o.targetParent instanceof jQuery)) {
            console.error("AdvanceAlignment => targetParent should be a jQuery object");
            return;
        }
        if (typeof o === 'undefined' || typeof o.targetElem === 'undefined') {
            console.error("AdvanceAlignment => missing option: targetElem");
            return;
        }
        let $self = this,
            targetParent = o.targetParent,
            targetElem = o.targetElem,
            targets = $(targetParent).find(targetElem),
            labels = {
                'horizontal': 'Horizontal Alignment',
                'vertical': 'Vertical Alignment'
            },
            options = {
                'horizontal': ["left", "center", "right"],
                'vertical': ["top", "middle", "bottom"]
            };
        if (typeof o.options !== 'undefined' && o.options) {
            options = o.options;
        } else {
            options = {
                'horizontal': ["left", "center", "right"]
            };
        }
        if (typeof o.isvertical !== 'undefined' && o.isvertical === true) {
            options = {
                'vertical': ["top", "middle", "bottom"]
            };
        }
        if (typeof o.labels !== 'undefined' && o.labels) {
            Object.keys(labels).forEach((k) => {
                if (typeof o.labels[k] !== 'undefined') {
                    labels[k] = o.labels[k];
                }
            });
        }
        let AdvanceAlignment = {
            updateTargets: function () {
                let tar = UpdateTargets(targetParent, targetElem, 'AdvanceBackground');
                targets = tar.target;
                return tar.exists;
            },
            appendDOM: function () {
                let dom = this.getAlignmentDOM();
                $self.html(dom);
            },
            getAlignmentDOM: function () {
                let alignTotalDOM = '';
                if (EasyLibrary.IsDefined(options)) {
                    let alignDOM = '';
                    if (EasyLibrary.IsDefined(options.horizontal) && options.horizontal.length > 0) {
                        let optionLen = options.horizontal.length;
                        for (var i = 0; i < optionLen; i++) {
                            alignDOM += DOMCreate('i', '', 'cb-algn-' + options.horizontal[i].substring(0, 1), '', ['data-class="TxAl-' + options.horizontal[i].substring(0, 1) + '"']);
                        }
                        alignDOM += DOMCreate('i', '', 'cb-algn-n', '', ['data-class="TxAl-n"']);
                        alignDOM = DOMCreate('span', alignDOM, 'alignmentHWrapper');
                        alignDOM = FieldRowDOMCreateCol100(DOMCreate('label', labels.horizontal)) + FieldRowDOMCreateCol100(alignDOM);
                    }
                    alignTotalDOM = alignDOM;
                    alignDOM = '';
                    if (EasyLibrary.IsDefined(options.vertical) && options.vertical.length > 0) {
                        let optionLen = options.vertical.length;
                        for (var i = 0; i < optionLen; i++) {
                            alignDOM += DOMCreate('i', '', 'cb-v-algn-' + options.vertical[i].substring(0, 1), '', ['data-class="TxAl-' + options.vertical[i].substring(0, 1) + '"']);
                        }
                        alignDOM += DOMCreate('i', '', 'cb-v-algn-o', '', ['data-class="TxAl-o"']);
                        alignDOM = DOMCreate('span', alignDOM, 'alignmentVWrapper');
                        alignDOM = FieldRowDOMCreateCol100(DOMCreate('label', labels.vertical)) + FieldRowDOMCreateCol100(alignDOM);
                    }
                    alignTotalDOM = alignTotalDOM + alignDOM;
                }
                return alignTotalDOM;
            },
            setup: function () {
                let $parent = $(targets[0]);
                let parentClasses = $parent.attr('class');
                if (typeof (parentClasses) !== "undefined") {
                    let dAlpha = DeviceAlpha();
                    let regex = new RegExp('\\b' + dAlpha + 'TxAl-[a-z]\\b', 'g');
                    let alignmentClasses = parentClasses.match(regex);
                    if (alignmentClasses !== null) {
                        switch (alignmentClasses.length) {
                            case 2:
                                if (dAlpha.length > 0) {
                                    alignmentClasses[1] = alignmentClasses[1].slice(1);
                                }
                                $self.find('.alignmentHWrapper').find(`i[data-class="${alignmentClasses[1]}"]`).addClass('selected');
                                $self.find('.alignmentVWrapper').find(`i[data-class="${alignmentClasses[1]}"]`).addClass('selected');
                            //here is no break because if the length is 2 then first also need to be checked.
                            case 1:
                                if (dAlpha.length > 0) {
                                    alignmentClasses[0] = alignmentClasses[0].slice(1);
                                }
                                $self.find('.alignmentHWrapper').find(`i[data-class="${alignmentClasses[0]}"]`).addClass('selected');
                                $self.find('.alignmentVWrapper').find(`i[data-class="${alignmentClasses[0]}"]`).addClass('selected');
                                break;
                        }
                    }
                }
            },
            addEventListeners: function () {
                let self = this;
                $self.find('.alignmentHWrapper i').on('click', function () {
                    self.updateTargets();
                    let $this = $(this);
                    let dAlpha = DeviceAlpha();
                    targets.removeClass(dAlpha + 'TxAl-l').removeClass(dAlpha + 'TxAl-c').removeClass(dAlpha + 'TxAl-r').removeClass(dAlpha + 'TxAl-n');
                    targets.addClass(dAlpha + $this.attr('data-class'));
                    $self.find('.alignmentHWrapper i').removeClass('selected');
                    $this.addClass('selected');
                });
                $self.find('.alignmentVWrapper i').on('click', function () {
                    self.updateTargets();
                    let $this = $(this);
                    let dAlpha = DeviceAlpha();
                    targets.removeClass(dAlpha + 'TxAl-t').removeClass(dAlpha + 'TxAl-m').removeClass(dAlpha + 'TxAl-b').removeClass(dAlpha + 'TxAl-o');
                    targets.addClass(dAlpha + $this.attr('data-class'));
                    $self.find('.alignmentVWrapper i').removeClass('selected');
                    $this.addClass('selected');
                });
            },
            init: function () {
                this.appendDOM();
                this.setup();
                this.addEventListeners();
            }
        };
        AdvanceAlignment.init();
    };
}(jQuery));
(function ($) {
    "use strict";
    $.fn.AdvanceWidthSlider = function (o) {
        if (typeof o === 'undefined' || typeof o.targetParent === 'undefined') {
            console.error("AdvanceWidthSlider => missing option: targetParent");
            return;
        }
        if (!(o.targetParent instanceof jQuery)) {
            console.error("AdvanceWidthSlider => targetParent should be a jQuery object");
            return;
        }
        if (typeof o === 'undefined' || typeof o.targetElem === 'undefined') {
            console.error("AdvanceWidthSlider => missing option: targetElem");
            return;
        }
        let self = this;
        let sliderID = 'advWidthSlider_' + Math.floor((Math.random() * 100) + 1);
        let sliderHndlr = 'h_' + sliderID;
        let html = '<div class="field-row stElWrap col100">';
        html += '<span class="range__slider fCol" >';
        html += '<div id="' + sliderID + '" >';
        html += '<div title="Width" class="ui-slider-handle" id="' + sliderHndlr + '">100</div></div></span></div>';
        self.html(html);
        let targetParent = o.targetParent;
        let targetElem;
        if ((o.targetElem instanceof jQuery) && o.targetParent[0] == o.targetElem[0]) {
            targetElem = o.targetElem;
        } else {
            targetElem = targetParent.find(o.targetElem);
        }
        let parentClasses = targetElem.eq(0).attr('class');
        let dAlpha = DeviceAlpha();
        let regex = new RegExp('\\b' + dAlpha + 'sfCol_[0-9]{1,3}\\b', 'g');
        let sfWidth = parentClasses.match(regex);
        let width = 100;
        if (sfWidth !== null) {
            width = sfWidth[0].split('_')[1];
        }

        function ResponsiveWidth(space, targetElem) {
            regex = new RegExp('\\b' + dAlpha + 'sfCol_[0-9]{1,3}\\b', 'g');
            parentClasses = targetElem.attr('class');
            let sfWidth = parentClasses.match(regex);
            if (sfWidth !== null) {
                targetElem.removeClass(sfWidth[0]);
            }
            targetElem.addClass(dAlpha + 'sfCol_' + space);
        }
        AdvanceSageSlider($('#' + sliderID), $('#' + sliderHndlr), 1, 100, width, ResponsiveWidth, targetElem, 'px');
    };
}(jQuery));
(function ($) {
    "use strict";
    $.fn.AdvanceSorting = function (o) {
        if (typeof o === 'undefined' || typeof o.targetParent === 'undefined') {
            console.error("AdvanceSorting => missing option: targetParent");
            return;
        }
        if (!(o.targetParent instanceof jQuery)) {
            console.error("AdvanceSorting => targetParent should be a jQuery object");
            return;
        }
        if (typeof o === 'undefined' || typeof o.targetElem === 'undefined') {
            console.error("AdvanceSorting => missing option: targetElem");
            return;
        }
        let $this = this,
            targetParent = o.targetParent,
            targetElem = o.targetElem,
            def_sort_opt = {
                placeholder: "ui-state-highlight",
                forcePlaceholderSize: true,
                forceHelperSize: true,
                tolerance: "pointer"
            };
        let sortable_options = $.extend(def_sort_opt, o.sortableOptions);
        if (typeof sortable_options.start === 'undefined') {
            sortable_options.start = function (event, ui) {
                ui.item.startPos = ui.item.index();
            };
        } else {
            sortable_options.activate = function (event, ui) {
                ui.item.startPos = ui.item.index();
            };
        }
        //console.log("sortable_options ", sortable_options);
        if (typeof sortable_options.stop === 'undefined') {
            sortable_options.stop = function (event, ui) {
                let targetElems = targetElem;
                if (Object.prototype.toString.call(targetElem) !== '[object Array]') {
                    targetElems = [targetElem];
                }
                let oldPos = ui.item.startPos;
                let newPos = ui.item.index();
                if (oldPos != newPos) {
                    targetElems.forEach((elm) => {
                        let targets = $(targetParent).find(elm);
                        let $newPosEl = targets.eq(newPos);
                        let $oldPosEl = targets.eq(oldPos);
                        if (oldPos > newPos) {
                            $oldPosEl.insertBefore($newPosEl);
                        } else {
                            $oldPosEl.insertAfter($newPosEl);
                        }
                    });
                }
                if (typeof sortable_options.afterSort === 'function') {
                    sortable_options.afterSort();
                }
            };
        }
        $this.sortable(sortable_options);
    };
}(jQuery));
(function ($) {
    "use strict";
    $.fn.AdvanceBorder = function (o) {
        if (typeof o === 'undefined' || typeof o.targetParent === 'undefined') {
            console.error("AdvanceBorder => missing option: targetParent");
            return;
        }
        if (!(o.targetParent instanceof jQuery)) {
            console.error("AdvanceBorder => targetParent should be a jQuery object");
            return;
        }
        if (typeof o === 'undefined' || typeof o.targetElem === 'undefined') {
            console.error("AdvanceBorder => missing option: targetElem");
            return;
        }
        let $self = this,
            targetParent = o.targetParent,
            targetElem = o.targetElem,
            targets = $(targetParent).find(targetElem),
            idSuffix = '_' + Math.floor((Math.random() * 1000) + 100),
            options = {
                "max": 20,
                "min": 0,
                "times": 1,
                "position": ["all", "top", "right", "bottom", "left"],
            };
        let initialData = {
            on: 'none',
            top: 0,
            left: 0,
            bottom: 0,
            right: 0,
            tc: '',
            lc: '',
            bc: '',
            rc: '',
        };
        let borderSliderListLocal = [];
        if (typeof o.options !== 'undefined' && o.options) {
            options = o.options;
        }
        let AdvanceBorder = {
            updateTargets: function () {
                let tar = UpdateTargets(targetParent, targetElem, 'AdvanceBackground');
                targets = tar.target;
                return tar.exists;
            },
            appendDOM: function () {
                let bgChDom = this.GeneralBorderDOM(options);
                bgChDom = this.fixDomId(bgChDom);
                $self.html(bgChDom);
            },
            GeneralBorderDOM: function ($options) {
                let borderDOM = '';
                if (typeof ($options !== 'undefined')) {
                    borderDOM += DOMCreate('h4', 'Border', '', 'borderWrapper', ['data-min="' + $options['min'] + '"', 'data-max="' + $options['max'] + '"', 'data-times="' + $options['times'] + '"', "style='display:none;'"]);
                    let selectDOM = DOMCreate('label', 'Border Style', 'fCol') + '<span class="fCol TxAl-r select__box">' + SelectDOMCreate('borderStyle', 'BorderStyle', [
                        ['none', 'None'],
                        ['solid', 'Solid'],
                        ['dashed', 'Dashed'],
                        ['dotted', 'Dotted'],
                        ['double', 'Double']
                    ]) + '</span>';
                    borderDOM += FieldRowDOMCreateCol50_50(selectDOM);
                    let borderSliderCollection = '';
                    let positionList = $options['position'];
                    let positionLength = positionList.length;
                    for (let i = 0; i < positionLength; i++) {
                        switch (positionList[i].toLowerCase()) {
                            case 'all':
                                borderSliderCollection += CreateSliderWithColorDOM(borderSliderListLocal[0][0], borderSliderListLocal[0][1], 'Bulk Border', borderSliderListLocal[0][5], 'borderColorChoose');
                                borderSliderListLocal[0][2] = true;
                                break;
                            case 'top':
                                borderSliderCollection += CreateSliderWithColorDOM(borderSliderListLocal[1][0], borderSliderListLocal[1][1], 'Top Border', borderSliderListLocal[1][5], 'borderColorChoose');
                                borderSliderListLocal[1][2] = true;
                                break;
                            case 'right':
                                borderSliderCollection += CreateSliderWithColorDOM(borderSliderListLocal[2][0], borderSliderListLocal[2][1], 'Right Border', borderSliderListLocal[2][5], 'borderColorChoose');
                                borderSliderListLocal[2][2] = true;
                                break;
                            case 'bottom':
                                borderSliderCollection += CreateSliderWithColorDOM(borderSliderListLocal[3][0], borderSliderListLocal[3][1], 'Bottom Border', borderSliderListLocal[3][5], 'borderColorChoose');
                                borderSliderListLocal[3][2] = true;
                                break;
                            case 'left':
                                borderSliderCollection += CreateSliderWithColorDOM(borderSliderListLocal[4][0], borderSliderListLocal[4][1], 'Left Border', borderSliderListLocal[4][5], 'borderColorChoose');
                                borderSliderListLocal[4][2] = true;
                                break;
                        }
                    }
                    borderSliderCollection = DOMCreate('div', borderSliderCollection, 'borderSliderCollection', '', ['style="display:none;"']);
                    borderDOM = FieldRowDOMCreate(borderDOM + borderSliderCollection);
                }
                return borderDOM;
            },
            fixDomId: function (dom) {
                let ids = ['borderWrapper', 'borderStyle', 'bulkBorderSlider', 'borderTopSlider', 'borderRightSlider', 'borderBottomSlider', 'borderLeftSlider',
                    'bulkBorderHandler', 'borderTopHandler', 'borderRightHandler', 'borderBottomHandler', 'borderLeftHandler',
                    'bulkBorderColor', 'topBorderColor', 'rightBorderColor', 'bottomBorderColor', 'leftBorderColor'
                ];
                let $dom = $(dom);
                for (let i = 0, j = ids.length; i < j; i++) {
                    $dom.find('#' + ids[i]).removeAttr('id').attr('id', ids[i] + idSuffix);
                }
                return $dom[0];
            },
            setup: function () {
                if (typeof (targets[0]) !== "undefined") {
                    let $parent = $(targets[0]);
                    let prevhovereffect = $parent.attr('data-prevhovereffect');
                    if (typeof prevhovereffect !== 'undefined') {
                        let tmpEff = JSON.parse(prevhovereffect);
                        if (tmpEff.border) {
                            initialData = tmpEff.border;
                        }
                    } else if (typeof (targets[0].style) !== "undefined") {
                        let borderStyle = targets[0].style.borderStyle;
                        if (borderStyle.length == 0)
                            borderStyle = 'none';
                        initialData.on = borderStyle;
                        initialData.top = $parent.css('border-top-width');
                        initialData.left = $parent.css('border-left-width');
                        initialData.bottom = $parent.css('border-bottom-width');
                        initialData.right = $parent.css('border-right-width');
                        initialData.tc = $parent.css('border-top-color');
                        initialData.lc = $parent.css('border-left-color');
                        initialData.bc = $parent.css('border-bottom-color');
                        initialData.rc = $parent.css('border-right-color');
                    }
                    $self.find(`#borderStyle${idSuffix}`).val(initialData.on);
                    if (initialData.on == 'none') {
                        $self.find('.borderSliderCollection').hide();
                    } else {
                        $self.find('.borderSliderCollection').show();
                    }
                    this.LoadBorderInitialValue();
                    this.LoadBorderColor();
                }
            },
            addEventListeners: function () {
                let self = this;
                $self.find(`#borderStyle${idSuffix}`).on('change', function () {
                    self.updateTargets();
                    let style = $(this).val();
                    targets.css('border-style', style);
                    if (style === 'none') {
                        targets.css("border-width", '0px');
                        $self.find('.borderSliderCollection').hide();
                        for (let i = 0; i < 5; i++) {
                            $self.find(`#${borderSliderListLocal[i][0]}${idSuffix}`).slider('value', 0);
                            $self.find(`#${borderSliderListLocal[i][1]}${idSuffix}`).text(0);
                        }
                    } else {
                        let borderValue = $(targets[0]).css('border-width');
                        borderValue = parseInt(borderValue.replace('px', ''));
                        if (!borderValue) {
                            borderValue = 1;
                        }
                        targets.css("border-width", borderValue + 'px');
                        for (let i = 0; i < 5; i++) {
                            $self.find(`#${borderSliderListLocal[i][0]}${idSuffix}`).slider('value', borderValue);
                            $self.find(`#${borderSliderListLocal[i][1]}${idSuffix}`).text(borderValue);
                        }
                        $self.find('.borderSliderCollection').show();
                    }
                });
                this.BorderColorEvents();
                this.addSliderEvent();
            },
            addSliderEvent: function () {
                let self = this;
                let $borderWrapper = $self.find(`#borderWrapper${idSuffix}`);
                if (typeof ($borderWrapper.attr('data-max')) !== 'undefined' && typeof ($borderWrapper.attr('data-min')) !== 'undefined') {
                    let maxValue = parseInt($borderWrapper.attr('data-max'));
                    let minValue = parseInt($borderWrapper.attr('data-min'));
                    for (let i = 0; i < 5; i++) {
                        if (borderSliderListLocal[i][2]) {
                            AdvanceSageSlider($self.find(`#${borderSliderListLocal[i][0]}${idSuffix}`), $self.find(`#${borderSliderListLocal[i][1]}${idSuffix}`), minValue, maxValue, borderSliderListLocal[i][4], self[borderSliderListLocal[i][3]], targets, 'px', self);
                        }
                    }
                }
            },
            BorderColorEvents: function () {
                this.updateTargets();
                let self = this;
                let colorPickerOption = ColorPickerOption({
                    renderCallback: function ($elm, toggled) {
                        let objColor = RenderCallBackColor(this);
                        let colorPickerID = $elm.attr('id');
                        if (colorPickerID === borderSliderListLocal[0][5] + idSuffix) {
                            targets.css('border-top-color', objColor.bgColor);
                            targets.css('border-right-color', objColor.bgColor);
                            targets.css('border-bottom-color', objColor.bgColor);
                            targets.css('border-left-color', objColor.bgColor);
                            initialData.tc = objColor.bgColor;
                            initialData.bc = objColor.bgColor;
                            initialData.lc = objColor.bgColor;
                            initialData.rc = objColor.bgColor;
                            self.LoadBorderColor();
                        } else if (colorPickerID === borderSliderListLocal[1][5] + idSuffix) {
                            targets.css('border-top-color', objColor.bgColor);
                            initialData.tc = objColor.bgColor;
                        } else if (colorPickerID === borderSliderListLocal[2][5] + idSuffix) {
                            targets.css('border-right-color', objColor.bgColor);
                            initialData.rc = objColor.bgColor;
                        } else if (colorPickerID === borderSliderListLocal[3][5] + idSuffix) {
                            targets.css('border-bottom-color', objColor.bgColor);
                            initialData.bc = objColor.bgColor;
                        } else if (colorPickerID === borderSliderListLocal[4][5] + idSuffix) {
                            targets.css('border-left-color', objColor.bgColor);
                            initialData.lc = objColor.bgColor;
                        }
                    }
                });
                $self.find('.borderColorChoose').colorPicker(colorPickerOption);
            },
            LoadBorderInitialValue: function () {
                this.updateTargets();
                let times = 1;
                if (typeof ($self.find(`#borderWrapper${idSuffix}`).attr('data-times')) !== 'undefined')
                    times = parseInt($self.find(`#borderWrapper${idSuffix}`).attr('data-times'));
                if (times == 0)
                    times = 1;

                let topWidth = 0,
                    rightWidth = 0,
                    bottomWidth = 0,
                    leftWidth = 0;

                topWidth = initialData.top;
                if (typeof (topWidth) != 'undefined')
                    topWidth = parseInt(topWidth.replace('px', ''));
                topWidth = topWidth / times;
                borderSliderListLocal[1][4] = topWidth;

                rightWidth = initialData.right;
                if (typeof (rightWidth) != 'undefined')
                    rightWidth = parseInt(rightWidth.replace('px', ''));
                rightWidth = rightWidth / times;
                borderSliderListLocal[2][4] = rightWidth;

                bottomWidth = initialData.bottom;
                if (typeof (bottomWidth) != 'undefined')
                    bottomWidth = parseInt(bottomWidth.replace('px', ''));
                bottomWidth = bottomWidth / times;
                borderSliderListLocal[3][4] = bottomWidth;

                leftWidth = initialData.left;
                if (typeof (leftWidth) != 'undefined')
                    leftWidth = parseInt(leftWidth.replace('px', ''));
                leftWidth = leftWidth / times;
                borderSliderListLocal[4][4] = leftWidth;

                if (borderSliderListLocal[1][4] === borderSliderListLocal[2][4] &&
                    borderSliderListLocal[3][4] === borderSliderListLocal[4][4] &&
                    borderSliderListLocal[1][4] === borderSliderListLocal[4][4])
                    borderSliderListLocal[0][4] = borderSliderListLocal[1][4];
            },
            LoadBorderColor: function () {
                this.updateTargets();
                let borderTopColor = initialData.tc;
                let borderRightColor = initialData.rc;
                let borderBottomColor = initialData.bc;
                let borderLeftColor = initialData.lc;
                $self.find(`#${borderSliderListLocal[1][5]}${idSuffix}`).css('background-color', borderTopColor);
                $self.find(`#${borderSliderListLocal[2][5]}${idSuffix}`).css('background-color', borderRightColor);
                $self.find(`#${borderSliderListLocal[3][5]}${idSuffix}`).css('background-color', borderBottomColor);
                $self.find(`#${borderSliderListLocal[4][5]}${idSuffix}`).css('background-color', borderLeftColor);
                if (borderTopColor === borderRightColor && borderBottomColor === borderLeftColor && borderTopColor === borderLeftColor)
                    $self.find(`#${borderSliderListLocal[0][5]}${idSuffix}`).css('background-color', borderTopColor);
                else
                    $self.find(`#${borderSliderListLocal[0][5]}${idSuffix}`).css('background-color', '#000');
            },
            BorderBulk: function (space, $parent, ref) {
                if (ref && typeof ref['updateTargets'] === 'function') {
                    ref['updateTargets']();
                    $parent = targets;
                }
                if (borderSliderListLocal[1][2]) {
                    $parent.css({
                        "border-top-width": space
                    });
                    $self.find(`#${borderSliderListLocal[1][0]}${idSuffix}`).slider('value', space);
                    $self.find(`#${borderSliderListLocal[1][1]}${idSuffix}`).text(space);
                }
                if (borderSliderListLocal[2][2]) {
                    $parent.css({
                        "border-right-width": space
                    });
                    $self.find(`#${borderSliderListLocal[2][0]}${idSuffix}`).slider('value', space);
                    $self.find(`#${borderSliderListLocal[2][1]}${idSuffix}`).text(space);
                }
                if (borderSliderListLocal[3][2]) {
                    $parent.css({
                        "border-bottom-width": space
                    });
                    $self.find(`#${borderSliderListLocal[3][0]}${idSuffix}`).slider('value', space);
                    $self.find(`#${borderSliderListLocal[3][1]}${idSuffix}`).text(space);
                }
                if (borderSliderListLocal[4][2]) {
                    $parent.css({
                        "border-left-width": space
                    });
                    $self.find(`#${borderSliderListLocal[4][0]}${idSuffix}`).slider('value', space);
                    $self.find(`#${borderSliderListLocal[4][1]}${idSuffix}`).text(space);
                }
                if (!borderSliderListLocal[1][2] && !borderSliderListLocal[2][2] && !borderSliderListLocal[3][2] && !borderSliderListLocal[4][2]) {
                    $parent.css({
                        "border-width": space
                    });
                }
                if (typeof o.callback == 'function')
                    o.callback();
            },
            BorderTop: function (space, $parent, ref) {
                let refOK = false;
                if (ref && typeof ref['updateTargets'] === 'function') {
                    refOK = true;
                    ref['updateTargets']();
                    $parent = targets;
                }
                $parent.css({
                    "border-top-width": space
                });
                if (refOK) {
                    ref.BorderBulkNull();
                }
            },
            BorderRight: function (space, $parent, ref) {
                let refOK = false;
                if (ref && typeof ref['updateTargets'] === 'function') {
                    refOK = true;
                    ref['updateTargets']();
                    $parent = targets;
                }
                $parent.css({
                    "border-right-width": space
                });
                if (refOK) {
                    ref.BorderBulkNull();
                }
            },
            BorderBottom: function (space, $parent, ref) {
                let refOK = false;
                if (ref && typeof ref['updateTargets'] === 'function') {
                    refOK = true;
                    ref['updateTargets']();
                    $parent = targets;
                }
                $parent.css({
                    "border-bottom-width": space
                });
                if (refOK) {
                    ref.BorderBulkNull();
                }
            },
            BorderLeft: function (space, $parent, ref) {
                let refOK = false;
                if (ref && typeof ref['updateTargets'] === 'function') {
                    refOK = true;
                    ref['updateTargets']();
                    $parent = targets;
                }
                $parent.css({
                    "border-left-width": space
                });
                if (refOK) {
                    ref.BorderBulkNull();
                }
            },
            BorderBulkNull: function () {
                $self.find(`#${borderSliderListLocal[0][0]}${idSuffix}`).slider('value', 0);
                $self.find(`#${borderSliderListLocal[0][1]}${idSuffix}`).text(0);
                if (typeof o.callback == 'function') {
                    o.callback();
                }
            },
            init: function () {
                this.updateTargets();
                if (targets.length == 0) {
                    console.error("AdvanceBorder => target does not exist");
                    return false;
                }
                borderSliderListLocal = [
                    ['bulkBorderSlider', 'bulkBorderHandler', false, 'BorderBulk', 0, 'bulkBorderColor'],
                    ['borderTopSlider', 'borderTopHandler', false, 'BorderTop', 0, 'topBorderColor'],
                    ['borderRightSlider', 'borderRightHandler', false, 'BorderRight', 0, 'rightBorderColor'],
                    ['borderBottomSlider', 'borderBottomHandler', false, 'BorderBottom', 0, 'bottomBorderColor'],
                    ['borderLeftSlider', 'borderLeftHandler', false, 'BorderLeft', 0, 'leftBorderColor']
                ];
                this.appendDOM();
                this.setup();
                this.addEventListeners();
            }
        };
        AdvanceBorder.init();
    };
}(jQuery));
(function ($) {
    "use strict";
    $.fn.AdvanceBoxRadius = function (o) {
        if (typeof o === 'undefined' || typeof o.targetParent === 'undefined') {
            console.error("AdvanceBoxRadius => missing option: targetParent");
            return;
        }
        if (!(o.targetParent instanceof jQuery)) {
            console.error("AdvanceBoxRadius => targetParent should be a jQuery object");
            return;
        }
        if (typeof o === 'undefined' || typeof o.targetElem === 'undefined') {
            console.error("AdvanceBoxRadius => missing option: targetElem");
            return;
        }
        let $self = this,
            targetParent = o.targetParent,
            targetElem = o.targetElem,
            targets = $(targetParent).find(targetElem),
            idSuffix = '_' + Math.floor((Math.random() * 1000) + 100),
            options = {
                "max": 50,
                "min": 0,
                "times": 1,
                "position": ["all", "top-left", "top-right", "bottom-left", "bottom-right"]
            };
        if (typeof o.options !== 'undefined' && o.options) {
            options = o.options;
        }
        let boxRadiusSliderListLocal = [];
        let AdvanceBoxRadius = {
            updateTargets: function () {
                let tar = UpdateTargets(targetParent, targetElem, 'AdvanceBackground');
                targets = tar.target;
                return tar.exists;
            },
            appendDOM: function () {
                let bgChDom = this.GeneralBoxRadiusDOM(options);
                bgChDom = this.fixDomId(bgChDom);
                $self.html(bgChDom);
            },
            GeneralBoxRadiusDOM: function ($options) {
                let boxRadiusDOM = '';
                if (typeof ($options !== 'undefined')) {
                    boxRadiusDOM += DOMCreate('h4', 'Box Radius', '', 'boxRadiusWrapper', ['data-min="' + $options['min'] + '"', 'data-max="' + $options['max'] + '"', 'data-times="' + $options['times'] + '"', 'style="display:none;"']);
                    let boxRadiusSliderCollection = '';
                    let positionList = $options['position'];
                    let positionLength = positionList.length;
                    for (let i = 0; i < positionLength; i++) {
                        switch (positionList[i].toLowerCase()) {
                            case 'all':
                                boxRadiusSliderCollection += CreateSliderDOM(boxRadiusSliderListLocal[0][0], boxRadiusSliderListLocal[0][1], 'Bulk', boxRadiusSliderListLocal[0][5]);
                                boxRadiusSliderListLocal[0][2] = true;
                                break;
                            case 'top-left':
                                boxRadiusSliderCollection += CreateSliderDOM(boxRadiusSliderListLocal[1][0], boxRadiusSliderListLocal[1][1], 'Top-Left', boxRadiusSliderListLocal[1][5]);
                                boxRadiusSliderListLocal[1][2] = true;
                                break;
                            case 'top-right':
                                boxRadiusSliderCollection += CreateSliderDOM(boxRadiusSliderListLocal[2][0], boxRadiusSliderListLocal[2][1], 'Top- Right', boxRadiusSliderListLocal[2][5]);
                                boxRadiusSliderListLocal[2][2] = true;
                                break;
                            case 'bottom-left':
                                boxRadiusSliderCollection += CreateSliderDOM(boxRadiusSliderListLocal[3][0], boxRadiusSliderListLocal[3][1], 'Bottom-Left', boxRadiusSliderListLocal[3][5]);
                                boxRadiusSliderListLocal[3][2] = true;
                                break;
                            case 'bottom-right':
                                boxRadiusSliderCollection += CreateSliderDOM(boxRadiusSliderListLocal[4][0], boxRadiusSliderListLocal[4][1], 'Bottom-Right', boxRadiusSliderListLocal[4][5]);
                                boxRadiusSliderListLocal[4][2] = true;
                                break;
                        }
                    }
                    boxRadiusDOM = FieldRowDOMCreate(boxRadiusDOM + boxRadiusSliderCollection);
                }
                return boxRadiusDOM;
            },
            fixDomId: function (dom) {
                let ids = ['boxRadiusWrapper', 'bulkBoxRadiusSlider', 'boxRadiusTopLeftSlider', 'boxRadiusTopRightSlider', 'boxRadiusBottomLeftSlider', 'boxRadiusBottomRightSlider',
                    'bulkBoxRadiusHandler', 'boxRadiusTopLeftHandler', 'boxRadiusTopRightHandler', 'boxRadiusBottomLeftHandler', 'boxRadiusBottomRightHandler'
                ];
                let $dom = $(dom);
                for (let i = 0, j = ids.length; i < j; i++) {
                    $dom.find('#' + ids[i]).removeAttr('id').attr('id', ids[i] + idSuffix);
                }
                return $dom[0];
            },
            setup: function () {
                let self = this;
                let $boxRadiusWrapper = $self.find(`#boxRadiusWrapper${idSuffix}`);
                if (typeof ($boxRadiusWrapper.attr('data-max')) !== 'undefined' && typeof ($boxRadiusWrapper.attr('data-min')) !== 'undefined') {
                    let maxValue = parseInt($boxRadiusWrapper.attr('data-max'));
                    let minValue = parseInt($boxRadiusWrapper.attr('data-min'));
                    for (let i = 0; i < 5; i++) {
                        if (boxRadiusSliderListLocal[i][2]) {
                            AdvanceSageSlider($self.find(`#${boxRadiusSliderListLocal[i][0]}${idSuffix}`), $self.find(`#${boxRadiusSliderListLocal[i][1]}${idSuffix}`), minValue, maxValue, boxRadiusSliderListLocal[i][4], self[boxRadiusSliderListLocal[i][3]], targets, 'px', self);
                        }
                    }
                }
            },
            LoadBoxRadiusInitialValue: function () {
                let times = 1;
                if (typeof ($self.find(`#boxRadiusWrapper${idSuffix}`).attr('data-times')) !== 'undefined')
                    times = parseInt($self.find(`#boxRadiusWrapper${idSuffix}`).attr('data-times'));
                if (times == 0)
                    times = 1;

                let topleft = 0,
                    topRight = 0,
                    bottomLeft = 0,
                    bottomRight = 0;
                let $parent = $(targets[0]);

                topleft = $parent.css("border-top-left-radius");
                if (typeof (topleft) != 'undefined')
                    topleft = parseInt(topleft.replace('px', ''));
                topleft = topleft / times;
                boxRadiusSliderListLocal[1][4] = topleft;

                topRight = $parent.css("border-top-right-radius");
                if (typeof (topRight) != 'undefined')
                    topRight = parseInt(topRight.replace('px', ''));
                topRight = topRight / times;
                boxRadiusSliderListLocal[2][4] = topRight;

                bottomLeft = $parent.css("border-bottom-left-radius");
                if (typeof (bottomLeft) != 'undefined')
                    bottomLeft = parseInt(bottomLeft.replace('px', ''));
                bottomLeft = bottomLeft / times;
                boxRadiusSliderListLocal[3][4] = bottomLeft;

                bottomRight = $parent.css("border-bottom-right-radius");
                if (typeof (bottomRight) != 'undefined')
                    bottomRight = parseInt(bottomRight.replace('px', ''));
                bottomRight = bottomRight / times;
                boxRadiusSliderListLocal[4][4] = bottomRight;

                if (boxRadiusSliderListLocal[1][4] === boxRadiusSliderListLocal[2][4] && boxRadiusSliderListLocal[3][4] === boxRadiusSliderListLocal[4][4] && boxRadiusSliderListLocal[1][4] === boxRadiusSliderListLocal[4][4])
                    boxRadiusSliderListLocal[0][4] = boxRadiusSliderListLocal[1][4];
            },
            BoxRadiusBulk: function (space, $parent, ref) {
                if (ref && typeof ref['updateTargets'] === 'function') {
                    ref['updateTargets']();
                    $parent = targets;
                }
                if (boxRadiusSliderListLocal[1][2]) {
                    $parent.css({
                        "border-top-left-radius": space
                    });
                    $parent.find(' > .editor-row-shaded-layer').css({
                        "border-top-left-radius": space
                    });
                    $self.find(`#${boxRadiusSliderListLocal[1][0]}${idSuffix}`).slider('value', space);
                    $self.find(`#${boxRadiusSliderListLocal[1][1]}${idSuffix}`).text(space);
                }
                if (boxRadiusSliderListLocal[2][2]) {
                    $parent.css({
                        "border-top-right-radius": space
                    });
                    $parent.find(' > .editor-row-shaded-layer').css({
                        "border-top-right-radius": space
                    });
                    $self.find(`#${boxRadiusSliderListLocal[2][0]}${idSuffix}`).slider('value', space);
                    $self.find(`#${boxRadiusSliderListLocal[2][1]}${idSuffix}`).text(space);
                }
                if (boxRadiusSliderListLocal[3][2]) {
                    $parent.css({
                        "border-bottom-left-radius": space
                    });
                    $parent.find(' > .editor-row-shaded-layer').css({
                        "border-bottom-left-radius": space
                    });
                    $self.find(`#${boxRadiusSliderListLocal[3][0]}${idSuffix}`).slider('value', space);
                    $self.find(`#${boxRadiusSliderListLocal[3][1]}${idSuffix}`).text(space);
                }
                if (boxRadiusSliderListLocal[4][2]) {
                    $parent.css({
                        "border-bottom-right-radius": space
                    });
                    $parent.find(' > .editor-row-shaded-layer').css({
                        "border-bottom-right-radius": space
                    });
                    $self.find(`#${boxRadiusSliderListLocal[4][0]}${idSuffix}`).slider('value', space);
                    $self.find(`#${boxRadiusSliderListLocal[4][1]}${idSuffix}`).text(space);
                }
                if (!boxRadiusSliderListLocal[1][2] && !boxRadiusSliderListLocal[2][2] && !boxRadiusSliderListLocal[3][2] && !boxRadiusSliderListLocal[4][2]) {
                    $parent.css({
                        "border-radius": space
                    });
                }
                if (typeof o.callback == 'function')
                    o.callback();
            },
            BoxRadiusTopLeft: function (space, $parent, ref) {
                let refOK = false;
                if (ref && typeof ref['updateTargets'] === 'function') {
                    refOK = true;
                    ref['updateTargets']();
                    $parent = targets;
                }
                $parent.css({
                    "border-top-left-radius": space
                });
                $parent.find(' > .editor-row-shaded-layer').css({
                    "border-top-left-radius": space
                });
                if (refOK) {
                    ref.BoxRadiusBulkNull();
                }
            },
            BoxRadiusTopRight: function (space, $parent, ref) {
                let refOK = false;
                if (ref && typeof ref['updateTargets'] === 'function') {
                    refOK = true;
                    ref['updateTargets']();
                    $parent = targets;
                }
                $parent.css({
                    "border-top-right-radius": space
                });
                $parent.find(' > .editor-row-shaded-layer').css({
                    "border-top-right-radius": space
                });
                if (refOK) {
                    ref.BoxRadiusBulkNull();
                }
            },
            BoxRadiusBottomLeft: function (space, $parent, ref) {
                let refOK = false;
                if (ref && typeof ref['updateTargets'] === 'function') {
                    refOK = true;
                    ref['updateTargets']();
                    $parent = targets;
                }
                $parent.css({
                    "border-bottom-left-radius": space
                });
                $parent.find(' > .editor-row-shaded-layer').css({
                    "border-bottom-left-radius": space
                });
                if (refOK) {
                    ref.BoxRadiusBulkNull();
                }
            },
            BoxRadiusBottomRight: function (space, $parent, ref) {
                let refOK = false;
                if (ref && typeof ref['updateTargets'] === 'function') {
                    refOK = true;
                    ref['updateTargets']();
                    $parent = targets;
                }
                $parent.css({
                    "border-bottom-right-radius": space
                });
                $parent.find(' > .editor-row-shaded-layer').css({
                    "border-bottom-right-radius": space
                });
                if (refOK) {
                    ref.BoxRadiusBulkNull();
                }
            },
            BoxRadiusBulkNull: function () {
                $self.find(`#${boxRadiusSliderListLocal[0][0]}${idSuffix}`).slider('value', 0);
                $self.find(`#${boxRadiusSliderListLocal[0][1]}${idSuffix}`).text(0);
                if (typeof o.callback == 'function')
                    o.callback();
            },
            init: function () {
                this.updateTargets();
                if (targets.length == 0) {
                    console.error("AdvanceBoxRadius => target does not exist");
                    return false;
                }
                boxRadiusSliderListLocal = [
                    ['bulkBoxRadiusSlider', 'bulkBoxRadiusHandler', false, 'BoxRadiusBulk', 0],
                    ['boxRadiusTopLeftSlider', 'boxRadiusTopLeftHandler', false, 'BoxRadiusTopLeft', 0],
                    ['boxRadiusTopRightSlider', 'boxRadiusTopRightHandler', false, 'BoxRadiusTopRight', 0],
                    ['boxRadiusBottomLeftSlider', 'boxRadiusBottomLeftHandler', false, 'BoxRadiusBottomLeft', 0],
                    ['boxRadiusBottomRightSlider', 'boxRadiusBottomRightHandler', false, 'BoxRadiusBottomRight', 0]
                ];
                this.appendDOM();
                this.LoadBoxRadiusInitialValue();
                this.setup();
            }
        };
        AdvanceBoxRadius.init();
    };
}(jQuery));
(function ($) {
    "use strict";
    $.fn.AdvanceBoxShadow = function (o) {
        if (typeof o === 'undefined' || typeof o.targetParent === 'undefined') {
            console.error("AdvanceBoxShadow => missing option: targetParent");
            return;
        }
        if (!(o.targetParent instanceof jQuery)) {
            console.error("AdvanceBoxShadow => targetParent should be a jQuery object");
            return;
        }
        if (typeof o === 'undefined' || typeof o.targetElem === 'undefined') {
            console.error("AdvanceBoxShadow => missing option: targetElem");
            return;
        }
        let $self = this,
            $boxShadowEffects = null,
            targetParent = o.targetParent,
            targetElem = o.targetElem,
            targets = $(targetParent).find(targetElem),
            idSuffix = '_' + Math.floor((Math.random() * 1000) + 100),
            options = {};
        if (typeof o.options !== 'undefined' && o.options) {
            options = o.options;
        }
        let objBoxShadow = {
            'inset': 'false',
            'horizontal': '0',
            'vertical': '1',
            'blur': '5',
            'color': defaultColor,
        };
        let boxShadow = 'none';
        let horiLen = 0,
            verLen = 0,
            blurRadius = 0,
            lenCol = 0;
        let boxShadowSliderListLocal = [];
        let AdvanceBoxShadow = {
            updateTargets: function () {
                let tar = UpdateTargets(targetParent, targetElem, 'AdvanceBoxShadow');
                targets = tar.target;
                return tar.exists;
            },
            appendDOM: function () {
                let bgChDom = this.GeneralBoxShadowDOM(options);
                bgChDom = this.fixDomId(bgChDom);
                $self.html(bgChDom);
                $boxShadowEffects = $self.find('.boxShadowEffects');
            },
            GeneralBoxShadowDOM: function ($options) {
                let boxShadowDOM = '';
                //boxShadowDOM += DOMCreate('h4', 'Box Shadow', '', 'BoxShadowWrap');
                boxShadowDOM += CreateCheckboxDOM('Activate Box Shadow', 'ShowBoxShadowOption', 'ShowBoxShadowOption');
                let sliderDOM = '';
                let boxOptions = Object.keys($options);
                let boxOptionslen = boxOptions.length;
                sliderDOM = CreateSliderDOM(boxShadowSliderListLocal[0][0], boxShadowSliderListLocal[0][1], 'Horizontal Length');
                sliderDOM += CreateSliderDOM(boxShadowSliderListLocal[1][0], boxShadowSliderListLocal[1][1], 'Vertical Length');
                sliderDOM += CreateSliderDOM(boxShadowSliderListLocal[2][0], boxShadowSliderListLocal[2][1], 'Blur Radius');
                sliderDOM += CreateColorPickerDOM('Shadow Color', 'shadowColor', 'shadowColor');
                sliderDOM += CreateCheckboxDOM('Inset', 'boxshadowInset', 'boxshadowInset');
                sliderDOM = DOMCreate('div', sliderDOM, 'boxShadowEffects', '', ['style="display:none;"']);
                let horiMaxLen = 100,
                    horiMinLen = -100;
                let vertiMaxLen = 100,
                    vertiMinLen = -100;
                let blurMaxLen = 100,
                    blurMinLen = 0;
                sliderDOM += '<input type="hidden" id="boxShadowMinMax" data-hori-min="' + horiMinLen;
                sliderDOM += '" data-hori-max="' + horiMaxLen;
                sliderDOM += '" data-verti-min="' + vertiMinLen + '" data-verti-max="' + vertiMaxLen;
                sliderDOM += '" data-blur-min="' + blurMinLen + '" data-blur-max="' + blurMaxLen + '" />';
                boxShadowDOM += sliderDOM;
                boxShadowDOM = FieldRowDOMCreate(boxShadowDOM);
                return boxShadowDOM;
            },
            fixDomId: function (dom) {
                let ids = ['boxShadowHorizontalSlider', 'boxShadowVerticalSlider', 'boxShadowBlurSlider',
                    'boxShadowHorizontalHandler', 'boxShadowVerticalHandler', 'boxShadowBlurHandler',
                    'ShowBoxShadowOption', 'shadowColor', 'boxshadowInset', 'boxShadowMinMax'
                ];
                let $dom = $(dom);
                for (let i = 0, j = ids.length; i < j; i++) {
                    $dom.find('#' + ids[i]).removeAttr('id').attr('id', ids[i] + idSuffix);
                }
                $dom.find("label[for='ShowBoxShadowOption']").attr('for', 'ShowBoxShadowOption' + idSuffix);
                $dom.find("label[for='boxshadowInset']").attr('for', 'boxshadowInset' + idSuffix);
                return $dom[0];
            },
            setup: function () {
                let $parent = $(targets[0]);
                let prevhovereffect = $parent.attr('data-prevhovereffect');
                if (typeof prevhovereffect !== 'undefined') {
                    let tmpEff = JSON.parse(prevhovereffect);
                    if (tmpEff.boxShadowStyle) {
                        boxShadow = tmpEff.boxShadowStyle;
                    }
                } else if (typeof ($parent.attr('style')) !== 'undefined') {
                    boxShadow = $parent.css('box-shadow');
                }
                $self.find(`#shadowColor${idSuffix}`).css('background-color', '#000');
                if (typeof (boxShadow) !== "undefined" && boxShadow !== null && boxShadow !== 'none') {
                    //horiLen = objBoxShadow.horizontal;
                    //verLen = objBoxShadow.vertical;
                    //blurRadius = objBoxShadow.blur;
                    lenCol = boxShadow.match(/-?\d{1,3}px/g);
                    horiLen = parseInt(lenCol[0].replace('px', ''));
                    verLen = parseInt(lenCol[1].replace('px', ''));
                    blurRadius = parseInt(lenCol[2].replace('px', ''));
                    objBoxShadow.horizontal = horiLen;
                    objBoxShadow.vertical = verLen;
                    objBoxShadow.blur = blurRadius;
                    $boxShadowEffects.show();
                    $self.find(`#ShowBoxShadowOption${idSuffix}`).prop('checked', true);
                    let dropColor = boxShadow;
                    lenCol.forEach((l) => {
                        dropColor = dropColor.replace(l, '');
                    });
                    //let dropColor = boxShadow.replace(horiLen + 'px', '').replace(verLen + 'px', '').replace(blurRadius + 'px', '');
                    dropColor = dropColor.replace('inset', '').trim();
                    if (dropColor.length > 0) {
                        objBoxShadow.color = dropColor;
                        $self.find(`#shadowColor${idSuffix}`).css('background-color', dropColor);
                    }
                    let hasInset = boxShadow.match(/inset/);
                    if (hasInset !== null && hasInset.length > 0) {
                        $self.find(`#boxshadowInset${idSuffix}`).prop('checked', true);
                    } else {
                        $self.find(`#boxshadowInset${idSuffix}`).prop('checked', false);
                    }
                } else {
                    $self.find('.boxShadowEffects').hide();
                    $self.find(`#ShowBoxShadowOption${idSuffix}`).prop('checked', false);
                    $self.find(`#shadowColor${idSuffix}`).css('background-color', '#000');
                }
            },
            parentBoxShadow: function () {
                let shadowDOM = '';
                shadowDOM += objBoxShadow.color + ' ';
                shadowDOM += objBoxShadow.horizontal + 'px ';
                shadowDOM += objBoxShadow.vertical + 'px ';
                shadowDOM += objBoxShadow.blur + 'px ';
                if ($self.find(`#boxshadowInset${idSuffix}`).prop('checked')) {
                    shadowDOM += 'inset ';
                }
                targets.css({
                    'box-shadow': shadowDOM
                });
            },
            BoxShadowHoriLengthSlide: function (space, $parent, ref) {
                let refOK = false;
                if (ref && typeof ref['updateTargets'] === 'function') {
                    refOK = true;
                    ref['updateTargets']();
                    $parent = targets;
                }
                objBoxShadow.horizontal = space;
                if (refOK) {
                    ref.parentBoxShadow();
                }
            },
            BoxShadowVerticalLengthSlide: function (space, $parent, ref) {
                let refOK = false;
                if (ref && typeof ref['updateTargets'] === 'function') {
                    refOK = true;
                    ref['updateTargets']();
                    $parent = targets;
                }
                objBoxShadow.vertical = space;
                if (refOK) {
                    ref.parentBoxShadow();
                }
            },
            BoxShadowBlurSlide: function (space, $parent, ref) {
                let refOK = false;
                if (ref && typeof ref['updateTargets'] === 'function') {
                    refOK = true;
                    ref['updateTargets']();
                    $parent = targets;
                }
                objBoxShadow.blur = space;
                if (refOK) {
                    ref.parentBoxShadow();
                }
            },
            addEventListeners: function () {
                let self = this;
                $self.find(`#boxshadowInset${idSuffix}`).off().on('click', function () {
                    self.parentBoxShadow();
                });
                $self.find(`#ShowBoxShadowOption${idSuffix}`).off().on('click', function () {
                    if ($(this).is(':checked')) {
                        $boxShadowEffects.slideDown(400);
                        objBoxShadow.color = $self.find(`#shadowColor${idSuffix}`).css('background-color');
                        self.parentBoxShadow();
                    } else {
                        $boxShadowEffects.slideUp(400);
                        targets.css({
                            'box-shadow': ''
                        });
                    }
                });
                let colorPickerOption = ColorPickerOption({
                    renderCallback: function ($elm, toggled) {
                        let objColor = RenderCallBackColor(this);
                        objBoxShadow.color = objColor.bgColor;
                        self.parentBoxShadow();
                    }
                });
                $self.find(`#shadowColor${idSuffix}`).colorPicker(colorPickerOption);
                let $boxShadowMinMax = $self.find(`#boxShadowMinMax${idSuffix}`);
                let horiMaxLen = parseInt($boxShadowMinMax.attr('data-hori-max'));
                let horiMinLen = parseInt($boxShadowMinMax.attr('data-hori-min'));
                let vertiMaxLen = parseInt($boxShadowMinMax.attr('data-verti-max'));
                let vertiMinLen = parseInt($boxShadowMinMax.attr('data-verti-min'));
                let blurMaxLen = parseInt($boxShadowMinMax.attr('data-blur-max'));
                let blurMinLen = parseInt($boxShadowMinMax.attr('data-blur-min'));
                AdvanceSageSlider($self.find(`#${boxShadowSliderListLocal[0][0]}${idSuffix}`), $self.find(`#${boxShadowSliderListLocal[0][1]}${idSuffix}`), horiMinLen, horiMaxLen, horiLen, self['BoxShadowHoriLengthSlide'], targets, 'px', self);
                AdvanceSageSlider($self.find(`#${boxShadowSliderListLocal[1][0]}${idSuffix}`), $self.find(`#${boxShadowSliderListLocal[1][1]}${idSuffix}`), vertiMinLen, vertiMaxLen, verLen, self['BoxShadowVerticalLengthSlide'], targets, 'px', self);
                AdvanceSageSlider($self.find(`#${boxShadowSliderListLocal[2][0]}${idSuffix}`), $self.find(`#${boxShadowSliderListLocal[2][1]}${idSuffix}`), blurMinLen, blurMaxLen, blurRadius, self['BoxShadowBlurSlide'], targets, 'px', self);
            },
            init: function () {
                if (this.updateTargets()) { } else {
                    console.error("AdvanceBoxShadow => target does not exist");
                    return false;
                }
                boxShadowSliderListLocal = [
                    ['boxShadowHorizontalSlider', 'boxShadowHorizontalHandler', 'boxShadowHorizontal', 0],
                    ['boxShadowVerticalSlider', 'boxShadowVerticalHandler', 'boxShadowVertical', 0],
                    ['boxShadowBlurSlider', 'boxShadowBlurHandler', 'boxShadowBlur', 0]
                ];
                this.appendDOM();
                this.setup();
                this.addEventListeners();
            }
        };
        AdvanceBoxShadow.init();
    };
}(jQuery));
(function ($) {
    "use strict";
    $.fn.ManagePosition = function (o) {
        if (typeof o === 'undefined' || typeof o.targetParent === 'undefined') {
            console.error("ManagePosition => missing option: targetParent");
            return;
        }
        if (!(o.targetParent instanceof jQuery)) {
            console.error("ManagePosition => targetParent should be a jQuery object");
            return;
        }
        if (typeof o === 'undefined' || typeof o.targetElem === 'undefined') {
            console.error("ManagePosition => missing option: targetElem");
            return;
        }
        let $self = this,
            targetParent = o.targetParent,
            targets = UpdateTargets($(targetParent), o.targetElem, "Manage Position");
        targets = targets.target;
        let zPostion = {
            appendDOM: function () {
                let html = `<div class="field-row stElWrap col30-70">
                            <label class="fCol">Position</label>
                            <div class="fcol">
                            <span title="Send Back" class="iconSendBack btn btnSendBack">Send Back</span>
                            <span title="Bring Font" class="iconBringFront btn btnBringFront">Bring Font</span>
                            </div>
                             `;
                $self.html(html);
            },
            updatePostion: function (IsBack) {
                let preVal = targets.eq(0).attr('class').match(/zi-\d+/g);
                if (preVal != null) {
                    $.each(preVal, function (i, v) {
                        targets.removeClass(v);
                    });
                    preVal = parseInt(preVal[0].replace('zi-', ''));
                } else {
                    preVal = 0;
                }
                if (IsBack)
                    preVal -= 1;
                else
                    preVal += 1;
                if (preVal > 0 && preVal <= 9) {
                    $self.find('.btnSendBack').removeClass('disable');
                    $self.find('.btnBringFront').removeClass('disable');
                    targets.addClass('zi-' + preVal);
                } else if (preVal > 9) {
                    $self.find('.btnBringFront').addClass('disable');
                    targets.addClass('zi-9');
                } else {
                    $self.find('.btnSendBack').addClass('disable');
                }
            },
            addEventListeners: function () {
                let $this = this;
                if (targets.length == 0) {
                    console.error("ManagePosition => => target does not exists");
                    return;
                } else {
                    $self.find('.btnBringFront').off('click').on('click', function () {
                        $this.updatePostion(false);
                    });
                    $self.find('.btnSendBack').off('click').on('click', function () {
                        $this.updatePostion(true);
                    });
                }
            },
            init: function () {
                this.appendDOM();
                this.addEventListeners();
            }
        };
        zPostion.init();
    };
}(jQuery));
(function ($) {
    "use strict";
    $.fn.AdvanceVisibility = function (o) {
        if (typeof o === 'undefined' || typeof o.targetParent === 'undefined') {
            console.error("AdvanceVisibility => missing option: targetParent");
            return;
        }
        if (!(o.targetParent instanceof jQuery)) {
            console.error("AdvanceVisibility => targetParent should be a jQuery object");
            return;
        }
        if (typeof o === 'undefined' || typeof o.targetElem === 'undefined') {
            console.error("AdvanceVisibility => missing option: targetElem");
            return;
        }
        let $self = this,
            label = 'Visibility',
            targetParent = o.targetParent,
            targetElem = o.targetElem,
            targets = $(targetParent).find(targetElem),
            callbackFunc = false,
            showCls = 'Dib',
            idSuffix = '_' + Math.floor((Math.random() * 1000) + 100);
        if (typeof o.label !== 'undefined') {
            label = o.label;
        }
        if (typeof o.showCls !== 'undefined') {
            showCls = o.showCls;
        }
        if (typeof o.callbackFunc === 'function') {
            callbackFunc = o.callbackFunc;
        }
        let AdvanceVisibility = {
            appendDOM: function () {
                let dom = `<div class="field-row stElWrap col80-20" data-opt="visibility">
                                <label class="fCol">${label}</label>
                                <span class="fCol toggle_btn">
                                    <input id="deviceVisibility${idSuffix}" name="enable visibility" type="checkbox" />
                                    <label for="deviceVisibility${idSuffix}" class ="tgl_slider"></label>
                                </span>
                            </div>`;
                $self.html(dom);

            },
            addEventListeners: function () {
                let fld = $self.find(`#deviceVisibility${idSuffix}`);
                let parentClasses = $(targets[0]).attr('class');
                let dAlpha = DeviceAlpha();
                let regex = new RegExp('\\b' + dAlpha + 'Dn\\b', 'g');
                let visibilityClass = parentClasses.match(regex);
                if (visibilityClass !== null)
                    fld.prop('checked', false);
                else
                    fld.prop('checked', true);
                fld.off('click').on('click', function () {
                    dAlpha = DeviceAlpha();
                    let checked = $(this).is(':checked');
                    if (checked) {
                        targets.removeClass(dAlpha + 'Dn').addClass(dAlpha + showCls);
                    } else {
                        targets.addClass(dAlpha + 'Dn').removeClass(dAlpha + showCls);
                    }
                    if (typeof callbackFunc === 'function') {
                        callbackFunc(checked);
                    }
                });
            },
            init: function () {
                this.appendDOM();
                this.addEventListeners();
            }
        };
        AdvanceVisibility.init();
    };
}(jQuery));
(function ($) {
    "use strict";
    $.fn.AdvanceItemsPerRow = function (o) {
        if (typeof o === 'undefined' || typeof o.targetParent === 'undefined') {
            console.error("AdvanceItemsPerRow => missing option: targetParent");
            return;
        }
        if (!(o.targetParent instanceof jQuery)) {
            console.error("AdvanceItemsPerRow => targetParent should be a jQuery object");
            return;
        }
        if (typeof o === 'undefined' || typeof o.targetElem === 'undefined') {
            console.error("AdvanceItemsPerRow => missing option: targetElem");
            return;
        }
        let $self = this,
            label = 'Items per row',
            targetParent = o.targetParent,
            targetElem = o.targetElem,
            targets = $(targetParent).find(targetElem),
            idSuffix = '_' + Math.floor((Math.random() * 1000) + 100);
        if (typeof o.label !== 'undefined') {
            label = o.label;
        }
        let ItemsPerRow = {
            appendDOM: function () {
                let dom = `<div class="field-row stElWrap col50-50">
                        <label class ="fCol">${label}</label>
                        <span class="select__box fCol">
                            <select id="ItemPerRow${idSuffix}">
                                <option value="100">1</option>
                                <option value="50">2</option>
                                <option value="33">3</option>
                                <option value="25">4</option>
                                <option value="20">5</option>
                            </select>
                        </span>
                    </div>`;
                $self.html(dom);
            },
            addEventListeners: function () {
                let fld = $self.find(`#ItemPerRow${idSuffix}`);
                let parentClasses = $(targets[0]).attr('class');
                let dAlpha = DeviceAlpha();
                let regex = new RegExp('\\b' + dAlpha + 'sfCol_[0-9]{1,3}\\b', 'g');
                let itemsperrow = parentClasses.match(regex);
                if (itemsperrow !== null) {
                    let width = GetValueByClassName($(targets[0]), 'sfCol_[0-9]{1,3}', 'sfCol_');
                    fld.val(width);
                } else
                    fld.val(100);
                fld.off('change').on('change', function () {
                    dAlpha = DeviceAlpha();
                    targets.removeClass(dAlpha + 'Dn').addClass(dAlpha + 'Dib');
                    let changeVal = $(this).val();
                    ReplaceClassByPattern(targets, 'sfCol_[0-9]{1,3}', 'sfCol_' + changeVal);
                    if (typeof o.callback === 'function') {
                        o.callback(fld.find("option:selected").text()); //
                    }
                });
            },
            init: function () {
                this.appendDOM();
                this.addEventListeners();
            }
        };
        ItemsPerRow.init();
    };
}(jQuery));
//-------------------------------overlay----------------------------------------------------
(function ($) {
    "use strict";
    $.fn.AdvanceOverLayout = function (o) {
        if (typeof o === 'undefined' || typeof o.targetParent === 'undefined') {
            console.error("AdvanceOverLayout => misssing option:targetParent");
            return;
        }
        if (!(o.targetParent instanceof jQuery)) {
            console.error("AdvanceOverLayout=>targetParent should be a jQuery object");
            return;
        }
        if (typeof o === 'undefined' || typeof o.targetElem === 'undefined') {
            console.error("AdvanceOverLayout=>missing option:targetElement");
            return;
        }
        if (typeof o.options === 'undefined') {
            console.error("AdvanceDimension => missing option: targetElem");
            return;
        }
        let $self = this,
            $SettingDOM = "",
            $overLayclass = `<div class="overLay ${o.targetElem}" style="display:none" data-effectType="fade" data-effectsize="100"><div class='overlayStyle'><h1><a href='http://www.google.com'></a></h1></div></div>`,
            $overlayStyleOptions = "",
            $SettingSliderDOM = "",
            //   idSuffix = '_' + Math.floor((Math.random() * 1000) + 100),
            targetParent = o.targetParent;
        let AdvanceOverLayout = {
            updateTargets: function () {
                targets = $(targetParent);
                if (targets.length == 0) {
                    console.error("AdvanceOverEffect => target does not exists");
                    return false;
                }
                return true;
            },
            appendSettingDom: function () {
                $SettingDOM += CreateCheckboxDOM('Activate Over Layout', 'ShowOverLayoutEffectOption', 'ShowOverLayoutEffectOption');
                $SettingDOM += `<div class="field-row stElWrap contentPosition col50-50" style="display:none"><label class="fCol">Content Position</label><span class="fCol TxAl-r select__box"><select class="slcOverLayout"></select></span></div>`;
                $SettingDOM += `<div class="field-row stElWrap sliderEffectControl col100" style="display:none">
                                <span class="range__slider fCol">
                                <div id="effectControlSlider">
                                <div id="effectControlHandle" class="ui-slider-handle" title="Manage Effect Size">0</div>
                                </div></span>
                                </div>`;
                for (let i = 0; i < o.options.length; i++) {
                    $overlayStyleOptions += `<option value=${o.options[i]}>${o.options[i]}</option>`
                }
                $self.html($SettingDOM);
                $('.slcOverLayout').html($overlayStyleOptions);
            },
            clearStyle: function () {
                $(targetParent).find('.overLay').removeAttr('style');
            },
            manageStyle: function (effect) {
                AdvanceOverLayout.clearStyle();
                switch (effect.toLowerCase()) {
                    case 'fade':
                        $(targetParent).find('.overLay').css({
                            'border-radius': '10px',
                            'z-index': '2',
                            'display': 'none',
                            'position': 'absolute',
                            'background-color': 'rgba(0, 0, 0)',
                            'opacity': '0.7',
                            'top': '0%',
                            'bottom': '0%',
                            'left': '0%',
                            'right': '0%'
                        }, 'slow');
                        break;
                    case 'zoom-in':
                        $(targetParent).find('.overLay').css({
                            'border-radius': '10px',
                            'z-index': '2',
                            'display': 'none',
                            'position': 'absolute',
                            'background-color': 'rgba(0, 0, 0);',
                            'opacity': '0.7',
                            'top': '5%',
                            'bottom': '5%',
                            'left': '5%',
                            'right': '5%'
                        });
                        break;
                    case 'zoom-out':
                        $(targetParent).find('.overLay').css({
                            'border-radius': '10px',
                            "z-index": '2',
                            'display': 'none',
                            'position': 'absolute',
                            'background-color': 'rgba(0, 0, 0);',
                            'opacity': '0.7',
                            'top': '0%',
                            'bottom': '0%',
                            'left': '0%',
                            'right': '0%'
                        });
                        break;
                    case 'sweep-up':
                        $(targetParent).find('.overLay').css({
                            'border-radius': '10px',
                            'z-index': '2',
                            'display': 'none',
                            'position': 'absolute',
                            'background-color': 'rgba(0, 0, 0);',
                            'opacity': '0.7',
                            'bottom': '0%',
                            'width': '100%'
                        });
                        break;
                    case 'sweep-down':
                        $(targetParent).find('.overLay').css({
                            'border-radius': '10px',
                            'z-index': '2',
                            'display': 'none',
                            'position': 'absolute',
                            'background-color': 'rgba(0, 0, 0);',
                            'opacity': '0.7',
                            'top': '0%',
                            'width': '100%'
                        });
                        break;
                    case 'sweep-right':
                        $(targetParent).find('.overLay').css({
                            'border-radius': '10px',
                            'z-index': '2',
                            'display': 'none',
                            'position': 'absolute',
                            'background-color': 'rgba(0, 0, 0);',
                            'opacity': '0.7',
                            'top': '0%',
                            'height': '100%',
                            'left': '0%'
                        });
                        break;
                    case 'sweep-left':
                        $(targetParent).find('.overLay').css({
                            'border-radius': '10px',
                            'z-index': '2',
                            'display': 'none',
                            'position': 'absolute',
                            'background-color': 'rgba(0, 0, 0);',
                            'opacity': '0.7',
                            'top': '0px',
                            'right': '0%',
                            'height': '100%'
                        });
                        break;
                }
            },
            hoverInAnimate: function (effect, index) {
                let $overLayEffectSize = $(targetParent).find('.overLay').eq(index).attr('data-effectsize');
                switch (effect.toLowerCase()) {
                    case 'fade':
                        $(targetParent).find('.overLay').eq(index).fadeIn(300)
                        break;
                    case 'zoom-in':
                        $(targetParent).find('.overLay').eq(index).stop().animate({
                            'border-radius': '10px',
                            'opacity': '0.7',
                            'display': 'none',
                            'position': 'absolute',
                            'background-color': 'background-color: rgba(0, 0, 0);',
                            'opacity': '0.7',
                            'top': '0%',
                            'bottom': '0%',
                            'left': '0%',
                            'right': '0%'
                        }, 300);
                        break;
                    case 'zoom-out':
                        $(targetParent).find('.overLay').eq(index).stop().animate({
                            'top': '5%',
                            'bottom': '5%',
                            'opacity': '0.7',
                            'left': '5%',
                            'right': '5%'
                        }, 300);
                        break;
                    case 'sweep-up':
                        $(targetParent).find('.overLay').eq(index).stop().animate({
                            'top': (100 - $overLayEffectSize) + '%',
                            'opacity': '0.7'
                        }, 300);
                        break;
                    case 'sweep-down':
                        $(targetParent).find('.overLay').eq(index).stop().animate({
                            'bottom': (100 - $overLayEffectSize) + '%',
                            'opacity': '0.7'
                        }, 300);
                        break;
                    case 'sweep-right':
                        $(targetParent).find('.overLay').eq(index).stop().animate({
                            'right': (100 - $overLayEffectSize) + '%',
                            'opactiy': '0.7'
                        }, 300);
                        break;
                    case 'sweep-left':
                        $(targetParent).find('.overLay').eq(index).stop().animate({
                            'left': (100 - $overLayEffectSize) + '%'
                        }, 300);
                        break;
                }
            },

            hoverOutAnimate: function (effect, index) {
                let $overLayEffectSize = $(targetParent).find('.overLay').eq(index).attr('data-effectsize');
                switch (effect.toLowerCase()) {
                    case 'fade':
                        $(targetParent).find('.overLay').eq(index).fadeOut(300)
                        break;
                    case 'zoom-in':
                        $(targetParent).find('.overLay').eq(index).stop().animate({
                            'top': '5%',
                            'bottom': '5%',
                            'opacity': '0.7',
                            'left': '5%',
                            'right': '5%'
                        }, 300);
                        break;
                    case 'zoom-out':
                        $(targetParent).find('.overLay').eq(index).stop().animate({
                            'top': '0%',
                            'bottom': '0%',
                            'opactiy': '0.7',
                            'left': '0%',
                            'right': '0%'
                        }, 300);
                        break;
                    case 'sweep-up':
                        $(targetParent).find('.overLay').eq(index).stop().animate({
                            'top': '100%',
                            'opacity': '0.7'
                        }, 300);
                        break;
                    case 'sweep-down':
                        $(targetParent).find('.overLay').eq(index).stop().animate({
                            'bottom': '100%',
                            'opacity': '0.7'
                        }, 300);
                        break;
                    case 'sweep-right':
                        $(targetParent).find('.overLay').eq(index).stop().animate({
                            'right': '100%',
                            'opacity': '0.7'
                        }, 300);
                        break;
                    case 'sweep-left':
                        $(targetParent).find('.overLay').eq(index).stop().animate({
                            'left': '100%',
                            'opacity': '0.7'
                        }, 300);
                        break;
                }
            },

            overLayForSingleEffect: function () {
                let $hasOverlay = $(targetParent).attr('data-overlay');
                if (typeof ($hasOverlay) == 'undefined' || $hasOverlay == '0') {
                    $(targetParent).append($overLayclass);
                }
                $(targetParent).attr('data-overlay', '1');
                AdvanceOverLayout.manageStyle(o.options[0]);
                $(targetParent).find('.overLay').attr('data-effectType', o.options[0]);
                $(targetParent).find('.overLay').attr('data-effectsize', o.finalPosition);
            },

            overLayoutEvents: function () {
                let $hasOverlay = $(targetParent).attr('data-overlay');
                if (typeof ($hasOverlay) == 'undefined' || $hasOverlay == '0') {
                    $('#ShowOverLayoutEffectOption').prop('checked', false);
                } else {
                    $('#ShowOverLayoutEffectOption').prop('checked', true);
                    $('.contentPosition').fadeIn(500);
                    let $effectType = $(targetParent).find('.overLay').attr('data-effecttype');
                    if ($effectType == 'Sweep-Up' || $effectType == 'Sweep-Down' || $effectType == 'Sweep-Right' || $effectType == 'Sweep-Left') {
                        $('.sliderEffectControl').fadeIn(500);
                    }
                }
                $('#ShowOverLayoutEffectOption').off('click').on('click', function () {
                    if ($(this).is(':checked')) {
                        if (typeof ($hasOverlay) == 'undefined' || $hasOverlay == '0') {
                            $(targetParent).append($overLayclass);
                        }
                        $('.contentPosition').fadeIn(500);
                        $('.slcOverLayout').trigger('change');
                        $(targetParent).attr('data-overlay', '1');
                    } else {
                        $(targetParent).off('mouseover mouseleave');
                        $('.contentPosition').fadeOut(500);
                        $('.sliderEffectControl').fadeOut(500);;
                        $(targetParent.find('.overLay')).remove();
                        $(targetParent).attr('data-overlay', '0');
                    }
                });
                let $effectSize = '';
                if (targetParent.find('.overLay').length === 0) {
                    $effectSize = '100'
                } else {
                    $effectSize = $(targetParent).find('.oveLay').attr('data-effectsize');
                }

                function effectSizeSlider(space) {
                    $(targetParent).find('.overLay').attr('data-effectsize', space);
                }
                AdvanceSageSlider($('#effectControlSlider'), $('#effectControlHandle'), 20, 100, $effectSize, effectSizeSlider, targetParent, '%');

                $('.slcOverLayout').val($(targetParent).find('.overLay').attr('data-effecttype'))
                $('.slcOverLayout').off().on('change', function () {
                    let $overlayoutStyle = $(this).val();
                    if ($overlayoutStyle === 'Sweep-Up' || $overlayoutStyle === 'Sweep-Down' || $overlayoutStyle === 'Sweep-Right' || $overlayoutStyle === 'Sweep-Left') {
                        $('.sliderEffectControl').fadeIn(500);
                    } else {
                        $('.sliderEffectControl').fadeOut(500);
                    }
                    $(targetParent).find('.overLay').attr('data-effectType', $overlayoutStyle)
                    AdvanceOverLayout.manageStyle($overlayoutStyle);
                    AdvanceOverLayout.onComponentHover();
                });
            },

            onComponentHover: function () {
                let $overEffect = "";
                $(targetParent).off('mouseover mouseleave').on('mouseover mouseleave', function (e) {
                    if (e.type === 'mouseover') {
                        let $parentIndex = $(targetParent).index(this);
                        if ($('.slcOverLayout').val() !== 'Fade') {
                            $(targetParent).find('.overLay').eq($parentIndex).css({
                                'display': 'block'
                            });
                        }
                        $overEffect = $(targetParent).find('.overLay').attr('data-effectType');
                        AdvanceOverLayout.hoverInAnimate($overEffect, $parentIndex);
                    } else if (e.type === 'mouseleave') {
                        let $parentIndex = $(targetParent).index(this);
                        AdvanceOverLayout.hoverOutAnimate($overEffect, $parentIndex);
                        $(targetParent.find('.overLay')).fadeOut('fast');
                    }
                });
            },
            init: function () {
                if (o.options.length === 1) {
                    this.overLayForSingleEffect();
                    this.onComponentHover();
                } else {
                    this.appendSettingDom();
                    this.overLayoutEvents();
                }
            },
        }
        AdvanceOverLayout.init();
    }
}(jQuery));
//-----------------------overlay--------------------------
(function ($) {
    "use strict";
    $.fn.AdvanceHoverEffect = function (o) {
        if (typeof o === 'undefined' || typeof o.targetParent === 'undefined') {
            console.error("AdvanceHoverEffect => missing option: targetParent");
            return;
        }
        if (!(o.targetParent instanceof jQuery)) {
            console.error("AdvanceHoverEffect => targetParent should be a jQuery object");
            return;
        }
        if (typeof o === 'undefined' || typeof o.targetElem === 'undefined') {
            console.error("AdvanceHoverEffect => missing option: targetElem");
            return;
        }
        let $self = this,
            targetParent = o.targetParent,
            targetElem = o.targetElem,
            targets = $(targetParent).find(targetElem),
            idSuffix = '_' + Math.floor((Math.random() * 1000) + 100),
            $parent = $(targets[0]),
            options = {
                shadow: "on",
                border: {
                    "max": 20,
                    "min": 0,
                    "times": 1,
                    "position": ["all", "top", "right", "bottom", "left"],
                },
                zoom: "on"
            };
        let currentHoverEffect = {
            "bg": "none",
            "font": "#000",
            "box": {
                "on": "off",
                "hl": "0px",
                "vl": "0px",
                "br": "0px",
                "c": "#000",
                "i": "false",
            },
            "border": {
                "on": "none",
                "top": "0",
                "right": "0",
                "bottom": "0",
                "left": "0",
                "tc": "#000",
                "rc": "#000",
                "bc": "#000",
                "lc": "#000"
            },
            "zoom": "10",
            "delay": 0
        };
        let objBoxShadow = {
            'inset': '',
            'horizontal': '0',
            'vertical': '0',
            'blur': '0',
            'color': '#000',
        };
        let boxShadowEffectSliderListLocal = [];
        let borderHoverSliderListLocal = [];
        if (typeof o.options !== 'undefined' && o.options) {
            options = $.extend(options, o.options);
        }
        let hasbg = false;
        let AdvanceHoverEffect = {
            updateTargets: function () {
                let tar = UpdateTargets(targetParent, targetElem, 'AdvanceHoverEffect');
                targets = tar.target;
                return tar.exists;
            },
            appendSettingDom: function ($options) {
                let hoverDOM = '';
                hoverDOM += CreateCheckboxDOM('Activate Hover Effect', 'hoverEffectOption', 'hoverEffectOption');
                hoverDOM += '<div class="field-row" id="hoverEffectOptionWrap" style="display:none;">';
                let colorEffect = $options["color"];
                if (typeof (colorEffect) !== "undefined" && colorEffect.length > 0) {
                    let colorLength = colorEffect.length;
                    for (var i = 0; i < colorLength; i++) {
                        switch (colorEffect[i].toLowerCase()) {
                            case 'background':
                                currentHoverEffect.bg = "rgba(204, 204, 204, 0)";
                                hoverDOM += CreateColorPickerDOM('Background Color', 'hoverBGColor', 'hoverColor');
                                hasbg = true;
                                break;
                            case 'text':
                                hoverDOM += CreateColorPickerDOM('Text Color', 'hoverTextColor', 'hoverColor');
                        }
                    }
                }
                let showShadow = $options["shadow"];
                if (typeof (showShadow) !== "undefined" && showShadow === "on") {
                    hoverDOM += this.GeneralHoverEffectBoxShadowDOM($options);
                }
                let showHover = $options["border"];
                if (typeof (showHover) !== "undefined") {
                    hoverDOM += this.GeneralBorderHoverDOM($options);
                }
                let showZoom = $options["zoom"];
                if (typeof (showZoom) !== "undefined" && showZoom === "on") {
                    hoverDOM += CreateSliderDOM('HoverZoomSlider', 'HoverZoomSliderHandle', 'Zoom');
                }
                let zoomEffectSelectDOM = DOMCreate('label', 'Zoom Effect', 'fCol') +
                    DOMCreate('div', DOMCreate('span', SelectDOMCreate('hoverZoomEffect', 'hoverZoomEffect', [
                        ['external', 'External'],
                        ['internal', 'Internal']
                    ]), 'select__box'), 'fCol TxAl-r');
                hoverDOM += FieldRowDOMCreateCol50_50(zoomEffectSelectDOM);
                hoverDOM += '</div>';
                hoverDOM = FieldRowDOMCreate(hoverDOM);
                hoverDOM = this.fixDomId(hoverDOM);
                $self.html(hoverDOM);
            },
            fixDomId: function (dom) {
                let ids = ['hoverBGColor', 'hoverTextColor', 'hoverEffectOption', 'hoverEffectOptionWrap', 'ShowBoxShadowEffectOption', 'boxShadowEffectHorizontalSlider',
                    'boxShadowEffectHorizontalHandler', 'boxShadowEffectVerticalSlider', 'boxShadowEffectVerticalHandler',
                    'boxShadowEffectBlurSlider', 'boxShadowEffectBlurHandler', 'shadowEffectColor', 'boxshadowEffectInset',
                    'boxShadowEffectMinMax', 'borderHoverWrapper', 'borderHoverStyle', 'bulkBorderHoverSlider',
                    'bulkBorderHoverHandler', 'bulkBorderHoverColor', 'borderHoverTopSlider', 'borderHoverTopHandler',
                    'topBorderHoverColor', 'borderHoverRightSlider', 'borderHoverRightHandler', 'rightBorderHoverColor',
                    'borderHoverBottomSlider', 'borderHoverBottomHandler', 'bottomBorderHoverColor', 'borderHoverLeftSlider',
                    'borderHoverLeftHandler', 'leftBorderHoverColor', 'HoverZoomSlider', 'HoverZoomSliderHandle', 'hoverZoomEffect'
                ];
                let $dom = $(dom);
                for (let i = 0, j = ids.length; i < j; i++) {
                    $dom.find('#' + ids[i]).removeAttr('id').attr('id', ids[i] + idSuffix);
                }
                $dom.find("label[for='hoverEffectOption']").attr('for', 'hoverEffectOption' + idSuffix);
                $dom.find("label[for='ShowBoxShadowEffectOption']").attr('for', 'ShowBoxShadowEffectOption' + idSuffix);
                $dom.find("label[for='boxshadowEffectInset']").attr('for', 'boxshadowEffectInset' + idSuffix);
                return $dom[0];
            },
            GeneralHoverEffectBoxShadowDOM: function ($options) {
                let boxShadowDOM = '';
                //boxShadowDOM += CreateCheckboxDOM('Activate Box Shadow', 'ShowBoxShadowEffectOption', 'ShowBoxShadowShadowEffectOption');
                let sliderDOM = '';
                let boxOptions = Object.keys($options);
                let boxOptionslen = boxOptions.length;
                sliderDOM = CreateSliderDOM(boxShadowEffectSliderListLocal[0][0], boxShadowEffectSliderListLocal[0][1], 'Horizontal Length');
                sliderDOM += CreateSliderDOM(boxShadowEffectSliderListLocal[1][0], boxShadowEffectSliderListLocal[1][1], 'Vertical Length');
                sliderDOM += CreateSliderDOM(boxShadowEffectSliderListLocal[2][0], boxShadowEffectSliderListLocal[2][1], 'Blur Radius');
                sliderDOM += CreateColorPickerDOM('Shadow Color', 'shadowEffectColor', 'shadowEffectColor');
                sliderDOM += CreateCheckboxDOM('Inset', 'boxshadowEffectInset', 'boxshadowEffectInset');
                sliderDOM = DOMCreate('div', sliderDOM, 'boxShadowEffectWrappers', '', ['style="display:none;"']);
                let horiMaxLen = 100,
                    horiMinLen = -100;
                let vertiMaxLen = 100,
                    vertiMinLen = -100;
                let blurMaxLen = 100,
                    blurMinLen = 0;

                sliderDOM += '<input type="hidden" id="boxShadowEffectMinMax" data-hori-min="' + horiMinLen;
                sliderDOM += '" data-hori-max="' + horiMaxLen;
                sliderDOM += '" data-verti-min="' + vertiMinLen + '" data-verti-max="' + vertiMaxLen;
                sliderDOM += '" data-blur-min="' + blurMinLen + '" data-blur-max="' + blurMaxLen + '" />';
                boxShadowDOM += sliderDOM;
                boxShadowDOM = FieldRowDOMCreate(boxShadowDOM);
                return boxShadowDOM;
            },
            GeneralBorderHoverDOM: function ($border) {
                let borderHoverDOM = "";
                if (typeof ($border) !== 'undefined') {
                    let $options = $border['border'];
                    if (typeof ($options) !== 'undefined') {
                        borderHoverDOM += DOMCreate('h4', 'Border', '', 'borderHoverWrapper', ['data-min="' + $options['min'] + '"', 'data-max="' + $options['max'] + '"', "style=display:none;", 'data-times="' + $options['times'] + '"']);
                        let selectDOM = DOMCreate('label', 'Border Hover Style', 'fCol') +
                            DOMCreate('div', DOMCreate('span', SelectDOMCreate('borderHoverStyle', 'BorderHoverStyle', [
                                ['none', 'None'],
                                ['solid', 'Solid'],
                                ['dashed', 'Dashed'],
                                ['dotted', 'Dotted'],
                                ['double', 'Double']
                            ]), 'select__box'), 'fCol TxAl-r');
                        borderHoverDOM += FieldRowDOMCreateCol50_50(selectDOM);
                        let borderHoverSliderCollection = '';
                        let positionList = $options['position'];
                        if (typeof (positionList) !== "undefined") {
                            let positionLength = positionList.length;
                            for (var i = 0; i < positionLength; i++) {
                                switch (positionList[i].toLowerCase()) {
                                    case 'all':
                                        borderHoverSliderCollection += CreateSliderWithColorDOM(borderHoverSliderListLocal[0][0], borderHoverSliderListLocal[0][1], 'Bulk Border', borderHoverSliderListLocal[0][5], 'borderHoverColorChoosePlg');
                                        borderHoverSliderListLocal[0][2] = true;
                                        break;
                                    case 'top':
                                        borderHoverSliderCollection += CreateSliderWithColorDOM(borderHoverSliderListLocal[1][0], borderHoverSliderListLocal[1][1], 'Top Border', borderHoverSliderListLocal[1][5], 'borderHoverColorChoosePlg');
                                        borderHoverSliderListLocal[1][2] = true;
                                        break;
                                    case 'right':
                                        borderHoverSliderCollection += CreateSliderWithColorDOM(borderHoverSliderListLocal[2][0], borderHoverSliderListLocal[2][1], 'Right Border', borderHoverSliderListLocal[2][5], 'borderHoverColorChoosePlg');
                                        borderHoverSliderListLocal[2][2] = true;
                                        break;
                                    case 'bottom':
                                        borderHoverSliderCollection += CreateSliderWithColorDOM(borderHoverSliderListLocal[3][0], borderHoverSliderListLocal[3][1], 'Bottom Border', borderHoverSliderListLocal[3][5], 'borderHoverColorChoosePlg');
                                        borderHoverSliderListLocal[3][2] = true;
                                        break;
                                    case 'left':
                                        borderHoverSliderCollection += CreateSliderWithColorDOM(borderHoverSliderListLocal[4][0], borderHoverSliderListLocal[4][1], 'Left Border', borderHoverSliderListLocal[4][5], 'borderHoverColorChoosePlg');
                                        borderHoverSliderListLocal[4][2] = true;
                                        break;
                                }
                            }
                            borderHoverSliderCollection = DOMCreate('div', borderHoverSliderCollection, 'borderHoverSliderCollection', '', ['style="display:none;"']);
                            borderHoverDOM = FieldRowDOMCreate(borderHoverDOM + borderHoverSliderCollection);
                        }
                    }
                }
                return borderHoverDOM;
            },
            initEvents: function () {
                let self = this;
                this.GeneralBoxShadowEffectEvents();
                this.GeneralBorderHoverEvents();
                $self.find(`#hoverEffectOption${idSuffix}`).off('click').on('click', function () {
                    self.updateTargets();
                    if ($(this).is(':checked')) {
                        $self.find(`#hoverEffectOptionWrap${idSuffix}`).show();
                        targets.addClass('hovered');
                        self.MouseOverEffect();
                        self.UpdateEffect();
                        self.InitializeEffectValue();
                    } else {
                        $self.find(`#hoverEffectOptionWrap${idSuffix}`).hide();
                        self.RemoveMouseOverEffect(self);
                    }
                });
                let colorPickerOption = ColorPickerOption({
                    renderCallback: function ($elm, toggled) {
                        let objColor = RenderCallBackColor(this);
                        let colorPickerID = $elm.attr('id');
                        switch (colorPickerID) {
                            case 'hoverBGColor' + idSuffix:
                                currentHoverEffect.bg = objColor.bgColor;
                                break;
                            case 'hoverTextColor' + idSuffix:
                                currentHoverEffect.font = objColor.bgColor;
                                break;
                        }
                        self.UpdateEffect();
                    }
                });
                $self.find('.hoverColor').colorPicker(colorPickerOption);

                AdvanceSageSlider($self.find(`#HoverZoomSlider${idSuffix}`), $self.find(`#HoverZoomSliderHandle${idSuffix}`), 1, 19, 10, self['OnZoom'], $parent, '', self);
                if ($parent.hasClass('hovered')) {
                    self.InitializeEffectValue();
                    $self.find(`#hoverEffectOption${idSuffix}`).prop('checked', true);
                    $self.find(`#hoverEffectOptionWrap${idSuffix}`).show();
                    self.MouseOverEffect();
                } else {
                    $self.find(`#hoverEffectOption${idSuffix}`).prop('checked', false);
                    //self.RemoveMouseOverEffect(self);
                }
            },
            RemoveMouseOverEffect: function (self) {
                self.updateTargets();
                if (typeof (targets) !== "undefined") {
                    if (targets.hasClass('hovered')) {
                        targets.off('mouseover').off('mouseout').removeClass('hovered');
                    } else if (targets.find('.hovered').length > 0) {
                        let $selected = targets.find('.hovered');
                        $selected[0].off('mouseover').off('mouseout').removeClass('hovered');
                        $selected.each(function (i, v) {
                            v.off('mouseover').off('mouseout').removeClass('hovered');
                        });
                    }
                } else
                    $self.find('.hovered').off('mouseover').off('mouseout').removeClass('hovered');
            },
            MouseOverEffect: function () {
                let self = this;
                self.updateTargets();
                let $selected = $self.find('.hovered');
                if (typeof (targets) !== "undefined") {
                    if (targets.hasClass('hovered'))
                        $selected = targets;
                    else if (targets.find('.hovered').length > 0)
                        $selected = targets.find('.hovered').eq(0);
                }
                $selected.off('mouseout').on('mouseout', function () {
                    $(this).attr('hovered-mousein', 'out');
                    self.ResetPreviousEffect($(this));
                });
                $selected.off('mouseover').on('mouseover', function () {
                    $(this).attr('hovered-mousein', 'in');
                    self.ApplyEffects($(this));
                });
            },
            ResetPreviousEffect: function ($this) {
                let prevEff = $this.attr('data-prevhovereffect');
                if (typeof prevEff === 'undefined') {
                    return;
                }
                let hoverEffect = JSON.parse(prevEff);
                if (hasbg) {
                    $this.css({
                        'background-color': hoverEffect.bg
                    });
                    if ($this.find('.onhoverbgcolor').length > 0) {
                        $this.find('.onhoverbgcolor').css({
                            'background-color': hoverEffect.bg
                        });
                    } else {
                        $this.css({
                            'background-color': 'none'
                        });
                    }
                }
                if ($this.find('.onhovercolor').length > 0) {
                    $this.find('.onhovercolor').css({
                        'color': hoverEffect.font
                    });
                } else {
                    $this.css({
                        'color': hoverEffect.font
                    });
                }

                $this.removeAttr('data-prevhovereffect');
                let zoomClass = $this.attr('class').match(/scale-[0-1]-[0-9]/g);
                if (zoomClass !== null) {
                    $this.removeClass(zoomClass[0]);
                }
                if (typeof (hoverEffect.zoom) !== "undefined") {
                    $this.addClass(hoverEffect.zoom);
                }
                let $shadow = hoverEffect.box;
                if ($shadow.on === "on") {
                    let shadowDOM = '';
                    shadowDOM += $shadow.c;
                    shadowDOM += $shadow.hl;
                    shadowDOM += $shadow.vl;
                    shadowDOM += $shadow.br;
                    shadowDOM += $shadow.i;
                    $this.css({
                        'box-shadow': shadowDOM
                    });
                } else {
                    $this.css({
                        'box-shadow': hoverEffect.boxShadowStyle
                    });
                }
                let $border = hoverEffect.border;
                $this.css({
                    "border-style": $border.on,
                    "border-top-width": $border.top,
                    "border-right-width": $border.right,
                    "border-bottom-width": $border.bottom,
                    "border-left-width": $border.left,
                    'border-top-color': $border.tc,
                    'border-right-color': $border.rc,
                    'border-bottom-color': $border.bc,
                    'border-left-color': $border.lc
                });
            },
            ApplyEffects: function ($this) {
                let self = this;
                let boxShadowStyle = $this.css('box-shadow');
                let previousdata = {
                    "bg": $this.css('background-color'),
                    "font": "#000",
                    "box": {
                        "on": "off",
                        "hl": "0px",
                        "vl": "1px",
                        "br": "5px",
                        "c": "#000",
                        "i": "false",
                    },
                    "boxShadowStyle": boxShadowStyle,
                    "border": {
                        "on": "off",
                        "top": "0",
                        "right": "0",
                        "bottom": "0",
                        "left": "0",
                        "tc": "#000",
                        "rc": "#000",
                        "bc": "#000",
                        "lc": "#000"
                    },
                    "zoom": null
                };
                let hoverEffect = JSON.parse($this.attr('data-hovereffect'));
                if (hasbg) {
                    if ($this.find('.onhoverbgcolor').length > 0) {
                        previousdata.bg = $this.find('.onhoverbgcolor').eq(0).css('background-color');
                        $this.find('.onhoverbgcolor').css({
                            'background-color': hoverEffect.bg
                        });
                    } else {
                        previousdata.bg = $this.css('background-color');
                        $this.css({
                            'background-color': hoverEffect.bg
                        });
                    }
                }
                if ($this.find('.onhovercolor').length > 0) {
                    previousdata.font = $this.find('.onhovercolor').eq(0).css('color');
                    $this.find('.onhovercolor').css({
                        'color': hoverEffect.font
                    });
                } else {
                    previousdata.font = $this.css('color');
                    $this.css({
                        'color': hoverEffect.font
                    });
                }
                let zoomClass = $this.attr('class').match(/scale-[0-1]-[0-9]/g);
                if (zoomClass !== null) {
                    $this.removeClass(zoomClass[0]);
                    previousdata.zoom = zoomClass[0];
                }
                let zoom = hoverEffect.zoom;
                $this.addClass('scale-' + parseInt(zoom / 10) + '-' + (zoom % 10));
                let $shadow = hoverEffect.box;

                let $border = hoverEffect.border;

                self.ParentBoxShadowEff($this, previousdata, $shadow);
                self.BorderOnHover($this, previousdata, $border);
                $this.attr('data-prevhovereffect', JSON2.stringify(previousdata));
            },
            BorderOnHover: function ($this, previousdata, $border) {
                previousdata.border.on = $this.css("border-top-style");
                previousdata.border.top = $this.css("border-top-width");
                previousdata.border.right = $this.css("border-right-width");
                previousdata.border.bottom = $this.css("border-bottom-width");
                previousdata.border.left = $this.css("border-left-width");

                previousdata.border.tc = $this.css('border-top-color');
                previousdata.border.rc = $this.css('border-right-color');
                previousdata.border.bc = $this.css('border-bottom-color');
                previousdata.border.lc = $this.css('border-left-color');

                if ($border.on !== "none") {
                    $this.css({
                        "border-style": $border.on,
                        "border-top-width": $border.top,
                        "border-right-width": $border.right,
                        "border-bottom-width": $border.bottom,
                        "border-left-width": $border.left,
                        'border-top-color': $border.tc,
                        'border-right-color': $border.rc,
                        'border-bottom-color': $border.bc,
                        'border-left-color': $border.lc
                    });
                }
            },
            ParentBoxShadowEff: function ($this, previousdata, $shadow) {
                //previousdata.box.on = "off";
                if ($this.attr('hovered-mousein') === "in")
                    previousdata.box.on = "off";
                let boxShadow = $this.css('box-shadow');
                if (typeof (boxShadow) !== "undefined" && boxShadow !== null && boxShadow !== 'none') {
                    //previousdata.box.on = "on";
                    let lenCol = boxShadow.match(/-?\d{1,3}px/g);
                    previousdata.box.hl = lenCol[0] + ' ';
                    previousdata.box.vl = lenCol[1] + ' ';
                    previousdata.box.br = lenCol[2] + ' ';
                    let inset = '';
                    let hasInset = boxShadow.match(/inset/);
                    if (hasInset !== null && hasInset.length > 0) {
                        inset = ' inset ';
                    }
                    previousdata.box.i = inset;
                    let spreadDistace = '';
                    if (lenCol.length == 4)
                        spreadDistace = lenCol[3];
                    let dropColor = boxShadow.replace(previousdata.box.hl, '')
                        .replace(previousdata.box.vl, '')
                        .replace(previousdata.box.br, '')
                        .replace(spreadDistace, '')
                        .replace('inset', '').trim();
                    if (dropColor.length > 0) {
                        previousdata.box.c = dropColor;
                    }
                }
                if ($shadow.on === "on") {
                    let shadowDOM = '';
                    shadowDOM += $shadow.c;
                    shadowDOM += $shadow.hl;
                    shadowDOM += $shadow.vl;
                    shadowDOM += $shadow.br;
                    shadowDOM += $shadow.i;
                    $this.css({
                        'box-shadow': shadowDOM
                    });
                }
            },
            InitializeEffectValue: function () {
                let self = this;
                let initHoverEffect = $parent.attr('data-hovereffect');
                if (typeof initHoverEffect === 'undefined' || !initHoverEffect) {
                    console.error("No hover effect data found.");
                    return;
                }
                initHoverEffect = JSON.parse(initHoverEffect);
                $self.find(`#hoverBGColor${idSuffix}`).css('background-color', initHoverEffect.bg);
                $self.find(`#hoverTextColor${idSuffix}`).css('background-color', initHoverEffect.font);
                let effectZoom = initHoverEffect.zoom;
                ChangeSliderValue($self.find(`#HoverZoomSlider${idSuffix}`), effectZoom);
                let shadowon = initHoverEffect.box.on;
                self.ZoomType(effectZoom);
                if (shadowon == "on") {
                    $self.find('.boxShadowEffectWrappers').show();
                    $self.find(`#ShowBoxShadowEffectOption${idSuffix}`).prop('checked', true);
                } else {
                    $self.find('.boxShadowEffectWrappers').hide();
                    $self.find(`#ShowBoxShadowEffectOption${idSuffix}`).prop('checked', false);
                }
            },
            ZoomType: function (val) {
                if (val > 10)
                    $(`#hoverZoomEffect${idSuffix}`).closest('.stElWrap ').removeClass('Dn');
                else $(`#hoverZoomEffect${idSuffix}`).closest('.stElWrap ').removeClass('Dn').addClass('Dn');
            },
            OnZoom: function (space, $par, ref) {
                currentHoverEffect.zoom = space;
                AdvanceHoverEffect.ZoomType(space);
                ref.UpdateEffect();
            },
            GeneralBorderHoverEvents: function () {
                let self = this;
                $self.find(`#borderHoverStyle${idSuffix}`).on('change', function () {
                    let style = $(this).val();
                    let borderHoverEfffect = {
                        "top": "0px",
                        "right": "0px",
                        "bottom": "0px",
                        "left": "0px"
                    };
                    if (style === 'none') {
                        $self.find('.borderHoverSliderCollection').hide();
                        for (var i = 0; i < 5; i++) {
                            $self.find(`#${borderHoverSliderListLocal[i][0]}${idSuffix}`).slider('value', 0);
                            $self.find(`#${borderHoverSliderListLocal[i][1]}${idSuffix}`).text(0);
                        }
                        currentHoverEffect.border.on = style;
                        currentHoverEffect.border.top = "0px";
                        currentHoverEffect.border.right = "0px";
                        currentHoverEffect.border.bottom = "0px";
                        currentHoverEffect.border.left = "0px";
                        self.UpdateEffect();
                    } else {
                        currentHoverEffect.border.on = style;
                        currentHoverEffect.border.top = "1px";
                        currentHoverEffect.border.right = "1px";
                        currentHoverEffect.border.bottom = "1px";
                        currentHoverEffect.border.left = "1px";
                        for (var i = 0; i < 5; i++) {
                            $self.find(`#${borderHoverSliderListLocal[i][0]}${idSuffix}`).slider('value', 1);
                            $self.find(`#${borderHoverSliderListLocal[i][1]}${idSuffix}`).text(1);
                        }
                        self.UpdateEffect();
                        $self.find('.borderHoverSliderCollection').show();
                    }
                });
                if ($parent.parent().hasClass('ofH'))
                    $self.find(`#hoverZoomEffect${idSuffix}`).val('internal')
                else $self.find(`#hoverZoomEffect${idSuffix}`).val('external');
                $self.find(`#hoverZoomEffect${idSuffix}`).off('change').on('change', function () {
                    if ($(this).val() === 'internal')
                        $parent.parent().removeClass('ofH').addClass('ofH');
                    else $parent.parent().removeClass('ofH');

                });
                let domHoverEffect = $parent.attr('data-hovereffect');
                if (typeof (domHoverEffect) !== "undefined" && domHoverEffect !== null && domHoverEffect !== 'none') {
                    domHoverEffect = JSON.parse($parent.attr('data-hovereffect'));
                    let borderStyle = domHoverEffect.border.on;
                    if (borderStyle.length == 0)
                        borderStyle = 'none';
                    $self.find(`#borderHoverStyle${idSuffix}`).val(borderStyle);
                    if (borderStyle == 'none') {
                        $self.find('.borderHoverSliderCollection').hide();
                    } else {
                        $self.find('.borderHoverSliderCollection').show();
                    }
                } else {
                    //domHoverEffect = hoverEffect;
                    domHoverEffect = {
                        "bg": "#ccc",
                        "font": "#000",
                        "box": {
                            "on": "off",
                            "hl": "0px",
                            "vl": "1px",
                            "br": "5px",
                            "c": "#000",
                            "i": "false",
                        },
                        "border": {
                            "on": "none",
                            "top": "0",
                            "right": "0",
                            "bottom": "0",
                            "left": "0",
                            "tc": "#000",
                            "rc": "#000",
                            "bc": "#000",
                            "lc": "#000"
                        },
                        "zoom": "10",
                        "delay": 0
                    };
                }
                let $borderWrapper = $self.find(`#borderHoverWrapper${idSuffix}`);
                self.LoadBorderHoverInitialValue($borderWrapper, domHoverEffect);
                if (typeof ($borderWrapper) !== "undefined" && typeof ($borderWrapper.attr('data-max')) !== 'undefined' && typeof ($borderWrapper.attr('data-min')) !== 'undefined') {
                    let maxValue = parseInt($borderWrapper.attr('data-max'));
                    let minValue = parseInt($borderWrapper.attr('data-min'));
                    for (var i = 0; i < 5; i++) {
                        if (borderHoverSliderListLocal[i][2]) {
                            AdvanceSageSlider($self.find(`#${borderHoverSliderListLocal[i][0]}${idSuffix}`), $self.find(`#${borderHoverSliderListLocal[i][1]}${idSuffix}`), minValue, maxValue, borderHoverSliderListLocal[i][4], self[borderHoverSliderListLocal[i][3]], $parent, 'px', self);
                        }
                    }
                }
                self.LoadBorderHoverColor(domHoverEffect);
                self.BorderColorEvents();
            },
            BorderColorEvents: function () {
                let self = this;
                let colorPickerOption = ColorPickerOption({
                    renderCallback: function ($elm, toggled) {
                        let objColor = RenderCallBackColor(this);
                        let colorPickerID = $elm.attr('id');
                        if (colorPickerID === borderHoverSliderListLocal[0][5] + idSuffix) {
                            currentHoverEffect.border.tc = objColor.bgColor;
                            currentHoverEffect.border.rc = objColor.bgColor;
                            currentHoverEffect.border.bc = objColor.bgColor;
                            currentHoverEffect.border.lc = objColor.bgColor;
                            $self.find(`#${borderHoverSliderListLocal[1][5]}${idSuffix}`).css('background-color', objColor.bgColor);
                            $self.find(`#${borderHoverSliderListLocal[2][5]}${idSuffix}`).css('background-color', objColor.bgColor);
                            $self.find(`#${borderHoverSliderListLocal[3][5]}${idSuffix}`).css('background-color', objColor.bgColor);
                            $self.find(`#${borderHoverSliderListLocal[4][5]}${idSuffix}`).css('background-color', objColor.bgColor);
                        } else if (colorPickerID === borderHoverSliderListLocal[1][5] + idSuffix) {
                            currentHoverEffect.border.tc = objColor.bgColor;
                        } else if (colorPickerID === borderHoverSliderListLocal[2][5] + idSuffix) {
                            currentHoverEffect.border.rc = objColor.bgColor;
                        } else if (colorPickerID === borderHoverSliderListLocal[3][5] + idSuffix) {
                            currentHoverEffect.border.bc = objColor.bgColor;
                        } else if (colorPickerID === borderHoverSliderListLocal[4][5] + idSuffix) {
                            currentHoverEffect.border.lc = objColor.bgColor;
                        }
                        self.UpdateEffect();
                    }
                });
                $self.find('.borderHoverColorChoosePlg').colorPicker(colorPickerOption);
            },
            LoadBorderHoverColor: function (domHoverEffect) {
                let borderTopColor = blackColor,
                    borderRightColor = blackColor,
                    borderBottomColor = blackColor,
                    borderLeftColor = blackColor;
                if (typeof (domHoverEffect) !== "undefined") {
                    borderTopColor = domHoverEffect.border.tc;
                    borderRightColor = domHoverEffect.border.rc;
                    borderBottomColor = domHoverEffect.border.bc;
                    borderLeftColor = domHoverEffect.border.lc;
                }
                $self.find(`#${borderHoverSliderListLocal[1][5]}${idSuffix}`).css('background-color', borderTopColor);
                $self.find(`#${borderHoverSliderListLocal[2][5]}${idSuffix}`).css('background-color', borderRightColor);
                $self.find(`#${borderHoverSliderListLocal[3][5]}${idSuffix}`).css('background-color', borderBottomColor);
                $self.find(`#${borderHoverSliderListLocal[4][5]}${idSuffix}`).css('background-color', borderLeftColor);
                if (borderTopColor === borderRightColor && borderBottomColor === borderLeftColor && borderTopColor === borderLeftColor)
                    $self.find(`#${borderHoverSliderListLocal[0][5]}${idSuffix}`).css('background-color', borderTopColor);
                else
                    $self.find(`#${borderHoverSliderListLocal[0][5]}${idSuffix}`).css('background-color', '#000');
            },
            LoadBorderHoverInitialValue: function ($borderWrapper, domHoverEffect) {
                let times = 1;
                if (typeof ($borderWrapper.attr('data-times')) !== 'undefined')
                    times = parseInt($borderWrapper.attr('data-times'));
                if (times == 0)
                    times = 1;

                let topWidth = 0,
                    rightWidth = 0,
                    bottomWidth = 0,
                    leftWidth = 0;
                if (typeof (domHoverEffect) !== "undefined") {
                    topWidth = domHoverEffect.border.top;
                    if (typeof (topWidth) != 'undefined')
                        topWidth = parseInt(topWidth);
                    topWidth = topWidth / times;
                }
                borderHoverSliderListLocal[1][4] = topWidth;

                if (typeof (domHoverEffect) !== "undefined") {
                    rightWidth = domHoverEffect.border.right;
                    if (typeof (rightWidth) != 'undefined')
                        rightWidth = parseInt(rightWidth);
                    rightWidth = rightWidth / times;
                }
                borderHoverSliderListLocal[2][4] = rightWidth;

                if (typeof (domHoverEffect) !== "undefined") {
                    bottomWidth = domHoverEffect.border.bottom;
                    if (typeof (bottomWidth) != 'undefined')
                        bottomWidth = parseInt(bottomWidth);
                    bottomWidth = bottomWidth / times;
                }
                borderHoverSliderListLocal[3][4] = bottomWidth;

                if (typeof (domHoverEffect) !== "undefined") {
                    leftWidth = domHoverEffect.border.left;
                    if (typeof (leftWidth) != 'undefined')
                        leftWidth = parseInt(leftWidth);
                    leftWidth = leftWidth / times;
                }
                borderHoverSliderListLocal[4][4] = leftWidth;

                if (borderHoverSliderListLocal[1][4] === borderHoverSliderListLocal[2][4] &&
                    borderHoverSliderListLocal[3][4] === borderHoverSliderListLocal[4][4] &&
                    borderHoverSliderListLocal[1][4] === borderHoverSliderListLocal[4][4])
                    borderHoverSliderListLocal[0][4] = borderHoverSliderListLocal[1][4];
            },
            GeneralBoxShadowEffectEvents: function () {
                let self = this;
                $self.find(`#boxshadowEffectInset${idSuffix}`).off().on('click', function () {
                    self.parentBoxShadow();
                });
                $self.find(`#ShowBoxShadowEffectOption${idSuffix}`).off().on('click', function () {
                    if ($(this).is(':checked')) {
                        $self.find('.boxShadowEffectWrappers').slideDown(400);
                        currentHoverEffect.box.on = "on";
                        self.parentBoxShadow();
                    } else {
                        $self.find('.boxShadowEffectWrappers').slideUp(400);
                        currentHoverEffect.box.on = "off";
                        self.parentBoxShadow();
                    }
                });

                let boxShadow = $parent.attr('data-hovereffect');
                $self.find(`#shadowEffectColor${idSuffix}`).css('background-color', '#000');
                let horiLen = 0;
                let verLen = 0;
                let blurRadius = 0;
                if (typeof (boxShadow) !== "undefined" && boxShadow !== null && boxShadow !== 'none') {
                    let initHoverEffect = JSON.parse($parent.attr('data-hovereffect'));
                    let $shadow = initHoverEffect.box;
                    horiLen = $shadow.hl;
                    verLen = $shadow.vl;
                    blurRadius = $shadow.br;
                    horiLen = parseInt(horiLen.replace('px', ''));
                    verLen = parseInt(verLen.replace('px', ''));
                    blurRadius = parseInt(blurRadius.replace('px', ''));
                    objBoxShadow.horizontal = horiLen;
                    objBoxShadow.vertical = verLen;
                    objBoxShadow.blur = blurRadius;
                    $self.find('.boxShadowEffectWrappers').show();
                    $self.find(`#ShowBoxShadowEffectOption${idSuffix}`).prop('checked', true);
                    $self.find(`#shadowEffectColor${idSuffix}`).css('background-color', $shadow.c);
                    let inset = $shadow.i;
                    if (inset == "true" || inset.trim() == "inset") {
                        $self.find(`#boxshadowEffectInset${idSuffix}`).prop('checked', true);
                    } else {
                        $self.find(`#boxshadowEffectInset${idSuffix}`).prop('checked', false);
                    }
                } else {
                    $self.find('.boxShadowEffectWrappers').hide();
                    $self.find(`#ShowBoxShadowEffectOption${idSuffix}`).prop('checked', false);
                    $self.find(`#shadowEffectColor${idSuffix}`).css('background-color', '#000');
                }
                let horiMaxLen = parseInt($self.find(`#boxShadowEffectMinMax${idSuffix}`).attr('data-hori-max'));
                let horiMinLen = parseInt($self.find(`#boxShadowEffectMinMax${idSuffix}`).attr('data-hori-min'));
                let vertiMaxLen = parseInt($self.find(`#boxShadowEffectMinMax${idSuffix}`).attr('data-verti-max'));
                let vertiMinLen = parseInt($self.find(`#boxShadowEffectMinMax${idSuffix}`).attr('data-verti-min'));
                let blurMaxLen = parseInt($self.find(`#boxShadowEffectMinMax${idSuffix}`).attr('data-blur-max'));
                let blurMinLen = parseInt($self.find(`#boxShadowEffectMinMax${idSuffix}`).attr('data-blur-min'));

                AdvanceSageSlider($self.find(`#${boxShadowEffectSliderListLocal[0][0]}${idSuffix}`), $self.find(`#${boxShadowEffectSliderListLocal[0][1]}${idSuffix}`), horiMinLen, horiMaxLen, horiLen, self['BoxShadowHoriLengthSlide'], $parent, 'px', self);
                AdvanceSageSlider($self.find(`#${boxShadowEffectSliderListLocal[1][0]}${idSuffix}`), $self.find(`#${boxShadowEffectSliderListLocal[1][1]}${idSuffix}`), vertiMinLen, vertiMaxLen, verLen, self['BoxShadowVerticalLengthSlide'], $parent, 'px', self);
                AdvanceSageSlider($self.find(`#${boxShadowEffectSliderListLocal[2][0]}${idSuffix}`), $self.find(`#${boxShadowEffectSliderListLocal[2][1]}${idSuffix}`), blurMinLen, blurMaxLen, blurRadius, self['BoxShadowBlurSlide'], $parent, 'px', self);

                let colorPickerOption = ColorPickerOption({
                    renderCallback: function ($elm, toggled) {
                        let objColor = RenderCallBackColor(this);
                        objBoxShadow.color = objColor.bgColor;
                        self.parentBoxShadow();
                    }
                });
                $self.find(`#shadowEffectColor${idSuffix}`).colorPicker(colorPickerOption);
            },
            BoxShadowHoriLengthSlide: function (space, $par, ref) {
                objBoxShadow.horizontal = space;
                ref.parentBoxShadow();
            },
            BoxShadowVerticalLengthSlide: function (space, $par, ref) {
                objBoxShadow.vertical = space;
                ref.parentBoxShadow();
            },
            BoxShadowBlurSlide: function (space, $par, ref) {
                objBoxShadow.blur = space;
                ref.parentBoxShadow();
            },
            parentBoxShadow: function () {
                currentHoverEffect.box.c = objBoxShadow.color + ' ';
                currentHoverEffect.box.hl = objBoxShadow.horizontal + 'px ';
                currentHoverEffect.box.vl = objBoxShadow.vertical + 'px ';
                currentHoverEffect.box.br = objBoxShadow.blur + 'px ';
                if ($self.find(`#boxshadowEffectInset${idSuffix}`).prop('checked')) {
                    currentHoverEffect.box.i = ' inset ';
                } else {
                    currentHoverEffect.box.i = '';
                }
                this.UpdateEffect();
            },
            UpdateEffect: function () {
                targets.attr('data-hovereffect', JSON2.stringify(currentHoverEffect));
            },
            init: function () {
                this.updateTargets();
                if (targets.length == 0) {
                    console.error("AdvanceHoverEffect => target does not exist");
                    return false;
                }
                boxShadowEffectSliderListLocal = [
                    ['boxShadowEffectHorizontalSlider', 'boxShadowEffectHorizontalHandler', 'boxShadowEffectHorizontal', 0],
                    ['boxShadowEffectVerticalSlider', 'boxShadowEffectVerticalHandler', 'boxShadowEffectVertical', 0],
                    ['boxShadowEffectBlurSlider', 'boxShadowEffectBlurHandler', 'boxShadowEffectBlur', 0]
                ];
                borderHoverSliderListLocal = [
                    ['bulkBorderHoverSlider', 'bulkBorderHoverHandler', false, 'BorderHoverBulk', 1, 'bulkBorderHoverColor'],
                    ['borderHoverTopSlider', 'borderHoverTopHandler', false, 'BorderHoverTop', 1, 'topBorderHoverColor'],
                    ['borderHoverRightSlider', 'borderHoverRightHandler', false, 'BorderHoverRight', 1, 'rightBorderHoverColor'],
                    ['borderHoverBottomSlider', 'borderHoverBottomHandler', false, 'BorderHoverBottom', 1, 'bottomBorderHoverColor'],
                    ['borderHoverLeftSlider', 'borderHoverLeftHandler', false, 'BorderHoverLeft', 1, 'leftBorderHoverColor']
                ];
                this.appendSettingDom(options);
                let hoverdata = $parent.attr('data-hovereffect');
                if (typeof hoverdata !== 'undefined') {
                    try {
                        currentHoverEffect = JSON.parse(hoverdata);
                    } catch (e) {
                        console.log("invalid hovereffect data");
                    }
                }
                this.initEvents();
            },
            BorderHoverBulk: function (space, $parent, self) {
                if (borderHoverSliderListLocal[1][2]) {
                    currentHoverEffect.border.top = space;
                    $self.find(`#${borderHoverSliderListLocal[1][0]}${idSuffix}`).slider('value', space);
                    $self.find(`#${borderHoverSliderListLocal[1][1]}${idSuffix}`).text(space);
                }
                if (borderHoverSliderListLocal[2][2]) {
                    currentHoverEffect.border.right = space;
                    $self.find(`#${borderHoverSliderListLocal[2][0]}${idSuffix}`).slider('value', space);
                    $self.find(`#${borderHoverSliderListLocal[2][1]}${idSuffix}`).text(space);
                }
                if (borderHoverSliderListLocal[3][2]) {
                    currentHoverEffect.border.bottom = space;
                    $self.find(`#${borderHoverSliderListLocal[3][0]}${idSuffix}`).slider('value', space);
                    $self.find(`#${borderHoverSliderListLocal[3][1]}${idSuffix}`).text(space);
                }
                if (borderHoverSliderListLocal[4][2]) {
                    currentHoverEffect.border.left = space;
                    $self.find(`#${borderHoverSliderListLocal[4][0]}${idSuffix}`).slider('value', space);
                    $self.find(`#${borderHoverSliderListLocal[4][1]}${idSuffix}`).text(space);
                }
                self.UpdateEffect();
            },
            BorderHoverTop: function (space, $parent, self) {
                currentHoverEffect.border.top = space;
                self.BorderHoverBulkNull(self);
            },
            BorderHoverRight: function (space, $parent, self) {
                currentHoverEffect.border.right = space;
                self.BorderHoverBulkNull(self);
            },
            BorderHoverBottom: function (space, $parent, self) {
                currentHoverEffect.border.bottom = space;
                self.BorderHoverBulkNull(self);
            },
            BorderHoverLeft: function (space, $parent, self) {
                currentHoverEffect.border.left = space;
                self.BorderHoverBulkNull(self);
            },
            BorderHoverBulkNull: function (self) {
                $self.find(`#${borderHoverSliderListLocal[0][0]}${idSuffix}`).slider('value', 0);
                $self.find(`#${borderHoverSliderListLocal[0][1]}${idSuffix}`).text(0);
                self.UpdateEffect();
            }
        };
        AdvanceHoverEffect.init();
    };
}(jQuery));
(function ($) {
    "use strict";
    $.fn.AdvanceGutterSpace = function (o) {
        if (typeof o === 'undefined' || typeof o.targetParent === 'undefined') {
            console.error("AdvanceGutterSpace => missing option: targetParent");
            return;
        }
        if (!(o.targetParent instanceof jQuery)) {
            console.error("AdvanceGutterSpace => targetParent should be a jQuery object");
            return;
        }
        if (typeof o.targetElem === 'undefined') {
            console.error("AdvanceGutterSpace => missing option: targetElem");
            return;
        }
        if (typeof o.itemsperrow === 'undefined') {
            console.error("AdvanceGutterSpace => missing option: itemsperrow");
            return;
        }
        //if (o.itemsperrow < 2) {
        //    console.error("AdvanceGutterSpace => itemsperrow must be at least 2");
        //    return;
        //}
        let type = "all";
        if (typeof o.type === 'undefined') {
            type = "all";
        } else
            type = o.type;
        let label = ["horizontal", " vertical"];
        if (typeof o.label !== 'undefined') {
            label = o.label;
        }
        let spacing = "padding";
        var patterns = {
            "top": 'gPt-[0-9]{1,3}',
            "topreplace": 'gPt-',
        }
        if (typeof o.spacing !== 'undefined' && o.spacing === "margin") {
            patterns = {
                "top": 'gMt-[0-9]{1,3}',
                "topreplace": 'gMt-',
            }
        }
        if (typeof o.label !== 'undefined') {
            label = o.label;
        }
        if (typeof o.defaultValue !== 'undefined') {
            defaultValue = o.defaultValue;
        }
        let $self = this,
            targetParent = o.targetParent,
            targetElem = o.targetElem,
            targets = $(targetParent).find(targetElem),
            idSuffix = '_' + Math.floor((Math.random() * 1000) + 100),
            itemsperrow = o.itemsperrow;
        targetParent.attr('data-gutterItem', itemsperrow);
        let GutterSpace = {
            updateTargets: function () {
                targets = $(targetParent).find(targetElem);
                if (targets.length == 0) {
                    console.error("AdvanceGutterSpace => target does not exists");
                    return false;
                }
                return true;
            },
            ids: ["GutterHoriSlider" + idSuffix, "GutterHoriHandle" + idSuffix, "GutterVertiSlider" + idSuffix, "GutterVertiHandle" + idSuffix],
            InitDOM: function () {
                let Dom = this.DOM();
                $self.html(Dom);
            },
            DOM: function () {
                let dom = '';
                let _this = this;
                switch (type) {
                    case "all":
                        dom += CreateSliderDOM(_this.ids[0], _this.ids[1], label[0]);
                        dom += CreateSliderDOM(_this.ids[2], _this.ids[3], label[1]);
                        break;
                    case "horizontal":
                        dom += CreateSliderDOM(_this.ids[0], _this.ids[1], label[0]);
                        break;
                    case "vertical":
                        dom += CreateSliderDOM(_this.ids[2], _this.ids[3], label[1]);
                        break;
                }
                return dom;
            },
            addEventListeners: function () {
                let _this = this;

                let space = parseInt(GetValueByClassName($(targets[0]), 'gPr-[0-9]{1,3}', 'gPr-'));
                this.HorizontalChange(space, $(targets), this);
                space = parseInt(GetValueByClassName($(targets[0]), 'gPb-[0-9]{1,3}', 'gPb-'));
                this.VerticalChange(space, $(targets), this);

                switch (type) {
                    case "all":
                        _this.horizontalGutterEvent();
                        _this.VerticalGutterEvent();
                        break;
                    case "horizontal":
                        _this.horizontalGutterEvent();
                        break;
                    case "vertical":
                        _this.VerticalGutterEvent();
                        break;
                }
            },
            horizontalGutterEvent: function () {
                let _this = this;
                let initGutter = parseInt(GetValueByClassName($(targets[0]), 'gPr-[0-9]{1,3}', 'gPr-'));
                AdvanceSageSlider($(`#${_this.ids[0]}`), $(`#${_this.ids[1]}`), 0, 50,
                    initGutter, this.HorizontalChange, $(targets), 'px', this);
            },
            HorizontalChange: function (space, $par, ref) {
                let total = $par.length;
                let counter = 0;
                for (var i = 0; i < total; i++) {
                    ref.HoriApplyRight($(targets).eq(counter), space);
                    ref.HoriApplyLeft($(targets).eq(i), space);
                    counter++;
                }
                itemsperrow = parseInt(targetParent.attr('data-gutterItem'));
            },
            HoriApplyRight: function ($tar, space) {
                ReplaceClassByPattern($tar, 'gPr-[0-9]{1,3}', 'gPr-' + space);
            },
            HoriApplyLeft: function ($tar, space) {
                ReplaceClassByPattern($tar, 'gPl-[0-9]{1,3}', 'gPl-' + space);
            },
            VertiApplyTop: function ($tar, space) {
                ReplaceClassByPattern($tar, 'gPt-[0-9]{1,3}', 'gPt-' + space);
            },
            VertiApplyBottom: function ($tar, space) {
                ReplaceClassByPattern($tar, 'gPb-[0-9]{1,3}', 'gPb-' + space);
            },
            VerticalGutterEvent: function () {
                let _this = this;
                let initGutter = parseInt(GetValueByClassName($(targets[0]), 'gPb-[0-9]{1,3}', 'gPb-'));
                AdvanceSageSlider($(`#${_this.ids[2]}`), $(`#${_this.ids[3]}`), 1, 50,
                    initGutter, this.VerticalChange, $(targets), 'px', this);
            },
            VerticalChange: function (space, $par, ref) {
                let total = $par.length;
                let rows = Math.ceil(total / itemsperrow);
                let counter = 0;
                let newspace = space;
                for (var i = 0; i < rows; i++) {
                    for (var j = 0; j < itemsperrow; j++) {
                        //if (i == 0)
                        //    ref.VertiApplyBottom($(targets).eq(counter), newspace);
                        //else if (i == itemsperrow - 1)
                        //    ref.VertiApplyTop($(targets).eq(counter), newspace);
                        //else {
                        ref.VertiApplyBottom($(targets).eq(counter), space);
                        ref.VertiApplyTop($(targets).eq(counter), space);
                        //}
                        counter++;
                    }
                }
            },
            Init: function () {
                if (!this.updateTargets()) {
                    return;
                }
                this.InitDOM();
                this.addEventListeners();
            }
        };
        GutterSpace.Init();
    }
}(jQuery));
(function ($) {
    "use strict";
    $.fn.AdvanceDimension = function (o) {
        if (typeof o === 'undefined' || typeof o.targetParent === 'undefined') {
            console.error("AdvanceDimension => missing option: targetParent");
            return;
        }
        if (!(o.targetParent instanceof jQuery)) {
            console.error("AdvanceDimension => targetParent should be a jQuery object");
            return;
        }
        if (typeof o.targetElem === 'undefined') {
            console.error("AdvanceDimension => missing option: targetElem");
            return;
        }
        if (typeof o.type === 'undefined') {
            console.error("AdvanceDimension => missing option: targetElem");
            return;
        }

        let label = "Width";
        let types = ['sfwidth', 'height', 'width'];
        let defaultValue = 1;
        let dimension = {
            regex: "",
            replace: "",
            min: 1,
            max: 100,
            unit: 'px'
        }
        switch (o.type) {
            case types[0]:
                dimension.regex = 'sfCol_[0-9]{1,3}';
                dimension.replace = 'sfCol_';
                dimension.unit = '%';
                break;
            case types[1]:
                dimension.regex = 'H-[0-9]{1,4}';
                dimension.replace = 'H-';
                dimension.max = 1080;
                break;
            case types[2]:
                dimension.regex = 'W-[0-9]{1,4}';
                dimension.replace = 'W-';
                dimension.max = 1080;
                break;
        }
        if (typeof o.label !== 'undefined') {
            label = o.label;
        }
        if (typeof o.defaultValue !== 'undefined') {
            defaultValue = o.defaultValue;
        }
        if (typeof o.min !== 'undefined') {
            dimension.min = o.min;
        }
        if (typeof o.max !== 'undefined') {
            dimension.max = o.max;
        }
        let $self = this,
            targetParent = o.targetParent,
            targetElem = o.targetElem,
            targets = $(targetParent).find(targetElem),
            idSuffix = '_' + Math.floor((Math.random() * 1000) + 100);
        let Width = {
            updateTargets: function () {
                let tar = UpdateTargets(targetParent, targetElem, 'AdvanceDimension');
                targets = tar.target;
                return tar.exists;
            },
            ids: ["DimensionSlider" + idSuffix, "DimensionHandle" + idSuffix],
            InitDOM: function () {
                let Dom = this.DOM();
                $self.html(Dom);
            },
            DOM: function () {
                let dom = '';
                let _this = this;
                dom += CreateSliderDOM(_this.ids[0], _this.ids[1], label);
                return dom;
            },
            setupData: function () { },
            addEventListeners: function () {
                let _this = this;
                let width = GetValueByClassName($(targets[0]), dimension.regex, dimension.replace);
                width = width == 0 ? defaultValue : width;
                AdvanceSageSlider($(`#${_this.ids[0]}`), $(`#${_this.ids[1]}`), dimension.min, dimension.max, width, this.WidthChange, $(targets[0]), dimension.unit, this, this.Stopfunction);
            },
            Stopfunction: function (space, $par, ref) {
                if (typeof o.stopfunction === 'function') {
                    o.stopfunction(space);
                }
            },

            WidthChange: function (space, $par, ref) {
                ReplaceClassByPattern($(targets), dimension.regex, dimension.replace + space);
                if (typeof o.callback === 'function') {
                    o.callback(space);
                }
            },
            init: function () {
                if (!this.updateTargets()) {
                    return;
                }
                this.InitDOM();
                this.addEventListeners();
                this.setupData();
            }
        };
        Width.init();
    }
}(jQuery));
(function ($) {
    "use strict";
    $.fn.AdvanceItemPerView = function (o) {
        let options = {
            label: 'Item per view',
            min: 1,
            max: 5,
            value: 1
        };
        if (typeof o !== 'undefined') {
            options = $.extend(options, o);
        }
        let $self = this,
            idSuffix = '_' + Math.floor((Math.random() * 1000) + 100);
        let AdvanceItemPerView = {
            appendDOM: function () {
                let dom = `<div class="field-row stElWrap col50-50">
                                <label class="fCol">${options.label}</label>
                                <div class="fCol TxAl-r">
                                    <span class="select__box">
                                        <select id="itemsperslider${idSuffix}">
                                        </select>
                                    </span>
                                </div>
                            </div>`;
                $self.html(dom);
                let selectOpts = [];
                for (let i = options.min; i <= options.max; i++) {
                    selectOpts.push(`<option value="${i}">${i}</option>`);
                }
                $self.find('#itemsperslider' + idSuffix).append(selectOpts.join('')).val(options.value);
            },
            addEvents: function () {
                $self.find('#itemsperslider' + idSuffix).on('change', function () {
                    if (typeof options.onChange === 'function') {
                        options.onChange($(this).val());
                    }
                });
            },
            init: function () {
                this.appendDOM();
                this.addEvents();
            }
        };
        AdvanceItemPerView.init();
    }
}(jQuery));

function UpdateTargets(targetParent, targetElem, libraryname) {
    let targets = targetParent.is(targetElem) ? targetElem : $(targetParent).find(targetElem);
    if (targets.length == 0) {
        console.error(`${libraryname} => target does not exists`);
        return {
            exists: false,
            target: targets
        };
    }
    return {
        exists: true,
        target: targets
    };
}
(function ($) {
    "use strict";
    $.fn.AdvanceScrollEffect = function (o) {
        if (typeof o === 'undefined' || typeof o.targetParent === 'undefined') {
            console.error("AdvanceScrollEffect => missing option: targetParent");
            return;
        }
        if (!(o.targetParent instanceof jQuery)) {
            console.error("AdvanceScrollEffect => targetParent should be a jQuery object");
            return;
        }
        if (typeof o === 'undefined' || typeof o.targetElem === 'undefined') {
            console.error("AdvanceScrollEffect => missing option: targetElem");
            return;
        }
        let $self = this,
            targetParent = o.targetParent,
            targetElem = o.targetElem,
            targets = $(targetParent).find(targetElem),
            idSuffix = '_' + Math.floor((Math.random() * 1000) + 100);
        let AdvanceScrollEffect = {
            getDOM: function () {
                //let effectArray = [["none", "None"]];
                //$.each(customScrollEffectList, function (i, val) {
                //    effectArray.push(JSON.parse(val));
                //});
                //debugger

                //let DOM = CreateSelectGroupDOM('idsdfsfds', 'cadscsacas', selectOption);
                let effectDOM = FieldRowDOMCreateCol50_50(
                    DOMCreate('label', 'Scroll Effect', 'fCol') +
                    DOMCreate('div',
                        DOMCreate('span',
                            //SelectDOMCreate('scrolleffect' + idSuffix, 'scrolleffect', [['none', 'None'],['slide','slide'], ['fade-up', 'fade-up'], ['fade-down', 'fade-down'], ['fade-left', 'fade-left'], ['fade-right', 'fade-right']]),//['zoom-in', 'zoom-in'], ['zoom-out', 'zoom-out']
                            CreateSelectGroupDOM('scrolleffect' + idSuffix, 'scrolleffect', effectSelectOption),
                            'select__box'),
                        'fCol TxAl-r')
                );
                let delayDOM = DOMCreate('div',
                    DOMCreate('label', 'Delay', 'fCol') +
                    DOMCreate('div',
                        DOMCreate('span',
                            SelectDOMCreate('delayscrolleffect' + idSuffix, 'delayscrolleffect', [
                                ['0', '0'],
                                ['50', '50'],
                                ['100', '100'],
                                ['200', '200'],
                                ['300', '300'],
                                ['400', '400'],
                                ['800', '800'],
                                ['1200', '1200'],
                                ['1600', '1600'],
                                ['1200', '1200'],
                                ['2000', '2000'],
                                ['2400', '2400'],
                                ['2800', '2800'],
                                ['3200', '3200'],
                                ['3600', '3600'],
                                ['4000', '4000']
                            ]),
                            'select__box'),
                        'fCol TxAl-r'),
                    'field-row stElWrap col50-50 Dn', 'delayscrolleffectWrap' + idSuffix);
                let durationDOM = DOMCreate('div',
                    DOMCreate('label', 'Duration', 'fCol') +
                    DOMCreate('div',
                        DOMCreate('span',
                            SelectDOMCreate('durationScrolleffect' + idSuffix, 'durationScrolleffect', [
                                ['0', '0s'],
                                ['1000', '1s'],
                                ['2000', '2s'],
                                ['3000', '3s'],
                                ['4000', '4s'],
                                ['5000', '5s'],
                                ['6000', '6s'],
                                ['7000', '7s'],
                                ['8000', '8s'],
                                ['9000', '9s'],
                                ['10000', '10s'],
                                ['11000', '11s'],
                                ['12000', '12s']
                            ]),
                            'select__box'),
                        'fCol TxAl-r'),
                    'field-row stElWrap col50-50 Dn', 'durationScrolleffectWrap' + idSuffix);
                let previewDOM = DOMCreate('div', DOMCreate('div', DOMCreate('span', 'Preview', 'stngSmallBtn', 'btnPreviewEffect'),
                    'fCol TxAl-l'), 'field-row stElWrap col100');

                return FieldRowDOMCreate(effectDOM + delayDOM + durationDOM + previewDOM);
            },
            appendDOM: function () {
                $self.html(this.getDOM());
            },
            addEventListeners: function () {
                if (!this.updateTargets()) {
                    return;
                }
                $('#btnPreviewEffect').off().on('click', function () {
                    ApplyScrollEffect(targets, $('#scrolleffect' + idSuffix).val(), $('#durationScrolleffect' + idSuffix).val());
                });
                $self.find('#scrolleffect' + idSuffix).on('change', function () {
                    let value = $(this).val();
                    targets.attr('data-scroll', value);
                    if (value === "none") {
                        targets.removeClass('scroll-begin');
                        targets.removeAttr('data-scroll');
                        $self.find('#delayscrolleffectWrap' + idSuffix).addClass('Dn');
                        $self.find('#durationScrolleffectWrap' + idSuffix).addClass('Dn');
                    } else {
                        $self.find('#delayscrolleffectWrap' + idSuffix).removeClass('Dn');
                        $self.find('#durationScrolleffectWrap' + idSuffix).removeClass('Dn');
                        if (!targets.hasClass('scroll-begin'))
                            targets.addClass('scroll-begin');
                    }

                });

                $self.find('#delayscrolleffect' + idSuffix).on('change', function () {
                    let value = $(this).val();
                    targets.attr('data-scrolldelay', value);
                });
            },
            setup: function () {
                let scrollClass = 'none';
                let $selectedLayer = $(targets[0]);
                //$self.find('#delayscrolleffectWrap' + idSuffix).hide();
                if ($selectedLayer.hasClass('scroll-begin')) {
                    scrollClass = $selectedLayer.attr('data-scroll');
                    $self.find('#delayscrolleffectWrap' + idSuffix).removeClass('Dn');
                }
                $self.find('#scrolleffect' + idSuffix).val(scrollClass);
                let delayamount = '0';
                if ($selectedLayer.hasClass('scroll-begin') && typeof ($selectedLayer.attr('data-scrolldelay')) !== "undefined") {
                    delayamount = $selectedLayer.attr('data-scrolldelay');
                }
                $self.find('#delayscrolleffect' + idSuffix).val(delayamount);
            },
            updateTargets: function () {
                let tar = UpdateTargets(targetParent, targetElem, 'AdvanceScrollEffect');
                targets = tar.target;
                return tar.exists;
            },
            init: function () {
                this.appendDOM();
                this.setup();
                this.addEventListeners();
            }
        };
        AdvanceScrollEffect.init();
    }
}(jQuery));

function CallFunction(fn, value) {
    if (typeof (fn) === "function")
        fn(value);
}



function CreateSelectGroupDOM(selID, selClass, Array) {
    var selDOM = '<select';
    if (typeof (selID) !== 'undefined' && selID.length > 0) {
        selDOM += ' id="' + selID + '"';
    }
    if (selID !== 'undefined') {
        selDOM += ' class="' + selClass + '"';
    }
    selDOM += '>';
    if (typeof (Array) !== 'undefined') {
        $.each(Array, function (index, val) {
            selDOM += `<optgroup label="${index}">`
            $.each(val, function (i, v) {
                selDOM += `<option value="${v.effect}">${v.name}</option>`;
            });
            selDOM += '</optgroup>'
        });
    }
    selDOM += '</select>';
    return selDOM;
}


(function ($) {
    "use strict";

    function DynamicCmpItemsSetting(instance, options) {
        this.instance = instance;
        this.options = options;
        this.$el = $(this.instance);
        this.limit = 0;
        this.offset = 0;
        this.init();
    }
    DynamicCmpItemsSetting.prototype = {
        init: function () {
            let self = this;
            self.appendDOM();
            self.setup();
        },
        setup: function () {
            let self = this;
            let unlimit = $activeDOM.attr('data-unlimit');
            if (unlimit == 1) {
                $('#dynCmpAllItems').prop('checked', true);
                $('#dynCmpItemSlider').addClass('Dn');
            } else {
                $('#dynCmpAllItems').prop('checked', false);
                $('#dynCmpItemSlider').removeClass('Dn');
            }
            let limit = $activeDOM.attr('data-limit');
            let max = 100;
            if (typeof limit === 'undefined') {
                limit = 50;
            }
            let offset = $activeDOM.attr('data-offset');
            if (typeof offset === 'undefined') {
                offset = 0;
            }
            AdvanceSageSlider(self.$el.find('#dynCmpItemSlide'), self.$el.find('#dynCmpItemSlideHandler'), 1, max, limit, self.onLimitChange, $activeDOM, '', self);
            let $offsetInput = self.$el.find('#dynCmpItemOffset');
            $offsetInput.val(offset);
            $offsetInput.off().on('change', function () {
                let v = $offsetInput.val();
                if (v >= 0) {
                    $activeDOM.attr('data-offset', v);
                    self.bindOnChange(self);
                }
            });
            $('#dynCmpAllItems').off().on("click", function () {
                if ($(this).is(':checked')) {
                    $('#dynCmpItemSlider').addClass('Dn');
                    $activeDOM.attr('data-unlimit', 1);
                } else {
                    $('#dynCmpItemSlider').removeClass('Dn');
                    $activeDOM.attr('data-unlimit', 0);
                }
                self.bindOnChange(self);
            });
        },
        bindOnChange: function (self) {
            let p = self.options.bindOnChange;
            if (typeof p === 'undefined' || p !== true) {
                return;
            }
            let cmpName = $activeDOM.attr('data-type');
            let cmp = component[cmpName];
            if (typeof cmp === 'undefined') {
                return;
            }
            if (typeof cmp.inherits !== 'undefined') {
                cmp = component[cmp.inherits];
            }
            if (typeof cmp.library === 'undefined' || typeof cmp.library.populateData !== 'function') {
                return;
            }
            if (typeof cmp.library.beforeItemSettingChange === 'function') {
                cmp.library.beforeItemSettingChange($activeDOM);
            }
            if (typeof cmp.library.clearList === 'function') {
                cmp.library.clearList($activeDOM);
            }
            cmp.library.populateData(cmpName, $activeDOM);
            //reattach setting events
            if (typeof cmp.library.display !== 'undefined') {
                try {
                    let display = cmp.library.display.getDisplay($activeDOM);
                    cmp.library.display.options[display].setupSettings();
                } catch (e) {
                    //
                }
            }
        },
        onLimitChange: function (val, $target, self) {
            $target.attr('data-limit', val);
            self.bindOnChange(self);
        },
        appendDOM: function () {
            let self = this;
            self.$el.empty();
            if (self.optionHasValue('limit', true, true)) {
                self.$el.append(self.getLimitDOM());
            }
            if (self.optionHasValue('offset', true, true)) {
                self.$el.append(self.getOffsetDOM());
            }
        },
        optionHasValue: function (option, value, strict) {
            let self = this;
            if (typeof self.options[option] === 'undefined') {
                return false;
            }
            if (typeof strict !== 'undefined' && strict === true) {
                return self.options[option] === value;
            }
            return self.options[option] == value;
        },
        getLimitDOM: function () {
            return `<div class="field-row stElWrap col50-50">
                        <label class="fCol">Show all items</label>
                        <div class="fCol TxAl-r">
                            <span class="toggle_btn">
                                <input type="checkbox" id="dynCmpAllItems" name="dynCmpAllItems">
                                <label for="dynCmpAllItems" class ="tgl_slider"></label>
                            </span>
                        </div>
                    </div>
                    <div class="field-row stElWrap" id="dynCmpItemSlider">
                        <span class="range__slider fCol">
                            <div id="dynCmpItemSlide">
                                <div id="dynCmpItemSlideHandler" class ="ui-slider-handle" title="Display items"></div>
                            </div>
                        </span>
                    </div>`;
        },
        getOffsetDOM: function () {
            return `<div class="field-row stElWrap col50-50">
                        <label class="fCol">Total Skip Item</label>
                        <span class="fCol cb_input">
                            <input type="number" id="dynCmpItemOffset" min="0">
                            <span class="info">Skip number of first item</span>
                        </span>
                    </div>`;
        }
    };
    $.fn.DynamicCmpItemsSetting = function (options) {
        return this.each(function () {
            new DynamicCmpItemsSetting(this, options);
        });
    };
}(jQuery));

(function ($) {
    "use strict";
    $.fn.AdvanceSliderDots = function (o) {
        if (typeof o === 'undefined' || typeof o.targetParent === 'undefined') {
            console.error("AdvanceSliderDots => missing option: targetParent");
            return;
        }
        if (!(o.targetParent instanceof jQuery)) {
            console.error("AdvanceSliderDots => targetParent should be a jQuery object");
            return;
        }
        if (typeof o === 'undefined' || typeof o.targetElem === 'undefined') {
            console.error("AdvanceSliderDots => missing option: targetElem");
            return;
        }
        let $self = this,
            targetParent = o.targetParent,
            targetElem = o.targetElem,
            targetSliderWrap = o.targetSliderWrap,
            targets = $(targetParent).find(targetElem),
            targetActiveDot = $(targetParent).find(o.targetActiveDot),
            idSuffix = '_' + Math.floor((Math.random() * 1000) + 100),
            options = ["color"],
            callback = '';
        if (typeof o.options !== 'undefined' && o.options && o.options instanceof Array) {
            options = o.options;
        }
        if (typeof o.callback !== 'undefined')
            callback = o.callback;

        let AdvanceSliderDots = {
            updateTargets: function () {
                let tar = UpdateTargets(targetParent, targetElem, 'AdvanceSliderDots');
                targets = tar.target;
                return tar.exists;
            },
            appendBGChangerDOM: function () {
                let bgChDom = this.GeneralBackgroundDOM();
                let dotsShapeDOM = this.GeneralDotsShapeDOM();
                let dotsSizeDOM = this.GenerelDotsSizeDOM();
                bgChDom = this.fixDomId(bgChDom);
                $self.html(bgChDom);
                $self.append(dotsShapeDOM + dotsSizeDOM); // + dotsShapeDOM);
            },
            GeneralDotsShapeDOM: function () {
                let dotsDOM = '';
                if (o.sliderShape) {
                    dotsDOM = `<div class="field-row stElWrap col50-50">
                                    <label class="fCol">Slider Dots Shape</label>
                                         <div class="fCol TxAl-r"><span class="select__box">
                                            <select id="slcDotsShape${idSuffix}">
                                                <option value="50%">Round</option>
                                               <option value="0px">Square</option>                                   
                                   </select></span></div>
                                   </div>`;
                    return dotsDOM;
                }
            },
            GenerelDotsSizeDOM: function () {
                let sizeDOM = '';
                if (o.dotsSize) {
                    sizeDOM = `<div class="field-row stElWrap col100">
                                <div class="range__slider fCol">
                                    <div id="dotsSizeSlider${idSuffix}">
                                        <div id="dotsSizeHandle${idSuffix}" class="ui-slider-handle" title="Dots Size">0</div>
                                    </div>
                                </div>
                            </div>`;
                    return sizeDOM;
                }
            },
            GeneralBackgroundDOM: function () {
                let backGroundDOM = '';
                let optionLen = options.length;
                if (optionLen > 0) {
                    if (optionLen == 1) {
                        if (optionLen > 1)
                            backGroundDOM += DOMCreate('h4', 'Dots Background');
                        backGroundDOM += `<div class="field-row stElWrap col50-50" id="divBackColorChoose">
                                            <label class="fCol">Dots Color</label>
                                            <div class="fCol TxAl-r">
                                            <span class="color-picker-holder chooseBGColors selected" id="chooseColorColBG" style="background-color:rgba(247, 247, 247,.8);color:rgb(34, 34, 34);">
                                            </span></div></div>
                                            <div class="field-row stElWrap col50-50" id="divBackColorChoose">
                                            <label class="fCol">Active Dot Color</label>
                                            <div class="fCol TxAl-r">
                                            <span class="color-picker-holder chooseBGColors selected" id="activeDotsColBG" style="background-color:rgba(247, 247, 247,.8);color:rgb(34, 34, 34);">
                                            </span></div></div>`; //ExternalFileDoms.divbackcolorchoose;
                        backGroundDOM = FieldRowDOMCreate(backGroundDOM);
                    } else {
                        backGroundDOM += ExternalFileDoms.backgroundtab;
                    }
                }
                return backGroundDOM;
            },
            setupColorPicker: function () {
                let self = this;
                let colorPickerOption = ColorPickerOption({
                    renderCallback: function ($elm, toggled) {
                        let objColor = RenderCallBackColor(this);
                        if (typeof o.colorCallBack == 'function')
                            o.colorCallBack(objColor);
                        let colorPickerID = $elm.attr('id');
                        self.updateTargets();

                        switch (colorPickerID) {
                            case 'chooseColorColBG' + idSuffix:
                                $.each(targets.not($(targetParent).find(o.targetActiveDot)), function (i, target) {
                                    $(target).css({
                                        'background-color': objColor.bgColor
                                    });
                                });
                                $(targetSliderWrap).attr('data-dots-color', objColor.bgColor);
                                break;
                            case 'activeDotsColBG' + idSuffix:
                                $.each($(targetParent).find(o.targetActiveDot), function (i, target) {
                                    $(target).css({
                                        'background-color': objColor.bgColor
                                    });
                                    $(targets).css('border-color', objColor.bgColor);
                                });
                                $(targetSliderWrap).attr('data-activedot-color', objColor.bgColor);
                                break;
                        }
                    }
                });
                $self.find('.chooseBGColors').colorPicker(colorPickerOption);
            },
            addEventListeners: function () {
                if (!this.updateTargets()) {
                    return;
                }
                let self = this;
                let bgColor = $($(targets).not(o.targetActiveDot)[0]).css('background-color');
                let activeCol = $(targetActiveDot[0]).css('background-color');
                let txtColor = $(targets[0]).css('color');
                if (typeof ($(targets[0]).attr('style')) === 'undefined' || typeof (bgColor) === "undefined") {
                    bgColor = "rgba(255, 255, 255, 0)";
                }
                if (typeof ($(targetActiveDot[0]).attr('style')) === 'undefined' || typeof (activeCol) === "undefined") {
                    activeCol = "rgba(255, 255, 255, 0)";
                }
                if (typeof ($(targets[0]).attr('style')) === 'undefined' || typeof (txtColor) === "undefined") {
                    txtColor = "rgba(0, 0, 0, 0)";
                }
                let prevhovereffect = $(targets[0]).attr('data-prevhovereffect');
                if (typeof prevhovereffect !== 'undefined') {
                    let tmpEff = JSON.parse(prevhovereffect);
                    if (tmpEff.bg) {
                        bgColor = tmpEff.bg;
                    }
                    if (tmpEff.font) {
                        txtColor = tmpEff.font;
                    }
                }
                //final
                $self.find(`#chooseColorColBG${idSuffix}`).css({
                    'background-color': bgColor,
                    'color': txtColor
                });
                $self.find(`#activeDotsColBG${idSuffix}`).css({
                    'background-color': activeCol
                });

                let backgroundColor = $(targets[0]).attr('data-backgroundColor');

                let selected = 'none';
                if (typeof (backgroundColor) !== 'undefined' && backgroundColor.length > 0) {
                    selected = 'color';
                }
                $self.find(`#selBackround${idSuffix}`).val(selected);
                $self.find(`#selBackround${idSuffix}`).trigger('change');

                //Dots Shape
                $self.find(`#slcDotsShape${idSuffix}`).off("change").on("change", function () {
                    let val = $(this).val();
                    let $targEle = $(targetParent).find(targetElem);
                    if (val === 'round') {
                        $targEle.css({
                            "border-radius": "50%"
                        });

                    } else {
                        $targEle.css({
                            "border-radius": val
                        });
                    }
                    $(targetSliderWrap).attr('data-dots-shape', val);
                });
                this.dotsSizeEvents();

            },
            dotsSizeEvents: function () {

                function DotsWidthChange(space) {
                    ReplaceClassByPattern(targets, 'W-[0-9]{1,4}', 'W-' + space);
                }

                function DotsHeightChange(space) {
                    ReplaceClassByPattern(targets, 'H-[0-9]{1,4}', 'H-' + space);
                }

                function DotsHeightWidthChange(space) {
                    DotsHeightChange(space);
                    DotsWidthChange(space);
                    $(targetSliderWrap).attr('data-dot-size', `H-${space} W-${space}`);
                }

                function dotsHeightWidth() {
                    let dotSize = GetValueByClassName(targets, 'H-[0-9]{1,4}', 'H-');
                    dotSize = dotSize === 0 ? targets.height() : dotSize;
                    AdvanceSageSlider($(`#dotsSizeSlider${idSuffix}`), $(`#dotsSizeHandle${idSuffix}`), 1, 800, dotSize, DotsHeightWidthChange, $(targetParent), 'px'); //, this.addEventListeners());                    
                }
                dotsHeightWidth();
            },
            removeBGColor: function (bgColor, txtColor) {
                if (!this.updateTargets()) {
                    return;
                }
                $.each(targets, function (i, target) {
                    $(target).css({
                        'background-color': '',
                        'color': ''
                    });
                });
                $self.find(`#chooseColorColBG${idSuffix}`).css({
                    'background-color': bgColor,
                    'color': txtColor
                });
            },
            fixDomId: function (dom) {
                let ids = ['selBackround', 'divBackColorChoose', 'chooseColorColBG', 'activeDotsColBG'];
                let $dom = $(dom);
                for (let i = 0, j = ids.length; i < j; i++) {
                    $dom.find('#' + ids[i]).removeAttr('id').attr('id', ids[i] + idSuffix);
                }
                //$dom.find("label[for='shadedLayerActive']").attr('for', 'shadedLayerActive' + idSuffix);
                return $dom[0];
            },
            setSelectedSetting: function () {
                let dotShape = $(targetSliderWrap).attr("data-dots-shape");
                if (dotShape !== 'undefined')
                    $self.find(`#slcDotsShape${idSuffix}`).val($(targetSliderWrap).attr("data-dots-shape"));
            },
            init: function () {
                this.appendBGChangerDOM();
                this.addEventListeners();
                this.setupColorPicker();
                this.setSelectedSetting();
            }
        };
        AdvanceSliderDots.init();
    };
}(jQuery)); (function ($) {
    "use strict";
    $.WebBuilder = function (p) {
        p = $.extend({
            modulePath: '',
            DataObj: '',
            userModuleID: '',
            enableHeader: "false",
            onlinestoreURL: '',
            digisphereURL: '',
            portalDefaultPage: '',
            isDeveloperMode: false,
            version: '1.0',
            applicationname: '',
            core: false,
        }, p);
        let WebManagement = {
            config: {
                isPostBack: false,
                async: false,
                cache: false,
                type: 'POST',
                contentType: "application/json; charset=utf-8",
                data: '{}',
                dataType: 'json',
                crossDomain: true,
                baseURL: `${p.modulePath}Services/webservice.asmx/`,
                method: "",
                url: "",
                ajaxCallMode: "",
                userModuleID: p.userModuleID,
                enableHeader: p.enableHeader,
                tempPageName: p.tempPageName,
                pageExtension: p.pageExtension,
                OnlineOffset: 0,
                OnlineLimit: 12,
                OnlineSiteOffset: 0,
                OnlineSiteLimit: 10,
                OnlineHelpOffset: 0,
                OnlineHelpLimit: 10,
                DigisphereAPI: `${SageFrameHostURL}/Modules/Admin/Advision/Services/SocialMarketing.asmx/`,
                OnlinestoreURL: `${p.onlinestoreURL}/`,
                portalDefaultPage: p.portalDefaultPage,
                isDeveloperMode: p.isDeveloperMode,
                version: p.version,
                applicationname: p.applicationname,
                core: p.core
            },
            Init: function () {
                let this_ = this;
                try {
                    /*if in developer mode extend the workin*/
                    if (WebManagement.config.isDeveloperMode.toLowerCase() == "true" && typeof extendedComps !== "undefined") {
                        component = $.extend(component, extendedComps);
                    } else {
                        ReloadPage();
                    }
                    //ReloadPage();
                    WebManagement.AsyncLoad();
                    /* after drop of the component is initialized here */
                    this_.TaskbarEvents();
                    if (this.config.core) {
                        this_.LoadHeader();
                        this_.OnlineEvents();
                        this_.SiteSettings();
                    }
                    WebManagement.InitEvents();
                    WebManagement.CreateSidebar(); // obsolete
                    /*API invoked and BindData of component is executed */
                    InvokeAPI();
                    WebManagement.LoadDetail();
                    WebManagement.RebindMenuID();
                    WebManagement.TopStickEvents();
                    //WebManagement.FooterInit(); obsolete
                    //MouseOverEffect();
                    //WebManagement.ScrollDynamicBind();
                    WebManagement.OnlineEvents();
                    WebManagement.DragComponentSettings();
                    MenuHover($('#primaryColor').css('background-color'), $('#secondaryColor').css('background-color'));
                    $('body').append($('#simplePopupModel'));
                    EditableSetBreak();
                    WebManagement.MenuType();
                    WebManagement.SiteHeader();
                    //$(window).resize(function () {
                    //    WebManagement.ScreenSizeLimit();
                    //});
                    //WebManagement.ScreenSizeLimit();
                    WebManagement.RevertMenu($('body'));
                    MouseOverEffect($('body'));
                    //WebManagement.InitScrollBar();
                    $('body,html').animate({
                        scrollTop: '0px'
                    }, 1);
                    $('body').on('paste', '[contenteditable]', function (e) {
                        e.stopPropagation();
                        e.preventDefault();
                        var cd = e.originalEvent.clipboardData;
                        var text = cd.getData("text/plain");
                        document.execCommand("insertHTML", false, text);
                    });
                    ChangeRedirectURL();
                    SetSessionLogout();

                    if (WebManagement.config.isDeveloperMode.toLowerCase() == "true") {
                        WebManagement.UpdateComponentManually();
                    }
                } catch (error) {
                    WriteLog(error);
                }
            },
            TaskbarEvents: function () {
                $('.taskbarAction').on('click', function () {
                    let $this = $(this);
                    if ($this.hasClass('active')) {
                        $this.removeClass('active');
                        $this.next('.taskbarActionMenu').addClass('Dn');
                    } else {
                        $('.taskbarAction').removeClass('active');
                        $('.taskbarActionMenu').addClass('Dn');
                        $this.addClass('active');
                        $this.next('.taskbarActionMenu').removeClass('Dn');
                    }
                });
                $('#sitesettings').on('click', function () {
                    //$('.dragHeader').text('Site Settings');
                    WebManagement.ShowStickeyHeaderOption('showsidebar');
                    $('.content-3').hide();
                    $('.content-1').show();
                    //$(this).addClass('clicked');
                    //$('#sidebarcontrol').find('input').eq(0).trigger('click');
                    $('.main-left').find('.pTitle').text('Site Settings');
                });
                $('#viewPorts > .changePort').on('click', function () {
                    hidePanel();
                    let $this = $(this);
                    if (!$this.hasClass('active')) {
                        let currentView = $('.changePort.active').attr('data-shorthand');
                        let newView = $this.attr('data-shorthand');
                        $('.setDrp').hide();
                        $('.changePort').removeClass('active');
                        $this.addClass('active');
                        let dAlpha = DeviceAlpha();
                        let bodyClasses = $('body').attr('class');
                        let regex = new RegExp('[a-z]{0,1}device', 'g');
                        let bodyClass = bodyClasses.match(regex);
                        if (bodyClass != null) {
                            $('body').removeClass(bodyClass[0]);
                        }
                        $('body').addClass(`${dAlpha}device`);
                        let shortCut = $this.attr("data-shorthand");
                        let siteWidth = $this.attr("data-width");
                        let siteHeight = $this.attr("data-height");
                        $('.main-left,#popupModel').css({
                            'right': 0,
                            'left': 'auto',
                            'top': 0
                        });
                        let remainingSpace = ScreenDimension().width - $('#popupModel').width();
                        if (remainingSpace < siteWidth)
                            siteWidth = remainingSpace;
                        if (EasyLibrary.Pinned() && dAlpha.length === 0)
                            siteWidth = remainingSpace;
                        $('.devicewrap').css({
                            "width": siteWidth,
                            "height": siteHeight
                        });
                        if (shortCut.length === 0) {
                            //if (!EasyLibrary.Pinned())
                            //    WebManagement.ShowForPopUp(true);
                            $('.main-left .right_actions >.pin__right, #popupModel .right_actions >.pin__right').show();
                            $activeDOM.find('> .SetHdlr > .stng > .setDrp').show();
                            $('.addPro, .drag, .sortComponent').removeClass('Dn');
                        } else {
                            //WebManagement.HideForPopUp(false);
                            $('.main-left .right_actions >.pin__right, #popupModel .right_actions >.pin__right').hide();
                            $activeDOM.find('> .SetHdlr > .stng > .setDrp').hide();
                            $('.addPro, .drag, .sortComponent').addClass('Dn');
                        }
                        if (EasyLibrary.IsDefined($activeDOM)) {
                            if (shortCut.length === 0)
                                $activeDOM.find('>.SetHdlr >.stng > .setDrp >li').eq(0).trigger('click');
                            else
                                $activeDOM.find('>.SetHdlr >.stng >.cb-stng').trigger('click');
                        }
                        if ($(".activeSetting").hasClass('editor-box')) {
                            $('#manageBody').trigger('click');
                        }
                        let removeCompo = [];
                        //call for resize function
                        $('.editor-component, .cRow').each(function () {
                            let $me = $(this);
                            let dataType = $me.attr('data-type');
                            if (EasyLibrary.IsUndefined(dataType)) {
                                dataType = $me.find('> .SetHdlr > .com-settings').attr('data-type');
                            }
                            if (EasyLibrary.IsDefined(dataType) && EasyLibrary.IsDefined(component[dataType])) {
                                if (EasyLibrary.IsDefined(component[dataType].inherits)) {
                                    dataType = component[dataType].inherits;
                                }
                                let index = removeCompo.indexOf(dataType);
                                if (index == -1) {
                                    if (EasyLibrary.IsDefined(component[dataType].resize)) {
                                        try {
                                            setTimeout(function () {
                                                component[dataType].resize(currentView, newView);
                                            }, 200);
                                        } catch (error) {
                                            WriteLog(error);
                                        }
                                        removeCompo.push(dataType);
                                    }
                                }
                            }
                        });
                    }
                });
                $('#SaveWebhidden').on('click', function () {
                    hidePanel();
                    WebManagement.SaveWebData(true);
                });
                $('#SaveWeb').on('click', function () {
                    hidePanel();
                    SageConfirmDialog(easyMessageList.saveandpublish, easyMessageList.savetitle, nopublish()).done(function () {
                        $('#SaveWebhidden').trigger('click');
                    }).fail(function () {
                        WebManagement.SaveWebData(false);
                    });
                    setTimeout(function () {
                        var $wrapper = $('.ui-dialog-buttonset');
                        $wrapper.find('.fa.smlbtn-succ').text('Save and Publish');
                        $wrapper.find('.fa.smlbtn-danger').text('Save');
                    }, 10);
                });
                $('#btnPublishedWeb').on('click', function () {
                    hidePanel();
                    SageConfirmDialog(easyMessageList.publish, easyMessageList.publishtitle).done(function () {
                        WebManagement.SaveWebData(true);
                    });
                });
                $('.addComponent').on('click', function () {
                    hidePanel();
                    //$('.dragHeader').text('Component List');
                    WebManagement.ShowStickeyHeaderOption('showsidebar');
                    $('.content-1').hide();
                    $('.content-3').show();
                    //$(this).addClass('clicked');
                    //$('#sidebarcontrol').find('input').eq(1).trigger('click');
                    $('.main-left').find('.pTitle').text('Component List');
                    $('#componentSearch').val('');
                    $('#refreshComSearch').trigger('click');
                });

                function nopublish() {
                    // WebManagement.SaveWebData(false);
                }


                //let previewPage = `${WebManagement.GeneratePreviewLink('webbuilder', window.location.href)}/preview`;
                //let queryParams = window.location.href.toLowerCase().replaceAll(`${SageFrameHostURL}/webbuilder/${currentpageName.replaceAll(' ', '-')}`.toLowerCase(), '');
                let previewPage = `${SageFrameHostURL}/webbuilderpreview/${currentpageName.replaceAll(' ', '-')}` + CultureURL + QueryParams;
                $('#btnNexitWebbuilder').attr('href', previewPage);
                $('#previewURL').attr('href', previewPage);


                PageAddEvents();

                function PageAddEvents() {
                    var $parent = $('.editor-site-header');
                    InitEvents();

                    function InitEvents() {
                        ClearPageError();
                        $('#pageAddPanel').on('click', function () {
                            ClearPageError();
                            $('#pageCreateArea').attr('data-pageid', '00000000-0000-0000-0000-000000000000');
                            $('#pageCreateArea').attr('data-webbuilderid', 0);
                            $('#pageCreateArea').show();
                            $('#pageListArea').hide();
                            $('#hdnPageID').val('');
                            $('#txtPageName').val('');
                            $('#txtPageTitle').val('');
                            $('#txtPageDescription').val('');
                            $('#clonePageDiv').show();
                        });
                        $('#btnCancelPageAdd').on('click', function () {
                            $('#pageCreateArea').attr('data-pageid', 0);
                            $('#pageCreateArea').hide();
                            $('#pageListArea').show();
                            ClearPageError();
                        });
                        $("#chkClonePage").on('click', function () {
                            var isChk = $(this).prop("checked");
                            if (isChk) {
                                $(".clonePageList").show();
                            } else {
                                $(".clonePageList").hide();
                            }
                        });
                        $('#btnSavePage').on('click', function () {
                            var $pageName = $('#txtPageName');
                            var $title = $('#txtPageTitle');
                            var $description = $('#txtPageDescription');
                            var pageName = $pageName.val().trim();
                            var pageID = $('#pageCreateArea').attr('data-pageid');
                            var webbuilderID = parseInt($('#pageCreateArea').attr('data-webbuilderid'));
                            var description = $description.val().trim();
                            var title = $title.val().trim();
                            if (pageName.length == 0) {
                                SetPageError("Page Name can't be empty");
                            } else {
                                if (!ValidatePageName(pageName)) {
                                    SetPageError("Page Name not accepted");
                                } else if (CheckDuplicate(pageName, pageID)) {
                                    SetPageError("Page Name duplicated");
                                } else {
                                    description = description.length == 0 ? pageName : description;
                                    title = title.length == 0 ? pageName : title;
                                    var cloneWebBuilderID = 0;
                                    if ($("#chkClonePage").prop("checked")) {
                                        cloneWebBuilderID = $("#clonePageList").val();
                                    }

                                    //changing
                                    let resultObj = AddUpdatePage(pageID, pageName, '', title, description, webbuilderID, cloneWebBuilderID);
                                    //changing
                                    var newPageID = resultObj.pageID;
                                    var oldPageName = currentpageName;
                                    if (newPageID == 0) {
                                        SetPageError("Page Name Already Exists.");
                                        return false;
                                    } else if (newPageID != 0) {
                                        currentpageName = pageName;
                                        if (pageID == newPageID) { //updated
                                            var $li = $('li[data-pageid="' + newPageID + '"]');
                                            $li.find(' >a > .pageName').text(pageName);
                                            $li.find('> a').attr('href', SageFrameHostURL + '/' + pageName.replace(/ /g, '-'));
                                            var $div = $('div[data-pageid="' + newPageID + '"]');
                                            $div.find('label.title').text(pageName);
                                            $div.find('> .activedefaultPage ').attr('data-pagename', pageName);
                                            $('#headerMenuList > div[data-pageid="' + pageID + '"] ').find('.page-name.title').text(pageName);
                                            var $cloneOption = $('option[data-type="clonepage"][data-pageid="' + newPageID + '"]');
                                            $cloneOption.text(pageName);
                                        } else { //added
                                            var addedMenu = '<div data-type="page" data-webbuilderid="' + resultObj.webbuilderID + '" data-pageid="' + newPageID + '" class="panel panel-info form-elements element field-row stElWrap col60-40">';
                                            addedMenu += '<label class="fCol title">' + pageName + '</label>';
                                            addedMenu += '<span class="fCol TxAl-r">';
                                            addedMenu += '<span class="cb-tick activedefaultPage " title="set as starup page"data-pageName="' + pageName + '"></span>';
                                            addedMenu += '<span class="deleteWebPage  cb-del"></span>';
                                            addedMenu += '<span class="editWebPage fa fa-pencil-square-o"></span>';
                                            addedMenu += "</span>";
                                            //$('#headerMenuList').append(addedMenu);
                                            $('#headerMenuList').append(PageDOM(resultObj.webbuilderID, newPageID, pageName, true));


                                            var clonePageAdded = '<option data-type="clonepage" value="' + resultObj.webbuilderID + '" data-pageid="' + newPageID + '">';
                                            clonePageAdded += pageName;
                                            clonePageAdded += "</option>";
                                            $("#clonePageList").append(clonePageAdded);
                                            $("#chkClonePage").prop("checked", false);
                                            $(".clonePageList").hide();
                                            $('.eb-menu').each(function () {
                                                var $this = $(this);
                                                var isHeading = false;
                                                if ($this.closest('.editor-site-header').length == 1)
                                                    isHeading = true;
                                                var color = 'rgb(0,0,0)';
                                                var fontSize = '';
                                                var $menuAnchor = '';
                                                var $span = '';
                                                var $menuA = '';
                                                if ($this.find('li').not('.Dn').find('a').not('.active-page').length == 0) {
                                                    color = 'rgb(0,0,0)';
                                                    fontSize = '12';
                                                } else {
                                                    var $item = $this.find('li a').not('.active-page').eq(0);
                                                    color = $item.find('span').css('color');
                                                    fontSize = $item.find('span').css('font-size');
                                                    $menuAnchor = $item.parent();
                                                    $span = $item.find('span');
                                                    $menuA = $item;

                                                }
                                                var hide = 'Dn';
                                                var href = SageFrameHostURL + '/' + pageName.replace(/ /g, '-');
                                                var li = '<li data-pageid="' + newPageID + '" >';
                                                li += '<a href="' + href + '" class="pagelink">';
                                                li += '<span class="pageName LtrSpc-0" style="font-size: ' + fontSize + '; color: ' + color + ';">';
                                                li += pageName;
                                                li += '</span>';
                                                li += '</a>';
                                                li += '</li>';
                                                var $li = $(li);
                                                $this.append($li);
                                                if ($menuAnchor.length > 0) {
                                                    $li.attrs($menuAnchor.attrs());
                                                    $li.find('span').attrs($span.attrs());
                                                    $li.find('a').attrs($menuA.attrs());
                                                    $li.find('a').attr('href', href);
                                                    $li.attr('data-pageid', newPageID);
                                                    $li.attr('data-webbuilderID', resultObj.webbuilderID);
                                                    //$li.find('a').removeClass("redirectLink").addClass("redirectLink");
                                                    $li.find("a").attr("data-PageName", pageName.replace(/ /g, '-'));
                                                    if (isHeading) {
                                                        $li.removeClass('Dn');
                                                    } else {
                                                        if (!$li.hasClass('Dn'))
                                                            $li.addClass('Dn');
                                                    }
                                                }
                                            });
                                            SortEvents();
                                            PagelinkStop();
                                            MenuHover($('#primaryColor').css('background-color'), $('#secondaryColor').css('background-color'));
                                        }
                                        $('#pageCreateArea').hide();
                                        $('#pageListArea').show();
                                        currentpageName = oldPageName;
                                        var Oriname = $('#txtPageName').attr('data-pname');
                                        if (cloneWebBuilderID > 0 && Oriname === oldPageName) { } else {
                                            SilentSave();
                                        }

                                        if (typeof Oriname !== "undefined" && Oriname === oldPageName) {
                                            window.location = SageFrameHostURL + '/WebBuilder/' + pageName.replace(" ", '-');
                                        }
                                    }

                                }
                            }
                        });
                    }


                    function ValidatePageName(pageName) {
                        var validPageaName = (/^[A-Za-z\s]+$/).test(pageName);
                        if (validPageaName)
                            return true;
                        else
                            return false;
                    }
                    ReadMenu();
                    ClonePageBind();

                    function ReadMenu() {
                        var $menu = $('#innerPageList  li');
                        $('#headerMenuList').html(BindMenuItem($menu));
                        SortEvents();
                    }

                    function ClonePageBind() {
                        var $menu = $('#innerPageList  li');
                        $("#clonePageList").html(BindCloneMenuItem($menu));

                    }

                    function BindMenuItem($menu) {
                        var html = '';
                        $.each($menu, function (index, item) {
                            var $item = $(this);
                            var pageID = $item.attr('data-pageid');
                            var webbuilderID = $item.attr('data-webbuilderid');
                            var pageName = $item.find(' > a > .pageName').text();


                            var currentPage = false;
                            var activeCurrent = '';
                            if (pageName === portalDefaultPage) {
                                currentPage = true;
                                activeCurrent = "active";
                            }

                            html += PageDOM(webbuilderID, pageID, pageName, true, currentPage, activeCurrent);
                            //html += '<div data-type="page" data-webbuilderid="' + webbuilderID + '" data-pageid="' + pageID + '" class="panel panel-info form-elements element field-row stElWrap col60-40">';
                            //html += '<label class="fCol title">';
                            //html += pageName;
                            //html += '</label>';
                            //var currentPage = false;
                            //var activeCurrent = '';
                            //if (pageName === portalDefaultPage) {
                            //    currentPage = true;
                            //    activeCurrent = "active";
                            //}
                            //html += '<span class="fCol TxAl-r">';
                            //html += '<span class="cb-tick activedefalutPage ' + activeCurrent + '" title="set as starup page" data-pageName="' + pageName + '"></span>';
                            //if (!currentPage) {
                            //    html += '<span class="deleteWebPage cb-del" title="delete page"></span>';
                            //    html += '<span class="editWebPage  fa fa-pencil-square-o" title="edit page"></span>';
                            //}

                            //html += "</span>";
                            //if ($item.find('> ul > li').length > 0) {
                            //    //html += '<div class="sortable panel-body ">';
                            //    html += BindMenuItem($item.find('> ul > li'), item.MenuItemID);
                            //    //html += "</div>";
                            //}
                            //html += "</div>";
                        });
                        return html;
                    }

                    function BindCloneMenuItem($menu) {
                        var html = '';
                        html += '<option data-type="clonepage" value="0" data-pageid="0">Select Page</option>';
                        $.each($menu, function (index, item) {
                            var $item = $(this);
                            var pageID = $item.attr('data-pageid');
                            var webbuilderID = $item.attr('data-webbuilderid');
                            var pageName = $item.find(' > a > .pageName').text();
                            html += '<option data-type="clonepage" value="' + webbuilderID + '" data-pageid="' + pageID + '">';
                            html += pageName;
                            html += "</option>";
                        });
                        return html;
                    }

                    function CheckDuplicate(newPage, pageID) {
                        var duplicate = false;
                        $parent.find('.eb-menu li').not('li[data-pageid="' + pageID + '"]').each(function (i, v) {
                            if ($(this).text().trim().toLowerCase() === newPage.toLowerCase()) {
                                duplicate = true;
                                return true;
                            }
                        });
                        return duplicate;
                    }

                    function ClearPageError() {
                        $('#pageError').text('');
                    }

                    function SetPageError(error) {
                        $('#pageError').text(error);
                    }

                    function RebindMenu() {
                        var $menu = $('#headerMenuList > div.panel-info');
                        var menuSpan = $('.eb-menu li a span').eq(0).attrs();
                        $('.eb-menu').html(ReBindMenuItem($menu));
                        if ($('#headerMenuList > div.panel-info').length == 1) {
                            $('#headerMenuList > div.panel-info > .deleteWebPage').remove(0);
                        }
                        $('.eb-menu span').each(function () {
                            $(this).attrs(menuSpan);
                        });
                        PagelinkStop();
                    }

                    function SortEvents() {
                        $('.deleteWebPage').off().on('click', function () {
                            let $this = $(this);
                            let $contentbox = $this.parents('.content-box');
                            let pageName = $contentbox.find('.title.page-name').text().trim();
                            SageConfirmDialog('Do you want to delete "' + pageName + '" page? All the data on the page will also be deleted.').done(function () {
                                let pageID = $contentbox.attr('data-pageid');
                                DeletePage(pageID, $this.parent().parent(), pageName);
                            });
                        });
                        $('.editWebPage').off().on('click', function () {
                            let $this = $(this);
                            let $contentbox = $this.parents('.content-box');
                            let pageID = $contentbox.attr('data-pageid');
                            let webbuilderID = $contentbox.attr('data-webbuilderid');
                            SecureAjaxCall.PassObject({
                                url: `${SageFrameHostURL}/webbuilder/GetPageDetails`,
                                data: JSON.stringify(pageID),
                                success: function (pageDetail) {
                                    $('#txtPageName').val(pageDetail.PageName).attr('data-pname', pageDetail.PageName);
                                    $('#txtPageTitle').val(pageDetail.Title);
                                    $('#txtPageDescription').val(pageDetail.Description);
                                    $('#pageCreateArea').attr('data-pageid', pageID).attr('data-webbuilderid', webbuilderID).show();
                                    $('#pageListArea').hide();
                                    $('#clonePageDiv').hide();
                                }
                            });
                        });

                        $('.activedefaultPage').not('.active').on('click', function () {
                            let pageName = $(this).attr('data-pagename');
                            SageConfirmDialog('Do you want to set ' + pageName + ' as default startup page?').done(function () {
                                WebManagement.SetDefaultPage(pageName, portalDefaultPage);
                            });
                        });

                        $('.pageAction').off().on('click', function () {
                            let this_ = $(this);
                            let $panel = this_.find('.page-setting-panel');
                            $('.content-box').removeClass('active');
                            $('.pageAction').removeClass('active');
                            if ($panel.hasClass('Dn')) {
                                $('.page-setting-panel').addClass('Dn');
                                $panel.removeClass('Dn');
                                this_.parents('.content-box').addClass('active');
                                this_.addClass('active');
                            } else {
                                $panel.addClass('Dn');
                            }
                        });

                        $('.enableheaderfooter').off().on('click', function () {
                            let $this = $(this);
                            let checked = $this.prop("checked");
                            UpdateHeaderFooter($this.attr('data-pagename'), $this.attr('data-section'), checked);

                        });

                    }

                    function UpdateHeaderFooter(pagename, section, enabled) {
                        SecureAjaxCall.PassObject({
                            data: JSON2.stringify({
                                PageName: pagename,
                                Section: section,
                                Enabled: enabled,
                                SiteID: GetSiteID
                            }),
                            url: SageFrameHostURL + '/webbuilder/EnableHeadFoot',
                            success: function (response) {

                            },
                        });
                    }

                    function ReBindMenuItem($menu) {
                        var html = '';
                        $.each($menu, function (index, item) {
                            var $item = $(this);
                            var pageID = $item.attr('data-pageid');
                            var pageName = $item.find('> .title').text();
                            var addliclass = 'Dn';
                            if ($item.find('> .showinmenu').find('.showpageinmenu').is(':checked')) {
                                addliclass = '';
                            }
                            html += '<li data-pageid="' + pageID + '" class="' + addliclass + '" >';
                            html += '<a href="' + SageFrameHostURL + '/' + pageName.replace(/ /g, '-') + webBuilderPageExtension + '" class="pagelink"><span class="pageName">' + pageName + '</span></a>';
                            if ($item.find(' > div.panel-body > div.panel-info').length > 0) {
                                html += '<ul>';
                                html += ReBindMenuItem($item.find(' > div.panel-body > div.panel-info'));
                                html += "</ul>";
                            }
                            html += "</li>";
                        });
                        return html;
                    }

                    function PageDOM(webbuilderid, pageid, pageName, setasdefault, currentPage, activeCurrent) {
                        let previewPageURL = `${SageFrameHostURL}/webbuilderpreview/${pageName.replaceAll(' ', '-')}` + CultureURL + QueryParams;
                        let editPageURL = `${SageFrameHostURL}/webbuilder/${pageName.replaceAll(' ', '-')}` + CultureURL + QueryParams;
                        let editdeleteDom = ` <li class="editWebPage" data-pageid="${pageid}" data-webbuilderid="${webbuilderid}"><i class="fa fa-edit"></i>Edit</li>
                                                            <li class="deleteWebPage"><i class="fa fa-trash"></i>Delete</li>`;
                        if (currentPage)
                            editdeleteDom = '';
                        return `
                                <div class="content-box panel-links Dfx PosR TxAl-m" data-type="page" data-webbuilderid="${webbuilderid}" data-pageid="${pageid}">
                                    <div class="page-name title">${pageName}</div>
                                    <div class="page-settings">
                                        <div class="page-settings__containers  Dfx TxAl-m">
                                            <div class=" page-stng view pagepreview">
                                                <a href="${previewPageURL}" target="_blank"><i class="fa fa-eye"></i></a>
                                            </div>
                                            <div class="page-stng page-preview pageEdit" >
                                               <a href="${editPageURL}"> <i class="fa fa-share-square-o"></i></a>
                                            </div>
                                            <div class="page-stng action pageAction">
                                                <i class="fa fa-ellipsis-h"></i>
                                                <div class="page-setting-panel Dn">
                                                    <div class="page-setting-container ">
                                                        <ul>
                                                            <li class="activedefaultPage ${activeCurrent}" data-pagename="${pageName}"><i class="fa fa-home"></i>Set as startup page</li>
                                                                ${editdeleteDom}
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                `;
                    }

                    function AddUpdatePage(pageID, pageName, caption, title, description, webbuilderID, cloneWebBuilderID) {
                        let resultObj = {
                            'pageID': 0,
                            'webbuilderID': 0
                        };
                        var Mode = pageID == "00000000-0000-0000-0000-000000000000" ? "A" : "E";
                        var UpdateLabel = '';
                        var checks = $('div.divPermission tr:gt(0), #dvUser tr').find('input.sfCheckbox:checked');
                        //lstPagePermission = [];
                        var beforeID = 0;
                        var afterID = 0;
                        if ($('#rdbBefore').prop('checked') == true) {
                            beforeID = $('#cboPositionTab').val();
                        } else if ($('#rdbAfter').prop('checked') == true) {
                            afterID = $('#cboPositionTab').val();
                        }
                        var MenuSelected = 0;
                        var _IsVisible = $('#rdbAdmin').prop('checked') ? $('#chkShowInDashboard').prop("checked") : true;
                        var objTagValue = GetSeoValue('easybuilder', title, description);
                        SaveMessageShow(pageName + ' page adding');
                        SecureAjaxCall.PassObject({
                            data: JSON2.stringify({
                                PageID: pageID,
                                PageName: pageName,
                                DisplayName: pageName,
                                WebbuilderID: webbuilderID,
                                CloneWebBuilderID: cloneWebBuilderID,
                                KeyWords: '',
                                Title: title,
                                Description: description,
                                PageComponent: '',
                                HeaderFooterComponent: 'pageadded',
                                Mode: Mode,
                                Culture: 'en-US'
                            }),
                            url: SageFrameHostURL + '/webbuilder/Savepage',
                            success: function (response) {

                                switch (response.StatusCode) {

                                    case 1: {
                                        let result = response.Result;
                                        resultObj = {
                                            'pageID': result[0],
                                            'webbuilderID': result[1]
                                        };
                                        SaveMessageRemove();
                                    }
                                        break;
                                    case 3: { //updated
                                        let result = response.Result;
                                        resultObj = {
                                            'pageID': result[0],
                                            'webbuilderID': result[1]
                                        };
                                        SaveMessageRemove();
                                    }
                                        break;
                                    case 7: {
                                        let result = response.Result;
                                        resultObj = {
                                            'pageID': result[0],
                                            'webbuilderID': result[1]
                                        };
                                        SaveMessageRemove();
                                    }
                                        break;
                                    default:
                                }
                                //var response = data.d;
                                //if (response !== null)
                                //    response = response.split(',');

                            },
                        });
                        return resultObj;
                    }

                    function GetSeoValue(type, title, desciption) {
                        var objTagValue = [];
                        var tagValue = [type, title, desciption];
                        var tagID = [1, 2, 4];
                        $.each(tagValue, function (index, value) {
                            var objTag = {
                                SEOMetaTagTypeID: parseInt(tagID[index]),
                                MetaTagContent: tagValue[index]
                            };
                            objTagValue.push(objTag);
                        });
                        return objTagValue;
                    }

                    function DeletePage(pageID, $item, pageName) {
                        SecureAjaxCall.PassObject({
                            url: `${SageFrameHostURL}/webbuilder/DeletePages`,
                            data: JSON.stringify({
                                pageID: pageID,
                                userName: SageFrameUserName,
                            }),
                            success: function () {
                                $item.remove();
                                $("#clonePageList option").filter(function () {
                                    return $.trim($(this).text()) == pageName;
                                }).remove();

                                $('#headerMenuList > div').each(function () {
                                    let $this = $(this);
                                    if ($this.find('.page-name.title').text().trim() == pageName)
                                        $this.remove();
                                });

                                $('.eb-menu').each(function () {
                                    var $this = $(this);
                                    $this.find('li').each(function () {
                                        var $me = $(this);
                                        var newPagename = $me.find('> a > span').text();
                                        if (newPagename === pageName) {
                                            if ($me.find(' > ul').length > 0) {
                                                $this.append($me.find('> ul >li'));
                                            }
                                            var $ul = $me.parent().parent('li.hasChild');
                                            $me.remove();
                                            if ($ul.find('li').length == 0) {
                                                $ul.find('i').remove();
                                                $ul.removeClass('hasChild');
                                            }
                                        }
                                    });
                                });
                                SilentSave();
                                if (pageName === currentpageName) {
                                    window.location = window.location.href;
                                }
                            },
                        });
                    }
                }

                //$('#managePagePanel').on('click', function () {
                //    WebManagement.ShowStickeyHeaderOption('pagesettingshow');
                //    $('.headerControls').removeClass('clicked');
                //    $(this).addClass('clicked');
                //    let type = "settingDOMs";
                //    PopUpSetting('manage pages', 0, 500, 0, 0, 'managepages', type, $('.editor-site-header'), $(this));
                //});
                $('.pagetype').on('click', function () {
                    let this_ = $(this);
                    $('.tabs__content > div ').hide();
                    $('#' + this_.attr('data-open')).show();

                    $('.pagetype').removeClass('active');
                    this_.addClass('active');
                });

                function hidePanel() {
                    $('.taskbarAction').removeClass('active');
                    $('.taskbarActionMenu').addClass('Dn');
                }
            },
            SiteSettings: function () {
                let this_ = this;
                this_.SetThemeColor();
                $('#basicFonts').html(DOMFontBasicCollection());
                $('#basicFonts').on('change', function () {
                    let $body = $('.site-body');
                    let classList = $body.attr('class');
                    let fontClass = classList.match(/ff-(\w+)/g);
                    if (fontClass !== null) {
                        $body.removeClass(fontClass[0]);
                    }
                    let fontFamily = $(this).val();
                    $body.addClass('ff-' + fontFamily.toLowerCase());
                    $('#fontPreview').attr('class', 'ff-' + fontFamily.toLowerCase());
                    webBuilderSettings.defaultFontFamily = fontFamily;
                });
                let classesList = $('.site-body').attr('class');
                let fontClasses = classesList.match(/ff-(\w+)/g);
                if (fontClasses !== null) {
                    $('#basicFonts').val(fontClasses[0].replace('ff-', ''));
                    $('#fontPreview').attr('class', fontClasses[0].replace('ff-', ''));
                }

                if ($('.editor-com-nav:visible').attr('data-active') === "onepagemenu") {
                    $('#chkOnePageMenu').prop('checked', true);
                    $('#pagesSelector').hide();
                    $('#limanageonepage').show();
                } else {
                    $('#chkOnePageMenu').prop('checked', false);
                    $('#pagesSelector').show();
                    $('#limanageonepage').hide();
                }
                $('#chkOnePageMenu').on('click', function () {
                    if ($(this).is(':checked')) {
                        $('.editor-com-nav').attr('data-active', 'onepagemenu');
                        $('.editor-com-nav > .onepagemenu').show();
                        $('.editor-com-nav > .eb-menu').hide();
                        $('#pagesSelector').hide();
                        $('#limanageonepage').show();
                        WebManagement.OnePageMenuEvent();
                        //$('#limanageonepage').trigger('click');
                        var parentClasses_ = $('.site-body').attr('class').match(/hdr-[a-z]{1,20}/g);
                        if (parentClasses_ !== null) {
                            $('.site-body').removeClass(parentClasses_[0]);
                        }
                        $('.site-body').addClass('hdr-fxd');
                        webBuilderSettings.SiteHeaderEffect = 'hdr-fxd';
                        if (portalDefaultPage.toLowerCase() != currentpageName.toLowerCase()) {
                            WebManagement.SetDefaultPage(currentpageName);
                            //  $('.activedefalutPage[data-pagename="' + currentpageName + '"]').trigger('click');
                            // let $activeDivDom= $("#headerMenuList").find('.panel-info').find('.activedefalutPage[data-pagename="' + currentpageName + '"]');
                        }
                        //UpdateSettings();                        
                        SilentSave();
                    } else {
                        $('.editor-com-nav').attr('data-active', 'mutiplepage');
                        $('.editor-com-nav > .onepagemenu').hide();
                        $('.editor-com-nav > .eb-menu').show();
                        $('#pagesSelector').show();
                        $('#managePagePanel').trigger('click');
                        $('#limanageonepage').hide();
                        $('.site-body').removeClass('hdr-fxd');
                        webBuilderSettings.SiteHeaderEffect = 'hdr-nml';
                    }
                    UpdateSettingKeyValue("SinglePage", $(this).is(':checked').toString());
                });

                $('#darkMode').on('click', function () {
                    let changedvalue = 'skin__dark';
                    if ($(this).is(':checked')) {
                        changedvalue = 'skin__dark';
                        $('body').addClass('skin__dark').removeClass('skin__light');
                    } else {
                        changedvalue = 'skin__light';
                        $('body').addClass('skin__light').removeClass('skin__dark');
                    }
                    UpdateSettingKeyValue('EditorTheme', changedvalue);
                });
                $('.builder-options-array h2').on('click', function () {
                    if (!$(this).parent().hasClass('activeAccordion')) {
                        $('.builder-options').removeClass('activeAccordion');
                        $('.OptionItems').slideUp(400);
                        $(this).next().slideDown(400);
                        $(this).parent().addClass('activeAccordion');
                    }
                });

            },
            SiteHeader: function () {
                let parentClasses = $('.site-body').attr('class').match(/hdr-[a-z]{1,20}/g);
                let headerEffect = 'hdr-nml';
                if (parentClasses !== null) {
                    headerEffect = parentClasses[0];
                }
                $('#SitemenuHeaderStyle').find('i').removeClass('selected');
                $('#SitemenuHeaderStyle').find('i[data-class="' + headerEffect + '"]').addClass('selected');
                if (headerEffect === "hdr-stky")
                    $('.StickyOptions').show();
                else
                    $('.StickyOptions').hide();
                $('#SitemenuHeaderStyle > i').on('click', function () {
                    let parentClasses_ = $('.site-body').attr('class').match(/hdr-[a-z]{1,20}/g);
                    if (parentClasses_ !== null) {
                        $('.site-body').removeClass(parentClasses_[0]);
                    }
                    let menuStyle = $(this).attr('data-class');
                    $('.site-body').addClass(menuStyle);
                    $('#SitemenuHeaderStyle').find('i').removeClass('selected');
                    $('#SitemenuHeaderStyle').find('i[data-class="' + menuStyle + '"]').addClass('selected');
                    webBuilderSettings.SiteHeaderEffect = menuStyle;
                    switch (menuStyle) {
                        case 'hdr-fxd':
                            //var containerWidth = $('.editor-componentWrapper').css('width');
                            //$('.editor-site-header').css('width', containerWidth);
                            $('.StickyOptions').hide();
                            $('.edit-area').removeClass('stick');
                            break;
                        case 'hdr-stky':
                            //$('.editor-site-header').css('width', '');
                            $('.StickyOptions').show();
                            $('.edit-area').removeClass('stick');
                            break;
                        case 'hdr-abs':
                            //$('.editor-site-header').css('width', '');
                            $('.StickyOptions').hide();
                            $('.edit-area').removeClass('stick');
                            break;
                        default:
                            $('.editor-site-header > .cRow').removeClass('stick');
                            $('.editor-componentWrapper').css('padding-top', '');
                            $('.StickyOptions').hide();
                            $('.editor-site-header').css('width', '');
                            break;
                    }
                    // HeaderTopPadding();
                });
            },
            AsyncLoad: function () {
                let left = $('.SettingsUpperBody').first().width();
                $('.SettingsUpperBody').css({
                    'height': parseInt(ScreenDimension().height) - parseInt($('.main-top-row').height()),
                    'left': `-${left}px`
                });
                $('#settingCancel').off('click').on('click', function () {
                    closeComponentPopup();
                });
                $('#settingSave').off('click').on('click', function () {
                    $('#SaveWeb').trigger('click');
                });
                CopyPlaneText();
                RowAddBindEvent($('body'));
                //if (this.config.core)
                //    WebManagement.OnlineCompoSearchFilters();
            },

            //obsolete start
            InitScrollBar: function () {
                let scroller = new ScrollJS({
                    container: $('.main-container'),
                    scrollbar: $('.main-container').find('>.scrollbar'),
                    content: $('.edit-area')
                });
                Scroller();
            },
            ComparePageAndHideIfNotExists: function () {
                let actualPages = EasyLibrary.GetPageArray();
                let actualPagesLen = actualPages.length;
                let domPageLength = $('.editor-site-header').find('.menuHeader:visible .eb-menu > li').length;
                if (actualPages !== domPageLength) {
                    for (p = 0; p < actualPages; p++) {
                        for (pd = 0; pd < domPageLength; pd++) {
                            let pageDOM = '<li data-pageid="2130" data-webbuilderid="2" class="hide-element"><a href="http://172.18.12.40:9181/abcd" class="pagelink"><span class="pageName eLtrSpc-0" style="font-size: 14px; color: rgb(217, 217, 217);">abcd</span></a></li>';
                            $('.editor-site-header').find('.menuHeader:visible .eb-menu').append(pageDOM);
                        }
                    }
                }
            },
            ScreenSizeLimit: function () {
                let width = ScreenDimension().width;
                if (width < 1024)
                    SaveMessageShow("coming soon for screen less than 1024 px");
                else
                    SaveMessageRemove();
            },
            FooterInit: function () {
                $('.ManageFooter').on('click', function () {
                    let $parent = $(this).parent().parent();
                    let footers = ['FooterThree', 'FooterTwo'];
                    let footerLength = footers.length;
                    let selectDOM = DOMCreate('li', 'Footer styles', 'title');
                    for (var i = 0; i < footerLength; i++) {
                        let html = $(`#${footers[i]}`).html();
                        selectDOM += DOMCreate('li', html, 'selectData  sfCol_100');
                    }
                    selectDOM = DOMCreate('ul', selectDOM, 'selectDataWrapper clearfix footerStyles');
                    FullPagePopup({
                        data: selectDOM,
                        heading: "FooterStyle",
                        showheading: true
                    });
                    ReadMenu();

                    function ReadMenu() {
                        let $menu = $('.editor-site-header').find('.menuHeader:visible .eb-menu > li');
                        $('.fullpagepopupWrapper').find('.automenucreate').html($('.editor-site-header').find('.menuHeader:visible .eb-menu').html());
                    }
                });
            },
            ScrollDynamicBind: function () {
                let dynamicScroll = 'var scroolHeight = document.body.scrollTop;';
                $('.scroll-begin').each(function (i, v) {
                    let scrollClass = 'scroll_' + i;
                    let $this = $(this);
                    let top = $this.offset().top;
                    let height = $this.height();
                    $this.addClass(scrollClass);
                    dynamicScroll += "if (scroolHeight > " + top + " && scroolHeight < " + (top + height) + ")";
                    dynamicScroll += "{";
                    let delay = 0;
                    if (typeof ($this.attr('data-scrolldelay') !== "undefined")) {
                        delay = parseInt($this.attr('data-scrolldelay'));
                    }
                    dynamicScroll += "setTimeout(function () {";
                    dynamicScroll += "$('." + scrollClass + "').addClass('scroll-end');";
                    dynamicScroll += "}, " + delay + ");";
                    dynamicScroll += "}";
                });
                let ScrollWindow = new Function('param', dynamicScroll);
                //window.onscroll = function () {
                //    /*ScrollWindow();*/
                //};
            },
            GeneratePreviewLink: function (key, sourceURL) {
                let params_arr = sourceURL.split("/");
                for (var i = params_arr.length - 1; i >= 0; i -= 1) {
                    let param = params_arr[i].split("=")[0];
                    if (param.toLowerCase() == key.toLowerCase()) {
                        params_arr.splice(i, 1);
                    }
                }
                let rtn = params_arr.join("/");
                return rtn;
            },
            //end obsolete


            UpdateComponentManually: function () {
                let count = 0;
                $.each(component, function (i, v) {
                    /*updateComponent variable is in webbuilderEdit*/
                    let name = v.componentname;
                    let componentValue = v;
                    let type = typeof v.type === "undefined" ? "" : v.type;
                    if (updateComponent.indexOf(name) >= 0) {
                        WebManagement.UpdateComponentForDev(name, componentValue, count, type);
                        console.log(name + ' Updated');
                        count++;
                    }
                });
            },
            RebindMenuID: function () {
                $('#innerPageList > li ').each(function () {
                    let $this = $(this);
                    $('.eb-menu > li').each(function () {
                        let $ebList = $(this);
                        if ($ebList.find('> a > span').text().toLowerCase() === $this.find('> a > span').text().toLowerCase()) {
                            $ebList.attr('data-pageid', $this.attr('data-pageid'));
                            $ebList.attr('data-webbuilderid', $this.attr('data-webbuilderid'));
                        }
                    });
                });
                $('.eb-menu').each(function () {
                    let $tempPage = $(this);
                    $tempPage.find('li > a > span').each(function () {
                        let $temp = $(this);
                        $('#innerPageList li > a > span').each(function () {
                            let $this = $(this);
                            if ($this.text().toLowerCase() === $temp.text().toLowerCase()) {
                                $this.attr('data-pageid', $tempPage.attr('data-pageid'));
                                $this.attr('data-webbuilderid', $tempPage.attr('data-webbuilderid'));
                            }
                        });
                    });
                });
            },
            MenuType: function () {
                if ($('.editor-com-nav:visible').attr('data-active') === "onepagemenu") {
                    $('.editor-com-nav:visible > .onepagemenu').show();
                    $('.editor-com-nav:visible > .eb-menu').hide();
                } else {
                    $('.editor-com-nav:visible > .onepagemenu').hide();
                    $('.editor-com-nav:visible > .eb-menu').show();
                }
                //WebManagement.OnePageMenuEvent();
            },
            OnePageMenuEvent: function () {
                //$('#limanageonepage').on('click', function () {
                let htmlDOM = '';
                htmlDOM += '<span class="note">Section title will be in the place of menu and leaving it empty will not be included in the menu. Clicking on the title will take you to that section.</span>';
                $('.editor-componentWrapper > .cRow').each(function (i, v) {
                    let $this = $(this);
                    let name = typeof ($this.attr('data-menuname')) === "undefined" ? "" : $this.attr('data-menuname');
                    let dom = DOMCreate('span', `<label>Section title</label><input type="text" class="sectionname" value="${name}" />`);
                    let DOM = $this.wrap('<p/>').parent().html();
                    $this.unwrap();
                    dom += DOMCreate('div', DOM, 'onepagedata');
                    htmlDOM += DOMCreate('li', dom);
                });
                htmlDOM = DOMCreate('ul', htmlDOM, 'onepagelist clearfix');
                let saveBtn = '<span>Single Page Sections</span><span class="pop-header-btn" id="btnOnePage">Save</span>';
                FullPagePopup({
                    data: htmlDOM,
                    heading: saveBtn,
                    showheading: true,
                    onappend: function ($wrapper) {
                        $('#btnOnePage').on('click', function () {
                            $('.onepagemenu').each(function (index, item) {
                                let html = "";
                                let $a = $(this).find('li > a').not('.active-page');
                                let aStyle = '';
                                let pStyle = '';
                                let liStyle = '';
                                if ($a.length > 0) {
                                    let $span = $a.find('.pageName');
                                    let $li = $a.parent();
                                    let $Style = $a.attrs();
                                    aStyle = $Style.style;
                                    if (aStyle == undefined) {
                                        aStyle = '';
                                    }
                                    let $spanStyle = $span.attrs();
                                    pStyle = $spanStyle.style;
                                    if (pStyle == undefined) {
                                        pStyle = '';
                                    }

                                    let $liStyle = $li.attrs();
                                    liStyle = $liStyle.style;
                                    if (liStyle == undefined) {
                                        liStyle = '';
                                    }
                                }
                                $('.editor-componentWrapper > .cRow').each(function (i, v) {
                                    let $this = $(this);
                                    let $name = $('.sectionname').eq(i);
                                    let $val = $name.val().trim();
                                    if ($val.length > 0) {
                                        let opVal = 'opclass_' + i;
                                        html += `<li class="sfFirst oneMenu"  data-opscroll="${opVal}" style="${liStyle}">
                                                     <a href="javascript:void(0);" class="pagelink onepage"  style="${aStyle}">
                                                        <span class="pageName"  style="${pStyle}">${$val}</span>
                                                     </a>
                                                 </li>`;
                                        $this.attr({
                                            'data-opscroll': opVal,
                                            'data-menuname': $val
                                        });
                                    }

                                });
                                $(this).html(html);
                            });
                            OnePageMenuScrollEvent();
                            CloseFullPagePopup();
                        });
                    }
                });
                //});
            },
            DragComponentSettings: function () {
                $('.main-left').draggable({
                    containment: '.main-container',
                    handle: '.dragComponentSettings',
                    start: function (e, ui) {
                        $(ui.helper).css({
                            "position": "fixed"
                        });
                    },
                    stop: function (event, ui) {
                        //AutoAlignDragger(ui.helper);
                    }
                });
            },

            OnlineEvents: function () {
                $(".plusBtn").on("click", function () {
                    if ($("#pagesSelector").is(':visible')) {
                        $('.taskbarAction').removeClass('active');
                        $('.taskbarActionMenu').addClass('Dn');
                        $('#pagesSelector').addClass('active');
                        $('#pagesSelector').next('.taskbarActionMenu').removeClass('Dn');
                    }
                    else {
                        WebManagement.OnePageMenuEvent();
                    }
                });
                $("body").on("click", "#btnCompLoadMore", function () {
                    let searchText = $("#onlinecomponentSearch").val();
                    WebManagement.config.OnlineOffset = WebManagement.config.OnlineOffset + 1;
                    WebManagement.GetOnlineComponents(true, WebManagement.config.OnlineOffset, WebManagement.config.OnlineLimit, searchText, true);
                });
                $("#onlinecomponentSearch").on("keyup", function (e) {
                    if (e.keyCode == 13)
                        SearchOnlineComponent();
                });
                $('#btnComponentSearch').on('click', function () {
                    SearchOnlineComponent();
                });
                $('#refreshOnlineCompoSearch').on('click', function () {
                    $('#compoTypesearch').val(0);
                    $("#onlinecomponentSearch").val('');
                    $('#compoCategorysearch').val(0);
                    $('#slccompoApplicationName').val(0);
                    SearchOnlineComponent();
                });

                function SearchOnlineComponent() {
                    let searchText = $("#onlinecomponentSearch").val().trim();
                    WebManagement.config.OnlineOffset = 0;
                    onlineComponentArr = [];
                    WebManagement.GetOnlineComponents(true, WebManagement.config.OnlineOffset, WebManagement.config.OnlineLimit, searchText, true, true);
                }

                $("body").on("click", "#btnSiteLoadMore", function () {
                    let searchText = $("#onlineSiteSearch").val();
                    WebManagement.config.OnlineSiteOffset = WebManagement.config.OnlineSiteOffset + 1;
                    WebManagement.GetOnlineSites(false, WebManagement.config.OnlineSiteOffset, WebManagement.config.OnlineSiteLimit, searchText, true);
                });
                //$("#onlineSiteSearch").on("change", function () {
                //    SearchOnlineSite();
                //});
                $("#onlineSiteSearch").on("keyup", function (e) {
                    if (e.keyCode == 13)
                        SearchOnlineSite();
                });

                function SearchOnlineSite() {
                    let searchText = $("#onlineSiteSearch").val();
                    if (searchText != "") {
                        WebManagement.config.OnlineSiteOffset = 0;
                        WebManagement.GetOnlineSites(false, WebManagement.config.OnlineSiteOffset, WebManagement.config.OnlineSiteLimit, searchText, true, true);
                    }
                }
                $('#slcSectors').on('change', function () {
                    let sectorID = $('#slcSectors option:selected').val();
                    if (sectorID > 0)
                        WebManagement.GetSiteCategories(sectorID);
                    else
                        WebManagement.ClearBusinessControls(1);
                });
                $('#slcSiteCategory').on('change', function () {
                    let sectorID = $('#slcSectors option:selected').val();
                    let siteCatID = $('#slcSiteCategory option:selected').val();
                    if (siteCatID > 0)
                        WebManagement.GetBusinessType(sectorID, siteCatID);
                    else
                        WebManagement.ClearBusinessControls(2);
                });
                $("#btnSiteSearch").on("click", function () {
                    $("#siteOnline").html('');
                    WebManagement.config.OnlineSiteOffset = 0;
                    WebManagement.GetOnlineSites(false, WebManagement.config.OnlineSiteOffset, WebManagement.config.OnlineSiteLimit, $('#onlineSiteSearch').val(), true);
                });
                $("#btnShowAdvance").on("click", function () {
                    $("#divSimpleSearch").hide();
                    $("#divAdvSearch").show();
                });
                $("#btnSiteCancel").on("click", function () {
                    $("#divAdvSearch").hide();
                    $("#divSimpleSearch").show();
                });
                $("#divSiteList").on("click", ".btnUsethis", function () {
                    let themeid = parseInt($(this).data("themeid"));
                    let id = $(this).data("id");
                    SageConfirmDialog(easyMessageList.themeinstall, easyMessageList.themeinstalltitle).done(function () {
                        ReloadPageNone();
                        FullPageLoading(easyMessageList.themewaiting);
                        WebManagement.GetOnlineThemeFile(themeid);
                    });
                });
                $("#divSiteList").on("click", ".btnDemo", function () {
                    let id = $(this).data("id");
                    let themeid = parseInt($(this).data("themeid"));
                    let demoURL = $(this).attr('data-previewurl');
                    let url = '';
                    if (themeid > 0) {
                        url = demoURL; //`${demoURL}/${id}/${themeid}`;
                        window.open(url, '_blank');
                    }
                });
                $('#onlineHelpSearch').on('change', function (e) {
                    WebManagement.config.OnlineHelpOffset = 0;
                    WebManagement.GetWebHelp(false, WebManagement.config.OnlineHelpOffset, WebManagement.config.OnlineHelpLimit, $('#onlineHelpSearch').val().trim());
                });
                $('#onlineHelpSearch').on('keyup', function (e) {
                    WebManagement.config.OnlineHelpOffset = 0;
                    if (e.keyCode == 13)
                        WebManagement.GetWebHelp(false, WebManagement.config.OnlineHelpOffset, WebManagement.config.OnlineHelpLimit, $('#onlineHelpSearch').val().trim());
                });
            },
            OnlineCompoSearchFilters: function () {
                let data = {
                    SecureToken: SageFrameSecureToken
                };
                let config = {
                    async: false,
                    url: `${SageFrameHostURL}/Builder/OnlineCompoSearchFilters`,
                    data: JSON.stringify(data),
                    success: function (data) {
                        WebManagement.BindOnlineCategoryFilter(data);
                    },
                }
                SecureAjaxCall.PassObject(config);
            },
            BindOnlineCategoryFilter: function (data) {
                if (data !== null && data != null) {
                    let response = data; //JSONParse(data);
                    if (response.length === 3) {
                        let type = '';
                        let cat = '';
                        let types = response[0];
                        $('#compoTypesearch').html(bindoption(types.length, types, "Select component Type", ""));
                        types = response[1];
                        $('#compoCategorysearch').html(bindoption(types.length, types, "Select component Category", ""));
                        types = response[2];
                        $('#slcApplicationName').html(bindoption(types.length, types, "Select Application", "webbuilder"));
                        $('#slccompoApplicationName').html(bindoption(types.length, types, "Select Application", "webbuilder"));

                        function bindoption(length, arr, selectText, selectValue) {
                            let res = '';
                            res += `<option value="${selectValue}">${selectText}</option>`;
                            for (var i = 0; i < length; i++) {
                                res += `<option value=${arr[i].Value}>${arr[i].Value}</option>`;
                            }
                            return res;
                        }
                    }
                    $('#slcApplicationName').val(this.config.applicationname);
                    $('#slcApplicationName').attr('data-appname', this.config.applicationname);
                }

            },

            GetOnlineComponents: function (async, offset, limit, searchText, simulateClick, isSearchMode) {

                let tabTitleWrap = $('.tabTitleWrapp');
                let tabTitles = tabTitleWrap.children('li.tabTitle');
                let tabDetails = $('.tabDetails');
                let searchBar = $('#searchForCompo');

                function tabSwitcher(clickedTab, loadMore) {
                    let isSearchModeClone = isSearchMode;
                    let targetAttr = clickedTab.attr('data-target');
                    let targetContent = tabDetails.find(targetAttr);
                    clickedTab.addClass('active').siblings('li').removeClass('active');
                    targetContent.removeClass('Dn').siblings('li').addClass('Dn')
                    if (targetAttr == '#targetOnline')
                        searchBar.show();
                    else
                        searchBar.hide();

                    if (targetContent.find('ul').children().length == 0 || loadMore) {
                        EasyLibrary.EnableLoader(targetContent); //loading animation
                        let webMethod;
                        switch (targetAttr) {
                            case '#targetOnline':
                                webMethod = "GetOnlineComponentsByVersion"
                                break;
                            case '#targetPurchased':
                                webMethod = "GetPurchasedComponents"
                                break;
                            case '#targetInstalled':
                                webMethod = "GetInstalledComponents"
                                break;
                        }

                        let data = {
                            Offset: parseInt(offset * limit) + 1,
                            Limit: parseInt(limit),
                            SearchText: searchText,
                            SecureToken: SageFrameSecureToken,
                            Version: WebManagement.config.version,
                            Type: $('#compoTypesearch').val(),
                            Category: $('#compoCategorysearch').val(),
                            ApplicationName: $('#slccompoApplicationName option:selected').val()
                        };
                        let config = {
                            async: false,
                            url: `${SageFrameHostURL}/Builder/${webMethod}`,
                            data: JSON.stringify(data),
                            success: function (data) {
                                if (isSearchModeClone)
                                    targetContent.children('ul').html('');
                                let firstTemplate = targetContent.children().children().first();
                                let height = targetContent.height() - firstTemplate.outerHeight();
                                WebManagement.BindOnlineComponents(data, targetContent);
                                if (loadMore) {
                                    tabDetails.animate({
                                        'scrollTop': height
                                    }, 1000, 'swing');
                                }
                            },
                            error: function () { }
                        }
                        SecureAjaxCall.PassObject(config);
                    }
                }
                tabTitles.off('click').on('click', function () {
                    tabSwitcher($(this))
                });

                if (simulateClick == true) {
                    tabSwitcher(tabTitles.filter('.active'), simulateClick);
                } else {
                    tabSwitcher(tabTitles.first());
                }
            },
            BindOnlineComponents: function (data, targetContent) {
                EasyLibrary.RemoveLoader(targetContent);
                let html = '';
                let loadMore = false;

                // id attribute values of destination <li> elements
                const target = {
                    online: 'targetOnline',
                    purchased: 'targetPurchased',
                    installed: 'targetInstalled'
                };

                if (data != null && data.length > 0) {
                    let response = data;
                    if (response.length > WebManagement.config.OnlineLimit) {
                        loadMore = true;
                        response.splice(-1, 1);
                    }
                    let targetID = targetContent.attr('id');
                    if (targetID == target.online)
                        //onlineComponentArr = $.extend(onlineComponentArr, response);
                        onlineComponentArr = onlineComponentArr.concat(response);

                    $.each(response, function (index, item) {
                        let download = '';

                        function setHoverDOM(includePrice) {
                            if (includePrice === true) {
                                html += `<li class="compodownload" data-downloadtype=${item.DownloadType} data-ids=${item.ComponentID}>
                                     <div class="header">
                                         <span class="componentName">
                                            ${item.ComponentName}
                                         </span>
                                        <div class="download-count Pb-5">
                                            <span class="Fs-11">${item.DownloadCount} downloads</span>
                                        </div>
                                         ${download}
                                      </div>
                                      <div class="divComponentWrap">
                                         <img src=${item.Screenshot} />
                                     </div>
                                 </li>`;
                            } else {
                                html += `<li class="compodownload" data-downloadtype=${item.DownloadType} data-ids=${item.ComponentID}>
                                     <div class="header">
                                         <span class="componentName">
                                            ${item.ComponentName}
                                         </span>
                                         ${download}
                                      </div>
                                      <div class="divComponentWrap">
                                         <img src=${item.Screenshot} />
                                     </div>
                                 </li>`;
                            }
                        }
                        switch (targetID) {
                            case target.online:
                                if (parseFloat(item.Price) !== 0.0) {
                                    download = `<span>
                                        <div class="price-wrapper">
                                            <span class="Fs-13">${item.Currency} ${item.Price - item.Discount}</span>
                                            <span class="Fs-10 Ml-10"><s>${parseFloat(item.Discount) === 0.0 ? '' : item.Currency + item.Price}</s></span>
                                        </div>
                                        <div class="downloadcompo">Purchase</div>
                                    </span>`;
                                } else {
                                    download = `<span class="downloadcompo">Download</span>`;
                                }
                                setHoverDOM(true);
                                break;
                            case target.purchased:
                                download = `<span class="downloadcompo">Download</span>`;
                                setHoverDOM();
                                break;
                            case target.installed:
                                download = '<span class="Installed">Installed</span>';
                                setHoverDOM();
                                break;
                        }
                    });
                } else {
                    html += '<span class="noData">No Component Found!</span>';
                }
                let appendTo = targetContent.children('ul');
                appendTo.append(html);
                appendTo.find(".divCompSeeMore").remove();
                let htmlMore = '';
                if (loadMore) {
                    htmlMore += `<div class='divCompSeeMore'>
                                <a id='btnCompLoadMore' class='btn primary' href='javascript:void(0);'>Load More</a>
                                </div>`;
                    appendTo.append(htmlMore);
                }
                WebManagement.CompoBindEvent();
            },
            CheckOnlineComponetExistance: function (onlineID) {
                let exists = false;
                $.each(componentID, function (i, v) {
                    if (parseInt(v) === parseInt(onlineID))
                        exists = true;
                });
                return exists;
            },
            CheckOnlinePackageExistance: function (packageIDs) {
                let comIDs = packageIDs.trim().split(',');
                let finalPackage = [];
                $.each(comIDs, function (index, item) {
                    $.each(componentID, function (i, v) {
                        if (parseInt(v) === parseInt(item))
                            finalPackage.push(v);
                    });
                });
                let exists = (packageIDs == finalPackage.join(',')) ? true : false;
                return exists;
            },
            GetOnlineThemeFile: function (themeID) {
                let data = {
                    ThemeID: parseInt(themeID),
                };
                let config = {
                    async: false,
                    url: `${SageFrameHostURL}/Builder/GetOnlineThemeFile`,
                    data: JSON.stringify(data),
                    success: function (data) {
                        FullPageLoading(easyMessageList.themewaiting);

                        setTimeout(function () {
                            ReloadPageNone();
                            location.reload();
                        }, 30000);
                        //if (data == null) {
                        //    ReloadPageNone();
                        //    window.location.href = message;
                        //} else {
                        //    let respose = data;
                        //    if (respose != null) {
                        //        let message = respose.Message;
                        //        let code = respose.Code;
                        //        if (code != null) {
                        //            let res = parseInt(code);
                        //            if (res == -1) {
                        //                SageAlertDialog("EasyBuilder verson is less than required verison.Go to upgrader to update first.");
                        //            } else if (res == -2) {
                        //                ReloadPageNone();
                        //                window.location.href = message;
                        //            } else if (res > 0) {
                        //                //UpdateComponentDownloadCount(UniversalComponentID, downLoadtype);
                        //                ReloadPageNone();
                        //                window.location.href = window.location;
                        //            } else {
                        //                SageAlertDialog("Error Occurred.");
                        //            }
                        //        }
                        //    } else {
                        //        ReloadPageNone();
                        //        window.location.href = message;
                        //    }
                        //}
                    },
                }
                SecureAjaxCall.PassObject(config);
            },
            GetOnlineSites: function (async, siteOffset, siteLimit, searchText, loadMore, isSiteSearch) {
                let sectorID = $('#slcSectors option:selected').val();
                let siteCategoryID = $('#slcSiteCategory option:selected').val();
                let businessTypeID = $('#slcBusinessType option:selected').val();
                let searchKey = $('#onlineSiteSearch').val();
                let applicationName = $('#slcApplicationName option:selected').val();

                //tab Functionality
                let siteTabTitleWrapp = $('.siteTabTitleWrapp');
                let siteTabTitles = siteTabTitleWrapp.children('li');
                let siteTabDetails = $('.siteTabDetails');
                let searchBar = $('#divAdvSearch');

                function tabSiteLoader(clickedTab, loadMoreEvent) {
                    let isSiteSearchClone = isSiteSearch;
                    let targetAttr = clickedTab.attr('data-target');
                    if (targetAttr == '#siteOnline')
                        searchBar.show();
                    else
                        searchBar.hide();
                    let targetContent = siteTabDetails.find(targetAttr);
                    clickedTab.addClass('active').siblings('li').removeClass('active');
                    targetContent.removeClass('Dn').siblings('li').addClass('Dn')
                    if (targetContent.children().length == 0 || loadMoreEvent) {
                        EasyLibrary.EnableLoader(targetContent);
                        let webMethod;
                        switch (targetAttr) {
                            case '#siteOnline':
                                webMethod = "GetOnlineSites";

                                break;
                            case '#sitePurchased':
                                webMethod = "GetPurchasedSites";

                                break;
                            case '#siteInstalled':
                                webMethod = "GetInstalledSites";
                                break;
                        }
                        let data = {
                            SectorID: parseInt(sectorID),
                            siteCategoryID: parseInt(siteCategoryID),
                            BusinessTypeID: parseInt(businessTypeID),
                            Offset: parseInt(siteOffset * siteLimit) + 1,
                            Limit: parseInt(siteLimit),
                            ThemeName: searchKey,
                            SecureToken: SageFrameSecureToken,
                            ApplicationName: applicationName
                        };
                        let config = {
                            async: false,
                            url: `${SageFrameHostURL}/Builder/${webMethod}`,
                            data: JSON.stringify(data),
                            success: function (data) {
                                if (isSiteSearchClone)
                                    targetContent.html('');
                                let height = targetContent.height() - targetContent.children().first().height();
                                WebManagement.BindOnlineSites(data, targetContent);
                                if (loadMore) {
                                    siteTabDetails.animate({
                                        'scrollTop': height
                                    }, 1000, 'swing');
                                }
                            },
                            error: function () { }
                        }
                        SecureAjaxCall.PassObject(config);
                    }
                }
                siteTabTitles.off('click').on('click', function () {
                    tabSiteLoader($(this));
                });
                if (loadMore == true)
                    tabSiteLoader(siteTabTitles.filter('.active'), loadMore);
                else
                    tabSiteLoader(siteTabTitles.first());
            },
            BindOnlineSites: function (data, onlineSiteWrapper) {
                EasyLibrary.RemoveLoader(onlineSiteWrapper);
                let html = '';
                let loadMore = false;
                let response = data; //JSONParse(data.d);
                if (response != null && response.length > 0) {
                    if (response.length > WebManagement.config.OnlineSiteLimit) {
                        loadMore = true;
                        response.splice(-1, 1);
                    }
                    $.each(response, function (index, item) {
                        if (onlineSiteWrapper.attr('id') === 'siteOnline') {
                            if (parseFloat(item.Price) !== 0.0) {
                                var priceInfo = `
                                                <div class="price-wrapper">
                                                    <span class="Fs-13">${item.Currency} ${item.Price - item.Discount}</span>
                                                    <span class="Fs-10 Ml-10"><s>${parseFloat(item.Discount) === 0.0 ? '' : item.Currency + item.Price}</s></span>
                                                </div>`;
                                var action = "Purchase"
                            } else {
                                priceInfo = '';
                                action = "Use This"
                            }
                            html += `<div class='tempThumb'>
                                    <div class='tempImgWrap compodownload'>
                                       <img src=${item.Screenshot} />
                                        <div class="header">
                                          <div class="componentName">${item.ThemeName}</div>
                                          <div class="download-count Pb-5"><span class="Fs-11">${item.DownloadCount} downloads</span></div>
                                           ${priceInfo}
                                          <div class='tempBtns'>
                                             <a class='btn btn-dark btnDemo' data-id=${item.ProductID} data-themeid=${item.ThemeID} data-previewurl=${item.DemoUrl} href='javascript:void(0);'>Preview</a>
                                             <a class='btn btn-default btnUsethis' data-id= ${item.ProductID} data-themeid=${item.ThemeID} href='javascript:void(0);'>${action}</a>
                                          </div>
                                       </div>
                                    </div>
                                    </div>`;
                        } else {
                            html += `<div class='tempThumb'>
                                    <div class='tempImgWrap compodownload'>
                                       <img src=${item.Screenshot} />
                                        <div class="header">
                                          <div class="componentName">${item.ThemeName}</div>
                                          <div class='tempBtns'>
                                             <a class='btn btn-dark btnDemo' data-id=${item.ProductID} data-themeid=${item.ThemeID} data-previewurl=${item.DemoUrl} href='javascript:void(0);'>Preview</a>
                                             <a class='btn btn-default btnUsethis' data-id= ${item.ProductID} data-themeid=${item.ThemeID} href='javascript:void(0);'>Use This</a>
                                          </div>
                                       </div>
                                    </div>
                                    </div>`;
                        }

                    });
                } else {
                    onlineSiteWrapper.html('');
                    html = "<span class='noData'>No Site Found!</span>";
                }
                onlineSiteWrapper.append(html);
                //$(".divSiteSeeMore").remove();
                onlineSiteWrapper.parent().find(".divSiteSeeMore").remove();
                let htmlMore = '';
                if (loadMore) {
                    htmlMore += `<div class='divSiteSeeMore'>
                                    <a id='btnSiteLoadMore' class='btn primary' href='javascript:void(0);'>Load More</a>
                                </div>`;
                    onlineSiteWrapper.parent().append(htmlMore);
                }

            },
            ClearBusinessControls: function (type) {
                if (type < 2) {
                    $('.site_category_select').addClass('disabled');
                    $('#slcSiteCategory').html('<option value="0">Select a Category</option>');
                }
                if (type < 3) {
                    $('.site_business_select').addClass('disabled');
                    $('#slcBusinessType').html('<option value="0">Select Business Type</option>');
                }
                if (type < 4) {
                    $('.business_keywords_select').addClass('disabled');
                    $('#slcBusinessKeywords').html('<option value="0">Select a keyword</option>');
                }
            },
            GetSectors: function (async) {
                let data = {
                    portalID: 1,
                    userModuleID: p.userModuleID,
                    userName: SageFrameUserName,
                    secureToken: SageFrameSecureToken
                };
                let config = {
                    async: false,
                    url: `${WebManagement.config.DigisphereAPI}GetSectorType`,
                    data: JSON.stringify(data),
                    success: function (data) {
                        WebManagement.GetSectorsSuccessCall(data);
                    },
                    error: function () { }
                }
                SecureAjaxCall.PassObject(config);
            },
            GetSectorsSuccessCall: function (data) {
                if (data.d != null) {
                    let sectorList = data.d;
                    let html = '';
                    html += '<option value="0">Select a Sector</option>';
                    $.each(sectorList, function (index, item) {
                        html += `<option value="${item.SectorTypeID}">${item.TypeName}</option>`;
                    });
                    $('#slcSectors').html(html);
                    $('#slcSectors').val(0);
                }
            },
            GetSiteCategories: function (sectorID) {
                let data = {
                    sectorID: sectorID,
                    portalID: 1,
                    userModuleID: p.userModuleID,
                    userName: SageFrameUserName,
                    secureToken: SageFrameSecureToken
                };
                let config = {
                    async: false,
                    url: `${WebManagement.config.DigisphereAPI}GetSiteTypes`,
                    data: JSON.stringify(data),
                    success: function (data) {
                        WebManagement.GetSiteCategoriesSuccessCall(data);
                    },
                    error: function () { }
                }
                SecureAjaxCall.PassObject(config);
            },
            GetSiteCategoriesSuccessCall: function (data) {
                if (data.d != null) {
                    $('.site_category_select').removeClass('disabled');
                    let sectorList = data.d;
                    let html = '';
                    html += '<option value="0">Select a Category</option>';
                    $.each(sectorList, function (index, item) {
                        html += '<option value="' + item.SiteTypeID + '">' + item.TypeName + '</option>';
                    });
                    $('#slcSiteCategory').html(html);
                    $('#slcSiteCategory').val(0);
                }
            },
            GetBusinessType: function (sectorID, siteCatID) {
                let data = {
                    sectorID: sectorID,
                    siteCatID: siteCatID,
                    portalID: 1,
                    userModuleID: p.userModuleID,
                    userName: SageFrameUserName,
                    secureToken: SageFrameSecureToken
                };
                let config = {
                    async: false,
                    url: `${WebManagement.config.DigisphereAPI}GetBusinessType`,
                    data: JSON.stringify(data),
                    success: function (data) {
                        WebManagement.GetBusinessTypeSuccessCall(data);
                    },
                    error: function () { }
                }
                SecureAjaxCall.PassObject(config);
            },
            GetBusinessTypeSuccessCall: function (data) {
                if (data.d != null) {
                    $('.site_business_select').removeClass('disabled');
                    let sectorList = data.d;
                    let html = '';
                    html += '<option value="0">Select a Business Type</option>';
                    $.each(sectorList, function (index, item) {
                        html += '<option value="' + item.BusinessTypeID + '">' + item.TypeName + '</option>';
                    });
                    $('#slcBusinessType').html(html);
                    $('#slcBusinessType').val(0);
                }
            },
            CompoBindEvent: function () {
                $('.downloadcompo').off().on('click', function () {
                    let $this = $(this);
                    FullPageLoading(easyMessageList.componentwaiting);
                    let $parent = $this.closest('.compodownload');
                    let downLoadtype = $parent.attr('data-downLoadtype');
                    let downLoadtypeID = $parent.attr('data-ids');
                    let index = $('.tabContent:not(.Dn) > ul.tabContentList > .compodownload').index($parent);
                    let compo = onlineComponentArr[index];

                    let dependencies = compo.Dependencies;
                    let version = compo.Version;
                    let success = UpdateComponent(compo.ComponentName, compo.ComponentID, version, downLoadtype, downLoadtypeID);
                    //if (success) {
                    //    $parent.addClass('installed');
                    //    let installed = '<span class="Installed">Installed</span>';
                    //    $(installed).insertAfter($this);
                    //    $this.remove();
                    //    UpdateComponentDownloadCount(compo.ComponentID, downLoadtype);
                    //}
                    //}
                });
            },


            CreateSidebar: function () {
                WebManagement.LayoutSet();
                let componentCollection = '';
                let componentList = Object.keys(component);
                let componentListLen = componentList.length;
                let layoutDOM = '';
                let basicDOM = '';
                let advanceDOM = '';
                let proDOM = '';
                let removeCompo = [];
                /*invoking the afterdrop of used components*/
                $('.editor-component, .cRow').each(function () {
                    let $me = $(this);
                    let dataType = $me.attr('data-type');
                    if (EasyLibrary.IsUndefined(dataType)) {
                        dataType = $me.find('> .SetHdlr > .com-settings').attr('data-type');
                    }
                    if (EasyLibrary.IsDefined(dataType) && EasyLibrary.IsDefined(component[dataType])) {
                        if (EasyLibrary.IsDefined(component[dataType].inherits)) {
                            dataType = component[dataType].inherits;
                        }
                        let index = removeCompo.indexOf(dataType);
                        if (index == -1) {
                            if (EasyLibrary.IsDefined(component[dataType]) && EasyLibrary.IsDefined(component[dataType].pageload)) {
                                try {
                                    component[dataType].pageload($('.site-body'), $me);
                                } catch (error) {
                                    WriteLog(dataType + " : " + error);
                                }
                                removeCompo.push(dataType);
                            } else if (EasyLibrary.IsDefined(component[dataType].afterdrop)) {
                                try {
                                    component[dataType].afterdrop($('.site-body'), $me);
                                } catch (error) {
                                    WriteLog(dataType + " : " + error);
                                }
                                removeCompo.push(dataType);
                            }
                        }
                    }
                });
                let $componentList = $('#componentCollection > .components-list-array');
                for (var i = 0; i < componentListLen; i++) {
                    let $compo = component[componentList[i]];
                    /*calling after drop of used component*/
                    if (!$compo['hidden']) {
                        let comName = $compo['componentname'];
                        let iconClass = $compo['icon'];
                        let compo = DOMCreate('i', '', iconClass) + '<br />' + comName;
                        let classes = 'comBasic comItemBlock ui-state-highlight';
                        if ($compo['row'])
                            classes = 'rowBasic heartBeat comItemBlock ui-state-highlight';
                        compo = DOMCreate('span', compo, classes, '', ['draggable="true"', 'data-type="' + comName + '"']);
                        let compoTab = $compo['category'].replace(/\s+/g, "_").toLowerCase();
                        if ($componentList.find('> .' + compoTab).length == 0) {
                            let comitems = DOMCreate('h4', $compo['category'] + ' Components', '') + DOMCreate('div', '', 'comItems');
                            comitems = DOMCreate('div', comitems, compoTab + ' components-list');
                            $componentList.append(comitems);
                        }
                        $componentList.find('> .' + compoTab).find('.comItems').append(compo);
                    }
                    if (EasyLibrary.IsDefined($compo) && EasyLibrary.IsDefined($compo.pageinit)) {
                        try {
                            $compo.pageinit();
                        } catch (error) {
                            //WriteLog(dataType + " : " + error);
                        }
                    }
                }
                $componentList.prepend($componentList.find('> .basic'));
                $('.comItems').hide();
                $('.components-list-array h4').on('click', function () {
                    let $this = $(this);
                    if (!$this.parent().hasClass('activeAccordion')) {
                        $('.components-list').removeClass('activeAccordion');
                        $('.comItems').slideUp(400);
                        $this.next().slideDown(400);
                        $this.parent().addClass('activeAccordion');
                    } else {
                        $this.parent().removeClass('activeAccordion');
                        $this.next().slideUp(400);
                    }
                });
                $('.components-list-array h4').eq(0).trigger('click');



                $('.comBasic , .rowBasic').each(function () {
                    GenericRemove($(this));
                });
                WebManagement.SideBarEvents();

                /*take side bar to right onload*/
                //var right = $(window).width() - $('.components').offset().left;
                /*var bottom = $(window).height() - $('.components').offset().top - $('.components').height();*/
                //$('.main-left').css({
                //    'right': 0,
                //    'left': 'auto',
                //});
                $('#dashboardLink').attr('href', SageFrameHostURL + '/dashboard/dashboard');

                $('.main-left .right_actions >.pin__right, #popupModel .right_actions >.pin__right').on('click', function () {
                    const $this = $(this);
                    let siteWidth = '';
                    if ($this.hasClass('pinned')) {
                        if ($('.fullpagepopupWrapper').length > 0) {
                            $('.fullpage-close-model').trigger('click');
                        }
                        //WebManagement.ShowForPopUp(true);
                    } else {
                        //WebManagement.HideForPopUp(true);
                        siteWidth = ScreenDimension().width - $('.main-left').width();
                        $('.main-left').css({
                            'top': '0px',
                            'left': siteWidth + 'px'
                        });
                        $('#popupModel').css({
                            'top': '0px',
                            'left': siteWidth + 'px'
                        });
                    }
                    $('.devicewrap').css({
                        "width": siteWidth
                    });
                });

                for (var key in component) {
                    if (component.hasOwnProperty(key)) {
                        let $this = component[key];
                        if (EasyLibrary.IsDefined($this.complete)) {
                            $this.complete();
                        }
                    }
                }
            },

            HideForPopUp: function (pinned) {
                // $('.main-left .drag_icon').hide();
                //$('.main-left .right_actions >.heademarControls').hide();
                // $('.main-left').draggable('disable');
                //$('#popupModel .drag_icon').hide();
                //$('#popupModel .right_actions >.heademarControls').hide();
                //$('#popupModel').draggable('disable');
                if (EasyLibrary.IsDefined(pinned) && pinned) {
                    $('.main-left .right_actions >.pin__right').addClass('pinned');
                    $('#popupModel .right_actions >.pin__right').addClass('pinned');
                }
            },
            ShowForPopUp: function (removePinned) {
                if (EasyLibrary.IsDefined(removePinned) && removePinned) {
                    $('.main-left .right_actions >.pin__right').removeClass('pinned');
                    $('#popupModel .right_actions >.pin__right').removeClass('pinned');
                }
                $('.main-left .drag_icon').show();
                $('.main-left .right_actions >.heademarControls').show();
                $('.main-left').draggable('enable');
                $('#popupModel .drag_icon').show();
                $('#popupModel .right_actions >.heademarControls').show();
                $('#popupModel').draggable('enable');
            },
            SideBarEvents: function () {
                $('.collapse').on('click', function () {
                    $('.main-left').hide();
                    $('.headerControls').removeClass('clicked');
                    $('.activeSetting').removeClass('.activeSetting');
                });

                $('#refreshComSearch').on('click', function () {
                    $('#componentSearch').val('');
                    WebManagement.RecycleSearch();
                });

                $('#componentSearch').on('keyup', function () {
                    let searchVal = $(this).val().trim();
                    if (searchVal.length == 0) {
                        WebManagement.RecycleSearch();
                    } else {
                        $('.components-list div').slideDown(400);
                        $('.comItemBlock').each(function () {
                            let $this = $(this);
                            let name = $this.text().toLowerCase();
                            let pos = name.indexOf(searchVal.toLowerCase());
                            if (pos < 0) {
                                $this.addClass('Dn');
                            } else {
                                $this.removeClass('Dn');
                            }
                        });
                    }
                });



                if ($('#ScroolToTop').length > 0) {
                    $('#chkScrollToTopBox').prop('checked', true);
                } else {
                    $('#chkScrollToTopBox').prop('checked', false);
                }
                $('#chkScrollToTopBox').on('click', function () {
                    if ($(this).is(':checked')) {
                        let scrollToTop = '';
                        webBuilderSettings.scrolltotop = true;
                        scrollToTop = DOMCreate("div", staticDOMs.scrolltotop, "scrolltotop", "ScroolToTop", ['style="display:none;"']);
                        $('.site-body').append(scrollToTop);
                        $('#ScroolToTop').on('click', function () {
                            $('body,html').animate({
                                scrollTop: '0px'
                            }, 1000);
                        });
                    } else {
                        $('#ScroolToTop').remove();
                        webBuilderSettings.scrolltotop = false;
                    }
                });
            },
            RecycleSearch: function () {
                $('.components-list').not('.activeAccordion').find('div').slideUp(400);
                $('.comItemBlock').each(function () {
                    $(this).removeClass('Dn');
                });
            },




            InitEvents: function () {
                let self = this
                InitTab();

                let tableDOM = `<table><tr><th rowspan="2">S.N</th><th colspan="3">Translate</th><th colspan="3">Rotate</th><th colspan="3">Skew</th><th colspan="3">Scale</th><th rowspan="2">Opacity</th><th rowspan="2">Keyframe</th></tr><tr><td> X</td><td> Y</td><td> Z</td><td> X</td><td> Y</td><td> Z</td><td> X</td><td> Y</td><td> Z</td><td> X</td><td> Y</td><td> Z</td></tr><tr class="effectState"><td><span class="addState"><i class="fa fa-plus addEffectState" aria-hidden="true"></i></span><span class="removeState Dn"><i class="fa fa-close removeEffectState" aria-hidden="true"></i></span></td><td><input type="number" value="100" /></td><td><input type="number" value="100" /></td><td><input type="number" value="100" /></td><td><input type="number" value="100" /></td><td><input type="number" value="100" /></td><td><input type="number" value="100" /></td><td><input type="number" value="100" /></td><td><input type="number" value="100" /></td><td><input type="number" value="100" /></td><td><input type="number" value="100" /></td><td><input type="number" value="100" /></td><td><input type="number" value="100" /></td><td><input type="number" value="100" /></td><td><input type="number" value="0" name="keyframe" /></td></tr></table><style>
    table {
        border-collapse: collapse;
        width: 100%;
        text-align: center;
    }
    
    table,
    tbody,
    tr,
    td,
    th {
        border: 1px solid black;
    }
    
    td {
        text-align: center;
    }
    
    th {
        vertical-align: top;
    }
    
    input {
        border: none;
        width: 90%;
    }
</style>`;
                $('#animEffects').on('click', function () {
                    let selectDOM = DOMCreate('div',
                        DOMCreate('span',
                            //SelectDOMCreate('scrolleffect' + idSuffix, 'scrolleffect', [['none', 'None'],['slide','slide'], ['fade-up', 'fade-up'], ['fade-down', 'fade-down'], ['fade-left', 'fade-left'], ['fade-right', 'fade-right']]),//['zoom-in', 'zoom-in'], ['zoom-out', 'zoom-out']
                            CreateSelectGroupDOM('scrollEffects', 'scrolleffect', effectSelectOption),
                            'select__box'),
                        'fCol TxAl-r');
                    let d = `<div class="animation-wrapper Dfx sfCol_100 Pt-20">

    <div id="animationEffectsWrap" class="animationEffectsWrap leftSide sfCol_70 Dib">
        <div class="sideTitle Pl-10 Pr-10">Animations</div>
        <div id="animationEffects" class="animationEffects"></div>
    </div>
    <div id="customEffEditor" class="customEffEditor leftSide Dib sfCol_70 Dn">
    </div>
    <div class="rightSide sfCol_30"> 
    <div class="sideTitle ">Preview</div>  
        <div class="rightSide-wrap Pt-20">
            <div class="Dfx whole">
                <div class="viewbox Dfx TxAl-m elements Pl-20 Pr-20">
                        <div class="previewWrap">
                            <div id="mainPreview" class="mainPreview">
                                <div class="circle element Dib"></div>
                            </div>
                        </div>    
                </div>   
                <div class="field-row controlSide">
                    <div class="manageCustomeEffect" id="manageCustomEffect"></div>
                     <div class="fCol T saveAnimation   Pt-25 Pb-15 Pl-25 Pr-25" id="btnSaveCancel">
	                    <span class="btn-outline Mr-10" id="applyEffect">Apply</span>
	                    <span class="btn-create" id="saveCustomEffect">Save</span>
                    </div>
                </div> 
            </div>
        </div>
    </div>
</div>`;
                    let dom = `${d}`;
                    let option = {
                        heading: "Animation Effects",
                        data: dom,
                        showheading: true,
                        width: "90%",
                        advance: false,
                        onappend: function ($wrap) {
                            $('#customEffEditor').html(tableDOM);
                            $('.fullpagepopup').css({
                                'height': '90%',
                                'max-height': ''
                            });
                            $('.fullpagepopup').addClass('animation-window');
                            $('.fullpagepopupWrapper').addClass('lightSch');
                            let IsKeyframeChanged = false;
                            createEffectDOM();
                            changeEvent();
                            eventListener();
                            if ($('.animEffectThumb').length > 0)
                                $('.animEffectThumb').eq(0).trigger('click');

                            function eventListener() {
                                //$('#createCustomEffect').off().on('click', function () {
                                //    $('#manageCustomEffect').removeClass('Dn');
                                //});
                                $('.addframes').off().on('click', function () {
                                    let $this = $(this);
                                    let keyframe = calcKeyframe($this, true);
                                    $($this.closest('.effectState')[0].outerHTML).insertAfter($this.parent());
                                    if ($this.parent().find('input[name="keyframe"]').val() == 100)
                                        $this.parent().find('input[name="keyframe"]').val(keyframe);
                                    else
                                        $this.parent().next('.effectState').find('input[name="keyframe"]').val(keyframe);
                                    //updateKeyframe($this, true);
                                    changeEvent();
                                    $parent.next('.effectState').find('input').eq(0).focus();
                                    $('#customEffEditor .effectState:last').find('input[name="keyframe"]').val(100);
                                });
                                $('.addState').off().on('click', function () {
                                    let $this = $(this);
                                    let $parent = $this.closest('.effectState');
                                    let keyframe = calcKeyframe($this, true);
                                    $($parent[0].outerHTML).insertAfter($parent);
                                    if ($parent.find('input[name="keyframe"]').val() == 100)
                                        $parent.find('input[name="keyframe"]').val(keyframe);
                                    else
                                        $parent.next('.effectState').find('input[name="keyframe"]').val(keyframe);
                                    changeEvent();
                                    //updateKeyframe($this, true);
                                    $('#manageCustomEffect .effectState:last').find('input[name="keyframe"]').val(100);
                                    $parent.next('.effectState').find('input').eq(0).focus();
                                    eventListener();
                                });
                                $('#manageCustomEffect input').off().on('keyup, click', function (event) {
                                    IsKeyframeChanged = true;
                                    let $this = $(this);
                                    let max = $this.attr('max');
                                    console.log(max);
                                    if ($this.val() > 100)
                                        $this.val(100);
                                    else if ($this.val() < 0)
                                        $this.val(0);
                                });
                                $('.removeEffectState').off().on('click', function () {
                                    let $this = $(this).closest('.effectState')[0];
                                    SageConfirmDialog('Are you sure to delete remove this?').done(function () {
                                        $this.remove();
                                        eventListener();
                                    });
                                });
                                //$(".thumbIcon").click(function () {
                                //    var $this = $(this);
                                //    $('targetEle').removeClass('selected');
                                //    if ($this.data('clicked')) {
                                //        $this.addClass('selected');
                                //    }
                                //});
                                $('.animEffectThumb').off().on('click', function () {
                                    let $this = $(this);
                                    //ApplyScrollEffect($wrap.find('.element'), $this.attr('animation-effect'));
                                    $('.animEffectThumb').removeClass('selected');
                                    $this.addClass('selected');
                                    dataEvent($this.attr('animation-effect'))
                                    changeEvent();
                                    eventListener();
                                    // $(`#effectList li[data-animation="${animType}"]`);
                                    // $(`#effectList li[data-animation="${animType}"]`).trigger('click');
                                    //$('#btnCustomEffect').removeClass('Dn');
                                });

                                $('.preview').off().on('click', function () {
                                    ApplyScrollEffect($wrap.find('.element'), $(this).closest('.animEffectThumb').attr('animation-effect'));
                                });
                                //$('.fullpage-popup-model-body>div:not(.animEffectThumb)').off().on('click', function () {
                                //    console.log($(this).closest('.animEffectThumb').length);
                                //    if ($(this).closest('.animEffectThumb').length < 1) {
                                //        $('.animEffectThumb').removeClass('selected');
                                //        $('#btnCustomEffect').addClass('Dn');
                                //    }
                                //});
                                //$('div').off().on('click', function () {
                                //    if (!$(this).hasClass('animEffectThumb')) {
                                //        console.log('dfdsd');
                                //        $('.animEffectThumb').removeClass('selected');
                                //        $('#btnCustomEffect').addClass('Dn');
                                //    }
                                //});
                                //$('#btnCustomEffect').off().on('click', function () {
                                //    //$("#animationEffects,.effectWrappers").removeClass('Dn').addClass('Dn');
                                //    //$(this).addClass('Dn');
                                //    let $this = $(this);


                                //    //$("#manageCustomEffect,#btnSaveCancel").removeClass('Dn');
                                //    //let effectType = $('#animationEffects .selected').attr('animation-type').toLowerCase();
                                //    //$(`#${effectType}Effects`).removeClass('Dn').addClass('customAnim');
                                //    let effectsList = createAnimationList();
                                //    $('#effectList').html(effectsList);
                                //    $(`<div class="fCol Pl-20 Pr-20"><span class="lai btn-create" id="btnBackToEff">Back</span></div>`).appendTo('#effectList');
                                //    $('#effectList,#btnBackToEff').removeClass('Dn');
                                //    $('#animationEffects').addClass('Dn');
                                //    $this.addClass('Dn');
                                //    eventListener();
                                //    if ($('.animEffectThumb.selected').length > 0) {
                                //        let animType = $('.animEffectThumb.selected').attr('animation-effect');
                                //        $(`#effectList li[data-animation="${animType}"]`);
                                //        $(`#effectList li[data-animation="${animType}"]`).trigger('click');

                                //    }

                                //    //$(`#${effectType}Effects`).attr('animation-type', effectType);
                                //});
                                //$('#btnBackToEff').off().on('click', function () {
                                //    $('#effectList,#manageCustomEffect').addClass('Dn');
                                //    $('#animationEffects,#btnCustomEffect').removeClass('Dn');
                                //});
                                //$('#cancelCustom').off().on('click', function () {
                                //    $("#manageCustomEffect,#btnSaveCancel, .effectWrappers").removeClass('Dn').removeClass('customAnim').addClass('Dn');
                                //    $("#animationEffects").removeClass('Dn');
                                //});
                                $('#btnCustomEffect').off().on('click', function () {
                                    $('#animationEffectsWrap').addClass('Dn');
                                    $('#customEffEditor').removeClass('Dn');
                                });
                                $("#applyEffect").off().on('click', function () {
                                    var values = [];
                                    $(`#manageCustomEffect .effectData`).each(function () {
                                        let value = {};
                                        $(this).find('input').each(function (i, v) {
                                            value[v.name] = v.value;
                                        });
                                        values.push(value);
                                    });
                                    console.log(values);
                                    ApplyScrollEffect($wrap.find('.element'), $('#animationEffects .selected').attr('animation-effect'), 1000, true, values);
                                });
                                //$('#effectList li').off().on('click', function () {
                                //    let $this = $(this);
                                //    $('#effectList').find('.selected').removeClass('selected');
                                //    $this.addClass('selected');
                                //    let animationName = $this.attr('data-animation');
                                //    $('#manageCustomEffect').removeClass('Dn');
                                //    $('#manageCustomEffect').append('	<div class="customEffectHeader" id="customEffectHeader"><span>X-axis</span><span>Y-Axis</span><span>Z-Axis</span><span>Rotation</span><span>Skew</span><span>Opacity</span><span>Keyframe</span></div>');
                                //    //$('<div class="customEffectVal effectState"><input type="number" value=0 name="translateX" min="-500" max="500"/><input type="number" value=0 name="translateY" min="-500" max="500"/><input type="number" value=0 name="translateZ" min="-500" max="500"/><input type="number" value=0 name="rotateX" min="-500" max="500"/><input type="number" value=0 name="skewX" min="-500" max="500"/><input type="number" name="opacity" min="0" max="1"/><input type="number" value=0 name="keyframe" min="-0" max="100"/><i class="fa fa-plus-circle addEffectState" aria-hidden="true"></i><i class="fa fa-minus-circle removeEffectState Dn" aria-hidden="true"></i></div>').insertAfter('#customEffectHeader');


                                //});
                            }

                            function dataEvent(animationName) {
                                let effectDataDOM = '';
                                if (animationName !== undefined && animationName !== null)
                                    $.each(effectList[animationName].values, function (i, v) {
                                        effectDataDOM += `<div class="customEffectVal effectState Pt-20 Pb-20">
	                                    <div class="effectData">
                                            <div class="DataWrapper Dfx TxAl-m">
                                                <div class="keylabel">
                                                    <label>X-axis</label>
                                                </div>
                                                <div class="keyvalue">
                                                    <input type="number" value="${v.translateX == undefined ? 0 : v.translateX}" name="translateX" min="-500" max="500"/>
                                                </div>
                                            </div>

                                            <div class="DataWrapper Dfx TxAl-m">
                                                <div class="keylabel">
                                                    <label>Y-axis</label>
                                                </div>
                                                <div class="keyvalue">
                                                    <input type="number" value="${v.translateY == undefined ? 0 : v.translateY}" name="translateY" min="-500" max="500"/>
                                                </div>
                                            </div>

                                            <div class="DataWrapper Dfx TxAl-m">
                                                <div class="keylabel">
                                                    <label>Z-axis</label>
                                                </div>
                                                <div class="keyvalue">
                                                    <input type="number" value="${v.translateZ == undefined ? 0 : v.translateZ}" name="translateZ" min="-500" max="500"/>
                                                </div>
                                            </div>

                                            <div class="DataWrapper Dfx TxAl-m">
                                                <div class="keylabel">
                                                    <label>Rotation</label>
                                                </div>
                                                <div class="keyvalue">
                                                     <input type="number" value="${v.rotateX == undefined ? 0 : v.rotateX}" name="rotateX" min="-500" max="500"/>
                                                </div>
                                            </div>

                                             <div class="DataWrapper Dfx TxAl-m">
                                                <div class="keylabel">
                                                    <label>Skew</label>
                                                </div>
                                                <div class="keyvalue">
                                                     <input type="number" value="${v.skewX == undefined ? 0 : v.skewX}" name="skewX" min="-500" max="500"/>
                                                </div>
                                            </div>
                                            <div class="DataWrapper Dfx TxAl-m">
                                                <div class="keylabel">
                                                    <label>Scale</label>
                                                </div>
                                                <div class="keyvalue">
                                                     <input type="number" value="${v.scaleX == undefined ? 1 : v.scaleX}" name="scaleX" min="-500" max="500"/>
                                                </div>
                                            </div>

                                            <div class="DataWrapper Dfx TxAl-m">
                                                <div class="keylabel">
                                                    <label>Opacity</label>
                                                </div>
                                                <div class="keyvalue">
                                                     <input type="number" value="${v.opacity == undefined ? 1 : v.opacity}" name="opacity" min="0" max="1"/>
                                                </div>
                                            </div>
                                            <div class="DataWrapper Dfx TxAl-m">
                                                <div class="keylabel">
                                                    <label>Keyframe</label>
                                                </div>
                                                <div class="keyvalue">
                                                     <input type="number" value="${v.keyframe == undefined ? 0 : v.keyframe}" name="keyframe" min="-0" max="100"/>
                                                </div>
                                            </div>
	                                   </div>
                                    <span class="addframes"><i class="fa fa-plus addEffectState" aria-hidden="true"></i></span>
                                    <span class="removeFrames"><i class="fa fa-close removeEffectState" aria-hidden="true"></i></span>
                                    </div>`
                                    });
                                $('#manageCustomEffect').html(effectDataDOM);
                                eventListener();
                                //$(`<div class="fCol T saveAnimation   Pt-25 Pb-15" id="btnSaveCancel"><span class="btn-create Mr-10" id="applyEffect">Apply</span><span class="btn-create" id="saveCustomEffect">Save</span></div>`).appendTo('.controlSide');
                            }

                            //function createAnimationList() {
                            //    let listDOM = '<ul>';
                            //    $.each(animationEffectList, function (i, v) {
                            //        listDOM += `<li data-animation="${v.effect}">${v.name}</li>`;
                            //    });
                            //    listDOM += '</ul>';
                            //    return listDOM;
                            //}
                            function createEffectDOM() {
                                let DOM = '';
                                $.each(effectSelectOption, function (index, effGrp) {
                                    DOM += `<div class="effectgroup"> 
                                              <label>${effGrp[0].group}</label>`;
                                    $.each(effGrp, function (index, val) {
                                        DOM += DOMCreate('div', DOMCreate('span', `<img src="/MediaThumb/medium/Media/animation-thumb.png"><span class="preview"> <i class="fa fa-play"></i></span>`, 'effectIcon') + DOMCreate('span', val.name, 'effectName'), 'sfCol_50 Dib animEffectThumb', '', [`animation-type="${val.group}"`, `animation-effect="${val.effect}"`]);
                                    });
                                    DOM += '</div>';
                                });
                                if (typeof (DOM) !== "undefined" && DOM !== '') {
                                    $("#animationEffects").html(DOM);
                                    $(`<div class="fCol Pl-10 Pr-10"><span class="lai btn-create" id="btnCustomEffect">Custom</span></div>`).insertAfter('#animationEffects');
                                }
                                eventListener();
                            }

                            //function nextKeyframeState($this) {
                            //    return $this.parent().next().is('.effectState');
                            //}

                            //function calcKeyframe($this, isAdded) {
                            //    let _thisElement = $this.parent();
                            //    let keyframe = 'input[name="keyframe"]';
                            //    let initial = _thisElement.find(keyframe).val();
                            //    let finalVal = 100;
                            //    if (!isAdded || initial == 100) {
                            //        if (_thisElement.prev().is('.effectState'))
                            //            initial = _thisElement.prev('.effectState').find(keyframe).val();
                            //    }
                            //    if (_thisElement.next().is('.effectState')) {
                            //        finalVal = _thisElement.next('.effectState').find(keyframe).val();
                            //        return Number(Number(initial) + Number((finalVal - initial) / 2));
                            //    } else {
                            //        return Number(Number(initial) + Number((finalVal - initial) / 2));
                            //    }
                            //}


                            function calcKeyframe($this, isAdded) {
                                let _thisElement = $this.closest('tr');
                                let keyframe = 'input[name="keyframe"]';
                                let initial = _thisElement.find(keyframe).val();
                                let finalVal = 100;
                                if (!isAdded || initial == 100) {
                                    if (_thisElement.prev().is('.effectState'))
                                        initial = _thisElement.prev('.effectState').find(keyframe).val();
                                }
                                if (_thisElement.next().is('.effectState')) {
                                    finalVal = _thisElement.next('.effectState').find(keyframe).val();
                                    return Number(Number(initial) + Number((finalVal - initial) / 2));
                                } else {
                                    return Number(Number(initial) + Number((finalVal - initial) / 2));
                                }
                            }


                            //function updateKeyframe($this, isAdded) {
                            //    let _thisElem = $this.parent();
                            //    let keyframe = 'input[name="keyframe"]';
                            //    let initValue = Number(_thisElem.find(keyframe).val());
                            //}

                            function changeEvent() {
                                //let $parentEle = $('#manageCustomEffect');
                                //$parentEle.find('.removeFrames').removeClass('Dn');
                                //$parentEle.find('.removeFrames').eq(0).addClass('Dn');
                                let $parentEle = $('#customEffEditor');
                                $parentEle.find('.removeState').removeClass('Dn');
                                $parentEle.find('.removeState').eq(0).addClass('Dn');
                                eventListener();
                            }

                            //$('#btnShowEffects').off().on('click', function () {
                            //    ApplyScrollEffect($wrap.find('#mainPreview'), $('#scrollEffects').val());
                            //    eventListener();

                            //});
                            //$('#scrollEffects').on('change', function () {
                            //    let $this = $(this);
                            //    $('.effectWrappers').addClass('Dn');
                            //    let val = $this.val();
                            //    val = $(`option[value="${val}"]`).parent().attr('data-effect');
                            //    $('#' + val + 'Effects').removeClass('Dn');
                            //    eventListener();
                            //});
                            // CloseFullPagePopup();
                        },
                        onclose: function ($wrap) {
                            $('.fullpagepopup').css('height', '');
                            $('.fullpagepopup').removeClass('animation-window');
                        }
                    };
                    FullPagePopup(option);
                });

                if (typeof webBuilderSettings.isunderconstruction !== "undefined" && webBuilderSettings.isunderconstruction) {
                    $('#chkUnderConstruction').addClass('active');
                    $('#chkUnderConstruction').attr('checked', "checked");
                    $('#underConstructionNote').show();
                }
                $('#chkUnderConstruction').on('click', function () {
                    let $this = $(this);
                    if ($this.hasClass('active')) {
                        $('#managePagePanel').trigger('click');
                    } else {
                        SageConfirmDialog(easyMessageList.underconstruction, easyMessageList.underconstructiontitle).done(function () {
                            let pageUName = 'Under Construction';
                            WebManagement.SetDefaultPage(pageUName);
                            $this.addClass('active');
                        })
                            .fail(function () {
                                $this.removeClass('active');
                                $this.removeAttr('checked');
                            });
                    }
                });
                $('.btnSystemPages').on('click', function () {
                    let pgName = $(this).attr('data-pages');
                    SageConfirmDialog(' All your unsaved data will be lost. Are you sure you want to edit "' + pgName + '" page?').done(function () {
                        let href = WbHostURL + '/' + pgName.replace(/ /g, '-');
                        window.location = href;
                    });
                });
                $('.close-model').on('click', function () {
                    FadeOutPopUpSetting();
                });
                $('#ui-draggable').removeClass('ui-draggable');
                $('#popupModel').draggable({
                    containment: '.main-container',
                    handle: '.popup-header',
                    start: function (e, ui) {
                        $(ui.helper).css({
                            "position": "fixed"
                        });
                    },
                    stop: function (event, ui) {
                        //AutoAlignDragger(ui.helper);
                    }
                });

                PagelinkStop();
                $('#manageBody').on('click', function () {
                    $activeDOM = $('.editor-box');
                    let attrs = $('#element').attrs();
                    let type = "settingDOMs";
                    if ($('.active.changePort').hasClass('desktop')) {
                        PopUpSetting('Body Settings', 50, 200, 0, 0, 'body', type, $('.editor-box'), $(this));
                    } else {
                        PopUpSettingResponsive('Body Settings', 0, 0, 0, 0, 'body', 'responsiveDOMs', $('.editor-box'));
                    }
                });

                $('#UpdateComponent').on('click', function () {
                    SageConfirmDialog(easyMessageList.updatecomponent, easyMessageList.updatecomponenttitle).done(function () {
                        let data = {
                            SecureToken: SageFrameSecureToken,
                            ComponentIDs: componentID.join(','),
                            Version: WebManagement.config.version
                        };
                        let config = {
                            async: false,
                            url: `${SageFrameHostURL}/Builder/UpdateExistingComponent`,
                            data: JSON.stringify(data),
                            success: function (data) {
                                window.location.href = window.location.href;
                            },
                        }
                        SecureAjaxCall.PassObject(config);
                    });
                });
                /*to be update at after everything is called*/
                DraggableSortable();
                SettingEvents();
                WebManagement.SetbackgroundColor();
                WebManagement.SetbackgroundWidth();
                FixMenuOnResize();
                $('#ExportWebsite').on('click', function () {
                    $('.exportsiteeasily').trigger('click');
                });
            },
            SetDefaultPage: function (newPageName) {
                SecureAjaxCall.PassObject({
                    url: `${SageFrameHostURL}/webbuilder/SetDefaultPage`,
                    data: JSON.stringify({
                        PageName: newPageName
                    }),
                    success: function (data) {
                        if (data == 1) {
                            if (pageName = 'Under Construction') {
                                $('#underConstructionNote').show();
                                webBuilderSettings.isunderconstruction = true;
                            } else {
                                ReadMenu();
                                $('#chkUnderConstruction').removeClass('active');
                                $('#underConstructionNote').hide();
                                webBuilderSettings.isunderconstruction = false;
                            }
                            portalDefaultPage = newPageName;
                            //UpdateSettings();
                            UpdateSettingKeyValue("defaultPage", newPageName);
                        }
                    },
                });
            },
            SaveWebData: function (isPreview) {
                let $cloneDOM = $('#WebBuilderWrapperClone');
                let $editHtml = $('#WebBuilderWrapperEditClone');
                $cloneDOM.html($('.edit-area').html());
                $editHtml.html($('.edit-area').html());
                $('.actEle').removeClass('actEle');
                $.each(component, function (componentname, v) {
                    if (EasyLibrary.IsDefined(component[componentname]["package"]) &&
                        EasyLibrary.IsDefined(component[componentname]["package"]["API"])) {
                        component[componentname]["package"]["API"] = [];
                    }
                    if ($cloneDOM.find(`.cRow[data-type="${componentname}"]`).length > 0) {
                        if (typeof v.remove !== "undefined") {
                            v.remove($cloneDOM);
                        }
                    }
                    if ($cloneDOM.find(`.editor-component[data-type="${componentname}"]`).length > 0) {
                        if (typeof v.remove !== "undefined") {
                            v.remove($cloneDOM);
                        }
                    }
                    if ($editHtml.find(`.editor-component[data-type="${componentname}"],  .cRow[data-type="${componentname}"]`).length > 0) {
                        if (typeof v.removeedit !== "undefined") {
                            v.removeedit($editHtml);
                        }
                    }
                });
                $cloneDOM.find('.SetHdlr').remove();
                $cloneDOM.find('.proLoader').remove();
                $editHtml.find('.proLoader').remove();
                $cloneDOM.find('.column-data-empty').remove();
                // $cloneDOM.find('.carrier-open-option').remove();
                $cloneDOM.find('.ui-droppable').each(function () {
                    $(this).removeClass('ui-droppable');
                });
                $cloneDOM.find('.ui-sortable').each(function () {
                    $(this).removeClass('ui-sortable');
                });
                /*remove contententeditable*/
                $cloneDOM.find('[contenteditable="true"]').removeAttr('contenteditable');
                $cloneDOM.find('.editor-component').removeClass('ui-sortable');
                $cloneDOM.find('.editor-component').removeClass('ui-droppable');
                $cloneDOM.find('.activeOption').removeClass('activeOption');
                $cloneDOM.find('.resizebar').remove();
                $cloneDOM.find('.noElement').remove();
                $cloneDOM.find('.pagelink.active-page').removeClass('active-page');
                /*to be remove at last*/
                $('.cGrid').each(function () {
                    let $this = $(this);
                    $this.removeAttr('data-width');
                    $('.cGrid').css({
                        'width': ''
                    });
                });

                /*apply header with fake URL*/
                let $header = $('.editor-site-header').find('.menuHeader:visible .eb-menu');
                let $headerColor = $header.attr('data-textcolor');
                let $cloneHeader = $cloneDOM.find('> .editor-site-header');
                $editHtml.find('.SetHdlr > .stng > .setDrp').hide();
                $editHtml.find('.addPro, .drag, .sortComponent').removeClass('Dn');
                $cloneDOM.find('.eb-menu li').find('a').each(function () {
                    let $this = $(this);
                    let href = $this.attr('href');
                    if (typeof href !== "undefined") {
                        href = WebManagement.ReturnHref(href);
                        $this.attr('href', href);
                    }
                });
                $cloneDOM.find('.menuHeader:visible .eb-menu li').find('a').each(function () {
                    let $this = $(this);
                    $this.removeClass('active-page');
                    $this.css({
                        'background-color': '',
                        'border-color': ''
                    });
                    $this.find('span').css({
                        'color': $headerColor
                    });
                });
                $cloneDOM.find('.anchorpage').each(function () {
                    let $this = $(this);
                    let href = $this.attr('href');
                    href = WebManagement.ReturnHref(href);
                    $this.attr('href', href);
                });
                let $activePage = $cloneDOM.find('.menuHeader:visible .eb-menu li > a.active-page');
                let $activeBG = $activePage.css('background-color');

                let $color = $activePage.find('span').css('color');
                $activePage.removeClass('active-page').css('background-color', '');
                $activePage.find('span').css('color', $headerColor);
                let $border = $activePage.css('border');
                $activePage.css('border', '');

                $cloneHeader.find('> .cRow').removeClass('stick');
                $editHtml.find('.editor-site-header > .cRow').removeClass('stick');

                $cloneHeader.css('width', '');
                $cloneHeader.find(' > .cRow').css('width', '');

                $editHtml.find('.editor-site-header').css('width', '');
                $editHtml.find('.editor-site-header > .cRow').css('width', '');

                $editHtml.find('.copyData').removeClass('readyCopy');
                $editHtml.find('.pasteData').removeClass('activePaste');


                //$cloneDOM.find('img').each(function () {
                //    ChangeImgToFakeURL($(this));
                //});

                //$cloneDOM.find('div').each(function () {
                //    let $this = $(this);
                //    ChangeBGToFakeURL($this);
                //});

                //$editHtml.find('img').each(function () {
                //    ChangeImgToFakeURL($(this));
                //});

                //$editHtml.find('div').each(function () {
                //    let $this = $(this);
                //    ChangeBGToFakeURL($this);
                //});
                $editHtml.find('.eb-menu li').find('a').each(function () {
                    let $this = $(this);
                    let href = $this.attr('href');
                    href = WebManagement.ReturnHref(href);
                    $this.attr('href', href);
                });
                $editHtml.find('.anchorpage').each(function () {
                    let $achor = $(this);
                    let href = $achor.attr('href');
                    href = WebManagement.ReturnHref(href);
                    $achor.attr('href', href);
                });
                $editHtml = WebManagement.RemoveStickyHeader($editHtml);
                $cloneDOM = WebManagement.RemoveStickyHeader($cloneDOM);
                $cloneHeader = WebManagement.RemoveActiveHeader($cloneHeader);
                $header = WebManagement.RemoveActiveHeader($header);

                function ChangeImgToFakeURL($elem) {
                    let src = $elem.attr('src');
                    if (typeof src !== "undefined" && src.indexOf("http://") === -1 && src.indexOf("https://") === -1) {
                        let backslash = src.substring(0, 1) === "/" ? "" : "/";
                        $elem.attr('src', `${SageFrameHostURL}${backslash}${src}`);
                    }
                }

                function ChangeBGToFakeURL($elem) {
                    let parentBgImage = $elem.css('background-image');
                    if (typeof (parentBgImage) !== 'undefined' && parentBgImage !== 'none') {
                        parentBgImage = parentBgImage.replace('url(', '').replace(')', '').replace(/\"/gi, "");
                        if (typeof parentBgImage !== "undefined") {
                            /*for chrome it absolute path for relative path For eg.'/Media/mainbanner_2017_07_19_15_46_49.png it gives 'http://172.18.12.40:9181/Media/mainbanner_2017_07_19_15_46_49.png'*/
                            parentBgImage = parentBgImage.replace(SageFrameHostURL, '').trim();
                            if (parentBgImage.indexOf("http://") === -1 && parentBgImage.indexOf("https://") === -1) {
                                let backslash = parentBgImage.substring(0, 1) === "/" ? "" : "/";
                                let url = `url('${SageFrameHostURL}${backslash}${parentBgImage}')`;
                                $elem.css('background-image', '').css('background-image', url);
                            }
                        }
                    }
                }

                $cloneDOM.find('img').each(function () {
                    SetFakeImage($(this));
                });
                $cloneDOM.find('[data-backgroundimage="image"]').each(function () {
                    SetFakeBGImage($(this));
                });
                let editHtml = $('<div/>').text($editHtml.find('> .editor-componentWrapper').html()).html().replace(/\>\s+\</g, '><').trim();
                let viewHtml = $('<div/>').text($('#WebBuilderWrapperClone > .editor-componentWrapper').html()).html().replace(/\>\s+\</g, '><').trim();
                /*header*/
                let header = $('<div/>').text($('#WebBuilderWrapperClone > .editor-site-header').html()).html().trim();
                let headerEdit = $('<div/>').text($editHtml.find('> .editor-site-header').html()).html().trim();
                webBuilderSettings.body = $('.editor-box').attrs();
                let paddingCls = webBuilderSettings.body.class.match(/([a-z]?)P([a-z])-[0-9]{1,3}/g);
                let bgEffectCls = webBuilderSettings.body.class.match(/background-effect-([a-z]+)-([a-z]+)/g);
                let removeDeviceClass = webBuilderSettings.body.class.replace('main-container', '').replace('editor-box', '').trim();
                webBuilderSettings.body.class = webBuilderSettings.body.class.replace(removeDeviceClass, '').trim();
                if (paddingCls && paddingCls.length > 0) {
                    webBuilderSettings.body.class += ' ' + paddingCls.join(' ');
                }
                if (bgEffectCls && bgEffectCls.length > 0) {
                    webBuilderSettings.body.class += ' ' + bgEffectCls.join(' ');
                }
                let footer = $('<div/>').text($('#WebBuilderWrapperClone > .editor-site-footer').html()).html().trim();
                let footerEdit = $('<div/>').text($editHtml.find('> .editor-site-footer').html()).html().trim();

                /*revert highlight menu color*/
                $activePage.addClass('active-page').css('background-color', $activeBG);
                $activePage.find('span').css('color', $color);
                $activePage.css('border', $border);
                if ($('.editor-box > .editor-row-shaded-layer').length > 0) {
                    webBuilderSettings.shadedLayer = $('.editor-box > .editor-row-shaded-layer').attrs();
                } else {
                    webBuilderSettings.shadedLayer = null;
                }
                let pageName = 'webbuildertemppagename';
                if (WebManagement.config.enableHeader == "true") {
                    pageName = WebManagement.config.tempPageName;
                }

                /*save the API detail if any present in the component*/
                let packageXML = '';

                let componentNames = Object.keys(component);
                let message = '';
                $.each(component, function (index, $compo) {
                    let $this = $(this);
                    let componentName = index;
                    if ($cloneDOM.find(`[data-type="${componentName}"]`).length > 0) {
                        let apiDuplicate = [];
                        if (EasyLibrary.IsDefined($compo.package)) {
                            if (EasyLibrary.IsDefined($compo.package.API)) {
                                if ($compo.package.API.length > 0) {
                                    $.each($compo.package.API, function (index, api) {
                                        let APICntrl = new APIController();
                                        APICntrl.ComponentName = componentName;
                                        APICntrl.NameSpace = api.NameSpace;
                                        APICntrl.ClassNames = api.ClassNames;
                                        APICntrl.MethodNames = api.MethodNames;
                                        APICntrl.Parameters = api.Parameters;
                                        APICntrl.StaticParameters = api.StaticParameters;
                                        APICntrl.ComponentID = api.ComponentID;
                                        APICntrl.Type = api.Type;
                                        let pagename = currentpageName;
                                        let $eachCompo = $(`[data-id="${api.ComponentID}"]`);
                                        if ($eachCompo.parents('.editor-site-header').length > 0) {
                                            pagename = 'webbuilderheaderdata';
                                        }
                                        if ($eachCompo.parents('.editor-site-footer').length > 0) {
                                            pagename = 'webbuilderfooterdata';
                                        }
                                        APICntrl.PageName = pagename;
                                        if (apiDuplicate.indexOf(api.ComponentID) > -1)
                                            message += `<br />Component name: ${APICntrl.ComponentName}, APIInvokeKey: ${api.ComponentID}`;
                                        else {
                                            apiDuplicate.push(api.ComponentID);
                                            packageXML += EasyLibrary.APICollector(APICntrl);
                                        }
                                    });
                                }
                            }
                        }
                    }
                });


                function componentConcat(compoName) {
                    componentAddedList.push(compoName);
                    if (EasyLibrary.IsDefined(component[compoName]) &&
                        EasyLibrary.IsDefined(component[compoName].dependent)) {
                        let dependent = component[compoName].dependent;
                        componentAddedList = componentAddedList.concat(dependent);
                    }
                }

                function GetCompoXML(lists) {
                    const distinctComponent = (value, index, self) => {
                        return self.indexOf(value) === index;
                    };
                    lists = lists.filter(distinctComponent);
                    let compoList = '';
                    compoList = lists.reduce((compoList, v) => {
                        return compoList + "<c>" + v + "</c>";
                    }, compoList);
                    return compoList;
                }
                let componentAddedList = [];
                $cloneDOM.find('.editor-site-header, .editor-site-footer').find('div[data-type]').each(function () {
                    componentConcat($(this).attr('data-type'));
                });
                let headerFooterComponent = GetCompoXML(componentAddedList);
                componentAddedList = [];
                $cloneDOM.find('.editor-componentWrapper').find('div[data-type]').each(function () {
                    componentConcat($(this).attr('data-type'));
                });
                let pageComponent = GetCompoXML(componentAddedList);
                if (message.length > 0) {
                    message = `<p>Page Contains components with same API invoke keys as below:</p>${message}`;
                    SageAlertDialog(message);
                } else {
                    if (packageXML.length > 0)
                        packageXML = `<package>${packageXML}</package>`;
                    $('.scanned').removeClass('scanned');
                    let objWebBuilderInfo = {
                        WebBuilderID: 0,
                        EditDOM: editHtml,
                        ViewDOM: viewHtml,
                        UserName: SageFrameUserName,
                        SecureToken: SageFrameSecureToken,
                        Culture: SageFrameCurrentCulture,
                        Extra: 'none',
                        /*this is extra field if neede use in future*/
                        Settings: JSON2.stringify(webBuilderSettings),
                        PageName: currentpageName,
                        Header: header,
                        HeaderEdit: headerEdit,
                        Footer: footer,
                        FooterEdit: footerEdit,
                        PackageXML: packageXML,
                        PageComponent: pageComponent,
                        HeaderFooterComponent: headerFooterComponent
                    };
                    if (isPreview) {
                        WebManagement.PublishedWeb(objWebBuilderInfo, $editHtml, $cloneDOM);
                    } else {
                        WebManagement.SaveWeb(objWebBuilderInfo, $editHtml, $cloneDOM);
                    }
                }
            },
            ApplyStickyHeader: function ($view) {
                setTimeout(function () {
                    $(window).trigger('scroll');
                }, 1000);
            },
            RemoveStickyHeader: function ($view) {
                if ($view.find('.editor-site-header').hasClass('scrolled')) {
                    $view.find('.editor-site-header').removeClass('scrolled');
                    let $header = $view.find('.editor-site-header');
                    let $headerColor = $header.attr('data-prevColor');
                    let bgcolor = '',
                        color = '';
                    if (typeof ($headerColor) !== "undefined") {
                        $view.find('.pagelink').not('.active-page').find('.pageName').css('color', $headerColor);
                    }
                    $headerColor = $header.attr('data-prevBgColor');
                    if (typeof ($headerColor) !== "undefined") {
                        $view.find('.editor-site-header > .cRow').css('background-color', $headerColor);
                    }
                    let stickyImage = $view.find('.editor-site-header').find('#headerLogo').attr('data-stickyLogo');
                    if (stickyImage != undefined) {
                        stickyImage = stickyImage.trim();
                        let oldsrc = $view.find('#headerLogo').attr('src');
                        $view.find('#headerLogo').attr('data-stickyLogo', oldsrc);
                        $view.find('#headerLogo').attr('src', stickyImage);
                    }
                }
                return $view;
            },
            RemoveActiveHeader: function ($view) {
                if ($view.find('.res-menu-trigger').parent().find('.menuHeader').hasClass('show-menu')) {
                    // $('.res-menu-trigger').trigger("click");
                    $('.menuHeader').removeClass('show-menu');
                    $('.res-menu-trigger').removeClass("close-menu");
                    $('.responsivefade').remove();
                    $('body').removeClass('offset-left').removeClass('offset-right').removeClass('offset-top');
                }
                $view.find('.eb-menu').find('.active-page').each(function () {
                    let $a = $(this);
                    RemoveActiveDom($a);
                });
                $view.find('.onepagemenu').find('.active-page').each(function () {
                    let $a = $(this);
                    RemoveActiveDom($a);
                });
                return $view;
            },
            SaveWeb: function (objWebBuilderInfo, $editHtml, $cloneDOM) {
                $('.save-site').addClass('loading-fill');
                $('#SaveWeb').text('Saving');
                SecureAjaxCall.PassObject({
                    url: `${SageFrameHostURL}/webbuilder/AddUpdate`,
                    data: JSON.stringify(objWebBuilderInfo),
                    dataType: 'text',
                    success: function (data, textStatus, jqXHR) {
                        $('#SaveWeb').text('Saved');
                        $('.save-site').addClass('saved');
                        window.setTimeout(function () {
                            $('#SaveWeb').text('Save');
                            $('.save-site').removeClass('saved').removeClass('loading-fill');
                        }, 1000);
                        //WebManagement.RevertMenu($editHtml);
                        //WebManagement.RevertEdit($editHtml);
                        WebManagement.ApplyStickyHeader($editHtml);
                        $cloneDOM.html('');
                        $editHtml.html('');
                    }
                });
            },
            PublishedWeb: function (objWebBuilderInfo, $editHtml, $cloneDOM) {
                $('.publish-site').addClass('loading-fill');
                $('#btnPublishedWeb > span').text('Publishing');
                SecureAjaxCall.PassObject({
                    url: `${SageFrameHostURL}/webbuilder/AddUpdatePublish`,
                    data: JSON.stringify(objWebBuilderInfo),
                    dataType: 'text',
                    success: function (data) {
                        $('#WebBuilderWrapperClone').html('');
                        $('#btnPublishedWeb> span').text('Published');
                        $('.publish-site').addClass('saved');
                        window.setTimeout(function () {
                            $('#btnPublishedWeb > span').text('Publish');
                            $('.publish-site').removeClass('saved').removeClass('loading-fill');
                        }, 1000);
                        WebManagement.RevertMenu($editHtml);
                        WebManagement.ApplyStickyHeader($editHtml);
                        $cloneDOM.html('');
                        $editHtml.html('');
                    }
                });
            },
            RevertMenu: function ($editHtml) {
                $editHtml.find('.eb-menu li').find('a').each(function () {
                    let $this = $(this);
                    let href = $this.attr('href');
                    href = href.replace('fakeMenuURL', SageFrameHostURL);
                    $this.attr("href", href);
                });
                $editHtml.find('.anchorpage').each(function () {
                    let $this = $(this);
                    let href = $this.attr('href');
                    href = href.replace('fakeMenuURL', SageFrameHostURL);
                    $this.attr("href", href);
                });
            },
            RevertEdit: function ($editHtml) {
                let row = $editHtml.find('.cRow[data-type="row"]');
                if (row.length > 0) {
                    if (typeof row.revertedit !== "undefined") {
                        row.revertedit($editHtml);
                    }
                }
                $.each(component, function (componentname, v) {
                    if ($editHtml.find(`.editor-component[data-type="${componentname}"]`).length > 0) {
                        if (typeof v.revertedit !== "undefined") {
                            v.revertedit($editHtml);
                        }
                    }
                });
            },
            ReturnHref: function (path) {
                if (typeof path === "undefined") {
                    return "";
                } else {
                    path = path.replace('http://', '');
                    path = path.replace('https://', '');
                    path = path.replace(`:${window.location.port}`, '');
                    path = path.replace(window.location.hostname, 'fakeMenuURL');
                    return path;
                }
            },
            GetWebHelp: function (async, offset, limit, searchText) {
                let data = {
                    Offset: parseInt(offset * limit) + 1,
                    Limit: parseInt(limit),
                    SearchText: searchText,
                    SecureToken: SageFrameSecureToken
                };
                let config = {
                    async: async,
                    url: `${SageFrameHostURL}/Builder/GetOnlineWebHelp`,
                    data: JSON.stringify(data),
                    success: function (data) {
                        WebManagement.BindWebHelp(data);
                    },
                }
                SecureAjaxCall.PassObject(config);
            },
            BindWebHelp: function (data) {
                $('#youtubeList').html('');
                let html = '';
                let loadMore = false;
                let response = JSONParse(data);
                if (response != null && response.length > 0) {
                    if (response.length > WebManagement.config.OnlineHelpLimit) {
                        loadMore = true;
                        response.splice(-1, 1);
                    }
                    $.each(response, function (index, item) {
                        switch (item.Type) {
                            case 'video':
                                let helpID = item.HelpLink;
                                html += `<li class="imageLink cPointer" data-youtube="${helpID}">
                                            <img src="http://img.youtube.com/vi/${helpID}/0.jpg" />
                                            <span class ="youtubetitle">${item.Title}</span>
                                        </li>`;
                                break;
                        }
                    });
                    $('#youtubeList').append(html);
                } else {
                    html += `<li class="noresult">No result found</li>`;
                    $('#youtubeList').html(html);
                }

                $("#divHelpSeeMore").remove();
                WebManagement.config.OnlineHelpOffset = WebManagement.config.OnlineHelpOffset + WebManagement.config.OnlineHelpLimit;
                WebManagement.BindYoutubeEvent();
                let htmlMore = '';
                if (loadMore) {
                    htmlMore += `<div class='divSiteSeeMore'>
                                    <a id='divHelpSeeMore' class='btn primary' href='javascript:void(0);'>Load More</a>
                                 </div>`;
                    $("#loadmoreHelp").append(htmlMore);
                    $('#divHelpSeeMore').on('click', function () {
                        WebManagement.GetWebHelp(true, WebManagement.config.OnlineHelpOffset, WebManagement.config.OnlineHelpLimit, $('#onlineHelpSearch').val().trim());
                    });
                }
            },
            BindYoutubeEvent: function () {
                $('.imageLink').off().on('click', function () {
                    let $popUpModel = $('#simplePopupModel');
                    let videoID = $(this).attr('data-youtube');
                    let youtube = '';
                    let YTheader = `<div class="popheader simple-popup-title panel__head txC">
                                        <span class ="drag_icon cb-drg"></span>
                                        <span id="backtohelp cPointer" class="backtohelp">Back to help</span>
                                        <div class="iconList right_actions"><i class="fa fa-window-maximize resizeyt big Mr-10 cPointer" style="font-size:24px;"  data-size="big" aria-hidden="true"></i>
                                        <i class="fa fa-window-maximize resizeyt medium Mr-10 cPointer" style="font-size:18px;"   data-size="medium" aria-hidden="true"></i>
                                        <i class="fa fa-window-maximize resizeyt small active Mr-10 cPointer"  data-size="small" aria-hidden="true" style="font-size: 14px; color: rgb(35, 235, 143); text-shadow: rgb(35, 235, 143) 0px 0px 14px;"></i>
                                        <span class="icClose"><i data-icon="d" class="youtube-close-model"></i></span></div>
                                    </div>`;
                    let videosrc = `https://www.youtube.com/embed/${videoID}?autoplay=1&loop=1&playlist=${videoID}`;
                    youtube += `<iframe id="youtubePlayer" width="400" height="300" src="${videosrc}" frameborder="0" allowfullscreen></iframe>`;
                    let popupOption = {
                        Title: 'simplePopup',
                        Top: '100',
                        Left: '100',
                        Height: '300',
                        Data: youtube,
                        Width: '400',
                        Draggable: false,
                        Position: 'absolute',
                        ShowClose: false,
                        Minimize: true,
                        ShowTitle: false,
                        CallbackBeforePopup: function () { },
                        CallbackaftePopUp: function () { }
                    };
                    ClearPopUp();
                    SimplePopup(popupOption);
                    $popUpModel.css('top', `${$('.main-top-row').height() + 10}px`);
                    $popUpModel.find('.simple-popup-header').hide();
                    $(YTheader).insertAfter($popUpModel.find('.simple-popup-header'));
                    $popUpModel.draggable({
                        containment: '.main-container',
                        handle: '.popheader',
                        start: function (e, ui) {
                            $(ui.helper).css({
                                "position": "fixed"
                            });
                        },
                        stop: function (event, ui) {
                            AutoAlignDragger(ui.helper);
                        }
                    });
                    $('.resizeyt').off().on('click', function () {
                        let $this = $(this);
                        $('.resizeyt.active').css({
                            'color': '',
                            'text-shadow': ''
                        });
                        $('.resizeyt.active').removeClass('active');
                        $this.addClass('active');
                        $this.css({
                            'color': '#23eb8f',
                            'text-shadow': '#23eb8f 0 0 14px'
                        });
                        let size = $this.attr('data-size');
                        let height = 200;
                        let width = 300;
                        switch (size) {
                            case 'big':
                                height = 500;
                                width = 600;
                                break;
                            case 'medium':
                                height = 400;
                                width = 500;
                                break;
                            case 'small':
                                height = 300;
                                width = 400;
                                break;
                        }

                        $('#youtubePlayer').attr({
                            height: `${height}px`,
                            width: `${width}px`
                        });
                        $popUpModel.css({
                            height: `${height}px`,
                            width: `${width}px`
                        });
                    });
                    $('.backtohelp').on('click', function () {
                        HideSimplePopUp();
                        ClearPopUp();
                        $('.dropOverlay[data-pull="online help"]').trigger('click');
                    });

                    $popUpModel.addClass('helpVideo');
                    $('.hideOverlay').trigger('click');
                    $('.youtube-close-model').on('click', function () {
                        ClearPopUp();
                        HideSimplePopUp();
                    });

                    function ClearPopUp() {
                        $('.popheader').remove();
                        $popUpModel.removeClass('helpVideo').removeClass('ui-draggable');
                        $('.simple-popup-model-body').html('');
                    }
                });
            },
            TopStickEvents: function () {

                function GetCompoSearchData() {

                }

                $('.dropOverlay').on('click', function () {
                    let $this = $(this);
                    if ($this.hasClass('clicked')) {
                        $('.SettingsUpperBody.active').find('.hideOverlay').trigger('click');
                    } else {
                        let $tochoose = $(this).attr('data-pull');
                        let $upper = $(`.SettingsUpperBody[data-pull="${$tochoose}"]`);
                        let $active = $('.SettingsUpperBody.active');
                        let left = $active.width();
                        if ($active.length > 0) {
                            $('.SettingsUpperBody.active').animate({
                                'left': `-${left}px`
                            }, 300, function () {
                                $upper.animate({
                                    'left': '0px'
                                }, 300, function () {
                                    EasyLibrary.RemoveLoader($this);
                                });
                            });
                        } else {
                            $upper.animate({
                                'left': '0px'
                            }, 300, function () {
                                EasyLibrary.RemoveLoader($this);
                            });
                        }
                        EasyLibrary.EnableLoader($this);
                        $('.SettingsUpperBody.active').removeClass('active');
                        $upper.show().addClass('active');
                        WebManagement.ShowStickeyHeaderOption('showoverlay');
                        $('.headerControls').removeClass('clicked');
                        $this.addClass('clicked');
                        switch ($tochoose) {
                            case "online component":
                                if (!$this.hasClass('called'))
                                    WebManagement.GetOnlineComponents(true, WebManagement.config.OnlineOffset, WebManagement.config.OnlineLimit, '');
                                break;
                            case "online site":
                                if (!$this.hasClass('called')) {
                                    WebManagement.GetOnlineSites(true, WebManagement.config.OnlineSiteOffset, WebManagement.config.OnlineSiteLimit, '');
                                    WebManagement.GetSectors(true);
                                }
                                break;
                            case "online help":
                                if (!$this.hasClass('called')) {
                                    WebManagement.GetWebHelp(true, WebManagement.config.OnlineHelpOffset, WebManagement.config.OnlineHelpLimit, $('#onlineHelpSearch').val().trim());
                                }
                                break;
                        }
                        $this.addClass('called');
                    }
                });
                $('.hideOverlay').on('click', function () {
                    let $upper = $('.SettingsUpperBody.active');
                    let left = $('.SettingsUpperBody.active').width();
                    $upper.animate({
                        'left': `-${left}px`
                    }, 400).removeClass('active');
                    $('.headerControls').removeClass('clicked');
                    $upper.removeClass('.active');
                });

                $('#refreshOnlineThemeSearch').on('click', function () {
                    $('#slcSectors').val(0);
                    $('#slcSiteCategory').val(0);
                    $('#slcBusinessType').val(0);
                    if (EasyLibrary.IsDefined($('#slcApplicationName').attr('data-appname')))
                        $('#slcApplicationName').val($('#slcApplicationName').attr('data-appname'));
                    else
                        $('#slcApplicationName').val(0);
                    $('#onlineSiteSearch').val('');
                    let searchText = $("#onlineSiteSearch").val();
                    WebManagement.config.OnlineSiteOffset = 1;
                    WebManagement.GetOnlineSites(false, WebManagement.config.OnlineSiteOffset, WebManagement.config.OnlineSiteLimit, searchText, true, true);
                });
                WebManagement.AdjustTopSitckyPadding();
            },
            AdjustTopSitckyPadding: function () {
                //if ($('.edit-area').hasClass('hdr-stky') || $('.edit-area').hasClass('hdr-fxd')) {
                //    let $stickHeader = $('.editor-site-header');
                //    let newPadding = parseInt($stickHeader.css('height').replace('px', ''));
                //    $('.editor-componentWrapper').find('.cRow:eq(0)').find('.cGrid').css('padding-top', newPadding);
                //}
            },
            BindeOnlineComponets: function ($upper) {
                let listCompo = '';
                for (var i = 0; i < 10; i++) {
                    DOMCreate();
                    listCompo += DOMCreate('li', '', 'componentList', 'ComponentListOnline');
                }
                $upper.append(DOMCreate('ul', listCompo, 'componentList', 'ComponentListOnline'));
            },
            LayoutSet: function () {
                $(".layoutChange").on('click', function () {
                    let layoutClass = $(this).attr('data-layout');
                    WebManagement.RemoveHeaderClass();
                    $('.site-body').addClass(layoutClass);
                    webBuilderSettings.defaultLayout = layoutClass;
                    FixMenuOnResize();
                });
                $('.OptionItems > span > i').on('click', function () {
                    $(this).next().next().find('.layoutChange').trigger('click');
                });
                $('.OptionItems >  span > .itemname').on('click', function () {
                    $(this).next().find('.layoutChange').trigger('click');
                });
            },
            RemoveHeaderClass: function () {
                $('.site-body').removeClass('fullWidth').removeClass('boxed').removeClass('leftLayout').removeClass('rightLayout');
            },
            SetbackgroundColor: function () {
                $('#chooseBGcolor').css('background-color', webBuilderSettings.temporaryBackgroundcolor);
                let colorPickerOption = ColorPickerOption({
                    renderCallback: function ($elm, toggled) {
                        let objColor = RenderCallBackColor(this);
                        $('.edit-area').css('background-color', objColor.bgColor);
                        webBuilderSettings.temporaryBackgroundcolor = objColor.bgColor;
                    }
                });
                $('#chooseBGcolor').colorPicker(colorPickerOption);
            },
            SetbackgroundWidth: function () {
                let $par = $('.edit-area');
                let sfBGWidth = $par.attr('class').match(/sfCol_[0-9]{1,3}/g);
                let bgWidth = 100;
                if (sfBGWidth !== null) {
                    bgWidth = sfBGWidth[0].split('_')[1];
                }

                function ChangeBackgroundWidth(space) {
                    let imageWidthClass = $par.attr('class').match(/sfCol_[0-9]{1,3}/g);
                    if (imageWidthClass !== null) {
                        $par.removeClass(imageWidthClass[0]);
                    }
                    $par.addClass(`sfCol_${space}`);
                    webBuilderSettings.temporaryWidth = `sfCol_${space}`;
                }
                AdvanceSageSlider($('#pageWidthSlider'), $('#pageWidthHandle'), 0, 100, bgWidth, ChangeBackgroundWidth, $par, '%');
            },
            SetThemeColor: function () {
                let colorPickerOption = ColorPickerOption({
                    renderCallback: function ($elm, toggled) {
                        let objColor = RenderCallBackColor(this);
                        let colorPickerID = $elm.attr('id');
                        switch (colorPickerID) {
                            case 'primaryColor': {
                                webBuilderSettings.primaryColor = objColor.bgColor;
                                /*changing the color in color pallet*/
                                $('#primaryChange').css('background-color', objColor.bgColor);
                                /*change  primary color in menu*/
                                let style = '';
                                if ($('.editor-com-nav').length > 0) {
                                    let navStyleClasses = $('.editor-com-nav').attr('class').match(/nav-style-[a-z]{1,20}/g);
                                    if (navStyleClasses != null) {
                                        style = navStyleClasses[0];
                                    }
                                    MenuHover($('#primaryColor').css('background-color'), $('#secondaryColor').css('background-color'));
                                }
                            }
                                break;
                            case 'secondaryColor': {
                                /*changing the color in color pallet*/
                                webBuilderSettings.secondaryColor = objColor.bgColor;
                                $('#secondaryChange').css('background-color', objColor.bgColor);
                                let style = '';
                                let navStyleClasses = $('.editor-com-nav').attr('class').match(/nav-style-[a-z]{1,20}/g);
                                if (navStyleClasses != null) {
                                    style = navStyleClasses[0];
                                }
                                MenuHover($('#primaryColor').css('background-color'), $('#secondaryColor').css('background-color'));
                            }
                                break;
                            case 'optionalColor':
                                /*changing the color in color pallet*/
                                webBuilderSettings.optionalColor = objColor.bgColor;
                                $('#optionalChange').css('background-color', objColor.bgColor);
                                break;
                        }
                    }
                });
                $('.chooseThemeColor').colorPicker(colorPickerOption);
            },
            RemoveExtra: function () {
                let $editArea = $('.edit-area');
                $editArea.find('.editor-component').removeClass('ui-sortable');
                $editArea.find('.editor-component').removeClass('ui-droppable');
                $editArea.find('.resizebar').remove();
                $editArea.find('.noElement').remove();
            },
            RemoveForModule: function () {
                $('.editor-site-header').remove();
                $('#managePagePanel').remove();
                $('.viewports').remove();
                $('#previewURL').remove();
                $('#btnNexitWebbuilder').remove();
                $('#manageBody').remove();
                $('.HeaderOption').remove();
                $('.theme-color').remove();
                $('#tab-3').prop('checked', true);
                $('.moduleHidden').hide();
                $('#pageHandleHolder').show();
                $('#componentCollection').show();
            },
            RemoveForPage: function () {
                $('.box-title').text('Build your website on your own ');
            },
            LoadHeader: function () {
                if (WebManagement.config.enableHeader === "true" && this.config.core) {
                    let htmlLength = $('.edit-area > .editor-site-header').length;
                    if (htmlLength > 0) {
                        let $siteHeaderSection = $('.editor-site-header');
                        htmlLength = $('.edit-area > .editor-site-header > div').length;
                        if (htmlLength > 0) {
                            /*comparing the pages from database and in the frontend.*/
                            /*removing pages in the menu if any pages has been deleted from admin\pages.*/
                            $('.edit-area > .editor-site-header').find('.eb-menu li > a > span').each(function () {
                                let $tempPage = $(this);
                                let pageNotFound = true;
                                $('#innerPageList li > a > span').each(function () {
                                    if ($(this).text().toLowerCase() === $tempPage.text().toLowerCase()) {
                                        pageNotFound = false;
                                    }
                                });
                                if (pageNotFound) {
                                    $tempPage.parent().parent().remove();
                                }
                            });

                            $('#innerPageList li > a > span').each(function () {
                                let $tempPage = $(this);
                                let pageNotFound = true;
                                $('.eb-menu').eq(0).find('li > a > span').each(function () {
                                    if ($(this).text().toLowerCase() === $tempPage.text().toLowerCase()) {
                                        pageNotFound = false;
                                    }
                                });
                                if (pageNotFound) {
                                    let newPageID = 0;
                                    let pageName = $tempPage.text();
                                    let pageWebbuilderID = 0;
                                    $('.eb-menu').not('#innerPageList').each(function () {
                                        var $this = $(this);
                                        var isHeading = false;
                                        if ($this.closest('.editor-site-header').length == 1)
                                            isHeading = true;
                                        var color = 'rgb(0,0,0)';
                                        var fontSize = '';
                                        var $menuAnchor = '';
                                        var $span = '';
                                        var $menuA = '';
                                        if ($this.find('li').not('.Dn').find('a').not('.active-page').length == 0) {
                                            color = 'rgb(0,0,0)';
                                            fontSize = '12';
                                        } else {
                                            var $item = $this.find('li a').not('.active-page').eq(0);
                                            color = $item.find('span').css('color');
                                            fontSize = $item.find('span').css('font-size');
                                            $menuAnchor = $item.parent();
                                            $span = $item.find('span');
                                            $menuA = $item;
                                        }
                                        var href = SageFrameHostURL + '/' + pageName.replace(/ /g, '-');
                                        var li = '<li data-pageid="' + newPageID + '" class="Dn">';
                                        li += '<a href="' + href + '" class="pagelink">';
                                        li += '<span class="pageName LtrSpc-0" style="font-size: ' + fontSize + '; color: ' + color + ';">';
                                        li += pageName;
                                        li += '</span>';
                                        li += '</a>';
                                        li += '</li>';
                                        var $li = $(li);
                                        $this.append($li);
                                        if ($menuAnchor.length > 0) {
                                            $li.attrs($menuAnchor.attrs());
                                            $li.find('span').attrs($span.attrs());
                                            $li.find('a').attrs($menuA.attrs());
                                            $li.find('a').attr('href', href);
                                            $li.attr('data-pageid', newPageID);
                                            $li.attr('data-webbuilderID', pageWebbuilderID);
                                            //$li.find('a').removeClass("redirectLink").addClass("redirectLink");
                                            $li.find("a").attr("data-PageName", pageName.replace(/ /g, '-'));
                                            //if (isHeading) {
                                            //$li.removeClass('Dn');
                                            //} else {
                                            //    if (!$li.hasClass('Dn'))
                                            $li.addClass('Dn');
                                            //}
                                        }
                                    });
                                }
                            });
                        } else {
                            $('.editor-site-header').addClass('emptydata');
                            //$('.editor-site-header').append(staticDOMs.siteheadertab);
                            //$(".layoutChange").eq(0).trigger('click');
                            //SettingEvents();
                            //$('#setlayoutOptions').show();
                            //$('.editor-site-header .editor-com-nav .eb-menu').html(EasyLibrary.PageListDOM());
                        }
                    } else {
                        $('.editor-site-header').addClass('emptydata');
                        //$('.edit-area').prepend(staticDOMs.siteheadertab);
                        //$(".layoutChange").eq(0).trigger('click');
                        //SettingEvents();
                        //$('#setlayoutOptions').show();
                        //$('.editor-site-header .editor-com-nav .eb-menu').html(EasyLibrary.PageListDOM());
                    }
                } else {
                    WebManagement.RemoveForModule();
                }
                if ($('.edit-area > .editor-site-footer > div').length === 0) {
                    $('.editor-site-footer').addClass('emptydata');
                }
                ActiveMenu();
                OnePageMenuScrollEvent();
            },
            LoadDetail: function () {
                WebManagement.RemoveExtra();
                let data = '';
                if ($('.editor-componentWrapper').length > 0) {
                    let htmlLength = $('.editor-componentWrapper > div').length;
                    if (htmlLength > 0) {
                        /*load data in content-area*/
                        $('.heartBeat').each(function () {
                            $(this).removeClass('heartBeat');
                        });
                        $('.cGrid').each(function () {
                            BindColumnEvents($(this));
                        });
                    } else {
                        $('.editor-componentWrapper').append(noElement);
                        StartNewEvent();
                    }
                } else {
                    $('.edit-area').append(DOMCreate('div', '', 'editor-componentWrapper clearfix'));
                    $('.editor-componentWrapper').append(noElement);
                }
                RowEvents();
                SettingEvents();
                DeleteComponent();
                DraggableSortable();
            },
            UpdateComponentForDev: function (componentName, $componentValue, UniversalComponentID, type) {
                let componentValue = JSONStringify($componentValue).replace(/\s+/g, " ");
                let componentViewValue = JSONStringify(WebManagement.ChangeComponentForView($componentValue)).replace(/\s+/g, " ");
                let success = false;

                SecureAjaxCall.PassObject({
                    url: `${SageFrameHostURL}/webbuilder/UpdateComponents`,
                    data: JSON.stringify({
                        ComponentName: componentName,
                        UniversalComponentID: UniversalComponentID,
                        ComponentValue: componentValue,
                        componentViewValue: componentViewValue,
                        portalID: 1,
                        userName: SageFrameUserName,
                        userModuleID: webBuilderUserModuleID,
                        secureToken: SageFrameSecureToken,
                        Type: type,
                        SiteID: parseInt(GetSiteID)
                    }),
                    dataType: 'json',
                    success: function (data, textStatus, jqXHR) { }
                });
            },
            ChangeComponentForView($componentValue) {
                let Compo = $componentValue;
                let properties = ['componentname', 'view', 'binddata', 'binddataerror', 'resize', 'library', 'common'];
                let result = Object.keys($componentValue).reduce(function (obj, k) {
                    if (properties.indexOf(k) > -1)
                        obj[k] = $componentValue[k];
                    return obj;
                }, {});
                return result;
                //JSONStringify($componentValue).replace(/\s+/g, " ");
            },
            UpdateComponentOnly: function (componentName, $componentValue, UniversalComponentID) {
                let componentValue = JSONStringify($componentValue);
                let success = false;
                let data = {
                    objBuilComponent: {
                        ComponentName: componentName,
                        UniversalComponentID: UniversalComponentID,
                        ComponentValue: componentValue,
                        portalID: 1,
                        userName: SageFrameUserName,
                        userModuleID: webBuilderUserModuleID,
                        secureToken: SageFrameSecureToken
                    }
                };
                let config = {
                    async: async,
                    url: `${SageFrameHostURL}/Builder/UpdateComponent`,
                    data: JSON.stringify(data),
                    success: function (data) { },
                }
                SecureAjaxCall.PassObject(config);
                return success;
            },
            DuplicateComponent: function (componentName) {
                let unique = true;
                $.each(component, function (i, v) {
                    let name = v.componentname;
                    if (name === componentName) {
                        unique = false;
                    }
                });
                return unique;
            },
            Installpage: function () {
                $.ajax({
                    isPostBack: false,
                    async: false,
                    cache: false,
                    type: 'POST',
                    contentType: "application/json; charset=utf-8",
                    data: JSON2.stringify({
                        objWebsite: Website
                    }),
                    dataType: 'json',
                    crossDomain: true,
                    url: `${SageFrameHostURL}/Builder/CreateSite`,
                    success: function (data) {

                    },
                    error: function () { },
                });
            },
            ShowStickeyHeaderOption: function (cases) {
                switch (cases) {
                    case 'showsidebar':
                        $('.headerControls').removeClass('clicked');
                        $('.main-left').show();
                        $('#popupModel').hide();
                        $('#popupModel').css({
                            'position': 'absolute'
                        });
                        $('.hideOverlay').trigger('click');
                        break;
                    case 'showoverlay':
                        //$('.main-left').hide();
                        HidePopUpSetting();
                        break;
                    case 'pagesettingshow':
                        $('.hideOverlay').trigger('click');
                        break;
                    default:
                }
            },
            ExtractSite: function () {
                Website.PortalID = 1;
                Website.UserModuleID = WebManagement.config.userModuleID;
                Website.UserName = SageFrameUserName;
                Website.SecureToken = SageFrameSecureToken;
                Website.Culture = SageFrameCurrentCulture;
                $.ajax({
                    isPostBack: false,
                    async: false,
                    cache: false,
                    type: 'POST',
                    contentType: "application/json; charset=utf-8",
                    data: JSON2.stringify({
                        objWebsite: Website
                    }),
                    dataType: 'json',
                    crossDomain: true,
                    url: `${SageFrameHostURL}/Builder/ExtractSite`,
                    success: function (data) {
                        if (data != null && data.d != null) {
                            let respose = data.d;
                            respose.__type = "WebbuilderSite";
                            let dataStr = `data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(respose))}`;
                            let dlAnchorElem = document.getElementById('downloadAnchorElem');
                            dlAnchorElem.setAttribute("href", dataStr);
                            dlAnchorElem.setAttribute("download", "one.json");
                            dlAnchorElem.click();
                        }
                    },
                    error: function () { },
                });
            }
        };
        WebManagement.Init();
    };
    $.fn.SageWebBuilder = function (p) {
        $.WebBuilder(p);
    };
})(jQuery);

function UpdateComponent(componentName, UniversalComponentID, version, downLoadtype, downLoadtypeID, callback) {

    let success = false;

    let data = {
        ComponentName: componentName,
        UniversalComponentID: UniversalComponentID,
        Version: version,
        secureToken: SageFrameSecureToken,
        DownLoadType: downLoadtype,
        ComponentID: parseInt(downLoadtypeID)
    };
    let config = {
        async: false,
        url: `${SageFrameHostURL}/Builder/DownloadComponent`,
        data: JSON.stringify(data),
        success: function (data) {
            FullPageLoading(easyMessageList.componentwaiting);

            setTimeout(function () {
                ReloadPageNone();
                location.reload();
            }, 30000);
            //if (typeof callback === "function") {
            //    callback(data);
            //} else {
            //    let respose = data; //JSON.parse(data.d);
            //    let message = respose.Message;
            //    let code = respose.Code;
            //    if (message != null && message.length > 0) {
            //        ReloadPageNone();
            //        window.location.href = message; ///success
            //    } else {
            //        if (code != null) {
            //            let res = parseInt(code);
            //            if (res == -1) {
            //                SageAlertDialog("EasyBuilder verson is less than required verison.Go to upgrader to update first.");
            //            } else if (res == -2) {
            //                ReloadPageNone();
            //                window.location.href = message;
            //            } else if (res > 0) {
            //                //UpdateComponentDownloadCount(UniversalComponentID, downLoadtype);
            //                ReloadPageNone();
            //                window.location.href = window.location;
            //            } else {
            //                SageAlertDialog("Error Occurred.");
            //            }
            //        } else {
            //            ReloadPageNone();
            //            window.location.href = message;
            //        }
            //    }
            //}
            //RemoveFullPageLoading();
        },
    }
    SecureAjaxCall.PassObject(config);
    return success;
}

function UpdateComponentDownloadCount(compoID, downLoadtype) {
    $.ajax({
        isPostBack: false,
        async: false,
        crossOrigin: true,
        cache: false,
        type: 'POST',
        contentType: "application/json; charset=utf-8",
        data: JSON2.stringify({
            portalID: 1,
            userName: SageFrameUserName,
            userModuleID: webBuilderUserModuleID,
            secureToken: SageFrameSecureToken,
            compoID: compoID,
            downLoadtype: downLoadtype
        }),
        dataType: 'json',
        crossDomain: true,
        url: SageFrameHostURL + '/Builder/UpdateComponentDownloadCount',
        success: function (data) {

        },
        error: function () { },
    });

    function fade(opacity) {

        element.style.opacity = parseFloat(element.style.opacity) + opacity;
    }

    function applyEffects(values) {
        let sizeInPixel = 'px';
        let angleInDegree = 'deg';
        let translate3d = `translate3d(${values.translateX + sizeInPixel}, ${values.translateY + sizeInPixel}, ${values.translateZ + sizeInPixel})`;
        let opacity = values.opacity == undefined ? 1 : parseFloat(values.opacity);
        let rotate = `rotate(${values.rotateX + angleInDegree})`;
        let scale = `scale(${values.scaleX})`;
        //$domStyle.WebkitTransform = translate3d;
        //// Code for IE9
        //$domStyle.msTransform = translate3d;
        //// Standard syntax
        //$domStyle.transform = translate3d;
        $dom.opacity = opacity;
        $domStyle.WebkitTransform = translate3d + ' ' + rotate + ' ' + scale;
        // Code for IE9
        $domStyle.msTransform = translate3d + ' ' + rotate + ' ' + scale;
        // Standard syntax
        $domStyle.transform = translate3d + ' ' + rotate + ' ' + scale;
    }

    function Rotate(x, y, z, deg) {
        let rotate3d = "rotate3d(" + x + "," + y + "," + z + "," + deg + "deg)";
        $domStyle.WebkitTransform = rotate3d;
        // Code for IE9
        $domStyle.msTransform = rotate3d;
        // Standard syntax
        $domStyle.transform = rotate3d;
    }

    function showTranslate(translateX, translateY) {
        $domStyle.WebkitTransform = translateX + " " + translateY;
        // Code for IE9
        $domStyle.msTransform = translateX + " " + translateY;
        // Standard syntax
        $domStyle.transform = translateX + " " + translateY;
    }

    function TransitionTime(time) {
        let initTime = "all " + time + "s";
        console.log(initTime);
        $domStyle.WebkitTransition = initTime; // Code for Safari 3.1 to 6.0
        $domStyle.transition = initTime; // Standard syntax
    }
}